{"version":3,"sources":["node_modules/_browser-pack@6.1.0@browser-pack/_prelude.js","node_modules/_es6-promise@4.2.8@es6-promise/dist/node_modules/es6-promise/dist/es6-promise.js","node_modules/_events@1.1.1@events/events.js","node_modules/_process@0.11.10@process/browser.js","node_modules/_webworkify@1.5.0@webworkify/index.js","src/config.js","src/core/features.js","src/core/media-info.js","src/core/media-segment-info.js","src/core/mse-controller.js","src/core/mse-events.js","src/core/transmuxer.js","src/core/transmuxing-controller.js","src/core/transmuxing-events.js","src/core/transmuxing-worker.js","src/demux/amf-parser.js","src/demux/demux-errors.js","src/demux/exp-golomb.js","src/demux/flv-demuxer.js","src/demux/hevc-golomb.js","src/demux/sps-parser.js","src/demux/vps-parser.js","src/flv.js","src/index.js","src/io/fetch-stream-loader.js","src/io/io-controller.js","src/io/loader.js","src/io/param-seek-handler.js","src/io/range-seek-handler.js","src/io/speed-sampler.js","src/io/websocket-loader.js","src/io/xhr-moz-chunked-loader.js","src/io/xhr-msstream-loader.js","src/io/xhr-range-loader.js","src/player/flv-player.js","src/player/native-player.js","src/player/player-errors.js","src/player/player-events.js","src/remux/aac-silent.js","src/remux/mp4-generator.js","src/remux/mp4-remuxer.js","src/utils/browser.js","src/utils/exception.js","src/utils/logger.js","src/utils/logging-control.js","src/utils/polyfill.js","src/utils/utf8-conv.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACtpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"flv.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport const defaultConfig = {\r\n    enableWorker: false,\r\n    enableStashBuffer: true,\r\n    stashInitialSize: undefined,\r\n\r\n    isLive: false,\r\n\r\n    lazyLoad: true,\r\n    lazyLoadMaxDuration: 3 * 60,\r\n    lazyLoadRecoverDuration: 30,\r\n    deferLoadAfterSourceOpen: true,\r\n\r\n    // autoCleanupSourceBuffer: default as false, leave unspecified\r\n    autoCleanupMaxBackwardDuration: 3 * 60,\r\n    autoCleanupMinBackwardDuration: 2 * 60,\r\n\r\n    statisticsInfoReportInterval: 600,\r\n\r\n    fixAudioTimestampGap: true,\r\n\r\n    accurateSeek: false,\r\n    seekType: 'range',  // [range, param, custom]\r\n    seekParamStart: 'bstart',\r\n    seekParamEnd: 'bend',\r\n    rangeLoadZeroStart: false,\r\n    customSeekHandler: undefined,\r\n    reuseRedirectedURL: false,\r\n    // referrerPolicy: leave as unspecified\r\n\r\n    headers: undefined,\r\n    customLoader: undefined\r\n};\r\n\r\nexport function createDefaultConfig() {\r\n    return Object.assign({}, defaultConfig);\r\n}","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport IOController from '../io/io-controller.js';\r\nimport {createDefaultConfig} from '../config.js';\r\n\r\nclass Features {\r\n\r\n    static supportMSEH264Playback() {\r\n        return window.MediaSource &&\r\n               window.MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\r\n    }\r\n\r\n    static supportNetworkStreamIO() {\r\n        let ioctl = new IOController({}, createDefaultConfig());\r\n        let loaderType = ioctl.loaderType;\r\n        ioctl.destroy();\r\n        return loaderType == 'fetch-stream-loader' || loaderType == 'xhr-moz-chunked-loader';\r\n    }\r\n\r\n    static getNetworkLoaderTypeName() {\r\n        let ioctl = new IOController({}, createDefaultConfig());\r\n        let loaderType = ioctl.loaderType;\r\n        ioctl.destroy();\r\n        return loaderType;\r\n    }\r\n\r\n    static supportNativeMediaPlayback(mimeType) {\r\n        if (Features.videoElement == undefined) {\r\n            Features.videoElement = window.document.createElement('video');\r\n        }\r\n        let canPlay = Features.videoElement.canPlayType(mimeType);\r\n        return canPlay === 'probably' || canPlay == 'maybe';\r\n    }\r\n\r\n    static getFeatureList() {\r\n        let features = {\r\n            mseFlvPlayback: false,\r\n            mseLiveFlvPlayback: false,\r\n            networkStreamIO: false,\r\n            networkLoaderName: '',\r\n            nativeMP4H264Playback: false,\r\n            nativeWebmVP8Playback: false,\r\n            nativeWebmVP9Playback: false\r\n        };\r\n\r\n        features.mseFlvPlayback = Features.supportMSEH264Playback();\r\n        features.networkStreamIO = Features.supportNetworkStreamIO();\r\n        features.networkLoaderName = Features.getNetworkLoaderTypeName();\r\n        features.mseLiveFlvPlayback = features.mseFlvPlayback && features.networkStreamIO;\r\n        features.nativeMP4H264Playback = Features.supportNativeMediaPlayback('video/mp4; codecs=\"avc1.42001E, mp4a.40.2\"');\r\n        features.nativeWebmVP8Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp8.0, vorbis\"');\r\n        features.nativeWebmVP9Playback = Features.supportNativeMediaPlayback('video/webm; codecs=\"vp9\"');\r\n\r\n        return features;\r\n    }\r\n\r\n}\r\n\r\nexport default Features;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nclass MediaInfo {\r\n\r\n    constructor() {\r\n        this.mimeType = null;\r\n        this.duration = null;\r\n\r\n        this.hasAudio = null;\r\n        this.hasVideo = null;\r\n        this.audioCodec = null;\r\n        this.videoCodec = null;\r\n        this.audioDataRate = null;\r\n        this.videoDataRate = null;\r\n\r\n        this.audioSampleRate = null;\r\n        this.audioChannelCount = null;\r\n\r\n        this.width = null;\r\n        this.height = null;\r\n        this.fps = null;\r\n        this.profile = null;\r\n        this.level = null;\r\n        this.refFrames = null;\r\n        this.chromaFormat = null;\r\n        this.sarNum = null;\r\n        this.sarDen = null;\r\n\r\n        this.metadata = null;\r\n        this.segments = null;  // MediaInfo[]\r\n        this.segmentCount = null;\r\n        this.hasKeyframesIndex = null;\r\n        this.keyframesIndex = null;\r\n    }\r\n\r\n    isComplete() {\r\n        let audioInfoComplete = (this.hasAudio === false) ||\r\n                                (this.hasAudio === true &&\r\n                                 this.audioCodec != null &&\r\n                                 this.audioSampleRate != null &&\r\n                                 this.audioChannelCount != null);\r\n\r\n        let videoInfoComplete = (this.hasVideo === false) ||\r\n                                (this.hasVideo === true &&\r\n                                 this.videoCodec != null &&\r\n                                 this.width != null &&\r\n                                 this.height != null &&\r\n                                 this.fps != null &&\r\n                                 this.profile != null &&\r\n                                 this.level != null &&\r\n                                 this.refFrames != null &&\r\n                                 this.chromaFormat != null &&\r\n                                 this.sarNum != null &&\r\n                                 this.sarDen != null);\r\n\r\n        // keyframesIndex may not be present\r\n        return this.mimeType != null &&\r\n               this.duration != null &&\r\n               this.metadata != null &&\r\n               this.hasKeyframesIndex != null &&\r\n               audioInfoComplete &&\r\n               videoInfoComplete;\r\n    }\r\n\r\n    isSeekable() {\r\n        return this.hasKeyframesIndex === true;\r\n    }\r\n\r\n    getNearestKeyframe(milliseconds) {\r\n        if (this.keyframesIndex == null) {\r\n            return null;\r\n        }\r\n\r\n        let table = this.keyframesIndex;\r\n        let keyframeIdx = this._search(table.times, milliseconds);\r\n\r\n        return {\r\n            index: keyframeIdx,\r\n            milliseconds: table.times[keyframeIdx],\r\n            fileposition: table.filepositions[keyframeIdx]\r\n        };\r\n    }\r\n\r\n    _search(list, value) {\r\n        let idx = 0;\r\n\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        if (value < list[0]) {\r\n            idx = 0;\r\n            lbound = ubound + 1;  // skip search\r\n        }\r\n\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (value >= list[mid] && value < list[mid + 1])) {\r\n                idx = mid;\r\n                break;\r\n            } else if (list[mid] < value) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n\r\n        return idx;\r\n    }\r\n\r\n}\r\n\r\nexport default MediaInfo;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n// Represents an media sample (audio / video)\r\nexport class SampleInfo {\r\n\r\n    constructor(dts, pts, duration, originalDts, isSync) {\r\n        this.dts = dts;\r\n        this.pts = pts;\r\n        this.duration = duration;\r\n        this.originalDts = originalDts;\r\n        this.isSyncPoint = isSync;\r\n        this.fileposition = null;\r\n    }\r\n\r\n}\r\n\r\n// Media Segment concept is defined in Media Source Extensions spec.\r\n// Particularly in ISO BMFF format, an Media Segment contains a moof box followed by a mdat box.\r\nexport class MediaSegmentInfo {\r\n\r\n    constructor() {\r\n        this.beginDts = 0;\r\n        this.endDts = 0;\r\n        this.beginPts = 0;\r\n        this.endPts = 0;\r\n        this.originalBeginDts = 0;\r\n        this.originalEndDts = 0;\r\n        this.syncPoints = [];     // SampleInfo[n], for video IDR frames only\r\n        this.firstSample = null;  // SampleInfo\r\n        this.lastSample = null;   // SampleInfo\r\n    }\r\n\r\n    appendSyncPoint(sampleInfo) {  // also called Random Access Point\r\n        sampleInfo.isSyncPoint = true;\r\n        this.syncPoints.push(sampleInfo);\r\n    }\r\n\r\n}\r\n\r\n// Ordered list for recording video IDR frames, sorted by originalDts\r\nexport class IDRSampleList {\r\n\r\n    constructor() {\r\n        this._list = [];\r\n    }\r\n\r\n    clear() {\r\n        this._list = [];\r\n    }\r\n\r\n    appendArray(syncPoints) {\r\n        let list = this._list;\r\n\r\n        if (syncPoints.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (list.length > 0 && syncPoints[0].originalDts < list[list.length - 1].originalDts) {\r\n            this.clear();\r\n        }\r\n\r\n        Array.prototype.push.apply(list, syncPoints);\r\n    }\r\n\r\n    getLastSyncPointBeforeDts(dts) {\r\n        if (this._list.length == 0) {\r\n            return null;\r\n        }\r\n\r\n        let list = this._list;\r\n        let idx = 0;\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        if (dts < list[0].dts) {\r\n            idx = 0;\r\n            lbound = ubound + 1;\r\n        }\r\n\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (dts >= list[mid].dts && dts < list[mid + 1].dts)) {\r\n                idx = mid;\r\n                break;\r\n            } else if (list[mid].dts < dts) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n        return this._list[idx];\r\n    }\r\n\r\n}\r\n\r\n// Data structure for recording information of media segments in single track.\r\nexport class MediaSegmentInfoList {\r\n\r\n    constructor(type) {\r\n        this._type = type;\r\n        this._list = [];\r\n        this._lastAppendLocation = -1;  // cached last insert location\r\n    }\r\n\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    get length() {\r\n        return this._list.length;\r\n    }\r\n\r\n    isEmpty() {\r\n        return this._list.length === 0;\r\n    }\r\n\r\n    clear() {\r\n        this._list = [];\r\n        this._lastAppendLocation = -1;\r\n    }\r\n\r\n    _searchNearestSegmentBefore(originalBeginDts) {\r\n        let list = this._list;\r\n        if (list.length === 0) {\r\n            return -2;\r\n        }\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        let idx = 0;\r\n\r\n        if (originalBeginDts < list[0].originalBeginDts) {\r\n            idx = -1;\r\n            return idx;\r\n        }\r\n\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (originalBeginDts > list[mid].lastSample.originalDts &&\r\n                                (originalBeginDts < list[mid + 1].originalBeginDts))) {\r\n                idx = mid;\r\n                break;\r\n            } else if (list[mid].originalBeginDts < originalBeginDts) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n        return idx;\r\n    }\r\n\r\n    _searchNearestSegmentAfter(originalBeginDts) {\r\n        return this._searchNearestSegmentBefore(originalBeginDts) + 1;\r\n    }\r\n\r\n    append(mediaSegmentInfo) {\r\n        let list = this._list;\r\n        let msi = mediaSegmentInfo;\r\n        let lastAppendIdx = this._lastAppendLocation;\r\n        let insertIdx = 0;\r\n\r\n        if (lastAppendIdx !== -1 && lastAppendIdx < list.length &&\r\n                                    msi.originalBeginDts >= list[lastAppendIdx].lastSample.originalDts &&\r\n                                    ((lastAppendIdx === list.length - 1) ||\r\n                                    (lastAppendIdx < list.length - 1 &&\r\n                                    msi.originalBeginDts < list[lastAppendIdx + 1].originalBeginDts))) {\r\n            insertIdx = lastAppendIdx + 1;  // use cached location idx\r\n        } else {\r\n            if (list.length > 0) {\r\n                insertIdx = this._searchNearestSegmentBefore(msi.originalBeginDts) + 1;\r\n            }\r\n        }\r\n\r\n        this._lastAppendLocation = insertIdx;\r\n        this._list.splice(insertIdx, 0, msi);\r\n    }\r\n\r\n    getLastSegmentBefore(originalBeginDts) {\r\n        let idx = this._searchNearestSegmentBefore(originalBeginDts);\r\n        if (idx >= 0) {\r\n            return this._list[idx];\r\n        } else {  // -1\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getLastSampleBefore(originalBeginDts) {\r\n        let segment = this.getLastSegmentBefore(originalBeginDts);\r\n        if (segment != null) {\r\n            return segment.lastSample;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getLastSyncPointBefore(originalBeginDts) {\r\n        let segmentIdx = this._searchNearestSegmentBefore(originalBeginDts);\r\n        let syncPoints = this._list[segmentIdx].syncPoints;\r\n        while (syncPoints.length === 0 && segmentIdx > 0) {\r\n            segmentIdx--;\r\n            syncPoints = this._list[segmentIdx].syncPoints;\r\n        }\r\n        if (syncPoints.length > 0) {\r\n            return syncPoints[syncPoints.length - 1];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n}","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport Log from '../utils/logger.js';\r\nimport Browser from '../utils/browser.js';\r\nimport MSEEvents from './mse-events.js';\r\nimport {SampleInfo, IDRSampleList} from './media-segment-info.js';\r\nimport {IllegalStateException} from '../utils/exception.js';\r\n\r\n// Media Source Extensions controller\r\nclass MSEController {\r\n\r\n    constructor(config) {\r\n        this.TAG = 'MSEController';\r\n\r\n        this._config = config;\r\n        this._emitter = new EventEmitter();\r\n\r\n        if (this._config.isLive && this._config.autoCleanupSourceBuffer == undefined) {\r\n            // For live stream, do auto cleanup by default\r\n            this._config.autoCleanupSourceBuffer = true;\r\n        }\r\n\r\n        this.e = {\r\n            onSourceOpen: this._onSourceOpen.bind(this),\r\n            onSourceEnded: this._onSourceEnded.bind(this),\r\n            onSourceClose: this._onSourceClose.bind(this),\r\n            onSourceBufferError: this._onSourceBufferError.bind(this),\r\n            onSourceBufferUpdateEnd: this._onSourceBufferUpdateEnd.bind(this)\r\n        };\r\n\r\n        this._mediaSource = null;\r\n        this._mediaSourceObjectURL = null;\r\n        this._mediaElement = null;\r\n\r\n        this._isBufferFull = false;\r\n        this._hasPendingEos = false;\r\n\r\n        this._requireSetMediaDuration = false;\r\n        this._pendingMediaDuration = 0;\r\n\r\n        this._pendingSourceBufferInit = [];\r\n        this._mimeTypes = {\r\n            video: null,\r\n            audio: null\r\n        };\r\n        this._sourceBuffers = {\r\n            video: null,\r\n            audio: null\r\n        };\r\n        this._lastInitSegments = {\r\n            video: null,\r\n            audio: null\r\n        };\r\n        this._pendingSegments = {\r\n            video: [],\r\n            audio: []\r\n        };\r\n        this._pendingRemoveRanges = {\r\n            video: [],\r\n            audio: []\r\n        };\r\n        this._idrList = new IDRSampleList();\r\n    }\r\n\r\n    destroy() {\r\n        if (this._mediaElement || this._mediaSource) {\r\n            this.detachMediaElement();\r\n        }\r\n        this.e = null;\r\n        this._emitter.removeAllListeners();\r\n        this._emitter = null;\r\n    }\r\n\r\n    on(event, listener) {\r\n        this._emitter.addListener(event, listener);\r\n    }\r\n\r\n    off(event, listener) {\r\n        this._emitter.removeListener(event, listener);\r\n    }\r\n\r\n    attachMediaElement(mediaElement) {\r\n        if (this._mediaSource) {\r\n            throw new IllegalStateException('MediaSource has been attached to an HTMLMediaElement!');\r\n        }\r\n        let ms = this._mediaSource = new window.MediaSource();\r\n        ms.addEventListener('sourceopen', this.e.onSourceOpen);\r\n        ms.addEventListener('sourceended', this.e.onSourceEnded);\r\n        ms.addEventListener('sourceclose', this.e.onSourceClose);\r\n\r\n        this._mediaElement = mediaElement;\r\n        this._mediaSourceObjectURL = window.URL.createObjectURL(this._mediaSource);\r\n        mediaElement.src = this._mediaSourceObjectURL;\r\n    }\r\n\r\n    detachMediaElement() {\r\n        if (this._mediaSource) {\r\n            let ms = this._mediaSource;\r\n            for (let type in this._sourceBuffers) {\r\n                // pending segments should be discard\r\n                let ps = this._pendingSegments[type];\r\n                ps.splice(0, ps.length);\r\n                this._pendingSegments[type] = null;\r\n                this._pendingRemoveRanges[type] = null;\r\n                this._lastInitSegments[type] = null;\r\n\r\n                // remove all sourcebuffers\r\n                let sb = this._sourceBuffers[type];\r\n                if (sb) {\r\n                    if (ms.readyState !== 'closed') {\r\n                        // ms edge can throw an error: Unexpected call to method or property access\r\n                        try {\r\n                            ms.removeSourceBuffer(sb);\r\n                        } catch (error) {\r\n                            Log.e(this.TAG, error.message);\r\n                        }\r\n                        sb.removeEventListener('error', this.e.onSourceBufferError);\r\n                        sb.removeEventListener('updateend', this.e.onSourceBufferUpdateEnd);\r\n                    }\r\n                    this._mimeTypes[type] = null;\r\n                    this._sourceBuffers[type] = null;\r\n                }\r\n            }\r\n            if (ms.readyState === 'open') {\r\n                try {\r\n                    ms.endOfStream();\r\n                } catch (error) {\r\n                    Log.e(this.TAG, error.message);\r\n                }\r\n            }\r\n            ms.removeEventListener('sourceopen', this.e.onSourceOpen);\r\n            ms.removeEventListener('sourceended', this.e.onSourceEnded);\r\n            ms.removeEventListener('sourceclose', this.e.onSourceClose);\r\n            this._pendingSourceBufferInit = [];\r\n            this._isBufferFull = false;\r\n            this._idrList.clear();\r\n            this._mediaSource = null;\r\n        }\r\n\r\n        if (this._mediaElement) {\r\n            /*this._mediaElement.src = '';\r\n            this._mediaElement.removeAttribute('src');\r\n            this._mediaElement = null;*/\r\n        }\r\n        if (this._mediaSourceObjectURL) {\r\n            window.URL.revokeObjectURL(this._mediaSourceObjectURL);\r\n            this._mediaSourceObjectURL = null;\r\n        }\r\n    }\r\n\r\n    appendInitSegment(initSegment, deferred) {\r\n        if (!this._mediaSource || this._mediaSource.readyState !== 'open') {\r\n            // sourcebuffer creation requires mediaSource.readyState === 'open'\r\n            // so we defer the sourcebuffer creation, until sourceopen event triggered\r\n            this._pendingSourceBufferInit.push(initSegment);\r\n            // make sure that this InitSegment is in the front of pending segments queue\r\n            this._pendingSegments[initSegment.type].push(initSegment);\r\n            return;\r\n        }\r\n\r\n        let is = initSegment;\r\n        let mimeType = `${is.container}`;\r\n        if (is.codec && is.codec.length > 0) {\r\n            mimeType += `;codecs=${is.codec}`;\r\n        }\r\n\r\n        let firstInitSegment = false;\r\n\r\n        Log.v(this.TAG, 'Received Initialization Segment, mimeType: ' + mimeType);\r\n        this._lastInitSegments[is.type] = is;\r\n\r\n        if (mimeType !== this._mimeTypes[is.type]) {\r\n            if (!this._mimeTypes[is.type]) {  // empty, first chance create sourcebuffer\r\n                firstInitSegment = true;\r\n                try {\r\n                    let sb = this._sourceBuffers[is.type] = this._mediaSource.addSourceBuffer(mimeType);\r\n                    sb.addEventListener('error', this.e.onSourceBufferError);\r\n                    sb.addEventListener('updateend', this.e.onSourceBufferUpdateEnd);\r\n                } catch (error) {\r\n                    Log.e(this.TAG, error.message);\r\n                    this._emitter.emit(MSEEvents.ERROR, {code: error.code, msg: error.message});\r\n                    return;\r\n                }\r\n            } else {\r\n                Log.v(this.TAG, `Notice: ${is.type} mimeType changed, origin: ${this._mimeTypes[is.type]}, target: ${mimeType}`);\r\n            }\r\n            this._mimeTypes[is.type] = mimeType;\r\n        }\r\n\r\n        if (!deferred) {\r\n            // deferred means this InitSegment has been pushed to pendingSegments queue\r\n            this._pendingSegments[is.type].push(is);\r\n        }\r\n        if (!firstInitSegment) {  // append immediately only if init segment in subsequence\r\n            if (this._sourceBuffers[is.type] && !this._sourceBuffers[is.type].updating) {\r\n                this._doAppendSegments();\r\n            }\r\n        }\r\n        if (Browser.safari && is.container === 'audio/mpeg' && is.mediaDuration > 0) {\r\n            // 'audio/mpeg' track under Safari may cause MediaElement's duration to be NaN\r\n            // Manually correct MediaSource.duration to make progress bar seekable, and report right duration\r\n            this._requireSetMediaDuration = true;\r\n            this._pendingMediaDuration = is.mediaDuration / 1000;  // in seconds\r\n            this._updateMediaSourceDuration();\r\n        }\r\n    }\r\n\r\n    appendMediaSegment(mediaSegment) {\r\n        let ms = mediaSegment;\r\n        this._pendingSegments[ms.type].push(ms);\r\n\r\n        if (this._config.autoCleanupSourceBuffer && this._needCleanupSourceBuffer()) {\r\n            this._doCleanupSourceBuffer();\r\n        }\r\n\r\n        let sb = this._sourceBuffers[ms.type];\r\n        if (sb && !sb.updating && !this._hasPendingRemoveRanges()) {\r\n            this._doAppendSegments();\r\n        }\r\n    }\r\n\r\n    seek(seconds) {\r\n        // remove all appended buffers\r\n        for (let type in this._sourceBuffers) {\r\n            if (!this._sourceBuffers[type]) {\r\n                continue;\r\n            }\r\n\r\n            // abort current buffer append algorithm\r\n            let sb = this._sourceBuffers[type];\r\n            if (this._mediaSource.readyState === 'open') {\r\n                try {\r\n                    // If range removal algorithm is running, InvalidStateError will be throwed\r\n                    // Ignore it.\r\n                    sb.abort();\r\n                } catch (error) {\r\n                    Log.e(this.TAG, error.message);\r\n                }\r\n            }\r\n\r\n            // IDRList should be clear\r\n            this._idrList.clear();\r\n\r\n            // pending segments should be discard\r\n            let ps = this._pendingSegments[type];\r\n            ps.splice(0, ps.length);\r\n\r\n            if (this._mediaSource.readyState === 'closed') {\r\n                // Parent MediaSource object has been detached from HTMLMediaElement\r\n                continue;\r\n            }\r\n\r\n            // record ranges to be remove from SourceBuffer\r\n            for (let i = 0; i < sb.buffered.length; i++) {\r\n                let start = sb.buffered.start(i);\r\n                let end = sb.buffered.end(i);\r\n                this._pendingRemoveRanges[type].push({start, end});\r\n            }\r\n\r\n            // if sb is not updating, let's remove ranges now!\r\n            if (!sb.updating) {\r\n                this._doRemoveRanges();\r\n            }\r\n\r\n            // Safari 10 may get InvalidStateError in the later appendBuffer() after SourceBuffer.remove() call\r\n            // Internal parser's state may be invalid at this time. Re-append last InitSegment to workaround.\r\n            // Related issue: https://bugs.webkit.org/show_bug.cgi?id=159230\r\n            if (Browser.safari) {\r\n                let lastInitSegment = this._lastInitSegments[type];\r\n                if (lastInitSegment) {\r\n                    this._pendingSegments[type].push(lastInitSegment);\r\n                    if (!sb.updating) {\r\n                        this._doAppendSegments();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    endOfStream() {\r\n        let ms = this._mediaSource;\r\n        let sb = this._sourceBuffers;\r\n        if (!ms || ms.readyState !== 'open') {\r\n            if (ms && ms.readyState === 'closed' && this._hasPendingSegments()) {\r\n                // If MediaSource hasn't turned into open state, and there're pending segments\r\n                // Mark pending endOfStream, defer call until all pending segments appended complete\r\n                this._hasPendingEos = true;\r\n            }\r\n            return;\r\n        }\r\n        if (sb.video && sb.video.updating || sb.audio && sb.audio.updating) {\r\n            // If any sourcebuffer is updating, defer endOfStream operation\r\n            // See _onSourceBufferUpdateEnd()\r\n            this._hasPendingEos = true;\r\n        } else {\r\n            this._hasPendingEos = false;\r\n            // Notify media data loading complete\r\n            // This is helpful for correcting total duration to match last media segment\r\n            // Otherwise MediaElement's ended event may not be triggered\r\n            ms.endOfStream();\r\n        }\r\n    }\r\n\r\n    getNearestKeyframe(dts) {\r\n        return this._idrList.getLastSyncPointBeforeDts(dts);\r\n    }\r\n\r\n    _needCleanupSourceBuffer() {\r\n        if (!this._config.autoCleanupSourceBuffer) {\r\n            return false;\r\n        }\r\n\r\n        let currentTime = this._mediaElement.currentTime;\r\n\r\n        for (let type in this._sourceBuffers) {\r\n            let sb = this._sourceBuffers[type];\r\n            if (sb) {\r\n                let buffered = sb.buffered;\r\n                if (buffered.length >= 1) {\r\n                    if (currentTime - buffered.start(0) >= this._config.autoCleanupMaxBackwardDuration) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    _doCleanupSourceBuffer() {\r\n        let currentTime = this._mediaElement.currentTime;\r\n\r\n        for (let type in this._sourceBuffers) {\r\n            let sb = this._sourceBuffers[type];\r\n            if (sb) {\r\n                let buffered = sb.buffered;\r\n                let doRemove = false;\r\n\r\n                for (let i = 0; i < buffered.length; i++) {\r\n                    let start = buffered.start(i);\r\n                    let end = buffered.end(i);\r\n\r\n                    if (start <= currentTime && currentTime < end + 3) {  // padding 3 seconds\r\n                        if (currentTime - start >= this._config.autoCleanupMaxBackwardDuration) {\r\n                            doRemove = true;\r\n                            let removeEnd = currentTime - this._config.autoCleanupMinBackwardDuration;\r\n                            this._pendingRemoveRanges[type].push({start: start, end: removeEnd});\r\n                        }\r\n                    } else if (end < currentTime) {\r\n                        doRemove = true;\r\n                        this._pendingRemoveRanges[type].push({start: start, end: end});\r\n                    }\r\n                }\r\n\r\n                if (doRemove && !sb.updating) {\r\n                    this._doRemoveRanges();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _updateMediaSourceDuration() {\r\n        let sb = this._sourceBuffers;\r\n        if (this._mediaElement.readyState === 0 || this._mediaSource.readyState !== 'open') {\r\n            return;\r\n        }\r\n        if ((sb.video && sb.video.updating) || (sb.audio && sb.audio.updating)) {\r\n            return;\r\n        }\r\n\r\n        let current = this._mediaSource.duration;\r\n        let target = this._pendingMediaDuration;\r\n\r\n        if (target > 0 && (isNaN(current) || target > current)) {\r\n            Log.v(this.TAG, `Update MediaSource duration from ${current} to ${target}`);\r\n            this._mediaSource.duration = target;\r\n        }\r\n\r\n        this._requireSetMediaDuration = false;\r\n        this._pendingMediaDuration = 0;\r\n    }\r\n\r\n    _doRemoveRanges() {\r\n        for (let type in this._pendingRemoveRanges) {\r\n            if (!this._sourceBuffers[type] || this._sourceBuffers[type].updating) {\r\n                continue;\r\n            }\r\n            let sb = this._sourceBuffers[type];\r\n            let ranges = this._pendingRemoveRanges[type];\r\n            while (ranges.length && !sb.updating) {\r\n                let range = ranges.shift();\r\n                sb.remove(range.start, range.end);\r\n            }\r\n        }\r\n    }\r\n\r\n    _doAppendSegments() {\r\n        let pendingSegments = this._pendingSegments;\r\n\r\n        for (let type in pendingSegments) {\r\n            if (!this._sourceBuffers[type] || this._sourceBuffers[type].updating) {\r\n                continue;\r\n            }\r\n\r\n            if (pendingSegments[type].length > 0) {\r\n                let segment = pendingSegments[type].shift();\r\n\r\n                if (segment.timestampOffset) {\r\n                    // For MPEG audio stream in MSE, if unbuffered-seeking occurred\r\n                    // We need explicitly set timestampOffset to the desired point in timeline for mpeg SourceBuffer.\r\n                    let currentOffset = this._sourceBuffers[type].timestampOffset;\r\n                    let targetOffset = segment.timestampOffset / 1000;  // in seconds\r\n\r\n                    let delta = Math.abs(currentOffset - targetOffset);\r\n                    if (delta > 0.1) {  // If time delta > 100ms\r\n                        Log.v(this.TAG, `Update MPEG audio timestampOffset from ${currentOffset} to ${targetOffset}`);\r\n                        this._sourceBuffers[type].timestampOffset = targetOffset;\r\n                    }\r\n                    delete segment.timestampOffset;\r\n                }\r\n\r\n                if (!segment.data || segment.data.byteLength === 0) {\r\n                    // Ignore empty buffer\r\n                    continue;\r\n                }\r\n\r\n                try {\r\n                    this._sourceBuffers[type].appendBuffer(segment.data);\r\n                    this._isBufferFull = false;\r\n                    if (type === 'video' && segment.hasOwnProperty('info')) {\r\n                        this._idrList.appendArray(segment.info.syncPoints);\r\n                    }\r\n                } catch (error) {\r\n                    this._pendingSegments[type].unshift(segment);\r\n                    if (error.code === 22) {  // QuotaExceededError\r\n                        /* Notice that FireFox may not throw QuotaExceededError if SourceBuffer is full\r\n                         * Currently we can only do lazy-load to avoid SourceBuffer become scattered.\r\n                         * SourceBuffer eviction policy may be changed in future version of FireFox.\r\n                         *\r\n                         * Related issues:\r\n                         * https://bugzilla.mozilla.org/show_bug.cgi?id=1279885\r\n                         * https://bugzilla.mozilla.org/show_bug.cgi?id=1280023\r\n                         */\r\n\r\n                        // report buffer full, abort network IO\r\n                        if (!this._isBufferFull) {\r\n                            this._emitter.emit(MSEEvents.BUFFER_FULL);\r\n                        }\r\n                        this._isBufferFull = true;\r\n                    } else {\r\n                        Log.e(this.TAG, error.message);\r\n                        this._emitter.emit(MSEEvents.ERROR, {code: error.code, msg: error.message});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _onSourceOpen() {\r\n        Log.v(this.TAG, 'MediaSource onSourceOpen');\r\n        this._mediaSource.removeEventListener('sourceopen', this.e.onSourceOpen);\r\n        // deferred sourcebuffer creation / initialization\r\n        if (this._pendingSourceBufferInit.length > 0) {\r\n            let pendings = this._pendingSourceBufferInit;\r\n            while (pendings.length) {\r\n                let segment = pendings.shift();\r\n                this.appendInitSegment(segment, true);\r\n            }\r\n        }\r\n        // there may be some pending media segments, append them\r\n        if (this._hasPendingSegments()) {\r\n            this._doAppendSegments();\r\n        }\r\n        this._emitter.emit(MSEEvents.SOURCE_OPEN);\r\n    }\r\n\r\n    _onSourceEnded() {\r\n        // fired on endOfStream\r\n        Log.v(this.TAG, 'MediaSource onSourceEnded');\r\n    }\r\n\r\n    _onSourceClose() {\r\n        // fired on detaching from media element\r\n        Log.v(this.TAG, 'MediaSource onSourceClose');\r\n        if (this._mediaSource && this.e != null) {\r\n            this._mediaSource.removeEventListener('sourceopen', this.e.onSourceOpen);\r\n            this._mediaSource.removeEventListener('sourceended', this.e.onSourceEnded);\r\n            this._mediaSource.removeEventListener('sourceclose', this.e.onSourceClose);\r\n        }\r\n    }\r\n\r\n    _hasPendingSegments() {\r\n        let ps = this._pendingSegments;\r\n        return ps.video.length > 0 || ps.audio.length > 0;\r\n    }\r\n\r\n    _hasPendingRemoveRanges() {\r\n        let prr = this._pendingRemoveRanges;\r\n        return prr.video.length > 0 || prr.audio.length > 0;\r\n    }\r\n\r\n    _onSourceBufferUpdateEnd() {\r\n        if (this._requireSetMediaDuration) {\r\n            this._updateMediaSourceDuration();\r\n        } else if (this._hasPendingRemoveRanges()) {\r\n            this._doRemoveRanges();\r\n        } else if (this._hasPendingSegments()) {\r\n            this._doAppendSegments();\r\n        } else if (this._hasPendingEos) {\r\n            this.endOfStream();\r\n        }\r\n        this._emitter.emit(MSEEvents.UPDATE_END);\r\n    }\r\n\r\n    _onSourceBufferError(e) {\r\n        Log.e(this.TAG, `SourceBuffer Error: ${e}`);\r\n        // this error might not always be fatal, just ignore it\r\n    }\r\n\r\n}\r\n\r\nexport default MSEController;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst MSEEvents = {\r\n    ERROR: 'error',\r\n    SOURCE_OPEN: 'source_open',\r\n    UPDATE_END: 'update_end',\r\n    BUFFER_FULL: 'buffer_full'\r\n};\r\n\r\nexport default MSEEvents;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport Log from '../utils/logger.js';\r\nimport LoggingControl from '../utils/logging-control.js';\r\nimport TransmuxingController from './transmuxing-controller.js';\r\nimport TransmuxingEvents from './transmuxing-events.js';\r\nimport TransmuxingWorker from './transmuxing-worker.js';\r\nimport MediaInfo from './media-info.js';\r\n\r\nclass Transmuxer {\r\n\r\n    constructor(mediaDataSource, config) {\r\n        this.TAG = 'Transmuxer';\r\n        this._emitter = new EventEmitter();\r\n\r\n        if (config.enableWorker && typeof (Worker) !== 'undefined') {\r\n            try {\r\n                let work = require('webworkify');\r\n                this._worker = work(TransmuxingWorker);\r\n                this._workerDestroying = false;\r\n                this._worker.addEventListener('message', this._onWorkerMessage.bind(this));\r\n                this._worker.postMessage({cmd: 'init', param: [mediaDataSource, config]});\r\n                this.e = {\r\n                    onLoggingConfigChanged: this._onLoggingConfigChanged.bind(this)\r\n                };\r\n                LoggingControl.registerListener(this.e.onLoggingConfigChanged);\r\n                this._worker.postMessage({cmd: 'logging_config', param: LoggingControl.getConfig()});\r\n            } catch (error) {\r\n                Log.e(this.TAG, 'Error while initialize transmuxing worker, fallback to inline transmuxing');\r\n                this._worker = null;\r\n                this._controller = new TransmuxingController(mediaDataSource, config);\r\n            }\r\n        } else {\r\n            this._controller = new TransmuxingController(mediaDataSource, config);\r\n        }\r\n\r\n        if (this._controller) {\r\n            let ctl = this._controller;\r\n            ctl.on(TransmuxingEvents.IO_ERROR, this._onIOError.bind(this));\r\n            ctl.on(TransmuxingEvents.DEMUX_ERROR, this._onDemuxError.bind(this));\r\n            ctl.on(TransmuxingEvents.INIT_SEGMENT, this._onInitSegment.bind(this));\r\n            ctl.on(TransmuxingEvents.MEDIA_SEGMENT, this._onMediaSegment.bind(this));\r\n            ctl.on(TransmuxingEvents.LOADING_COMPLETE, this._onLoadingComplete.bind(this));\r\n            ctl.on(TransmuxingEvents.RECOVERED_EARLY_EOF, this._onRecoveredEarlyEof.bind(this));\r\n            ctl.on(TransmuxingEvents.MEDIA_INFO, this._onMediaInfo.bind(this));\r\n            ctl.on(TransmuxingEvents.METADATA_ARRIVED, this._onMetaDataArrived.bind(this));\r\n            ctl.on(TransmuxingEvents.SCRIPTDATA_ARRIVED, this._onScriptDataArrived.bind(this));\r\n            ctl.on(TransmuxingEvents.STATISTICS_INFO, this._onStatisticsInfo.bind(this));\r\n            ctl.on(TransmuxingEvents.RECOMMEND_SEEKPOINT, this._onRecommendSeekpoint.bind(this));\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this._worker) {\r\n            if (!this._workerDestroying) {\r\n                this._workerDestroying = true;\r\n                this._worker.postMessage({cmd: 'destroy'});\r\n                LoggingControl.removeListener(this.e.onLoggingConfigChanged);\r\n                this.e = null;\r\n            }\r\n        } else {\r\n            this._controller.destroy();\r\n            this._controller = null;\r\n        }\r\n        this._emitter.removeAllListeners();\r\n        this._emitter = null;\r\n    }\r\n\r\n    on(event, listener) {\r\n        this._emitter.addListener(event, listener);\r\n    }\r\n\r\n    off(event, listener) {\r\n        this._emitter.removeListener(event, listener);\r\n    }\r\n\r\n    hasWorker() {\r\n        return this._worker != null;\r\n    }\r\n\r\n    open() {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'start'});\r\n        } else {\r\n            this._controller.start();\r\n        }\r\n    }\r\n\r\n    close() {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'stop'});\r\n        } else {\r\n            this._controller.stop();\r\n        }\r\n    }\r\n\r\n    seek(milliseconds) {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'seek', param: milliseconds});\r\n        } else {\r\n            this._controller.seek(milliseconds);\r\n        }\r\n    }\r\n\r\n    pause() {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'pause'});\r\n        } else {\r\n            this._controller.pause();\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'resume'});\r\n        } else {\r\n            this._controller.resume();\r\n        }\r\n    }\r\n\r\n    _onInitSegment(type, initSegment) {\r\n        // do async invoke\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.INIT_SEGMENT, type, initSegment);\r\n        });\r\n    }\r\n\r\n    _onMediaSegment(type, mediaSegment) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.MEDIA_SEGMENT, type, mediaSegment);\r\n        });\r\n    }\r\n\r\n    _onLoadingComplete() {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.LOADING_COMPLETE);\r\n        });\r\n    }\r\n\r\n    _onRecoveredEarlyEof() {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.RECOVERED_EARLY_EOF);\r\n        });\r\n    }\r\n\r\n    _onMediaInfo(mediaInfo) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.MEDIA_INFO, mediaInfo);\r\n        });\r\n    }\r\n\r\n    _onMetaDataArrived(metadata) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.METADATA_ARRIVED, metadata);\r\n        });\r\n    }\r\n\r\n    _onScriptDataArrived(data) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.SCRIPTDATA_ARRIVED, data);\r\n        });\r\n    }\r\n\r\n    _onStatisticsInfo(statisticsInfo) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.STATISTICS_INFO, statisticsInfo);\r\n        });\r\n    }\r\n\r\n    _onIOError(type, info) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.IO_ERROR, type, info);\r\n        });\r\n    }\r\n\r\n    _onDemuxError(type, info) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.DEMUX_ERROR, type, info);\r\n        });\r\n    }\r\n\r\n    _onRecommendSeekpoint(milliseconds) {\r\n        Promise.resolve().then(() => {\r\n            this._emitter.emit(TransmuxingEvents.RECOMMEND_SEEKPOINT, milliseconds);\r\n        });\r\n    }\r\n\r\n    _onLoggingConfigChanged(config) {\r\n        if (this._worker) {\r\n            this._worker.postMessage({cmd: 'logging_config', param: config});\r\n        }\r\n    }\r\n\r\n    _onWorkerMessage(e) {\r\n        let message = e.data;\r\n        let data = message.data;\r\n\r\n        if (message.msg === 'destroyed' || this._workerDestroying) {\r\n            this._workerDestroying = false;\r\n            this._worker.terminate();\r\n            this._worker = null;\r\n            return;\r\n        }\r\n\r\n        switch (message.msg) {\r\n            case TransmuxingEvents.INIT_SEGMENT:\r\n            case TransmuxingEvents.MEDIA_SEGMENT:\r\n                this._emitter.emit(message.msg, data.type, data.data);\r\n                break;\r\n            case TransmuxingEvents.LOADING_COMPLETE:\r\n            case TransmuxingEvents.RECOVERED_EARLY_EOF:\r\n                this._emitter.emit(message.msg);\r\n                break;\r\n            case TransmuxingEvents.MEDIA_INFO:\r\n                Object.setPrototypeOf(data, MediaInfo.prototype);\r\n                this._emitter.emit(message.msg, data);\r\n                break;\r\n            case TransmuxingEvents.METADATA_ARRIVED:\r\n            case TransmuxingEvents.SCRIPTDATA_ARRIVED:\r\n            case TransmuxingEvents.STATISTICS_INFO:\r\n                this._emitter.emit(message.msg, data);\r\n                break;\r\n            case TransmuxingEvents.IO_ERROR:\r\n            case TransmuxingEvents.DEMUX_ERROR:\r\n                this._emitter.emit(message.msg, data.type, data.info);\r\n                break;\r\n            case TransmuxingEvents.RECOMMEND_SEEKPOINT:\r\n                this._emitter.emit(message.msg, data);\r\n                break;\r\n            case 'logcat_callback':\r\n                Log.emitter.emit('log', data.type, data.logcat);\r\n                break;\r\n            case 'disconnect':\r\n                window.postMessage({action: 'disconnect'}, '*');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Transmuxer;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport Log from '../utils/logger.js';\r\nimport Browser from '../utils/browser.js';\r\nimport MediaInfo from './media-info.js';\r\nimport FLVDemuxer from '../demux/flv-demuxer.js';\r\nimport MP4Remuxer from '../remux/mp4-remuxer.js';\r\nimport DemuxErrors from '../demux/demux-errors.js';\r\nimport IOController from '../io/io-controller.js';\r\nimport TransmuxingEvents from './transmuxing-events.js';\r\nimport {LoaderStatus, LoaderErrors} from '../io/loader.js';\r\n\r\n// Transmuxing (IO, Demuxing, Remuxing) controller, with multipart support\r\nclass TransmuxingController {\r\n\r\n    constructor(mediaDataSource, config) {\r\n        this.TAG = 'TransmuxingController';\r\n        this._emitter = new EventEmitter();\r\n\r\n        this._config = config;\r\n\r\n        // treat single part media as multipart media, which has only one segment\r\n        if (!mediaDataSource.segments) {\r\n            mediaDataSource.segments = [{\r\n                duration: mediaDataSource.duration,\r\n                filesize: mediaDataSource.filesize,\r\n                url: mediaDataSource.url\r\n            }];\r\n        }\r\n\r\n        // fill in default IO params if not exists\r\n        if (typeof mediaDataSource.cors !== 'boolean') {\r\n            mediaDataSource.cors = true;\r\n        }\r\n        if (typeof mediaDataSource.withCredentials !== 'boolean') {\r\n            mediaDataSource.withCredentials = false;\r\n        }\r\n\r\n        this._mediaDataSource = mediaDataSource;\r\n        this._currentSegmentIndex = 0;\r\n        let totalDuration = 0;\r\n\r\n        this._mediaDataSource.segments.forEach((segment) => {\r\n            // timestampBase for each segment, and calculate total duration\r\n            segment.timestampBase = totalDuration;\r\n            totalDuration += segment.duration;\r\n            // params needed by IOController\r\n            segment.cors = mediaDataSource.cors;\r\n            segment.withCredentials = mediaDataSource.withCredentials;\r\n            // referrer policy control, if exist\r\n            if (config.referrerPolicy) {\r\n                segment.referrerPolicy = config.referrerPolicy;\r\n            }\r\n        });\r\n\r\n        if (!isNaN(totalDuration) && this._mediaDataSource.duration !== totalDuration) {\r\n            this._mediaDataSource.duration = totalDuration;\r\n        }\r\n\r\n        this._mediaInfo = null;\r\n        this._demuxer = null;\r\n        this._remuxer = null;\r\n        this._ioctl = null;\r\n\r\n        this._pendingSeekTime = null;\r\n        this._pendingResolveSeekPoint = null;\r\n\r\n        this._statisticsReporter = null;\r\n    }\r\n\r\n    destroy() {\r\n        this._mediaInfo = null;\r\n        this._mediaDataSource = null;\r\n\r\n        if (this._statisticsReporter) {\r\n            this._disableStatisticsReporter();\r\n        }\r\n        if (this._ioctl) {\r\n            this._ioctl.destroy();\r\n            this._ioctl = null;\r\n        }\r\n        if (this._demuxer) {\r\n            this._demuxer.destroy();\r\n            this._demuxer = null;\r\n        }\r\n        if (this._remuxer) {\r\n            this._remuxer.destroy();\r\n            this._remuxer = null;\r\n        }\r\n\r\n        this._emitter.removeAllListeners();\r\n        this._emitter = null;\r\n    }\r\n\r\n    on(event, listener) {\r\n        this._emitter.addListener(event, listener);\r\n    }\r\n\r\n    off(event, listener) {\r\n        this._emitter.removeListener(event, listener);\r\n    }\r\n\r\n    start() {\r\n        this._loadSegment(0);\r\n        this._enableStatisticsReporter();\r\n    }\r\n\r\n    _loadSegment(segmentIndex, optionalFrom) {\r\n        this._currentSegmentIndex = segmentIndex;\r\n        let dataSource = this._mediaDataSource.segments[segmentIndex];\r\n\r\n        let ioctl = this._ioctl = new IOController(dataSource, this._config, segmentIndex);\r\n        ioctl.onError = this._onIOException.bind(this);\r\n        ioctl.onSeeked = this._onIOSeeked.bind(this);\r\n        ioctl.onComplete = this._onIOComplete.bind(this);\r\n        ioctl.onRedirect = this._onIORedirect.bind(this);\r\n        ioctl.onRecoveredEarlyEof = this._onIORecoveredEarlyEof.bind(this);\r\n\r\n        if (optionalFrom) {\r\n            this._demuxer.bindDataSource(this._ioctl);\r\n        } else {\r\n            ioctl.onDataArrival = this._onInitChunkArrival.bind(this);\r\n        }\r\n\r\n        ioctl.open(optionalFrom);\r\n    }\r\n\r\n    stop() {\r\n        this._internalAbort();\r\n        this._disableStatisticsReporter();\r\n    }\r\n\r\n    _internalAbort() {\r\n        if (this._ioctl) {\r\n            this._ioctl.destroy();\r\n            this._ioctl = null;\r\n        }\r\n    }\r\n\r\n    pause() {  // take a rest\r\n        if (this._ioctl && this._ioctl.isWorking()) {\r\n            this._ioctl.pause();\r\n            this._disableStatisticsReporter();\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        if (this._ioctl && this._ioctl.isPaused()) {\r\n            this._ioctl.resume();\r\n            this._enableStatisticsReporter();\r\n        }\r\n    }\r\n\r\n    seek(milliseconds) {\r\n        if (this._mediaInfo == null || !this._mediaInfo.isSeekable()) {\r\n            return;\r\n        }\r\n\r\n        let targetSegmentIndex = this._searchSegmentIndexContains(milliseconds);\r\n\r\n        if (targetSegmentIndex === this._currentSegmentIndex) {\r\n            // intra-segment seeking\r\n            let segmentInfo = this._mediaInfo.segments[targetSegmentIndex];\r\n\r\n            if (segmentInfo == undefined) {\r\n                // current segment loading started, but mediainfo hasn't received yet\r\n                // wait for the metadata loaded, then seek to expected position\r\n                this._pendingSeekTime = milliseconds;\r\n            } else {\r\n                let keyframe = segmentInfo.getNearestKeyframe(milliseconds);\r\n                this._remuxer.seek(keyframe.milliseconds);\r\n                this._ioctl.seek(keyframe.fileposition);\r\n                // Will be resolved in _onRemuxerMediaSegmentArrival()\r\n                this._pendingResolveSeekPoint = keyframe.milliseconds;\r\n            }\r\n        } else {\r\n            // cross-segment seeking\r\n            let targetSegmentInfo = this._mediaInfo.segments[targetSegmentIndex];\r\n\r\n            if (targetSegmentInfo == undefined) {\r\n                // target segment hasn't been loaded. We need metadata then seek to expected time\r\n                this._pendingSeekTime = milliseconds;\r\n                this._internalAbort();\r\n                this._remuxer.seek();\r\n                this._remuxer.insertDiscontinuity();\r\n                this._loadSegment(targetSegmentIndex);\r\n                // Here we wait for the metadata loaded, then seek to expected position\r\n            } else {\r\n                // We have target segment's metadata, direct seek to target position\r\n                let keyframe = targetSegmentInfo.getNearestKeyframe(milliseconds);\r\n                this._internalAbort();\r\n                this._remuxer.seek(milliseconds);\r\n                this._remuxer.insertDiscontinuity();\r\n                this._demuxer.resetMediaInfo();\r\n                this._demuxer.timestampBase = this._mediaDataSource.segments[targetSegmentIndex].timestampBase;\r\n                this._loadSegment(targetSegmentIndex, keyframe.fileposition);\r\n                this._pendingResolveSeekPoint = keyframe.milliseconds;\r\n                this._reportSegmentMediaInfo(targetSegmentIndex);\r\n            }\r\n        }\r\n\r\n        this._enableStatisticsReporter();\r\n    }\r\n\r\n    _searchSegmentIndexContains(milliseconds) {\r\n        let segments = this._mediaDataSource.segments;\r\n        let idx = segments.length - 1;\r\n\r\n        for (let i = 0; i < segments.length; i++) {\r\n            if (milliseconds < segments[i].timestampBase) {\r\n                idx = i - 1;\r\n                break;\r\n            }\r\n        }\r\n        return idx;\r\n    }\r\n\r\n    _onInitChunkArrival(data, byteStart) {\r\n        let probeData = null;\r\n        let consumed = 0;\r\n\r\n        if (byteStart > 0) {\r\n            // IOController seeked immediately after opened, byteStart > 0 callback may received\r\n            this._demuxer.bindDataSource(this._ioctl);\r\n            this._demuxer.timestampBase = this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase;\r\n\r\n            consumed = this._demuxer.parseChunks(data, byteStart);\r\n        } else if ((probeData = FLVDemuxer.probe(data)).match) {\r\n            // Always create new FLVDemuxer\r\n            this._demuxer = new FLVDemuxer(probeData, this._config);\r\n\r\n            if (!this._remuxer) {\r\n                this._remuxer = new MP4Remuxer(this._config);\r\n            }\r\n\r\n            let mds = this._mediaDataSource;\r\n            if (mds.duration != undefined && !isNaN(mds.duration)) {\r\n                this._demuxer.overridedDuration = mds.duration;\r\n            }\r\n            if (typeof mds.hasAudio === 'boolean') {\r\n                this._demuxer.overridedHasAudio = mds.hasAudio;\r\n            }\r\n            if (typeof mds.hasVideo === 'boolean') {\r\n                this._demuxer.overridedHasVideo = mds.hasVideo;\r\n            }\r\n\r\n            this._demuxer.timestampBase = mds.segments[this._currentSegmentIndex].timestampBase;\r\n\r\n            this._demuxer.onError = this._onDemuxException.bind(this);\r\n            this._demuxer.onMediaInfo = this._onMediaInfo.bind(this);\r\n            this._demuxer.onMetaDataArrived = this._onMetaDataArrived.bind(this);\r\n            this._demuxer.onScriptDataArrived = this._onScriptDataArrived.bind(this);\r\n\r\n            this._remuxer.bindDataSource(this._demuxer\r\n                         .bindDataSource(this._ioctl\r\n            ));\r\n\r\n            this._remuxer.onInitSegment = this._onRemuxerInitSegmentArrival.bind(this);\r\n            this._remuxer.onMediaSegment = this._onRemuxerMediaSegmentArrival.bind(this);\r\n\r\n            consumed = this._demuxer.parseChunks(data, byteStart);\r\n        } else {\r\n            probeData = null;\r\n            Log.e(this.TAG, 'Non-FLV, Unsupported media type!');\r\n            Promise.resolve().then(() => {\r\n                this._internalAbort();\r\n            });\r\n            this._emitter.emit(TransmuxingEvents.DEMUX_ERROR, DemuxErrors.FORMAT_UNSUPPORTED, 'Non-FLV, Unsupported media type');\r\n\r\n            consumed = 0;\r\n        }\r\n\r\n        return consumed;\r\n    }\r\n\r\n    _onMediaInfo(mediaInfo) {\r\n        if (this._mediaInfo == null) {\r\n            // Store first segment's mediainfo as global mediaInfo\r\n            this._mediaInfo = Object.assign({}, mediaInfo);\r\n            this._mediaInfo.keyframesIndex = null;\r\n            this._mediaInfo.segments = [];\r\n            this._mediaInfo.segmentCount = this._mediaDataSource.segments.length;\r\n            Object.setPrototypeOf(this._mediaInfo, MediaInfo.prototype);\r\n        }\r\n\r\n        let segmentInfo = Object.assign({}, mediaInfo);\r\n        Object.setPrototypeOf(segmentInfo, MediaInfo.prototype);\r\n        this._mediaInfo.segments[this._currentSegmentIndex] = segmentInfo;\r\n\r\n        // notify mediaInfo update\r\n        this._reportSegmentMediaInfo(this._currentSegmentIndex);\r\n\r\n        if (this._pendingSeekTime != null) {\r\n            Promise.resolve().then(() => {\r\n                let target = this._pendingSeekTime;\r\n                this._pendingSeekTime = null;\r\n                this.seek(target);\r\n            });\r\n        }\r\n    }\r\n\r\n    _onMetaDataArrived(metadata) {\r\n        this._emitter.emit(TransmuxingEvents.METADATA_ARRIVED, metadata);\r\n    }\r\n\r\n    _onScriptDataArrived(data) {\r\n        this._emitter.emit(TransmuxingEvents.SCRIPTDATA_ARRIVED, data);\r\n    }\r\n\r\n    _onIOSeeked() {\r\n        this._remuxer.insertDiscontinuity();\r\n    }\r\n\r\n    _onIOComplete(extraData) {\r\n        let segmentIndex = extraData;\r\n        let nextSegmentIndex = segmentIndex + 1;\r\n\r\n        if (nextSegmentIndex < this._mediaDataSource.segments.length) {\r\n            this._internalAbort();\r\n            this._remuxer.flushStashedSamples();\r\n            this._loadSegment(nextSegmentIndex);\r\n        } else {\r\n            this._remuxer.flushStashedSamples();\r\n            this._emitter.emit(TransmuxingEvents.LOADING_COMPLETE);\r\n            this._disableStatisticsReporter();\r\n        }\r\n    }\r\n\r\n    _onIORedirect(redirectedURL) {\r\n        let segmentIndex = this._ioctl.extraData;\r\n        this._mediaDataSource.segments[segmentIndex].redirectedURL = redirectedURL;\r\n    }\r\n\r\n    _onIORecoveredEarlyEof() {\r\n        this._emitter.emit(TransmuxingEvents.RECOVERED_EARLY_EOF);\r\n    }\r\n\r\n    _onIOException(type, info) {\r\n        Log.e(this.TAG, `IOException: type = ${type}, code = ${info.code}, msg = ${info.msg}`);\r\n\r\n        self.postMessage({\r\n            msg: 'disconnect'\r\n        });\r\n\r\n        this._emitter.emit(TransmuxingEvents.IO_ERROR, type, info);\r\n        this._disableStatisticsReporter();\r\n    }\r\n\r\n    _onDemuxException(type, info) {\r\n        Log.e(this.TAG, `DemuxException: type = ${type}, info = ${info}`);\r\n        this._emitter.emit(TransmuxingEvents.DEMUX_ERROR, type, info);\r\n    }\r\n\r\n    _onRemuxerInitSegmentArrival(type, initSegment) {\r\n        this._emitter.emit(TransmuxingEvents.INIT_SEGMENT, type, initSegment);\r\n    }\r\n\r\n    _onRemuxerMediaSegmentArrival(type, mediaSegment) {\r\n        if (this._pendingSeekTime != null) {\r\n            // Media segments after new-segment cross-seeking should be dropped.\r\n            return;\r\n        }\r\n        this._emitter.emit(TransmuxingEvents.MEDIA_SEGMENT, type, mediaSegment);\r\n\r\n        // Resolve pending seekPoint\r\n        if (this._pendingResolveSeekPoint != null && type === 'video') {\r\n            let syncPoints = mediaSegment.info.syncPoints;\r\n            let seekpoint = this._pendingResolveSeekPoint;\r\n            this._pendingResolveSeekPoint = null;\r\n\r\n            // Safari: Pass PTS for recommend_seekpoint\r\n            if (Browser.safari && syncPoints.length > 0 && syncPoints[0].originalDts === seekpoint) {\r\n                seekpoint = syncPoints[0].pts;\r\n            }\r\n            // else: use original DTS (keyframe.milliseconds)\r\n\r\n            this._emitter.emit(TransmuxingEvents.RECOMMEND_SEEKPOINT, seekpoint);\r\n        }\r\n    }\r\n\r\n    _enableStatisticsReporter() {\r\n        if (this._statisticsReporter == null) {\r\n            this._statisticsReporter = self.setInterval(\r\n                this._reportStatisticsInfo.bind(this),\r\n            this._config.statisticsInfoReportInterval);\r\n        }\r\n    }\r\n\r\n    _disableStatisticsReporter() {\r\n        if (this._statisticsReporter) {\r\n            self.clearInterval(this._statisticsReporter);\r\n            this._statisticsReporter = null;\r\n        }\r\n    }\r\n\r\n    _reportSegmentMediaInfo(segmentIndex) {\r\n        let segmentInfo = this._mediaInfo.segments[segmentIndex];\r\n        let exportInfo = Object.assign({}, segmentInfo);\r\n\r\n        exportInfo.duration = this._mediaInfo.duration;\r\n        exportInfo.segmentCount = this._mediaInfo.segmentCount;\r\n        delete exportInfo.segments;\r\n        delete exportInfo.keyframesIndex;\r\n\r\n        this._emitter.emit(TransmuxingEvents.MEDIA_INFO, exportInfo);\r\n    }\r\n\r\n    _reportStatisticsInfo() {\r\n        let info = {};\r\n\r\n        info.url = this._ioctl.currentURL;\r\n        info.hasRedirect = this._ioctl.hasRedirect;\r\n        if (info.hasRedirect) {\r\n            info.redirectedURL = this._ioctl.currentRedirectedURL;\r\n        }\r\n\r\n        info.speed = this._ioctl.currentSpeed;\r\n        info.loaderType = this._ioctl.loaderType;\r\n        info.currentSegmentIndex = this._currentSegmentIndex;\r\n        info.totalSegmentCount = this._mediaDataSource.segments.length;\r\n\r\n        this._emitter.emit(TransmuxingEvents.STATISTICS_INFO, info);\r\n    }\r\n\r\n}\r\n\r\nexport default TransmuxingController;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst TransmuxingEvents = {\r\n    IO_ERROR: 'io_error',\r\n    DEMUX_ERROR: 'demux_error',\r\n    INIT_SEGMENT: 'init_segment',\r\n    MEDIA_SEGMENT: 'media_segment',\r\n    LOADING_COMPLETE: 'loading_complete',\r\n    RECOVERED_EARLY_EOF: 'recovered_early_eof',\r\n    MEDIA_INFO: 'media_info',\r\n    METADATA_ARRIVED: 'metadata_arrived',\r\n    SCRIPTDATA_ARRIVED: 'scriptdata_arrived',\r\n    STATISTICS_INFO: 'statistics_info',\r\n    RECOMMEND_SEEKPOINT: 'recommend_seekpoint'\r\n};\r\n\r\nexport default TransmuxingEvents;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport LoggingControl from '../utils/logging-control.js';\r\nimport Polyfill from '../utils/polyfill.js';\r\nimport TransmuxingController from './transmuxing-controller.js';\r\nimport TransmuxingEvents from './transmuxing-events.js';\r\n\r\n/* post message to worker:\r\n   data: {\r\n       cmd: string\r\n       param: any\r\n   }\r\n\r\n   receive message from worker:\r\n   data: {\r\n       msg: string,\r\n       data: any\r\n   }\r\n */\r\n\r\nlet TransmuxingWorker = function (self) {\r\n\r\n    let TAG = 'TransmuxingWorker';\r\n    let controller = null;\r\n    let logcatListener = onLogcatCallback.bind(this);\r\n\r\n    Polyfill.install();\r\n\r\n    self.addEventListener('message', function (e) {\r\n        switch (e.data.cmd) {\r\n            case 'init':\r\n                controller = new TransmuxingController(e.data.param[0], e.data.param[1]);\r\n                controller.on(TransmuxingEvents.IO_ERROR, onIOError.bind(this));\r\n                controller.on(TransmuxingEvents.DEMUX_ERROR, onDemuxError.bind(this));\r\n                controller.on(TransmuxingEvents.INIT_SEGMENT, onInitSegment.bind(this));\r\n                controller.on(TransmuxingEvents.MEDIA_SEGMENT, onMediaSegment.bind(this));\r\n                controller.on(TransmuxingEvents.LOADING_COMPLETE, onLoadingComplete.bind(this));\r\n                controller.on(TransmuxingEvents.RECOVERED_EARLY_EOF, onRecoveredEarlyEof.bind(this));\r\n                controller.on(TransmuxingEvents.MEDIA_INFO, onMediaInfo.bind(this));\r\n                controller.on(TransmuxingEvents.METADATA_ARRIVED, onMetaDataArrived.bind(this));\r\n                controller.on(TransmuxingEvents.SCRIPTDATA_ARRIVED, onScriptDataArrived.bind(this));\r\n                controller.on(TransmuxingEvents.STATISTICS_INFO, onStatisticsInfo.bind(this));\r\n                controller.on(TransmuxingEvents.RECOMMEND_SEEKPOINT, onRecommendSeekpoint.bind(this));\r\n                break;\r\n            case 'destroy':\r\n                if (controller) {\r\n                    controller.destroy();\r\n                    controller = null;\r\n                }\r\n                self.postMessage({msg: 'destroyed'});\r\n                break;\r\n            case 'start':\r\n                controller.start();\r\n                break;\r\n            case 'stop':\r\n                controller.stop();\r\n                break;\r\n            case 'seek':\r\n                controller.seek(e.data.param);\r\n                break;\r\n            case 'pause':\r\n                controller.pause();\r\n                break;\r\n            case 'resume':\r\n                controller.resume();\r\n                break;\r\n            case 'logging_config': {\r\n                let config = e.data.param;\r\n                LoggingControl.applyConfig(config);\r\n\r\n                if (config.enableCallback === true) {\r\n                    LoggingControl.addLogListener(logcatListener);\r\n                } else {\r\n                    LoggingControl.removeLogListener(logcatListener);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    });\r\n\r\n    function onInitSegment(type, initSegment) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.INIT_SEGMENT,\r\n            data: {\r\n                type: type,\r\n                data: initSegment\r\n            }\r\n        };\r\n        self.postMessage(obj, [initSegment.data]);  // data: ArrayBuffer\r\n    }\r\n\r\n    function onMediaSegment(type, mediaSegment) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.MEDIA_SEGMENT,\r\n            data: {\r\n                type: type,\r\n                data: mediaSegment\r\n            }\r\n        };\r\n        self.postMessage(obj, [mediaSegment.data]);  // data: ArrayBuffer\r\n    }\r\n\r\n    function onLoadingComplete() {\r\n        let obj = {\r\n            msg: TransmuxingEvents.LOADING_COMPLETE\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onRecoveredEarlyEof() {\r\n        let obj = {\r\n            msg: TransmuxingEvents.RECOVERED_EARLY_EOF\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onMediaInfo(mediaInfo) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.MEDIA_INFO,\r\n            data: mediaInfo\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onMetaDataArrived(metadata) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.METADATA_ARRIVED,\r\n            data: metadata\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onScriptDataArrived(data) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.SCRIPTDATA_ARRIVED,\r\n            data: data\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onStatisticsInfo(statInfo) {\r\n        let obj = {\r\n            msg: TransmuxingEvents.STATISTICS_INFO,\r\n            data: statInfo\r\n        };\r\n        self.postMessage(obj);\r\n    }\r\n\r\n    function onIOError(type, info) {\r\n        self.postMessage({\r\n            msg: TransmuxingEvents.IO_ERROR,\r\n            data: {\r\n                type: type,\r\n                info: info\r\n            }\r\n        });\r\n    }\r\n\r\n    function onDemuxError(type, info) {\r\n        self.postMessage({\r\n            msg: TransmuxingEvents.DEMUX_ERROR,\r\n            data: {\r\n                type: type,\r\n                info: info\r\n            }\r\n        });\r\n    }\r\n\r\n    function onRecommendSeekpoint(milliseconds) {\r\n        self.postMessage({\r\n            msg: TransmuxingEvents.RECOMMEND_SEEKPOINT,\r\n            data: milliseconds\r\n        });\r\n    }\r\n\r\n    function onLogcatCallback(type, str) {\r\n        self.postMessage({\r\n            msg: 'logcat_callback',\r\n            data: {\r\n                type: type,\r\n                logcat: str\r\n            }\r\n        });\r\n    }\r\n\r\n};\r\n\r\nexport default TransmuxingWorker;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport decodeUTF8 from '../utils/utf8-conv.js';\r\nimport {IllegalStateException} from '../utils/exception.js';\r\n\r\nlet le = (function () {\r\n    let buf = new ArrayBuffer(2);\r\n    (new DataView(buf)).setInt16(0, 256, true);  // little-endian write\r\n    return (new Int16Array(buf))[0] === 256;  // platform-spec read, if equal then LE\r\n})();\r\n\r\nclass AMF {\r\n\r\n    static parseScriptData(arrayBuffer, dataOffset, dataSize) {\r\n        let data = {};\r\n\r\n        try {\r\n            let name = AMF.parseValue(arrayBuffer, dataOffset, dataSize);\r\n            let value = AMF.parseValue(arrayBuffer, dataOffset + name.size, dataSize - name.size);\r\n\r\n            data[name.data] = value.data;\r\n        } catch (e) {\r\n            Log.e('AMF', e.toString());\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    static parseObject(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 3) {\r\n            throw new IllegalStateException('Data not enough when parse ScriptDataObject');\r\n        }\r\n        let name = AMF.parseString(arrayBuffer, dataOffset, dataSize);\r\n        let value = AMF.parseValue(arrayBuffer, dataOffset + name.size, dataSize - name.size);\r\n        let isObjectEnd = value.objectEnd;\r\n\r\n        return {\r\n            data: {\r\n                name: name.data,\r\n                value: value.data\r\n            },\r\n            size: name.size + value.size,\r\n            objectEnd: isObjectEnd\r\n        };\r\n    }\r\n\r\n    static parseVariable(arrayBuffer, dataOffset, dataSize) {\r\n        return AMF.parseObject(arrayBuffer, dataOffset, dataSize);\r\n    }\r\n\r\n    static parseString(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 2) {\r\n            throw new IllegalStateException('Data not enough when parse String');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let length = v.getUint16(0, !le);\r\n\r\n        let str;\r\n        if (length > 0) {\r\n            str = decodeUTF8(new Uint8Array(arrayBuffer, dataOffset + 2, length));\r\n        } else {\r\n            str = '';\r\n        }\r\n\r\n        return {\r\n            data: str,\r\n            size: 2 + length\r\n        };\r\n    }\r\n\r\n    static parseLongString(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 4) {\r\n            throw new IllegalStateException('Data not enough when parse LongString');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let length = v.getUint32(0, !le);\r\n\r\n        let str;\r\n        if (length > 0) {\r\n            str = decodeUTF8(new Uint8Array(arrayBuffer, dataOffset + 4, length));\r\n        } else {\r\n            str = '';\r\n        }\r\n\r\n        return {\r\n            data: str,\r\n            size: 4 + length\r\n        };\r\n    }\r\n\r\n    static parseDate(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 10) {\r\n            throw new IllegalStateException('Data size invalid when parse Date');\r\n        }\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let timestamp = v.getFloat64(0, !le);\r\n        let localTimeOffset = v.getInt16(8, !le);\r\n        timestamp += localTimeOffset * 60 * 1000;  // get UTC time\r\n\r\n        return {\r\n            data: new Date(timestamp),\r\n            size: 8 + 2\r\n        };\r\n    }\r\n\r\n    static parseValue(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 1) {\r\n            throw new IllegalStateException('Data not enough when parse Value');\r\n        }\r\n\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let offset = 1;\r\n        let type = v.getUint8(0);\r\n        let value;\r\n        let objectEnd = false;\r\n\r\n        try {\r\n            switch (type) {\r\n                case 0:  // Number(Double) type\r\n                    value = v.getFloat64(1, !le);\r\n                    offset += 8;\r\n                    break;\r\n                case 1: {  // Boolean type\r\n                    let b = v.getUint8(1);\r\n                    value = b ? true : false;\r\n                    offset += 1;\r\n                    break;\r\n                }\r\n                case 2: {  // String type\r\n                    let amfstr = AMF.parseString(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = amfstr.data;\r\n                    offset += amfstr.size;\r\n                    break;\r\n                }\r\n                case 3: { // Object(s) type\r\n                    value = {};\r\n                    let terminal = 0;  // workaround for malformed Objects which has missing ScriptDataObjectEnd\r\n                    if ((v.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\r\n                        terminal = 3;\r\n                    }\r\n                    while (offset < dataSize - 4) {  // 4 === type(UI8) + ScriptDataObjectEnd(UI24)\r\n                        let amfobj = AMF.parseObject(arrayBuffer, dataOffset + offset, dataSize - offset - terminal);\r\n                        if (amfobj.objectEnd)\r\n                            break;\r\n                        value[amfobj.data.name] = amfobj.data.value;\r\n                        offset += amfobj.size;\r\n                    }\r\n                    if (offset <= dataSize - 3) {\r\n                        let marker = v.getUint32(offset - 1, !le) & 0x00FFFFFF;\r\n                        if (marker === 9) {\r\n                            offset += 3;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 8: { // ECMA array type (Mixed array)\r\n                    value = {};\r\n                    offset += 4;  // ECMAArrayLength(UI32)\r\n                    let terminal = 0;  // workaround for malformed MixedArrays which has missing ScriptDataObjectEnd\r\n                    if ((v.getUint32(dataSize - 4, !le) & 0x00FFFFFF) === 9) {\r\n                        terminal = 3;\r\n                    }\r\n                    while (offset < dataSize - 8) {  // 8 === type(UI8) + ECMAArrayLength(UI32) + ScriptDataVariableEnd(UI24)\r\n                        let amfvar = AMF.parseVariable(arrayBuffer, dataOffset + offset, dataSize - offset - terminal);\r\n                        if (amfvar.objectEnd)\r\n                            break;\r\n                        value[amfvar.data.name] = amfvar.data.value;\r\n                        offset += amfvar.size;\r\n                    }\r\n                    if (offset <= dataSize - 3) {\r\n                        let marker = v.getUint32(offset - 1, !le) & 0x00FFFFFF;\r\n                        if (marker === 9) {\r\n                            offset += 3;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 9:  // ScriptDataObjectEnd\r\n                    value = undefined;\r\n                    offset = 1;\r\n                    objectEnd = true;\r\n                    break;\r\n                case 10: {  // Strict array type\r\n                    // ScriptDataValue[n]. NOTE: according to video_file_format_spec_v10_1.pdf\r\n                    value = [];\r\n                    let strictArrayLength = v.getUint32(1, !le);\r\n                    offset += 4;\r\n                    for (let i = 0; i < strictArrayLength; i++) {\r\n                        let val = AMF.parseValue(arrayBuffer, dataOffset + offset, dataSize - offset);\r\n                        value.push(val.data);\r\n                        offset += val.size;\r\n                    }\r\n                    break;\r\n                }\r\n                case 11: {  // Date type\r\n                    let date = AMF.parseDate(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = date.data;\r\n                    offset += date.size;\r\n                    break;\r\n                }\r\n                case 12: {  // Long string type\r\n                    let amfLongStr = AMF.parseString(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n                    value = amfLongStr.data;\r\n                    offset += amfLongStr.size;\r\n                    break;\r\n                }\r\n                default:\r\n                    // ignore and skip\r\n                    offset = dataSize;\r\n                    Log.w('AMF', 'Unsupported AMF value type ' + type);\r\n            }\r\n        } catch (e) {\r\n            Log.e('AMF', e.toString());\r\n        }\r\n\r\n        return {\r\n            data: value,\r\n            size: offset,\r\n            objectEnd: objectEnd\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport default AMF;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst DemuxErrors = {\r\n    OK: 'OK',\r\n    FORMAT_ERROR: 'FormatError',\r\n    FORMAT_UNSUPPORTED: 'FormatUnsupported',\r\n    CODEC_UNSUPPORTED: 'CodecUnsupported'\r\n};\r\n\r\nexport default DemuxErrors;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {IllegalStateException, InvalidArgumentException} from '../utils/exception.js';\r\n\r\n// Exponential-Golomb buffer decoder\r\nclass ExpGolomb {\r\n\r\n    constructor(uint8array) {\r\n        this.TAG = 'ExpGolomb';\r\n\r\n        this._buffer = uint8array;\r\n        this._buffer_index = 0;\r\n        this._total_bytes = uint8array.byteLength;\r\n        this._total_bits = uint8array.byteLength * 8;\r\n        this._current_word = 0;\r\n        this._current_word_bits_left = 0;\r\n    }\r\n\r\n    destroy() {\r\n        this._buffer = null;\r\n    }\r\n\r\n    _fillCurrentWord() {\r\n        let buffer_bytes_left = this._total_bytes - this._buffer_index;\r\n        if (buffer_bytes_left <= 0)\r\n            throw new IllegalStateException('ExpGolomb: _fillCurrentWord() but no bytes available');\r\n\r\n        let bytes_read = Math.min(4, buffer_bytes_left);\r\n        let word = new Uint8Array(4);\r\n        word.set(this._buffer.subarray(this._buffer_index, this._buffer_index + bytes_read));\r\n        this._current_word = new DataView(word.buffer).getUint32(0, false);\r\n\r\n        this._buffer_index += bytes_read;\r\n        this._current_word_bits_left = bytes_read * 8;\r\n    }\r\n\r\n    readBits(bits) {\r\n        if (bits > 32)\r\n            throw new InvalidArgumentException('ExpGolomb: readBits() bits exceeded max 32bits!');\r\n\r\n        if (bits <= this._current_word_bits_left) {\r\n            let result = this._current_word >>> (32 - bits);\r\n            this._current_word <<= bits;\r\n            this._current_word_bits_left -= bits;\r\n            return result;\r\n        }\r\n\r\n        let result = this._current_word_bits_left ? this._current_word : 0;\r\n        result = result >>> (32 - this._current_word_bits_left);\r\n        let bits_need_left = bits - this._current_word_bits_left;\r\n\r\n        this._fillCurrentWord();\r\n        let bits_read_next = Math.min(bits_need_left, this._current_word_bits_left);\r\n\r\n        let result2 = this._current_word >>> (32 - bits_read_next);\r\n        this._current_word <<= bits_read_next;\r\n        this._current_word_bits_left -= bits_read_next;\r\n\r\n        result = (result << bits_read_next) | result2;\r\n        return result;\r\n    }\r\n\r\n    readBool() {\r\n        return this.readBits(1) === 1;\r\n    }\r\n\r\n    readByte() {\r\n        return this.readBits(8);\r\n    }\r\n\r\n    _skipLeadingZero() {\r\n        let zero_count;\r\n        for (zero_count = 0; zero_count < this._current_word_bits_left; zero_count++) {\r\n            if (0 !== (this._current_word & (0x80000000 >>> zero_count))) {\r\n                this._current_word <<= zero_count;\r\n                this._current_word_bits_left -= zero_count;\r\n                return zero_count;\r\n            }\r\n        }\r\n        this._fillCurrentWord();\r\n        return zero_count + this._skipLeadingZero();\r\n    }\r\n\r\n    readUEG() {  // unsigned exponential golomb\r\n        let leading_zeros = this._skipLeadingZero();\r\n        return this.readBits(leading_zeros + 1) - 1;\r\n    }\r\n\r\n    readSEG() {  // signed exponential golomb\r\n        let value = this.readUEG();\r\n        if (value & 0x01) {\r\n            return (value + 1) >>> 1;\r\n        } else {\r\n            return -1 * (value >>> 1);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default ExpGolomb;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport AMF from './amf-parser.js';\r\nimport SPSParser from './sps-parser.js';\r\nimport VPSParser from './vps-parser.js';\r\nimport DemuxErrors from './demux-errors.js';\r\nimport MediaInfo from '../core/media-info.js';\r\nimport {IllegalStateException} from '../utils/exception.js';\r\nimport NALBitstream from './hevc-golomb.js';\r\n\r\nfunction Swap16(src) {\r\n    return (((src >>> 8) & 0xFF) |\r\n            ((src & 0xFF) << 8));\r\n}\r\n\r\nfunction Swap32(src) {\r\n    return (((src & 0xFF000000) >>> 24) |\r\n            ((src & 0x00FF0000) >>> 8)  |\r\n            ((src & 0x0000FF00) << 8)   |\r\n            ((src & 0x000000FF) << 24));\r\n}\r\n\r\nfunction ReadBig32(array, index) {\r\n    return ((array[index] << 24)     |\r\n            (array[index + 1] << 16) |\r\n            (array[index + 2] << 8)  |\r\n            (array[index + 3]));\r\n}\r\n\r\n\r\nclass FLVDemuxer {\r\n\r\n    constructor(probeData, config) {\r\n        this.TAG = 'FLVDemuxer';\r\n\r\n        this._config = config;\r\n\r\n        this._onError = null;\r\n        this._onMediaInfo = null;\r\n        this._onMetaDataArrived = null;\r\n        this._onScriptDataArrived = null;\r\n        this._onTrackMetadata = null;\r\n        this._onDataAvailable = null;\r\n\r\n        this._dataOffset = probeData.dataOffset;\r\n        this._firstParse = true;\r\n        this._dispatch = false;\r\n\r\n        this._hasAudio = probeData.hasAudioTrack;\r\n        this._hasVideo = probeData.hasVideoTrack;\r\n\r\n        this._hasAudioFlagOverrided = false;\r\n        this._hasVideoFlagOverrided = false;\r\n\r\n        this._audioInitialMetadataDispatched = false;\r\n        this._videoInitialMetadataDispatched = false;\r\n\r\n        this._mediaInfo = new MediaInfo();\r\n        this._mediaInfo.hasAudio = this._hasAudio;\r\n        this._mediaInfo.hasVideo = this._hasVideo;\r\n        this._metadata = null;\r\n        this._audioMetadata = null;\r\n        this._videoMetadata = null;\r\n\r\n        this._naluLengthSize = 4;\r\n        this._timestampBase = 0;  // int32, in milliseconds\r\n        this._timescale = 1000;\r\n        this._duration = 0;  // int32, in milliseconds\r\n        this._durationOverrided = false;\r\n        this._referenceFrameRate = {\r\n            fixed: true,\r\n            fps: 23.976,\r\n            fps_num: 23976,\r\n            fps_den: 1000\r\n        };\r\n\r\n        this._flvSoundRateTable = [5500, 11025, 22050, 44100, 48000];\r\n\r\n        this._mpegSamplingRates = [\r\n            96000, 88200, 64000, 48000, 44100, 32000,\r\n            24000, 22050, 16000, 12000, 11025, 8000, 7350\r\n        ];\r\n\r\n        this._mpegAudioV10SampleRateTable = [44100, 48000, 32000, 0];\r\n        this._mpegAudioV20SampleRateTable = [22050, 24000, 16000, 0];\r\n        this._mpegAudioV25SampleRateTable = [11025, 12000, 8000,  0];\r\n\r\n        this._mpegAudioL1BitRateTable = [0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, -1];\r\n        this._mpegAudioL2BitRateTable = [0, 32, 48, 56,  64,  80,  96, 112, 128, 160, 192, 224, 256, 320, 384, -1];\r\n        this._mpegAudioL3BitRateTable = [0, 32, 40, 48,  56,  64,  80,  96, 112, 128, 160, 192, 224, 256, 320, -1];\r\n\r\n        this._videoTrack = {type: 'video', id: 1, sequenceNumber: 0, samples: [], length: 0};\r\n        this._audioTrack = {type: 'audio', id: 2, sequenceNumber: 0, samples: [], length: 0};\r\n\r\n        this._littleEndian = (function () {\r\n            let buf = new ArrayBuffer(2);\r\n            (new DataView(buf)).setInt16(0, 256, true);  // little-endian write\r\n            return (new Int16Array(buf))[0] === 256;  // platform-spec read, if equal then LE\r\n        })();\r\n    }\r\n\r\n    destroy() {\r\n        this._mediaInfo = null;\r\n        this._metadata = null;\r\n        this._audioMetadata = null;\r\n        this._videoMetadata = null;\r\n        this._videoTrack = null;\r\n        this._audioTrack = null;\r\n\r\n        this._onError = null;\r\n        this._onMediaInfo = null;\r\n        this._onMetaDataArrived = null;\r\n        this._onScriptDataArrived = null;\r\n        this._onTrackMetadata = null;\r\n        this._onDataAvailable = null;\r\n    }\r\n\r\n    static probe(buffer) {\r\n        let data = new Uint8Array(buffer);\r\n        let mismatch = {match: false};\r\n\r\n        if (data[0] !== 0x46 || data[1] !== 0x4C || data[2] !== 0x56 || data[3] !== 0x01) {\r\n            return mismatch;\r\n        }\r\n\r\n        let hasAudio = ((data[4] & 4) >>> 2) !== 0;\r\n        let hasVideo = (data[4] & 1) !== 0;\r\n\r\n        let offset = ReadBig32(data, 5);\r\n\r\n        if (offset < 9) {\r\n            return mismatch;\r\n        }\r\n\r\n        return {\r\n            match: true,\r\n            consumed: offset,\r\n            dataOffset: offset,\r\n            hasAudioTrack: hasAudio,\r\n            hasVideoTrack: hasVideo\r\n        };\r\n    }\r\n\r\n    bindDataSource(loader) {\r\n        loader.onDataArrival = this.parseChunks.bind(this);\r\n        return this;\r\n    }\r\n\r\n    // prototype: function(type: string, metadata: any): void\r\n    get onTrackMetadata() {\r\n        return this._onTrackMetadata;\r\n    }\r\n\r\n    set onTrackMetadata(callback) {\r\n        this._onTrackMetadata = callback;\r\n    }\r\n\r\n    // prototype: function(mediaInfo: MediaInfo): void\r\n    get onMediaInfo() {\r\n        return this._onMediaInfo;\r\n    }\r\n\r\n    set onMediaInfo(callback) {\r\n        this._onMediaInfo = callback;\r\n    }\r\n\r\n    get onMetaDataArrived() {\r\n        return this._onMetaDataArrived;\r\n    }\r\n\r\n    set onMetaDataArrived(callback) {\r\n        this._onMetaDataArrived = callback;\r\n    }\r\n\r\n    get onScriptDataArrived() {\r\n        return this._onScriptDataArrived;\r\n    }\r\n\r\n    set onScriptDataArrived(callback) {\r\n        this._onScriptDataArrived = callback;\r\n    }\r\n\r\n    // prototype: function(type: number, info: string): void\r\n    get onError() {\r\n        return this._onError;\r\n    }\r\n\r\n    set onError(callback) {\r\n        this._onError = callback;\r\n    }\r\n\r\n    // prototype: function(videoTrack: any, audioTrack: any): void\r\n    get onDataAvailable() {\r\n        return this._onDataAvailable;\r\n    }\r\n\r\n    set onDataAvailable(callback) {\r\n        this._onDataAvailable = callback;\r\n    }\r\n\r\n    // timestamp base for output samples, must be in milliseconds\r\n    get timestampBase() {\r\n        return this._timestampBase;\r\n    }\r\n\r\n    set timestampBase(base) {\r\n        this._timestampBase = base;\r\n    }\r\n\r\n    get overridedDuration() {\r\n        return this._duration;\r\n    }\r\n\r\n    // Force-override media duration. Must be in milliseconds, int32\r\n    set overridedDuration(duration) {\r\n        this._durationOverrided = true;\r\n        this._duration = duration;\r\n        this._mediaInfo.duration = duration;\r\n    }\r\n\r\n    // Force-override audio track present flag, boolean\r\n    set overridedHasAudio(hasAudio) {\r\n        this._hasAudioFlagOverrided = true;\r\n        this._hasAudio = hasAudio;\r\n        this._mediaInfo.hasAudio = hasAudio;\r\n    }\r\n\r\n    // Force-override video track present flag, boolean\r\n    set overridedHasVideo(hasVideo) {\r\n        this._hasVideoFlagOverrided = true;\r\n        this._hasVideo = hasVideo;\r\n        this._mediaInfo.hasVideo = hasVideo;\r\n    }\r\n\r\n    resetMediaInfo() {\r\n        this._mediaInfo = new MediaInfo();\r\n    }\r\n\r\n    _isInitialMetadataDispatched() {\r\n        if (this._hasAudio && this._hasVideo) {  // both audio & video\r\n            return this._audioInitialMetadataDispatched && this._videoInitialMetadataDispatched;\r\n        }\r\n        if (this._hasAudio && !this._hasVideo) {  // audio only\r\n            return this._audioInitialMetadataDispatched;\r\n        }\r\n        if (!this._hasAudio && this._hasVideo) {  // video only\r\n            return this._videoInitialMetadataDispatched;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // function parseChunks(chunk: ArrayBuffer, byteStart: number): number;\r\n    parseChunks(chunk, byteStart) {\r\n        if (!this._onError || !this._onMediaInfo || !this._onTrackMetadata || !this._onDataAvailable) {\r\n            throw new IllegalStateException('Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified');\r\n        }\r\n\r\n        let offset = 0;\r\n        let le = this._littleEndian;\r\n\r\n        if (byteStart === 0) {  // buffer with FLV header\r\n            if (chunk.byteLength > 13) {\r\n                let probeData = FLVDemuxer.probe(chunk);\r\n                offset = probeData.dataOffset;\r\n            } else {\r\n                return 0;\r\n            }\r\n        }\r\n\r\n        if (this._firstParse) {  // handle PreviousTagSize0 before Tag1\r\n            this._firstParse = false;\r\n            if (byteStart + offset !== this._dataOffset) {\r\n                Log.w(this.TAG, 'First time parsing but chunk byteStart invalid!');\r\n            }\r\n\r\n            let v = new DataView(chunk, offset);\r\n            let prevTagSize0 = v.getUint32(0, !le);\r\n            if (prevTagSize0 !== 0) {\r\n                Log.w(this.TAG, 'PrevTagSize0 !== 0 !!!');\r\n            }\r\n            offset += 4;\r\n        }\r\n\r\n        while (offset < chunk.byteLength) {\r\n            this._dispatch = true;\r\n\r\n            let v = new DataView(chunk, offset);\r\n\r\n            if (offset + 11 + 4 > chunk.byteLength) {\r\n                // data not enough for parsing an flv tag\r\n                break;\r\n            }\r\n\r\n            let tagType = v.getUint8(0);\r\n            let dataSize = v.getUint32(0, !le) & 0x00FFFFFF;\r\n\r\n            if (offset + 11 + dataSize + 4 > chunk.byteLength) {\r\n                // data not enough for parsing actual data body\r\n                break;\r\n            }\r\n\r\n            if (tagType !== 8 && tagType !== 9 && tagType !== 18) {\r\n                Log.w(this.TAG, `Unsupported tag type ${tagType}, skipped`);\r\n                // consume the whole tag (skip it)\r\n                offset += 11 + dataSize + 4;\r\n                continue;\r\n            }\r\n\r\n            let ts2 = v.getUint8(4);\r\n            let ts1 = v.getUint8(5);\r\n            let ts0 = v.getUint8(6);\r\n            let ts3 = v.getUint8(7);\r\n\r\n            let timestamp = ts0 | (ts1 << 8) | (ts2 << 16) | (ts3 << 24);\r\n\r\n            let streamId = v.getUint32(7, !le) & 0x00FFFFFF;\r\n            if (streamId !== 0) {\r\n                Log.w(this.TAG, 'Meet tag which has StreamID != 0!');\r\n            }\r\n\r\n            let dataOffset = offset + 11;\r\n\r\n            switch (tagType) {\r\n                case 8:  // Audio\r\n                    this._parseAudioData(chunk, dataOffset, dataSize, timestamp);\r\n                    break;\r\n                case 9:  // Video\r\n                    this._parseVideoData(chunk, dataOffset, dataSize, timestamp, byteStart + offset);\r\n                    break;\r\n                case 18:  // ScriptDataObject\r\n                    this._parseScriptData(chunk, dataOffset, dataSize);\r\n                    break;\r\n            }\r\n\r\n            let prevTagSize = v.getUint32(11 + dataSize, !le);\r\n            if (prevTagSize !== 11 + dataSize) {\r\n                Log.w(this.TAG, `Invalid PrevTagSize ${prevTagSize}`);\r\n            }\r\n\r\n            offset += 11 + dataSize + 4;  // tagBody + dataSize + prevTagSize\r\n        }\r\n\r\n        // dispatch parsed frames to consumer (typically, the remuxer)\r\n        // if (this._isInitialMetadataDispatched()) {\r\n        //     if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n        //         this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n        //     }\r\n        // }\r\n        if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n            this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n        }\r\n\r\n        return offset;  // consumed bytes, just equals latest offset index\r\n    }\r\n\r\n    _parseScriptData(arrayBuffer, dataOffset, dataSize) {\r\n        let scriptData = AMF.parseScriptData(arrayBuffer, dataOffset, dataSize);\r\n\r\n        if (scriptData.hasOwnProperty('onMetaData')) {\r\n            if (scriptData.onMetaData == null || typeof scriptData.onMetaData !== 'object') {\r\n                Log.w(this.TAG, 'Invalid onMetaData structure!');\r\n                return;\r\n            }\r\n            if (this._metadata) {\r\n                Log.w(this.TAG, 'Found another onMetaData tag!');\r\n            }\r\n            this._metadata = scriptData;\r\n            let onMetaData = this._metadata.onMetaData;\r\n\r\n            if (this._onMetaDataArrived) {\r\n                this._onMetaDataArrived(Object.assign({}, onMetaData));\r\n            }\r\n\r\n            if (typeof onMetaData.hasAudio === 'boolean') {  // hasAudio\r\n                if (this._hasAudioFlagOverrided === false) {\r\n                    this._hasAudio = onMetaData.hasAudio;\r\n                    this._mediaInfo.hasAudio = this._hasAudio;\r\n                }\r\n            }\r\n            if (typeof onMetaData.hasVideo === 'boolean') {  // hasVideo\r\n                if (this._hasVideoFlagOverrided === false) {\r\n                    this._hasVideo = onMetaData.hasVideo;\r\n                    this._mediaInfo.hasVideo = this._hasVideo;\r\n                }\r\n            }\r\n            if (typeof onMetaData.audiodatarate === 'number') {  // audiodatarate\r\n                this._mediaInfo.audioDataRate = onMetaData.audiodatarate;\r\n            }\r\n            if (typeof onMetaData.videodatarate === 'number') {  // videodatarate\r\n                this._mediaInfo.videoDataRate = onMetaData.videodatarate;\r\n            }\r\n            if (typeof onMetaData.width === 'number') {  // width\r\n                this._mediaInfo.width = onMetaData.width;\r\n            }\r\n            if (typeof onMetaData.height === 'number') {  // height\r\n                this._mediaInfo.height = onMetaData.height;\r\n            }\r\n            if (typeof onMetaData.duration === 'number') {  // duration\r\n                if (!this._durationOverrided) {\r\n                    let duration = Math.floor(onMetaData.duration * this._timescale);\r\n                    this._duration = duration;\r\n                    this._mediaInfo.duration = duration;\r\n                }\r\n            } else {\r\n                this._mediaInfo.duration = 0;\r\n            }\r\n            if (typeof onMetaData.framerate === 'number') {  // framerate\r\n                let fps_num = Math.floor(onMetaData.framerate * 1000);\r\n                if (fps_num > 0) {\r\n                    let fps = fps_num / 1000;\r\n                    this._referenceFrameRate.fixed = true;\r\n                    this._referenceFrameRate.fps = fps;\r\n                    this._referenceFrameRate.fps_num = fps_num;\r\n                    this._referenceFrameRate.fps_den = 1000;\r\n                    this._mediaInfo.fps = fps;\r\n                }\r\n            }\r\n            if (typeof onMetaData.keyframes === 'object') {  // keyframes\r\n                this._mediaInfo.hasKeyframesIndex = true;\r\n                let keyframes = onMetaData.keyframes;\r\n                this._mediaInfo.keyframesIndex = this._parseKeyframesIndex(keyframes);\r\n                onMetaData.keyframes = null;  // keyframes has been extracted, remove it\r\n            } else {\r\n                this._mediaInfo.hasKeyframesIndex = false;\r\n            }\r\n            this._dispatch = false;\r\n            this._mediaInfo.metadata = onMetaData;\r\n            Log.v(this.TAG, 'Parsed onMetaData');\r\n            if (this._mediaInfo.isComplete()) {\r\n                this._onMediaInfo(this._mediaInfo);\r\n            }\r\n        }\r\n\r\n        if (Object.keys(scriptData).length > 0) {\r\n            if (this._onScriptDataArrived) {\r\n                this._onScriptDataArrived(Object.assign({}, scriptData));\r\n            }\r\n        }\r\n    }\r\n\r\n    _parseKeyframesIndex(keyframes) {\r\n        let times = [];\r\n        let filepositions = [];\r\n\r\n        // ignore first keyframe which is actually AVC Sequence Header (AVCDecoderConfigurationRecord)\r\n        for (let i = 1; i < keyframes.times.length; i++) {\r\n            let time = this._timestampBase + Math.floor(keyframes.times[i] * 1000);\r\n            times.push(time);\r\n            filepositions.push(keyframes.filepositions[i]);\r\n        }\r\n\r\n        return {\r\n            times: times,\r\n            filepositions: filepositions\r\n        };\r\n    }\r\n\r\n    _parseAudioData(arrayBuffer, dataOffset, dataSize, tagTimestamp) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid audio packet, missing SoundData payload!');\r\n            return;\r\n        }\r\n\r\n        if (this._hasAudioFlagOverrided === true && this._hasAudio === false) {\r\n            // If hasAudio: false indicated explicitly in MediaDataSource,\r\n            // Ignore all the audio packets\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let soundSpec = v.getUint8(0);\r\n\r\n        let soundFormat = soundSpec >>> 4;\r\n        if (soundFormat !== 2 && soundFormat !== 10) {  // MP3 or AAC\r\n            this._onError(DemuxErrors.CODEC_UNSUPPORTED, 'Flv: Unsupported audio codec idx: ' + soundFormat);\r\n            return;\r\n        }\r\n\r\n        let soundRate = 0;\r\n        let soundRateIndex = (soundSpec & 12) >>> 2;\r\n        if (soundRateIndex >= 0 && soundRateIndex <= 4) {\r\n            soundRate = this._flvSoundRateTable[soundRateIndex];\r\n        } else {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid audio sample rate idx: ' + soundRateIndex);\r\n            return;\r\n        }\r\n\r\n        let soundSize = (soundSpec & 2) >>> 1;  // unused\r\n        let soundType = (soundSpec & 1);\r\n\r\n\r\n        let meta = this._audioMetadata;\r\n        let track = this._audioTrack;\r\n\r\n        if (!meta) {\r\n            if (this._hasAudio === false && this._hasAudioFlagOverrided === false) {\r\n                this._hasAudio = true;\r\n                this._mediaInfo.hasAudio = true;\r\n            }\r\n\r\n            // initial metadata\r\n            meta = this._audioMetadata = {};\r\n            meta.type = 'audio';\r\n            meta.id = track.id;\r\n            meta.timescale = this._timescale;\r\n            meta.duration = this._duration;\r\n            meta.audioSampleRate = soundRate;\r\n            meta.channelCount = (soundType === 0 ? 1 : 2);\r\n        }\r\n\r\n        if (soundFormat === 10) {  // AAC\r\n            let aacData = this._parseAACAudioData(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n            if (aacData == undefined) {\r\n                return;\r\n            }\r\n\r\n            if (aacData.packetType === 0) {  // AAC sequence header (AudioSpecificConfig)\r\n                if (meta.config) {\r\n                    Log.w(this.TAG, 'Found another AudioSpecificConfig!');\r\n                }\r\n                let misc = aacData.data;\r\n                meta.audioSampleRate = misc.samplingRate;\r\n                meta.channelCount = misc.channelCount;\r\n                meta.codec = misc.codec;\r\n                meta.originalCodec = misc.originalCodec;\r\n                meta.config = misc.config;\r\n                // The decode result of an aac sample is 1024 PCM samples\r\n                meta.refSampleDuration = 1024 / meta.audioSampleRate * meta.timescale;\r\n                Log.v(this.TAG, 'Parsed AudioSpecificConfig');\r\n\r\n                if (this._isInitialMetadataDispatched()) {\r\n                    // Non-initial metadata, force dispatch (or flush) parsed frames to remuxer\r\n                    if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                        this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n                    }\r\n                } else {\r\n                    this._audioInitialMetadataDispatched = true;\r\n                }\r\n                // then notify new metadata\r\n                this._dispatch = false;\r\n                this._onTrackMetadata('audio', meta);\r\n\r\n                let mi = this._mediaInfo;\r\n                mi.audioCodec = meta.originalCodec;\r\n                mi.audioSampleRate = meta.audioSampleRate;\r\n                mi.audioChannelCount = meta.channelCount;\r\n                if (mi.hasVideo) {\r\n                    if (mi.videoCodec != null) {\r\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                    }\r\n                } else {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\r\n                }\r\n                if (mi.isComplete()) {\r\n                    this._onMediaInfo(mi);\r\n                }\r\n            } else if (aacData.packetType === 1) {  // AAC raw frame data\r\n                let dts = this._timestampBase + tagTimestamp;\r\n                let aacSample = {unit: aacData.data, length: aacData.data.byteLength, dts: dts, pts: dts};\r\n                track.samples.push(aacSample);\r\n                track.length += aacData.data.length;\r\n            } else {\r\n                Log.e(this.TAG, `Flv: Unsupported AAC data type ${aacData.packetType}`);\r\n            }\r\n        } else if (soundFormat === 2) {  // MP3\r\n            if (!meta.codec) {\r\n                // We need metadata for mp3 audio track, extract info from frame header\r\n                let misc = this._parseMP3AudioData(arrayBuffer, dataOffset + 1, dataSize - 1, true);\r\n                if (misc == undefined) {\r\n                    return;\r\n                }\r\n                meta.audioSampleRate = misc.samplingRate;\r\n                meta.channelCount = misc.channelCount;\r\n                meta.codec = misc.codec;\r\n                meta.originalCodec = misc.originalCodec;\r\n                // The decode result of an mp3 sample is 1152 PCM samples\r\n                meta.refSampleDuration = 1152 / meta.audioSampleRate * meta.timescale;\r\n                Log.v(this.TAG, 'Parsed MPEG Audio Frame Header');\r\n\r\n                this._audioInitialMetadataDispatched = true;\r\n                this._onTrackMetadata('audio', meta);\r\n\r\n                let mi = this._mediaInfo;\r\n                mi.audioCodec = meta.codec;\r\n                mi.audioSampleRate = meta.audioSampleRate;\r\n                mi.audioChannelCount = meta.channelCount;\r\n                mi.audioDataRate = misc.bitRate;\r\n                if (mi.hasVideo) {\r\n                    if (mi.videoCodec != null) {\r\n                        mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                    }\r\n                } else {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.audioCodec + '\"';\r\n                }\r\n                if (mi.isComplete()) {\r\n                    this._onMediaInfo(mi);\r\n                }\r\n            }\r\n\r\n            // This packet is always a valid audio packet, extract it\r\n            let data = this._parseMP3AudioData(arrayBuffer, dataOffset + 1, dataSize - 1, false);\r\n            if (data == undefined) {\r\n                return;\r\n            }\r\n            let dts = this._timestampBase + tagTimestamp;\r\n            let mp3Sample = {unit: data, length: data.byteLength, dts: dts, pts: dts};\r\n            track.samples.push(mp3Sample);\r\n            track.length += data.length;\r\n        }\r\n    }\r\n\r\n    _parseAACAudioData(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid AAC packet, missing AACPacketType or/and Data!');\r\n            return;\r\n        }\r\n\r\n        let result = {};\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n\r\n        result.packetType = array[0];\r\n\r\n        if (array[0] === 0) {\r\n            result.data = this._parseAACAudioSpecificConfig(arrayBuffer, dataOffset + 1, dataSize - 1);\r\n        } else {\r\n            result.data = array.subarray(1);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    _parseAACAudioSpecificConfig(arrayBuffer, dataOffset, dataSize) {\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n        let config = null;\r\n\r\n        /* Audio Object Type:\r\n           0: Null\r\n           1: AAC Main\r\n           2: AAC LC\r\n           3: AAC SSR (Scalable Sample Rate)\r\n           4: AAC LTP (Long Term Prediction)\r\n           5: HE-AAC / SBR (Spectral Band Replication)\r\n           6: AAC Scalable\r\n        */\r\n\r\n        let audioObjectType = 0;\r\n        let originalAudioObjectType = 0;\r\n        let audioExtensionObjectType = null;\r\n        let samplingIndex = 0;\r\n        let extensionSamplingIndex = null;\r\n\r\n        // 5 bits\r\n        audioObjectType = originalAudioObjectType = array[0] >>> 3;\r\n        // 4 bits\r\n        samplingIndex = ((array[0] & 0x07) << 1) | (array[1] >>> 7);\r\n        if (samplingIndex < 0 || samplingIndex >= this._mpegSamplingRates.length) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid sampling frequency index!');\r\n            return;\r\n        }\r\n\r\n        let samplingFrequence = this._mpegSamplingRates[samplingIndex];\r\n\r\n        // 4 bits\r\n        let channelConfig = (array[1] & 0x78) >>> 3;\r\n        if (channelConfig < 0 || channelConfig >= 8) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: AAC invalid channel configuration');\r\n            return;\r\n        }\r\n\r\n        if (audioObjectType === 5) {  // HE-AAC?\r\n            // 4 bits\r\n            extensionSamplingIndex = ((array[1] & 0x07) << 1) | (array[2] >>> 7);\r\n            // 5 bits\r\n            audioExtensionObjectType = (array[2] & 0x7C) >>> 2;\r\n        }\r\n\r\n        // workarounds for various browsers\r\n        let userAgent = self.navigator.userAgent.toLowerCase();\r\n\r\n        if (userAgent.indexOf('firefox') !== -1) {\r\n            // firefox: use SBR (HE-AAC) if freq less than 24kHz\r\n            if (samplingIndex >= 6) {\r\n                audioObjectType = 5;\r\n                config = new Array(4);\r\n                extensionSamplingIndex = samplingIndex - 3;\r\n            } else {  // use LC-AAC\r\n                audioObjectType = 2;\r\n                config = new Array(2);\r\n                extensionSamplingIndex = samplingIndex;\r\n            }\r\n        } else if (userAgent.indexOf('android') !== -1) {\r\n            // android: always use LC-AAC\r\n            audioObjectType = 2;\r\n            config = new Array(2);\r\n            extensionSamplingIndex = samplingIndex;\r\n        } else {\r\n            // for other browsers, e.g. chrome...\r\n            // Always use HE-AAC to make it easier to switch aac codec profile\r\n            audioObjectType = 5;\r\n            extensionSamplingIndex = samplingIndex;\r\n            config = new Array(4);\r\n\r\n            if (samplingIndex >= 6) {\r\n                extensionSamplingIndex = samplingIndex - 3;\r\n            } else if (channelConfig === 1) {  // Mono channel\r\n                audioObjectType = 2;\r\n                config = new Array(2);\r\n                extensionSamplingIndex = samplingIndex;\r\n            }\r\n        }\r\n\r\n        config[0]  = audioObjectType << 3;\r\n        config[0] |= (samplingIndex & 0x0F) >>> 1;\r\n        config[1]  = (samplingIndex & 0x0F) << 7;\r\n        config[1] |= (channelConfig & 0x0F) << 3;\r\n        if (audioObjectType === 5) {\r\n            config[1] |= ((extensionSamplingIndex & 0x0F) >>> 1);\r\n            config[2]  = (extensionSamplingIndex & 0x01) << 7;\r\n            // extended audio object type: force to 2 (LC-AAC)\r\n            config[2] |= (2 << 2);\r\n            config[3]  = 0;\r\n        }\r\n\r\n        return {\r\n            config: config,\r\n            samplingRate: samplingFrequence,\r\n            channelCount: channelConfig,\r\n            codec: 'mp4a.40.' + audioObjectType,\r\n            originalCodec: 'mp4a.40.' + originalAudioObjectType\r\n        };\r\n    }\r\n\r\n    _parseMP3AudioData(arrayBuffer, dataOffset, dataSize, requestHeader) {\r\n        if (dataSize < 4) {\r\n            Log.w(this.TAG, 'Flv: Invalid MP3 packet, header missing!');\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n        let result = null;\r\n\r\n        if (requestHeader) {\r\n            if (array[0] !== 0xFF) {\r\n                return;\r\n            }\r\n            let ver = (array[1] >>> 3) & 0x03;\r\n            let layer = (array[1] & 0x06) >> 1;\r\n\r\n            let bitrate_index = (array[2] & 0xF0) >>> 4;\r\n            let sampling_freq_index = (array[2] & 0x0C) >>> 2;\r\n\r\n            let channel_mode = (array[3] >>> 6) & 0x03;\r\n            let channel_count = channel_mode !== 3 ? 2 : 1;\r\n\r\n            let sample_rate = 0;\r\n            let bit_rate = 0;\r\n            let object_type = 34;  // Layer-3, listed in MPEG-4 Audio Object Types\r\n\r\n            let codec = 'mp3';\r\n\r\n            switch (ver) {\r\n                case 0:  // MPEG 2.5\r\n                    sample_rate = this._mpegAudioV25SampleRateTable[sampling_freq_index];\r\n                    break;\r\n                case 2:  // MPEG 2\r\n                    sample_rate = this._mpegAudioV20SampleRateTable[sampling_freq_index];\r\n                    break;\r\n                case 3:  // MPEG 1\r\n                    sample_rate = this._mpegAudioV10SampleRateTable[sampling_freq_index];\r\n                    break;\r\n            }\r\n\r\n            switch (layer) {\r\n                case 1:  // Layer 3\r\n                    object_type = 34;\r\n                    if (bitrate_index < this._mpegAudioL3BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL3BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n                case 2:  // Layer 2\r\n                    object_type = 33;\r\n                    if (bitrate_index < this._mpegAudioL2BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL2BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n                case 3:  // Layer 1\r\n                    object_type = 32;\r\n                    if (bitrate_index < this._mpegAudioL1BitRateTable.length) {\r\n                        bit_rate = this._mpegAudioL1BitRateTable[bitrate_index];\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            result = {\r\n                bitRate: bit_rate,\r\n                samplingRate: sample_rate,\r\n                channelCount: channel_count,\r\n                codec: codec,\r\n                originalCodec: codec\r\n            };\r\n        } else {\r\n            result = array;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    _parseVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition) {\r\n        if (dataSize <= 1) {\r\n            Log.w(this.TAG, 'Flv: Invalid video packet, missing VideoData payload!');\r\n            return;\r\n        }\r\n\r\n        if (this._hasVideoFlagOverrided === true && this._hasVideo === false) {\r\n            // If hasVideo: false indicated explicitly in MediaDataSource,\r\n            // Ignore all the video packets\r\n            return;\r\n        }\r\n\r\n        let spec = (new Uint8Array(arrayBuffer, dataOffset, dataSize))[0];\r\n\r\n        let frameType = (spec & 240) >>> 4;\r\n        let codecId = spec & 15;\r\n\r\n        if ((codecId !== 7) && (codecId !== 12))\r\n        {\r\n            this._onError(DemuxErrors.CODEC_UNSUPPORTED, `Flv: Unsupported codec in video frame: ${codecId}`);\r\n            return;\r\n        }\r\n\r\n        this._parseAVCVideoPacket(codecId, arrayBuffer, dataOffset + 1, dataSize - 1, tagTimestamp, tagPosition, frameType);\r\n    }\r\n\r\n    _parseAVCVideoPacket(codecId, arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType) {\r\n        \r\n        if (dataSize < 4) {\r\n            Log.w(this.TAG, 'Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime');\r\n            return;\r\n        }\r\n\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let packetType = v.getUint8(0);\r\n        let cts_unsigned = v.getUint32(0, !le) & 0x00FFFFFF;\r\n        let cts = (cts_unsigned << 8) >> 8;  // convert to 24-bit signed int\r\n\r\n        if (codecId == 7)\r\n        {\r\n            if (packetType === 0) {  // AVCDecoderConfigurationRecord\r\n                this._parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset + 4, dataSize - 4);\r\n            } else if (packetType === 1) {  // One or more Nalus\r\n                this._parseAVCVideoData(arrayBuffer, dataOffset + 4, dataSize - 4, tagTimestamp, tagPosition, frameType, cts);\r\n            } else if (packetType === 2) {\r\n                // empty, AVC end of sequence\r\n            } else {\r\n                this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Invalid video packet type ${packetType}`);\r\n                return;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if (packetType === 0) {  // AVCDecoderConfigurationRecord\r\n                this._parseHEVCDecoderConfigurationRecord(arrayBuffer, dataOffset + 4, dataSize - 4);\r\n            } else if (packetType === 1) {  // One or more Nalus\r\n                this._parseAVCVideoData(arrayBuffer, dataOffset + 4, dataSize - 4, tagTimestamp, tagPosition, frameType, cts);\r\n            } else if (packetType === 2) {\r\n                // empty, AVC end of sequence\r\n            } else {\r\n                this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Invalid video packet type ${packetType}`);\r\n                return;\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    _parseHEVCDecoderConfigurationRecord(arrayBuffer, dataOffset, dataSize)\r\n    {\r\n        if (dataSize < 22) {\r\n            Log.w(this.TAG, 'Flv: Invalid _parseHEVCDecoderConfigurationRecord, lack of data!');\r\n            return;\r\n        }\r\n\r\n        let meta = this._videoMetadata;\r\n        let track = this._videoTrack;\r\n        let le = this._littleEndian;\r\n\r\n        if (!meta) {\r\n            if (this._hasVideo === false && this._hasVideoFlagOverrided === false) {\r\n                this._hasVideo = true;\r\n                this._mediaInfo.hasVideo = true;\r\n            }\r\n\r\n            meta = this._videoMetadata = {};\r\n            meta.type = 'video';\r\n            meta.id = track.id;\r\n            meta.timescale = this._timescale;\r\n            meta.duration = this._duration;\r\n            meta.propty = 'hevc';\r\n        } else {\r\n            if (typeof meta.avcc !== 'undefined') {\r\n                Log.w(this.TAG, 'Found another AVCDecoderConfigurationRecord!');\r\n            }\r\n        }\r\n\r\n        //let offset = 0;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n        let uint8array = new Uint8Array(arrayBuffer, dataOffset, dataSize);\r\n        let bs = new NALBitstream(uint8array, uint8array.byteLength);\r\n        let version = v.getUint8(0);\r\n        //offset = offset + 1;\r\n        let general = v.getUint8(1);\r\n        let general_profile_space = bs.GetWord(2);\r\n        let general_tier_flag = bs.GetWord(1);\r\n        let general_profile_idc = bs.GetWord(5);\r\n        //offset = offset + 1;\r\n\r\n        let general_profile_compatibility_flags = bs.GetWord(32);\r\n        let general_constraint_indicator_flags = bs.GetWord(48);\r\n        let general_level_idc = bs.GetWord(8);\r\n        bs.GetWord(4);\r\n        let min_spatial_segmentation_idc = bs.GetWord(12);\r\n        bs.GetWord(6);\r\n        let parallelismType = bs.GetWord(2);\r\n        bs.GetWord(6);\r\n        let chromaFormat = bs.GetWord(2);\r\n\r\n        bs.GetWord(5);\r\n        let bitDepthLumaMinus8 = bs.GetWord(3);\r\n        let bitDepthChromaMinus8 = bs.GetWord(3);\r\n        let avgFrameRate = bs.GetWord(16);\r\n        let constantFrameRate = bs.GetWord(2);\r\n        let numTemporalLayers = bs.GetWord(3);\r\n        let temporalIdNested = bs.GetWord(1);\r\n\r\n        let lengthSizeMinusOne = bs.GetWord(2);\r\n\r\n        let numOfArrays = v.getUint8(22);\r\n        //offset = offset + 1;\r\n        let offset = 23;\r\n\r\n        for (let i = 0; i < numOfArrays; i++)\r\n        {\r\n           // let array_completeness = v.getUint8(offset)&0x80;\r\n           // offset = offset + 1;\r\n            let NAL_unit_type = v.getUint8(offset) & 0x3f;\r\n            offset = offset + 1;\r\n\r\n            let numNalus = v.getUint16(offset, !le);\r\n            offset = offset + 2;\r\n            for (let j = 0; j < numNalus; j++)\r\n            {\r\n                let nalUnitLength = v.getUint16(offset, !le);\r\n                offset = offset + 2;\r\n                let data = new DataView(arrayBuffer, dataOffset + offset, nalUnitLength);\r\n                let dataUint8 = new Uint8Array(arrayBuffer, dataOffset + offset, nalUnitLength);\r\n                offset = offset + nalUnitLength;\r\n\r\n                \r\n                let type = data.getUint8(0);\r\n                if (type == 0x42)\r\n                {//sps\r\n                    let config = SPSParser.parseHevcSPS(dataUint8);\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    meta.codecWidth = config.codec_size.width;\r\n                    meta.codecHeight = config.codec_size.height;\r\n                    meta.presentWidth = config.present_size.width;\r\n                    meta.presentHeight = config.present_size.height;\r\n\r\n                    meta.profile = general_profile_idc;//config.profile_string;\r\n                    meta.level = general_level_idc;//config.level_string;\r\n                    meta.bitDepth = bitDepthLumaMinus8;//config.bit_depth;\r\n                    meta.chromaFormat = chromaFormat;//config.chroma_format;\r\n                    meta.sarRatio = config.sar_ratio;\r\n\r\n                    if (config.frame_rate.fixed === false ||\r\n                        config.frame_rate.fps_num === 0 ||\r\n                        config.frame_rate.fps_den === 0) {\r\n                        meta.frameRate = this._referenceFrameRate;\r\n                    }\r\n\r\n                    let codecArray = dataUint8.subarray(1, 4);\r\n                }\r\n                else if (type == 0x44)\r\n                {//pps\r\n                    \r\n                }\r\n                else if (type == 0x40)\r\n                {//vps\r\n                    let mainTier = data.getUint8(6);\r\n\r\n                    let L = data.getUint8(20); //L\r\n                    let version = data.getUint8(12); //\r\n                    meta.codec = 'hev1.' + data.getUint8(6).toString() + '.6.L' + data.getUint8(20).toString() + '.' + data.getUint8(12).toString(16);\r\n                }\r\n                else if (type == 0x4E)\r\n                {//SEI\r\n\r\n                }\r\n                else if (type == 0x26)\r\n                {//IDR\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        let mi = this._mediaInfo;\r\n        mi.width = meta.codecWidth;\r\n        mi.height = meta.codecHeight;\r\n        mi.fps = 25;//meta.frameRate.fps;\r\n        mi.sarNum = meta.sarRatio.width;\r\n        mi.sarDen = meta.sarRatio.height;\r\n        mi.videoCodec = meta.codec;\r\n\r\n        if (mi.hasAudio) {\r\n            if (mi.audioCodec != null) {\r\n                mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n            }\r\n        } else {\r\n            mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + '\"';\r\n        }\r\n        if (mi.isComplete()) {\r\n            this._onMediaInfo(mi);\r\n        }\r\n\r\n        meta.hvcc = new Uint8Array(dataSize);\r\n        meta.hvcc.set(new Uint8Array(arrayBuffer, dataOffset, dataSize), 0);\r\n        Log.v(this.TAG, 'Parsed AVCDecoderConfigurationRecord');\r\n\r\n        if (this._isInitialMetadataDispatched()) {\r\n            // flush parsed frames\r\n            if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n            }\r\n        } else {\r\n            this._videoInitialMetadataDispatched = true;\r\n        }\r\n        // notify new metadata\r\n        this._dispatch = false;\r\n        this._onTrackMetadata('video', meta);\r\n    }\r\n\r\n    _parseAVCDecoderConfigurationRecord(arrayBuffer, dataOffset, dataSize) {\r\n        if (dataSize < 7) {\r\n            Log.w(this.TAG, 'Flv: Invalid AVCDecoderConfigurationRecord, lack of data!');\r\n            return;\r\n        }\r\n\r\n        let meta = this._videoMetadata;\r\n        let track = this._videoTrack;\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        if (!meta) {\r\n            if (this._hasVideo === false && this._hasVideoFlagOverrided === false) {\r\n                this._hasVideo = true;\r\n                this._mediaInfo.hasVideo = true;\r\n            }\r\n\r\n            meta = this._videoMetadata = {};\r\n            meta.type = 'video';\r\n            meta.id = track.id;\r\n            meta.timescale = this._timescale;\r\n            meta.duration = this._duration;\r\n            meta.propty = 'avc';\r\n        } else {\r\n            if (typeof meta.avcc !== 'undefined') {\r\n                Log.w(this.TAG, 'Found another AVCDecoderConfigurationRecord!');\r\n            }\r\n        }\r\n\r\n        let version = v.getUint8(0);  // configurationVersion\r\n        let avcProfile = v.getUint8(1);  // avcProfileIndication\r\n        let profileCompatibility = v.getUint8(2);  // profile_compatibility\r\n        let avcLevel = v.getUint8(3);  // AVCLevelIndication\r\n\r\n        if (version !== 1 || avcProfile === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord');\r\n            return;\r\n        }\r\n\r\n        this._naluLengthSize = (v.getUint8(4) & 3) + 1;  // lengthSizeMinusOne\r\n        if (this._naluLengthSize !== 3 && this._naluLengthSize !== 4) {  // holy shit!!!\r\n            this._onError(DemuxErrors.FORMAT_ERROR, `Flv: Strange NaluLengthSizeMinusOne: ${this._naluLengthSize - 1}`);\r\n            return;\r\n        }\r\n\r\n        let spsCount = v.getUint8(5) & 31;  // numOfSequenceParameterSets\r\n        if (spsCount === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No SPS');\r\n            return;\r\n        } else if (spsCount > 1) {\r\n            Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ${spsCount}`);\r\n        }\r\n\r\n        let offset = 6;\r\n\r\n        for (let i = 0; i < spsCount; i++) {\r\n            let len = v.getUint16(offset, !le);  // sequenceParameterSetLength\r\n            offset += 2;\r\n\r\n            if (len === 0) {\r\n                continue;\r\n            }\r\n\r\n            // Notice: Nalu without startcode header (00 00 00 01)\r\n            let sps = new Uint8Array(arrayBuffer, dataOffset + offset, len);\r\n            offset += len;\r\n\r\n            let config = SPSParser.parseSPS(sps);\r\n            if (i !== 0) {\r\n                // ignore other sps's config\r\n                continue;\r\n            }\r\n\r\n            meta.codecWidth = config.codec_size.width;\r\n            meta.codecHeight = config.codec_size.height;\r\n            meta.presentWidth = config.present_size.width;\r\n            meta.presentHeight = config.present_size.height;\r\n\r\n            meta.profile = config.profile_string;\r\n            meta.level = config.level_string;\r\n            meta.bitDepth = config.bit_depth;\r\n            meta.chromaFormat = config.chroma_format;\r\n            meta.sarRatio = config.sar_ratio;\r\n            meta.frameRate = config.frame_rate;\r\n\r\n            if (config.frame_rate.fixed === false ||\r\n                config.frame_rate.fps_num === 0 ||\r\n                config.frame_rate.fps_den === 0) {\r\n                meta.frameRate = this._referenceFrameRate;\r\n            }\r\n\r\n            let fps_den = meta.frameRate.fps_den;\r\n            let fps_num = meta.frameRate.fps_num;\r\n            meta.refSampleDuration = meta.timescale * (fps_den / fps_num);\r\n\r\n            let codecArray = sps.subarray(1, 4);\r\n            let codecString = 'avc1.';\r\n            for (let j = 0; j < 3; j++) {\r\n                let h = codecArray[j].toString(16);\r\n                if (h.length < 2) {\r\n                    h = '0' + h;\r\n                }\r\n                codecString += h;\r\n            }\r\n            meta.codec = codecString;\r\n\r\n            let mi = this._mediaInfo;\r\n            mi.width = meta.codecWidth;\r\n            mi.height = meta.codecHeight;\r\n            mi.fps = meta.frameRate.fps;\r\n            mi.profile = meta.profile;\r\n            mi.level = meta.level;\r\n            mi.refFrames = config.ref_frames;\r\n            mi.chromaFormat = config.chroma_format_string;\r\n            mi.sarNum = meta.sarRatio.width;\r\n            mi.sarDen = meta.sarRatio.height;\r\n            mi.videoCodec = codecString;\r\n\r\n            if (mi.hasAudio) {\r\n                if (mi.audioCodec != null) {\r\n                    mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + ',' + mi.audioCodec + '\"';\r\n                }\r\n            } else {\r\n                mi.mimeType = 'video/x-flv; codecs=\"' + mi.videoCodec + '\"';\r\n            }\r\n            if (mi.isComplete()) {\r\n                this._onMediaInfo(mi);\r\n            }\r\n        }\r\n\r\n        let ppsCount = v.getUint8(offset);  // numOfPictureParameterSets\r\n        if (ppsCount === 0) {\r\n            this._onError(DemuxErrors.FORMAT_ERROR, 'Flv: Invalid AVCDecoderConfigurationRecord: No PPS');\r\n            return;\r\n        } else if (ppsCount > 1) {\r\n            Log.w(this.TAG, `Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ${ppsCount}`);\r\n        }\r\n\r\n        offset++;\r\n\r\n        for (let i = 0; i < ppsCount; i++) {\r\n            let len = v.getUint16(offset, !le);  // pictureParameterSetLength\r\n            offset += 2;\r\n\r\n            if (len === 0) {\r\n                continue;\r\n            }\r\n\r\n            // pps is useless for extracting video information\r\n            offset += len;\r\n        }\r\n\r\n        meta.avcc = new Uint8Array(dataSize);\r\n        meta.avcc.set(new Uint8Array(arrayBuffer, dataOffset, dataSize), 0);\r\n        Log.v(this.TAG, 'Parsed AVCDecoderConfigurationRecord');\r\n\r\n        if (this._isInitialMetadataDispatched()) {\r\n            // flush parsed frames\r\n            if (this._dispatch && (this._audioTrack.length || this._videoTrack.length)) {\r\n                this._onDataAvailable(this._audioTrack, this._videoTrack);\r\n            }\r\n        } else {\r\n            this._videoInitialMetadataDispatched = true;\r\n        }\r\n        // notify new metadata\r\n        this._dispatch = false;\r\n        this._onTrackMetadata('video', meta);\r\n    }\r\n\r\n    _parseAVCVideoData(arrayBuffer, dataOffset, dataSize, tagTimestamp, tagPosition, frameType, cts) {\r\n        let le = this._littleEndian;\r\n        let v = new DataView(arrayBuffer, dataOffset, dataSize);\r\n\r\n        let units = [], length = 0;\r\n\r\n        let offset = 0;\r\n        const lengthSize = this._naluLengthSize;\r\n        let dts = this._timestampBase + tagTimestamp;\r\n        let keyframe = (frameType === 1);  // from FLV Frame Type constants\r\n\r\n        while (offset < dataSize) {\r\n            if (offset + 4 >= dataSize) {\r\n                Log.w(this.TAG, `Malformed Nalu near timestamp ${dts}, offset = ${offset}, dataSize = ${dataSize}`);\r\n                break;  // data not enough for next Nalu\r\n            }\r\n            // Nalu with length-header (AVC1)\r\n            let naluSize = v.getUint32(offset, !le);  // Big-Endian read\r\n            if (lengthSize === 3) {\r\n                naluSize >>>= 8;\r\n            }\r\n            if (naluSize > dataSize - lengthSize) {\r\n                Log.w(this.TAG, `Malformed Nalus near timestamp ${dts}, NaluSize > DataSize!`);\r\n                return;\r\n            }\r\n\r\n            let unitType = v.getUint8(offset + lengthSize) & 0x1F;\r\n\r\n            if (unitType === 5) {  // IDR\r\n                keyframe = true;\r\n            }\r\n\r\n            let data = new Uint8Array(arrayBuffer, dataOffset + offset, lengthSize + naluSize);\r\n            let unit = {type: unitType, data: data};\r\n            units.push(unit);\r\n            length += data.byteLength;\r\n\r\n            offset += lengthSize + naluSize;\r\n        }\r\n\r\n        if (units.length) {\r\n            let track = this._videoTrack;\r\n            let avcSample = {\r\n                units: units,\r\n                length: length,\r\n                isKeyframe: keyframe,\r\n                dts: dts,\r\n                cts: cts,\r\n                pts: (dts + cts)\r\n            };\r\n            if (keyframe) {\r\n                avcSample.fileposition = tagPosition;\r\n            }\r\n            track.samples.push(avcSample);\r\n            track.length += length;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default FLVDemuxer;","class NALBitstream\r\n{\r\n    constructor(uint8array, len)\r\n    {\r\n        this.m_data = uint8array;\r\n        this.m_len = len;\r\n        this.m_idx = 0; \r\n        this.m_bits = 0;\r\n        this.m_byte = 0; \r\n        this.m_zeros = 0;\r\n    }\r\n\r\n    GetLeft()\r\n    {\r\n        return this.m_len - this.m_idx;\r\n    }\r\n\r\n    GetBYTE()\r\n    {\r\n        if (this.m_idx >= this.m_len)\r\n            return 0;\r\n        let b = this.m_data[this.m_idx++];\r\n        if (b == 0)\r\n        {\r\n            this.m_zeros++;\r\n            if ((this.m_idx < this.m_len) && (this.m_zeros == 2) && (this.m_data[this.m_idx] == 0x03))\r\n            {\r\n                this.m_idx++;\r\n                this.m_zeros = 0;\r\n            }\r\n        } \r\n        else  this.m_zeros = 0;\r\n\r\n        return b;\r\n    }\r\n\r\n    GetBit() \r\n    {\r\n        if (this.m_bits == 0)\r\n        {\r\n            this.m_byte = this.GetBYTE();\r\n            this.m_bits = 8;\r\n        }\r\n        this.m_bits--;\r\n        return (this.m_byte >> this.m_bits) & 0x1;\r\n    }\r\n\r\n    GetWord(bits) \r\n    {\r\n        let u = 0;\r\n        while (bits > 0)\r\n        {\r\n            u <<= 1;\r\n            u |= this.GetBit();\r\n            bits--;\r\n        }\r\n        return u;\r\n    }\r\n\r\n    GetUE() \r\n    {\r\n        let zeros = 0;\r\n        while (this.m_idx < this.m_len && this.GetBit() == 0) zeros++;\r\n        return this.GetWord(zeros) + ((1 << zeros) - 1);\r\n    }\r\n\r\n    GetSE()\r\n    {\r\n        let UE = this.GetUE();\r\n        let positive = UE & 1;\r\n        let SE = (UE + 1) >> 1;\r\n        if (!positive)\r\n        {\r\n            SE = -SE;\r\n        }\r\n        return SE;\r\n    }\r\n}\r\n\r\nexport default NALBitstream;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport ExpGolomb from './exp-golomb.js';\r\nimport NALBitstream from './hevc-golomb.js';\r\n\r\nclass SPSParser {\r\n\r\n    static _ebsp2rbsp(uint8array) {\r\n        let src = uint8array;\r\n        let src_length = src.byteLength;\r\n        let dst = new Uint8Array(src_length);\r\n        let dst_idx = 0;\r\n\r\n        for (let i = 0; i < src_length; i++) {\r\n            if (i >= 2) {\r\n                // Unescape: Skip 0x03 after 00 00\r\n                if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\r\n                    continue;\r\n                }\r\n            }\r\n            dst[dst_idx] = src[i];\r\n            dst_idx++;\r\n        }\r\n\r\n        return new Uint8Array(dst.buffer, 0, dst_idx);\r\n    }\r\n\r\n    static parseHevcSPS(uint8array)\r\n    {\r\n        let hevcgb = new NALBitstream(uint8array, uint8array.byteLength);\r\n        hevcgb.GetWord(4);\r\n        let sps_max_sub_layers_minus1 = hevcgb.GetWord(3);\r\n\r\n        if (sps_max_sub_layers_minus1 > 6) \r\n        {\r\n            return;\r\n        }\r\n        let sps_temporal_id_nesting_flag = hevcgb.GetWord(1);\r\n        //let sps_seq_parameter_set_id = hevcgb.GetUE();\r\n        let profile_space = hevcgb.GetWord(2);\r\n        let tier_flag = hevcgb.GetWord(1); \r\n        let profile = hevcgb.GetWord(5); \r\n        hevcgb.GetWord(32);//\r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);//  \r\n        hevcgb.GetWord(44);// \r\n        let level = hevcgb.GetWord(8);// general_level_idc\r\n        let sub_layer_profile_present_flag = new Array();\r\n        let sub_layer_level_present_flag = new Array();\r\n        for (let i = 0; i < sps_max_sub_layers_minus1; i++) {\r\n            sub_layer_profile_present_flag[i] = hevcgb.GetWord(1);\r\n            sub_layer_level_present_flag[i] = hevcgb.GetWord(1);\r\n        }\r\n        if (sps_max_sub_layers_minus1 > 0) \r\n        {\r\n            for (let i = sps_max_sub_layers_minus1; i < 8; i++) {\r\n                hevcgb.GetWord(2);\r\n            }\r\n        }\r\n        for (let i = 0; i < sps_max_sub_layers_minus1; i++) \r\n        {\r\n            if (sub_layer_profile_present_flag[i]) {\r\n                hevcgb.GetWord(2); \r\n                hevcgb.GetWord(1); \r\n                hevcgb.GetWord(5);\r\n                hevcgb.GetWord(32); \r\n                hevcgb.GetWord(1); \r\n                hevcgb.GetWord(1); \r\n                hevcgb.GetWord(1); \r\n                hevcgb.GetWord(1); \r\n                hevcgb.GetWord(44); \r\n            }\r\n            if (sub_layer_level_present_flag[i]) {\r\n                hevcgb.GetWord(8);// sub_layer_level_idc[i]\r\n            }\r\n        }\r\n        let sps_seq_parameter_set_id = hevcgb.GetUE();  \r\n        if (sps_seq_parameter_set_id > 15) {\r\n            return false;\r\n        }\r\n        let chroma_format_idc = hevcgb.GetUE();  \r\n        if (sps_seq_parameter_set_id > 3) {\r\n            return false;\r\n        }\r\n        if (chroma_format_idc == 3) {\r\n            hevcgb.GetWord(1);//  \r\n        }\r\n        let width  = hevcgb.GetUE(); // pic_width_in_luma_samples\r\n        let height  = hevcgb.GetUE(); // pic_height_in_luma_samples\r\n        if (hevcgb.GetWord(1)) { \r\n            hevcgb.GetUE();  \r\n            hevcgb.GetUE();  \r\n            hevcgb.GetUE();  \r\n            hevcgb.GetUE();   \r\n        }\r\n        let bit_depth_luma_minus8 = hevcgb.GetUE() + 8;\r\n        let bit_depth_chroma_minus8 = hevcgb.GetUE() + 8;\r\n        if (bit_depth_luma_minus8 != bit_depth_chroma_minus8) {\r\n            return false;\r\n        }\r\n\r\n        let log2_max_poc_lsb = hevcgb.GetUE();\r\n        if (log2_max_poc_lsb > 16) {\r\n            return false;\r\n        }\r\n\r\n        let sublayer_ordering_info = hevcgb.GetWord(1);\r\n        if (sublayer_ordering_info)\r\n        {\r\n            sublayer_ordering_info = 0;\r\n        }\r\n        else\r\n        {\r\n            sublayer_ordering_info = sps_max_sub_layers_minus1;\r\n        }\r\n\r\n        \r\n\r\n        //let start = 0;//sublayer_ordering_info ? 0 : sps_max_sub_layers_minus1 - 1;\r\n      //  let val = sublayer_ordering_info - start;\r\n        //let i = start;\r\n        //let temporal_layerArr = new Array();\r\n        for (let j = sublayer_ordering_info; j < sps_max_sub_layers_minus1; j++) {\r\n            hevcgb.GetUE();\r\n            hevcgb.GetUE();\r\n            hevcgb.GetUE();\r\n\r\n        }\r\n\r\n        let log2_min_cb_size = hevcgb.GetUE() + 3;\r\n        let log2_diff_max_min_coding_block_size = hevcgb.GetUE();\r\n        let log2_min_tb_size = hevcgb.GetUE() + 2;\r\n        let log2_diff_max_min_transform_block_size1 = hevcgb.GetUE();\r\n        let log2_max_trafo_size = log2_diff_max_min_transform_block_size1 + log2_min_tb_size;\r\n\r\n        let max_transform_hierarchy_depth_inter = hevcgb.GetUE();\r\n        let max_transform_hierarchy_depth_intra = hevcgb.GetUE();\r\n\r\n        let scaling_list_enable_flag = hevcgb.GetWord(1);\r\n        if ((scaling_list_enable_flag) && (hevcgb.GetWord(1)))\r\n        {\r\n            for (let size_id = 0; size_id < 4; size_id++)\r\n            {\r\n                for (let matrix_id = 0; matrix_id < (size_id == 3 ? 2 : 6); matrix_id ++) \r\n                {\r\n                    let scaling_list_pred_mode_flag = hevcgb.GetWord(1);\r\n                    if (!scaling_list_pred_mode_flag)\r\n                    {\r\n                        hevcgb.GetUE();\r\n                    }\r\n                    else\r\n                    {\r\n                        let tmp = 1 << (4 + (size_id << 1));\r\n                        let num_coeffs = 0;\r\n                        if (tmp > 64)\r\n                        {\r\n                            num_coeffs = 64;\r\n                        }\r\n                        else\r\n                        {\r\n                            num_coeffs = tmp;\r\n                        }\r\n\r\n                        if (size_id > 1)\r\n                        {\r\n                            hevcgb.GetSE();\r\n                        }\r\n\r\n                        for (let k = 0; k < num_coeffs; k++)\r\n                        {\r\n                            hevcgb.GetSE();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        hevcgb.GetWord(1);\r\n        hevcgb.GetWord(1);\r\n        let pcm_enabled_flag = hevcgb.GetWord(1);\r\n        if (pcm_enabled_flag)\r\n        {\r\n            let pcm_bit_depth = hevcgb.GetWord(4) + 1;\r\n            let pcm_bit_depth_chroma = hevcgb.GetWord(4) + 1;\r\n            let pcm_log2_min_pcm_cb_size = hevcgb.GetUE() + 3;\r\n            let pcm_log2_max_pcm_cb_size = hevcgb.GetUE() + pcm_log2_min_pcm_cb_size;\r\n\r\n            let pcm_loop_filter_disable_flag = hevcgb.GetWord(1);\r\n        }\r\n\r\n        let nb_st_rps = hevcgb.GetUE();\r\n        if (nb_st_rps > 64)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        let num_delta_pocs = new Array();\r\n        for (let i = 0; i < nb_st_rps; i++)\r\n        {\r\n            let rps_predict = hevcgb.GetWord(1);\r\n            if ((rps_predict) && i)\r\n            {\r\n                if (i > nb_st_rps)\r\n                {\r\n                    return false;\r\n                }\r\n                let delta_rps_sign = hevcgb.GetWord(1);\r\n                let abs_delta_rps = hevcgb.GetUE() + 1;\r\n\r\n                //let delta_rps      = (1 - (delta_rps_sign << 1)) * abs_delta_rps;\r\n\r\n                num_delta_pocs[i] = 0;\r\n\r\n                for (let j = 0; j <= num_delta_pocs[i - 1]; j++) {\r\n                    let use_delta_flag = 0;\r\n                    let used_by_curr_pic_flag = hevcgb.GetWord(1);\r\n                    if (!used_by_curr_pic_flag)\r\n                        use_delta_flag = hevcgb.GetWord(1);\r\n        \r\n                    if (used_by_curr_pic_flag || use_delta_flag)\r\n                        num_delta_pocs[i]++;\r\n                }\r\n                //let \r\n            }\r\n            else\r\n            {\r\n                let num_negative_pics = hevcgb.GetUE();\r\n                let nb_positive_pics = hevcgb.GetUE();\r\n\r\n                if (nb_positive_pics + num_negative_pics > 2 * hevcgb.GetLeft())\r\n                {\r\n                    return false;\r\n                }\r\n\r\n                num_delta_pocs[i] = num_negative_pics + nb_positive_pics;\r\n\r\n                for (let j = 0; j < num_negative_pics; j++)\r\n                {\r\n                    hevcgb.GetUE();\r\n                    hevcgb.GetWord(1);\r\n                }\r\n\r\n                for (let k = 0; k < nb_positive_pics; k++)\r\n                {\r\n                    hevcgb.GetUE();\r\n                    hevcgb.GetWord(1);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hevcgb.GetWord(1))\r\n        {\r\n            let num_long_term_ref_pics_sps = hevcgb.GetUE();\r\n            if (num_long_term_ref_pics_sps > 31)\r\n            {\r\n                return false;\r\n            }\r\n            for (let i = 0; i < num_long_term_ref_pics_sps; i++) { // num_long_term_ref_pics_sps\r\n                let len = 16;\r\n                if (log2_max_poc_lsb + 4 < 16)\r\n                {\r\n                    len = log2_max_poc_lsb + 4;\r\n                }\r\n\r\n                hevcgb.GetWord(len); // lt_ref_pic_poc_lsb_sps[i]\r\n                hevcgb.GetWord(1);      // used_by_curr_pic_lt_sps_flag[i]\r\n            }\r\n        }\r\n        let sps_temporal_mvp_enabled_flag = hevcgb.GetWord(1);\r\n        let strong_intra_smoothing_enabled_flag = hevcgb.GetWord(1);\r\n\r\n        let fps = 0, fps_fixed = true, fps_num = 0, fps_den = 0;\r\n        let vui_parameters_present_flag = hevcgb.GetWord(1);\r\n        if (vui_parameters_present_flag)\r\n        {\r\n            if (hevcgb.GetWord(1))\r\n            {\r\n                let aspect_ratio_idc = hevcgb.GetWord(8);\r\n                if (aspect_ratio_idc == 255)\r\n                {\r\n                    let sar_width = hevcgb.GetWord(16);\r\n                    let sar_height = hevcgb.GetWord(16);\r\n                }\r\n            }\r\n\r\n            if (hevcgb.GetWord(1))\r\n            {\r\n                hevcgb.GetWord(1);\r\n            }\r\n\r\n            if (hevcgb.GetWord(1))\r\n            {\r\n                let video_format = hevcgb.GetWord(3);\r\n                let video_full_range_flag = hevcgb.GetWord(1);\r\n\r\n                if (hevcgb.GetWord(1))\r\n                {\r\n                    hevcgb.GetWord(24);\r\n                }\r\n            }\r\n\r\n            if (hevcgb.GetWord(1))\r\n            {\r\n                hevcgb.GetUE();\r\n                hevcgb.GetUE();\r\n            }\r\n\r\n            hevcgb.GetWord(3);\r\n\r\n            if (hevcgb.GetWord(1)) {        // default_display_window_flag\r\n                hevcgb.GetUE(); // def_disp_win_left_offset\r\n                hevcgb.GetUE(); // def_disp_win_right_offset\r\n                hevcgb.GetUE(); // def_disp_win_top_offset\r\n                hevcgb.GetUE(); // def_disp_win_bottom_offset\r\n            }\r\n        \r\n            if (hevcgb.GetWord(1)) { // vui_timing_info_present_flag\r\n                let num_units_in_tick = hevcgb.GetUE();\r\n                let time_scale = hevcgb.GetUE();\r\n\r\n                fps_fixed = true;\r\n                fps_num = time_scale;\r\n                fps_den = num_units_in_tick * 2;\r\n                fps = fps_num / fps_den;\r\n\r\n                if (hevcgb.GetWord(1))\r\n                {\r\n                    let num_ticks_poc_diff_one_minus1 = hevcgb.GetUE();\r\n                }\r\n        \r\n               // if (get_bits1(gb)) // vui_hrd_parameters_present_flag\r\n               //     skip_hrd_parameters(gb, 1, max_sub_layers_minus1);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        return {\r\n            //profile_string: profile_string,  // baseline, high, high10, ...\r\n            //level_string: level_string,  // 3, 3.1, 4, 4.1, 5, 5.1, ...\r\n            bit_depth: bit_depth_luma_minus8,  // 8bit, 10bit, ...\r\n            //ref_frames: ref_frames,\r\n            chroma_format: chroma_format_idc,  // 4:2:0, 4:2:2, ...\r\n            chroma_format_string: SPSParser.getHevcChromaFormatString(chroma_format_idc),\r\n\r\n            frame_rate: {\r\n                fixed: fps_fixed,\r\n                fps: fps,\r\n                fps_den: fps_den,\r\n                fps_num: fps_num\r\n            },\r\n\r\n            sar_ratio: {\r\n                width: width,\r\n                height: height\r\n            },\r\n\r\n            codec_size: {\r\n                width: width,\r\n                height: height\r\n            },\r\n\r\n            present_size: {\r\n                width: width,\r\n                height: height\r\n            }\r\n        };\r\n    }\r\n\r\n    static parseSPS(uint8array) {\r\n        let rbsp = SPSParser._ebsp2rbsp(uint8array);\r\n        let gb = new ExpGolomb(rbsp);\r\n\r\n        gb.readByte();\r\n        let profile_idc = gb.readByte();  // profile_idc\r\n        gb.readByte();  // constraint_set_flags[5] + reserved_zero[3]\r\n        let level_idc = gb.readByte();  // level_idc\r\n        gb.readUEG();  // seq_parameter_set_id\r\n\r\n        let profile_string = SPSParser.getProfileString(profile_idc);\r\n        let level_string = SPSParser.getLevelString(level_idc);\r\n        let chroma_format_idc = 1;\r\n        let chroma_format = 420;\r\n        let chroma_format_table = [0, 420, 422, 444];\r\n        let bit_depth = 8;\r\n\r\n        if (profile_idc === 100 || profile_idc === 110 || profile_idc === 122 ||\r\n            profile_idc === 244 || profile_idc === 44 || profile_idc === 83 ||\r\n            profile_idc === 86 || profile_idc === 118 || profile_idc === 128 ||\r\n            profile_idc === 138 || profile_idc === 144) {\r\n\r\n            chroma_format_idc = gb.readUEG();\r\n            if (chroma_format_idc === 3) {\r\n                gb.readBits(1);  // separate_colour_plane_flag\r\n            }\r\n            if (chroma_format_idc <= 3) {\r\n                chroma_format = chroma_format_table[chroma_format_idc];\r\n            }\r\n\r\n            bit_depth = gb.readUEG() + 8;  // bit_depth_luma_minus8\r\n            gb.readUEG();  // bit_depth_chroma_minus8\r\n            gb.readBits(1);  // qpprime_y_zero_transform_bypass_flag\r\n            if (gb.readBool()) {  // seq_scaling_matrix_present_flag\r\n                let scaling_list_count = (chroma_format_idc !== 3) ? 8 : 12;\r\n                for (let i = 0; i < scaling_list_count; i++) {\r\n                    if (gb.readBool()) {  // seq_scaling_list_present_flag\r\n                        if (i < 6) {\r\n                            SPSParser._skipScalingList(gb, 16);\r\n                        } else {\r\n                            SPSParser._skipScalingList(gb, 64);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        gb.readUEG();  // log2_max_frame_num_minus4\r\n        let pic_order_cnt_type = gb.readUEG();\r\n        if (pic_order_cnt_type === 0) {\r\n            gb.readUEG();  // log2_max_pic_order_cnt_lsb_minus_4\r\n        } else if (pic_order_cnt_type === 1) {\r\n            gb.readBits(1);  // delta_pic_order_always_zero_flag\r\n            gb.readSEG();  // offset_for_non_ref_pic\r\n            gb.readSEG();  // offset_for_top_to_bottom_field\r\n            let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\r\n            for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\r\n                gb.readSEG();  // offset_for_ref_frame\r\n            }\r\n        }\r\n        let ref_frames = gb.readUEG();  // max_num_ref_frames\r\n        gb.readBits(1);  // gaps_in_frame_num_value_allowed_flag\r\n\r\n        let pic_width_in_mbs_minus1 = gb.readUEG();\r\n        let pic_height_in_map_units_minus1 = gb.readUEG();\r\n\r\n        let frame_mbs_only_flag = gb.readBits(1);\r\n        if (frame_mbs_only_flag === 0) {\r\n            gb.readBits(1);  // mb_adaptive_frame_field_flag\r\n        }\r\n        gb.readBits(1);  // direct_8x8_inference_flag\r\n\r\n        let frame_crop_left_offset = 0;\r\n        let frame_crop_right_offset = 0;\r\n        let frame_crop_top_offset = 0;\r\n        let frame_crop_bottom_offset = 0;\r\n\r\n        let frame_cropping_flag = gb.readBool();\r\n        if (frame_cropping_flag) {\r\n            frame_crop_left_offset = gb.readUEG();\r\n            frame_crop_right_offset = gb.readUEG();\r\n            frame_crop_top_offset = gb.readUEG();\r\n            frame_crop_bottom_offset = gb.readUEG();\r\n        }\r\n\r\n        let sar_width = 1, sar_height = 1;\r\n        let fps = 0, fps_fixed = true, fps_num = 0, fps_den = 0;\r\n\r\n        let vui_parameters_present_flag = gb.readBool();\r\n        if (vui_parameters_present_flag) {\r\n            if (gb.readBool()) {  // aspect_ratio_info_present_flag\r\n                let aspect_ratio_idc = gb.readByte();\r\n                let sar_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\r\n                let sar_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33,  99, 3, 2, 1];\r\n\r\n                if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\r\n                    sar_width = sar_w_table[aspect_ratio_idc - 1];\r\n                    sar_height = sar_h_table[aspect_ratio_idc - 1];\r\n                } else if (aspect_ratio_idc === 255) {\r\n                    sar_width = gb.readByte() << 8 | gb.readByte();\r\n                    sar_height = gb.readByte() << 8 | gb.readByte();\r\n                }\r\n            }\r\n\r\n            if (gb.readBool()) {  // overscan_info_present_flag\r\n                gb.readBool();  // overscan_appropriate_flag\r\n            }\r\n            if (gb.readBool()) {  // video_signal_type_present_flag\r\n                gb.readBits(4);  // video_format & video_full_range_flag\r\n                if (gb.readBool()) {  // colour_description_present_flag\r\n                    gb.readBits(24);  // colour_primaries & transfer_characteristics & matrix_coefficients\r\n                }\r\n            }\r\n            if (gb.readBool()) {  // chroma_loc_info_present_flag\r\n                gb.readUEG();  // chroma_sample_loc_type_top_field\r\n                gb.readUEG();  // chroma_sample_loc_type_bottom_field\r\n            }\r\n            if (gb.readBool()) {  // timing_info_present_flag\r\n                let num_units_in_tick = gb.readBits(32);\r\n                let time_scale = gb.readBits(32);\r\n                fps_fixed = gb.readBool();  // fixed_frame_rate_flag\r\n\r\n                fps_num = time_scale;\r\n                fps_den = num_units_in_tick * 2;\r\n                fps = fps_num / fps_den;\r\n            }\r\n        }\r\n\r\n        let sarScale = 1;\r\n        if (sar_width !== 1 || sar_height !== 1) {\r\n            sarScale = sar_width / sar_height;\r\n        }\r\n\r\n        let crop_unit_x = 0, crop_unit_y = 0;\r\n        if (chroma_format_idc === 0) {\r\n            crop_unit_x = 1;\r\n            crop_unit_y = 2 - frame_mbs_only_flag;\r\n        } else {\r\n            let sub_wc = (chroma_format_idc === 3) ? 1 : 2;\r\n            let sub_hc = (chroma_format_idc === 1) ? 2 : 1;\r\n            crop_unit_x = sub_wc;\r\n            crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\r\n        }\r\n\r\n        let codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\r\n        let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\r\n\r\n        codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\r\n        codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\r\n\r\n        let present_width = Math.ceil(codec_width * sarScale);\r\n\r\n        gb.destroy();\r\n        gb = null;\r\n\r\n        return {\r\n            profile_string: profile_string,  // baseline, high, high10, ...\r\n            level_string: level_string,  // 3, 3.1, 4, 4.1, 5, 5.1, ...\r\n            bit_depth: bit_depth,  // 8bit, 10bit, ...\r\n            ref_frames: ref_frames,\r\n            chroma_format: SPSParser.getHevcChromaFormatUnit(chroma_format),  // 4:2:0, 4:2:2, ...\r\n            chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\r\n\r\n            frame_rate: {\r\n                fixed: fps_fixed,\r\n                fps: fps,\r\n                fps_den: fps_den,\r\n                fps_num: fps_num\r\n            },\r\n\r\n            sar_ratio: {\r\n                width: sar_width,\r\n                height: sar_height\r\n            },\r\n\r\n            codec_size: {\r\n                width: codec_width,\r\n                height: codec_height\r\n            },\r\n\r\n            present_size: {\r\n                width: present_width,\r\n                height: codec_height\r\n            }\r\n        };\r\n    }\r\n\r\n    static _skipScalingList(gb, count) {\r\n        let last_scale = 8, next_scale = 8;\r\n        let delta_scale = 0;\r\n        for (let i = 0; i < count; i++) {\r\n            if (next_scale !== 0) {\r\n                delta_scale = gb.readSEG();\r\n                next_scale = (last_scale + delta_scale + 256) % 256;\r\n            }\r\n            last_scale = (next_scale === 0) ? last_scale : next_scale;\r\n        }\r\n    }\r\n\r\n    static getProfileString(profile_idc) {\r\n        switch (profile_idc) {\r\n            case 66:\r\n                return 'Baseline';\r\n            case 77:\r\n                return 'Main';\r\n            case 88:\r\n                return 'Extended';\r\n            case 100:\r\n                return 'High';\r\n            case 110:\r\n                return 'High10';\r\n            case 122:\r\n                return 'High422';\r\n            case 244:\r\n                return 'High444';\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }\r\n\r\n    /*\r\n    static getHevcProfileString(profile_idc)\r\n    {\r\n        switch(profile_idc)\r\n        {\r\n            case :\r\n                return \"Main\";\r\n            case :\r\n                return \"Main10\";\r\n            case :\r\n                return \"Main Still Picture\";\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }*/\r\n\r\n    static getLevelString(level_idc) {\r\n        return (level_idc / 10).toFixed(1);\r\n    }\r\n\r\n    static getChromaFormatString(chroma) {\r\n        switch (chroma) {\r\n            case 420:\r\n                return '4:2:0';\r\n            case 422:\r\n                return '4:2:2';\r\n            case 444:\r\n                return '4:4:4';\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }\r\n\r\n    static getHevcChromaFormatString(chroma) {\r\n        switch (chroma) {\r\n            case 1:\r\n                return '4:2:0';\r\n            case 2:\r\n                return '4:2:2';\r\n            case 3:\r\n                return '4:4:4';\r\n            default:\r\n                return 'Unknown';\r\n        }\r\n    }\r\n\r\n    static getHevcChromaFormatUnit(chroma) {\r\n        switch (chroma) {\r\n            case 1:\r\n                return 420;\r\n            case 2:\r\n                return 422;\r\n            case 3:\r\n                return 444;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n}\r\n\r\nexport default SPSParser;","import NALBitstream from './hevc-golomb.js';\r\n\r\nclass VPSParser {\r\n\r\n    static parseHevcVPS(uint8array)\r\n    {\r\n        let hevcgb = new NALBitstream(uint8array, uint8array.byteLength);\r\n        let vps_id = hevcgb.GetWord(4);\r\n\r\n        hevcgb.GetWord(2); //vps_reserved_three_2bits\r\n\r\n        let vps_max_layers = hevcgb.GetWord(6) + 1;\r\n        let vps_max_sub_layers = hevcgb.GetWord(3) + 1;\r\n        if (vps_max_sub_layers > 7)\r\n        {\r\n            return false;\r\n        }\r\n        let vps_temporal_id_nesting_flag = hevcgb.GetWord(1);\r\n\r\n        hevcgb.GetWord(16);// vps_reserved_ffff_16bits\r\n\r\n        let ptl_profile_space = hevcgb.GetWord(2);\r\n        let ptl_tier_flag = hevcgb.GetWord(1); \r\n        let ptl_profile_idc = hevcgb.GetWord(5); \r\n        hevcgb.GetWord(32);\r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(1);// \r\n        hevcgb.GetWord(44);// \r\n        let level = hevcgb.GetWord(8);// general_level_idc\r\n\r\n        let sub_layer_profile_present_flag = new Array();\r\n        let sub_layer_level_present_flag = new Array();\r\n        for (let i = 0; i < vps_max_sub_layers - 1; i++) {\r\n            sub_layer_profile_present_flag[i] = hevcgb.GetWord(1);\r\n            sub_layer_level_present_flag[i] = hevcgb.GetWord(1);\r\n        }\r\n\r\n        if ((vps_max_sub_layers - 1 > 0) && (vps_max_sub_layers - 1 < 8))\r\n        {\r\n            for (let i = vps_max_sub_layers - 1; i < 8; i++)\r\n            {\r\n                hevcgb.GetWord(2);\r\n            }\r\n        }\r\n\r\n        if ((vps_max_sub_layers - 1 > 0) && (vps_max_sub_layers - 1 < 8))\r\n        {\r\n            for (let i = vps_max_sub_layers - 1; i < 8; i++)\r\n            {\r\n                if (sub_layer_profile_present_flag[i] && (hevcgb.GetLeft() >= 2 + 1 + 5 + 32 + 4 + 16 + 16 + 12))\r\n                {\r\n                    hevcgb.GetWord(2);\r\n                    hevcgb.GetWord(1); \r\n                    hevcgb.GetWord(5); \r\n                    hevcgb.GetWord(32);\r\n                    hevcgb.GetWord(1);// \r\n                    hevcgb.GetWord(1);// \r\n                    hevcgb.GetWord(1);// \r\n                    hevcgb.GetWord(1);// \r\n                    hevcgb.GetWord(44);// \r\n                }\r\n                if ((sub_layer_level_present_flag[i]) && (hevcgb.GetLeft() >= 8))\r\n                {\r\n                    hevcgb.GetWord(8);// general_level_idc\r\n                }\r\n            }\r\n        }\r\n\r\n        let vps_sub_layer_ordering_info_present_flag = hevcgb.GetWord(1);\r\n        \r\n    }\r\n}\r\n\r\nexport default VPSParser;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Polyfill from './utils/polyfill.js';\r\nimport Features from './core/features.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './io/loader.js';\r\nimport FlvPlayer from './player/flv-player.js';\r\nimport NativePlayer from './player/native-player.js';\r\nimport PlayerEvents from './player/player-events.js';\r\nimport {ErrorTypes, ErrorDetails} from './player/player-errors.js';\r\nimport LoggingControl from './utils/logging-control.js';\r\nimport {InvalidArgumentException} from './utils/exception.js';\r\n\r\n// here are all the interfaces\r\n\r\n// install polyfills\r\nPolyfill.install();\r\n\r\n\r\n// factory method\r\nfunction createPlayer(mediaDataSource, optionalConfig) {\r\n    let mds = mediaDataSource;\r\n    if (mds == null || typeof mds !== 'object') {\r\n        throw new InvalidArgumentException('MediaDataSource must be an javascript object!');\r\n    }\r\n\r\n    if (!mds.hasOwnProperty('type')) {\r\n        throw new InvalidArgumentException('MediaDataSource must has type field to indicate video file type!');\r\n    }\r\n\r\n    switch (mds.type) {\r\n        case 'flv':\r\n            return new FlvPlayer(mds, optionalConfig);\r\n        default:\r\n            return new NativePlayer(mds, optionalConfig);\r\n    }\r\n}\r\n\r\n\r\n// feature detection\r\nfunction isSupported() {\r\n    return Features.supportMSEH264Playback();\r\n}\r\n\r\nfunction getFeatureList() {\r\n    return Features.getFeatureList();\r\n}\r\n\r\n\r\n// interfaces\r\nlet flvjs = {};\r\n\r\nflvjs.createPlayer = createPlayer;\r\nflvjs.isSupported = isSupported;\r\nflvjs.getFeatureList = getFeatureList;\r\n\r\nflvjs.BaseLoader = BaseLoader;\r\nflvjs.LoaderStatus = LoaderStatus;\r\nflvjs.LoaderErrors = LoaderErrors;\r\n\r\nflvjs.Events = PlayerEvents;\r\nflvjs.ErrorTypes = ErrorTypes;\r\nflvjs.ErrorDetails = ErrorDetails;\r\n\r\nflvjs.FlvPlayer = FlvPlayer;\r\nflvjs.NativePlayer = NativePlayer;\r\nflvjs.LoggingControl = LoggingControl;\r\n\r\nObject.defineProperty(flvjs, 'version', {\r\n    enumerable: true,\r\n    get: function () {\r\n        // replaced by browserify-versionify transform\r\n        return '__VERSION__';\r\n    }\r\n});\r\n\r\nexport default flvjs;","// entry/index file\r\n\r\n// make it compatible with browserify's umd wrapper\r\nmodule.exports = require('./flv.js').default;\r\n","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport Browser from '../utils/browser.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './loader.js';\r\nimport {RuntimeException} from '../utils/exception.js';\r\n\r\n/* fetch + stream IO loader. Currently working on chrome 43+.\r\n * fetch provides a better alternative http API to XMLHttpRequest\r\n *\r\n * fetch spec   https://fetch.spec.whatwg.org/\r\n * stream spec  https://streams.spec.whatwg.org/\r\n */\r\nclass FetchStreamLoader extends BaseLoader {\r\n\r\n    static isSupported() {\r\n        try {\r\n            // fetch + stream is broken on Microsoft Edge. Disable before build 15048.\r\n            // see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8196907/\r\n            // Fixed in Jan 10, 2017. Build 15048+ removed from blacklist.\r\n            let isWorkWellEdge = Browser.msedge && Browser.version.minor >= 15048;\r\n            let browserNotBlacklisted = Browser.msedge ? isWorkWellEdge : true;\r\n            return (self.fetch && self.ReadableStream && browserNotBlacklisted);\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    constructor(seekHandler, config) {\r\n        super('fetch-stream-loader');\r\n        this.TAG = 'FetchStreamLoader';\r\n\r\n        this._seekHandler = seekHandler;\r\n        this._config = config;\r\n        this._needStash = true;\r\n\r\n        this._requestAbort = false;\r\n        this._contentLength = null;\r\n        this._receivedLength = 0;\r\n    }\r\n\r\n    destroy() {\r\n        if (this.isWorking()) {\r\n            this.abort();\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    open(dataSource, range) {\r\n        this._dataSource = dataSource;\r\n        this._range = range;\r\n\r\n        let sourceURL = dataSource.url;\r\n        if (this._config.reuseRedirectedURL && dataSource.redirectedURL != undefined) {\r\n            sourceURL = dataSource.redirectedURL;\r\n        }\r\n\r\n        let seekConfig = this._seekHandler.getConfig(sourceURL, range);\r\n\r\n        let headers = new self.Headers();\r\n\r\n        if (typeof seekConfig.headers === 'object') {\r\n            let configHeaders = seekConfig.headers;\r\n            for (let key in configHeaders) {\r\n                if (configHeaders.hasOwnProperty(key)) {\r\n                    headers.append(key, configHeaders[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        let params = {\r\n            method: 'GET',\r\n            headers: headers,\r\n            mode: 'cors',\r\n            cache: 'default',\r\n            // The default policy of Fetch API in the whatwg standard\r\n            // Safari incorrectly indicates 'no-referrer' as default policy, fuck it\r\n            referrerPolicy: 'no-referrer-when-downgrade'\r\n        };\r\n\r\n        // add additional headers\r\n        if (typeof this._config.headers === 'object') {\r\n            for (let key in this._config.headers) {\r\n                headers.append(key, this._config.headers[key]);\r\n            }\r\n        }\r\n\r\n        // cors is enabled by default\r\n        if (dataSource.cors === false) {\r\n            // no-cors means 'disregard cors policy', which can only be used in ServiceWorker\r\n            params.mode = 'same-origin';\r\n        }\r\n\r\n        // withCredentials is disabled by default\r\n        if (dataSource.withCredentials) {\r\n            params.credentials = 'include';\r\n        }\r\n\r\n        // referrerPolicy from config\r\n        if (dataSource.referrerPolicy) {\r\n            params.referrerPolicy = dataSource.referrerPolicy;\r\n        }\r\n\r\n        this._status = LoaderStatus.kConnecting;\r\n        self.fetch(seekConfig.url, params).then((res) => {\r\n            if (this._requestAbort) {\r\n                this._requestAbort = false;\r\n                this._status = LoaderStatus.kIdle;\r\n                return;\r\n            }\r\n            if (res.ok && (res.status >= 200 && res.status <= 299)) {\r\n                if (res.url !== seekConfig.url) {\r\n                    if (this._onURLRedirect) {\r\n                        let redirectedURL = this._seekHandler.removeURLParameters(res.url);\r\n                        this._onURLRedirect(redirectedURL);\r\n                    }\r\n                }\r\n\r\n                let lengthHeader = res.headers.get('Content-Length');\r\n                if (lengthHeader != null) {\r\n                    this._contentLength = parseInt(lengthHeader);\r\n                    if (this._contentLength !== 0) {\r\n                        if (this._onContentLengthKnown) {\r\n                            this._onContentLengthKnown(this._contentLength);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return this._pump.call(this, res.body.getReader());\r\n            } else {\r\n                this._status = LoaderStatus.kError;\r\n                this.sendError();\r\n                if (this._onError) {\r\n                    this._onError(LoaderErrors.HTTP_STATUS_CODE_INVALID, {code: res.status, msg: res.statusText});\r\n                } else {\r\n                    throw new RuntimeException('FetchStreamLoader: Http code invalid, ' + res.status + ' ' + res.statusText);\r\n                }\r\n            }\r\n        }).catch((e) => {\r\n            this._status = LoaderStatus.kError;\r\n            if (this._onError) {\r\n                this._onError(LoaderErrors.EXCEPTION, {code: -1, msg: e.message});\r\n            } else {\r\n                throw e;\r\n            }\r\n        });\r\n    }\r\n\r\n    abort() {\r\n        this._requestAbort = true;\r\n    }\r\n\r\n    sendError() {\r\n        this.abort();\r\n        self.postMessage({\r\n            msg: 'disconnect'\r\n        });\r\n    }\r\n\r\n    _pump(reader) {  // ReadableStreamReader\r\n        return reader.read().then((result) => {\r\n            if (result.done) {\r\n                // First check received length\r\n                if (this._contentLength !== null && this._receivedLength < this._contentLength) {\r\n                    // Report Early-EOF\r\n                    this._status = LoaderStatus.kError;\r\n                    let type = LoaderErrors.EARLY_EOF;\r\n                    let info = {code: -1, msg: 'Fetch stream meet Early-EOF'};\r\n                    if (this._onError) {\r\n                        this._onError(type, info);\r\n                    } else {\r\n                        throw new RuntimeException(info.msg);\r\n                    }\r\n                } else {\r\n                    // OK. Download complete\r\n                    this._status = LoaderStatus.kComplete;\r\n                    if (this._onComplete) {\r\n                        this._onComplete(this._range.from, this._range.from + this._receivedLength - 1);\r\n                    }\r\n                }\r\n            } else {\r\n                if (this._requestAbort === true) {\r\n                    this._requestAbort = false;\r\n                    this._status = LoaderStatus.kComplete;\r\n                    return reader.cancel();\r\n                }\r\n\r\n                this._status = LoaderStatus.kBuffering;\r\n\r\n                let chunk = result.value.buffer;\r\n                let byteStart = this._range.from + this._receivedLength;\r\n                this._receivedLength += chunk.byteLength;\r\n\r\n                if (this._onDataArrival) {\r\n                    this._onDataArrival(chunk, byteStart, this._receivedLength);\r\n                }\r\n\r\n                this._pump(reader);\r\n            }\r\n        }).catch((e) => {\r\n            if (e.code === 11 && Browser.msedge) {  // InvalidStateError on Microsoft Edge\r\n                // Workaround: Edge may throw InvalidStateError after ReadableStreamReader.cancel() call\r\n                // Ignore the unknown exception.\r\n                // Related issue: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11265202/\r\n                return;\r\n            }\r\n\r\n            this._status = LoaderStatus.kError;\r\n            let type = 0;\r\n            let info = null;\r\n\r\n            if ((e.code === 19 || e.message === 'network error') && // NETWORK_ERR\r\n                (this._contentLength === null ||\r\n                (this._contentLength !== null && this._receivedLength < this._contentLength))) {\r\n                type = LoaderErrors.EARLY_EOF;\r\n                info = {code: e.code, msg: 'Fetch stream meet Early-EOF'};\r\n            } else {\r\n                type = LoaderErrors.EXCEPTION;\r\n                info = {code: e.code, msg: e.message};\r\n            }\r\n\r\n            this.sendError();\r\n\r\n            if (this._onError) {\r\n                this._onError(type, info);\r\n            } else {\r\n                throw new RuntimeException(info.msg);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default FetchStreamLoader;\r\n","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport SpeedSampler from './speed-sampler.js';\r\nimport {LoaderStatus, LoaderErrors} from './loader.js';\r\nimport FetchStreamLoader from './fetch-stream-loader.js';\r\nimport MozChunkedLoader from './xhr-moz-chunked-loader.js';\r\nimport MSStreamLoader from './xhr-msstream-loader.js';\r\nimport RangeLoader from './xhr-range-loader.js';\r\nimport WebSocketLoader from './websocket-loader.js';\r\nimport RangeSeekHandler from './range-seek-handler.js';\r\nimport ParamSeekHandler from './param-seek-handler.js';\r\nimport {RuntimeException, IllegalStateException, InvalidArgumentException} from '../utils/exception.js';\r\n\r\n/**\r\n * DataSource: {\r\n *     url: string,\r\n *     filesize: number,\r\n *     cors: boolean,\r\n *     withCredentials: boolean\r\n * }\r\n * \r\n */\r\n\r\n// Manage IO Loaders\r\nclass IOController {\r\n\r\n    constructor(dataSource, config, extraData) {\r\n        this.TAG = 'IOController';\r\n\r\n        this._config = config;\r\n        this._extraData = extraData;\r\n\r\n        this._stashInitialSize = 1024 * 384;  // default initial size: 384KB\r\n        if (config.stashInitialSize != undefined && config.stashInitialSize > 0) {\r\n            // apply from config\r\n            this._stashInitialSize = config.stashInitialSize;\r\n        }\r\n\r\n        this._stashUsed = 0;\r\n        this._stashSize = this._stashInitialSize;\r\n        this._bufferSize = 1024 * 1024 * 3;  // initial size: 3MB\r\n        this._stashBuffer = new ArrayBuffer(this._bufferSize);\r\n        this._stashByteStart = 0;\r\n        this._enableStash = true;\r\n        if (config.enableStashBuffer === false) {\r\n            this._enableStash = false;\r\n        }\r\n\r\n        this._loader = null;\r\n        this._loaderClass = null;\r\n        this._seekHandler = null;\r\n\r\n        this._dataSource = dataSource;\r\n        this._isWebSocketURL = /wss?:\\/\\/(.+?)/.test(dataSource.url);\r\n        this._refTotalLength = dataSource.filesize ? dataSource.filesize : null;\r\n        this._totalLength = this._refTotalLength;\r\n        this._fullRequestFlag = false;\r\n        this._currentRange = null;\r\n        this._redirectedURL = null;\r\n\r\n        this._speedNormalized = 0;\r\n        this._speedSampler = new SpeedSampler();\r\n        this._speedNormalizeList = [64, 128, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096];\r\n\r\n        this._isEarlyEofReconnecting = false;\r\n\r\n        this._paused = false;\r\n        this._resumeFrom = 0;\r\n\r\n        this._onDataArrival = null;\r\n        this._onSeeked = null;\r\n        this._onError = null;\r\n        this._onComplete = null;\r\n        this._onRedirect = null;\r\n        this._onRecoveredEarlyEof = null;\r\n\r\n        this._selectSeekHandler();\r\n        this._selectLoader();\r\n        this._createLoader();\r\n    }\r\n\r\n    destroy() {\r\n        if (this._loader.isWorking()) {\r\n            this._loader.abort();\r\n        }\r\n        this._loader.destroy();\r\n        this._loader = null;\r\n        this._loaderClass = null;\r\n        this._dataSource = null;\r\n        this._stashBuffer = null;\r\n        this._stashUsed = this._stashSize = this._bufferSize = this._stashByteStart = 0;\r\n        this._currentRange = null;\r\n        this._speedSampler = null;\r\n\r\n        this._isEarlyEofReconnecting = false;\r\n\r\n        this._onDataArrival = null;\r\n        this._onSeeked = null;\r\n        this._onError = null;\r\n        this._onComplete = null;\r\n        this._onRedirect = null;\r\n        this._onRecoveredEarlyEof = null;\r\n\r\n        this._extraData = null;\r\n    }\r\n\r\n    isWorking() {\r\n        return this._loader && this._loader.isWorking() && !this._paused;\r\n    }\r\n\r\n    isPaused() {\r\n        return this._paused;\r\n    }\r\n\r\n    get status() {\r\n        return this._loader.status;\r\n    }\r\n\r\n    get extraData() {\r\n        return this._extraData;\r\n    }\r\n\r\n    set extraData(data) {\r\n        this._extraData = data;\r\n    }\r\n\r\n    // prototype: function onDataArrival(chunks: ArrayBuffer, byteStart: number): number\r\n    get onDataArrival() {\r\n        return this._onDataArrival;\r\n    }\r\n\r\n    set onDataArrival(callback) {\r\n        this._onDataArrival = callback;\r\n    }\r\n\r\n    get onSeeked() {\r\n        return this._onSeeked;\r\n    }\r\n\r\n    set onSeeked(callback) {\r\n        this._onSeeked = callback;\r\n    }\r\n\r\n    // prototype: function onError(type: number, info: {code: number, msg: string}): void\r\n    get onError() {\r\n        return this._onError;\r\n    }\r\n\r\n    set onError(callback) {\r\n        this._onError = callback;\r\n    }\r\n\r\n    get onComplete() {\r\n        return this._onComplete;\r\n    }\r\n\r\n    set onComplete(callback) {\r\n        this._onComplete = callback;\r\n    }\r\n\r\n    get onRedirect() {\r\n        return this._onRedirect;\r\n    }\r\n\r\n    set onRedirect(callback) {\r\n        this._onRedirect = callback;\r\n    }\r\n\r\n    get onRecoveredEarlyEof() {\r\n        return this._onRecoveredEarlyEof;\r\n    }\r\n\r\n    set onRecoveredEarlyEof(callback) {\r\n        this._onRecoveredEarlyEof = callback;\r\n    }\r\n\r\n    get currentURL() {\r\n        return this._dataSource.url;\r\n    }\r\n\r\n    get hasRedirect() {\r\n        return (this._redirectedURL != null || this._dataSource.redirectedURL != undefined);\r\n    }\r\n\r\n    get currentRedirectedURL() {\r\n        return this._redirectedURL || this._dataSource.redirectedURL;\r\n    }\r\n\r\n    // in KB/s\r\n    get currentSpeed() {\r\n        if (this._loaderClass === RangeLoader) {\r\n            // SpeedSampler is inaccuracy if loader is RangeLoader\r\n            return this._loader.currentSpeed;\r\n        }\r\n        return this._speedSampler.lastSecondKBps;\r\n    }\r\n\r\n    get loaderType() {\r\n        return this._loader.type;\r\n    }\r\n\r\n    _selectSeekHandler() {\r\n        let config = this._config;\r\n\r\n        if (config.seekType === 'range') {\r\n            this._seekHandler = new RangeSeekHandler(this._config.rangeLoadZeroStart);\r\n        } else if (config.seekType === 'param') {\r\n            let paramStart = config.seekParamStart || 'bstart';\r\n            let paramEnd = config.seekParamEnd || 'bend';\r\n\r\n            this._seekHandler = new ParamSeekHandler(paramStart, paramEnd);\r\n        } else if (config.seekType === 'custom') {\r\n            if (typeof config.customSeekHandler !== 'function') {\r\n                throw new InvalidArgumentException('Custom seekType specified in config but invalid customSeekHandler!');\r\n            }\r\n            this._seekHandler = new config.customSeekHandler();\r\n        } else {\r\n            throw new InvalidArgumentException(`Invalid seekType in config: ${config.seekType}`);\r\n        }\r\n    }\r\n\r\n    _selectLoader() {\r\n        if (this._config.customLoader != null) {\r\n            this._loaderClass = this._config.customLoader;\r\n        } else if (this._isWebSocketURL) {\r\n            this._loaderClass = WebSocketLoader;\r\n        } else if (FetchStreamLoader.isSupported()) {\r\n            this._loaderClass = FetchStreamLoader;\r\n        } else if (MozChunkedLoader.isSupported()) {\r\n            this._loaderClass = MozChunkedLoader;\r\n        } else if (RangeLoader.isSupported()) {\r\n            this._loaderClass = RangeLoader;\r\n        } else {\r\n            throw new RuntimeException('Your browser doesn\\'t support xhr with arraybuffer responseType!');\r\n        }\r\n    }\r\n\r\n    _createLoader() {\r\n        this._loader = new this._loaderClass(this._seekHandler, this._config);\r\n        if (this._loader.needStashBuffer === false) {\r\n            this._enableStash = false;\r\n        }\r\n        this._loader.onContentLengthKnown = this._onContentLengthKnown.bind(this);\r\n        this._loader.onURLRedirect = this._onURLRedirect.bind(this);\r\n        this._loader.onDataArrival = this._onLoaderChunkArrival.bind(this);\r\n        this._loader.onComplete = this._onLoaderComplete.bind(this);\r\n        this._loader.onError = this._onLoaderError.bind(this);\r\n    }\r\n\r\n    open(optionalFrom) {\r\n        this._currentRange = {from: 0, to: -1};\r\n        if (optionalFrom) {\r\n            this._currentRange.from = optionalFrom;\r\n        }\r\n\r\n        this._speedSampler.reset();\r\n        if (!optionalFrom) {\r\n            this._fullRequestFlag = true;\r\n        }\r\n\r\n        this._loader.open(this._dataSource, Object.assign({}, this._currentRange));\r\n    }\r\n\r\n    abort() {\r\n        this._loader.abort();\r\n\r\n        if (this._paused) {\r\n            this._paused = false;\r\n            this._resumeFrom = 0;\r\n        }\r\n    }\r\n\r\n    pause() {\r\n        if (this.isWorking()) {\r\n            this._loader.abort();\r\n\r\n            if (this._stashUsed !== 0) {\r\n                this._resumeFrom = this._stashByteStart;\r\n                this._currentRange.to = this._stashByteStart - 1;\r\n            } else {\r\n                this._resumeFrom = this._currentRange.to + 1;\r\n            }\r\n            this._stashUsed = 0;\r\n            this._stashByteStart = 0;\r\n            this._paused = true;\r\n        }\r\n    }\r\n\r\n    resume() {\r\n        if (this._paused) {\r\n            this._paused = false;\r\n            let bytes = this._resumeFrom;\r\n            this._resumeFrom = 0;\r\n            this._internalSeek(bytes, true);\r\n        }\r\n    }\r\n\r\n    seek(bytes) {\r\n        this._paused = false;\r\n        this._stashUsed = 0;\r\n        this._stashByteStart = 0;\r\n        this._internalSeek(bytes, true);\r\n    }\r\n\r\n    /**\r\n     * When seeking request is from media seeking, unconsumed stash data should be dropped\r\n     * However, stash data shouldn't be dropped if seeking requested from http reconnection\r\n     *\r\n     * @dropUnconsumed: Ignore and discard all unconsumed data in stash buffer\r\n     */\r\n    _internalSeek(bytes, dropUnconsumed) {\r\n        if (this._loader.isWorking()) {\r\n            this._loader.abort();\r\n        }\r\n\r\n        // dispatch & flush stash buffer before seek\r\n        this._flushStashBuffer(dropUnconsumed);\r\n\r\n        this._loader.destroy();\r\n        this._loader = null;\r\n\r\n        let requestRange = {from: bytes, to: -1};\r\n        this._currentRange = {from: requestRange.from, to: -1};\r\n\r\n        this._speedSampler.reset();\r\n        this._stashSize = this._stashInitialSize;\r\n        this._createLoader();\r\n        this._loader.open(this._dataSource, requestRange);\r\n\r\n        if (this._onSeeked) {\r\n            this._onSeeked();\r\n        }\r\n    }\r\n\r\n    updateUrl(url) {\r\n        if (!url || typeof url !== 'string' || url.length === 0) {\r\n            throw new InvalidArgumentException('Url must be a non-empty string!');\r\n        }\r\n\r\n        this._dataSource.url = url;\r\n\r\n        // TODO: replace with new url\r\n    }\r\n\r\n    _expandBuffer(expectedBytes) {\r\n        let bufferNewSize = this._stashSize;\r\n        while (bufferNewSize + 1024 * 1024 * 1 < expectedBytes) {\r\n            bufferNewSize *= 2;\r\n        }\r\n\r\n        bufferNewSize += 1024 * 1024 * 1;  // bufferSize = stashSize + 1MB\r\n        if (bufferNewSize === this._bufferSize) {\r\n            return;\r\n        }\r\n\r\n        let newBuffer = new ArrayBuffer(bufferNewSize);\r\n\r\n        if (this._stashUsed > 0) {  // copy existing data into new buffer\r\n            let stashOldArray = new Uint8Array(this._stashBuffer, 0, this._stashUsed);\r\n            let stashNewArray = new Uint8Array(newBuffer, 0, bufferNewSize);\r\n            stashNewArray.set(stashOldArray, 0);\r\n        }\r\n\r\n        this._stashBuffer = newBuffer;\r\n        this._bufferSize = bufferNewSize;\r\n    }\r\n\r\n    _normalizeSpeed(input) {\r\n        let list = this._speedNormalizeList;\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        if (input < list[0]) {\r\n            return list[0];\r\n        }\r\n\r\n        // binary search\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (input >= list[mid] && input < list[mid + 1])) {\r\n                return list[mid];\r\n            } else if (list[mid] < input) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    _adjustStashSize(normalized) {\r\n        let stashSizeKB = 0;\r\n\r\n        if (this._config.isLive) {\r\n            // live stream: always use single normalized speed for size of stashSizeKB\r\n            stashSizeKB = normalized;\r\n        } else {\r\n            if (normalized < 512) {\r\n                stashSizeKB = normalized;\r\n            } else if (normalized >= 512 && normalized <= 1024) {\r\n                stashSizeKB = Math.floor(normalized * 1.5);\r\n            } else {\r\n                stashSizeKB = normalized * 2;\r\n            }\r\n        }\r\n\r\n        if (stashSizeKB > 8192) {\r\n            stashSizeKB = 8192;\r\n        }\r\n\r\n        let bufferSize = stashSizeKB * 1024 + 1024 * 1024 * 1;  // stashSize + 1MB\r\n        if (this._bufferSize < bufferSize) {\r\n            this._expandBuffer(bufferSize);\r\n        }\r\n        this._stashSize = stashSizeKB * 1024;\r\n    }\r\n\r\n    _dispatchChunks(chunks, byteStart) {\r\n        this._currentRange.to = byteStart + chunks.byteLength - 1;\r\n        return this._onDataArrival(chunks, byteStart);\r\n    }\r\n\r\n    _onURLRedirect(redirectedURL) {\r\n        this._redirectedURL = redirectedURL;\r\n        if (this._onRedirect) {\r\n            this._onRedirect(redirectedURL);\r\n        }\r\n    }\r\n\r\n    _onContentLengthKnown(contentLength) {\r\n        if (contentLength && this._fullRequestFlag) {\r\n            this._totalLength = contentLength;\r\n            this._fullRequestFlag = false;\r\n        }\r\n    }\r\n\r\n    _onLoaderChunkArrival(chunk, byteStart, receivedLength) {\r\n        if (!this._onDataArrival) {\r\n            throw new IllegalStateException('IOController: No existing consumer (onDataArrival) callback!');\r\n        }\r\n        if (this._paused) {\r\n            return;\r\n        }\r\n        if (this._isEarlyEofReconnecting) {\r\n            // Auto-reconnect for EarlyEof succeed, notify to upper-layer by callback\r\n            this._isEarlyEofReconnecting = false;\r\n            if (this._onRecoveredEarlyEof) {\r\n                this._onRecoveredEarlyEof();\r\n            }\r\n        }\r\n\r\n        this._speedSampler.addBytes(chunk.byteLength);\r\n\r\n        // adjust stash buffer size according to network speed dynamically\r\n        let KBps = this._speedSampler.lastSecondKBps;\r\n        if (KBps !== 0) {\r\n            let normalized = this._normalizeSpeed(KBps);\r\n            if (this._speedNormalized !== normalized) {\r\n                this._speedNormalized = normalized;\r\n                this._adjustStashSize(normalized);\r\n            }\r\n        }\r\n\r\n        if (!this._enableStash) {  // disable stash\r\n            if (this._stashUsed === 0) {\r\n                // dispatch chunk directly to consumer;\r\n                // check ret value (consumed bytes) and stash unconsumed to stashBuffer\r\n                let consumed = this._dispatchChunks(chunk, byteStart);\r\n                if (consumed < chunk.byteLength) {  // unconsumed data remain.\r\n                    let remain = chunk.byteLength - consumed;\r\n                    if (remain > this._bufferSize) {\r\n                        this._expandBuffer(remain);\r\n                    }\r\n                    let stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                    stashArray.set(new Uint8Array(chunk, consumed), 0);\r\n                    this._stashUsed += remain;\r\n                    this._stashByteStart = byteStart + consumed;\r\n                }\r\n            } else {\r\n                // else: Merge chunk into stashBuffer, and dispatch stashBuffer to consumer.\r\n                if (this._stashUsed + chunk.byteLength > this._bufferSize) {\r\n                    this._expandBuffer(this._stashUsed + chunk.byteLength);\r\n                }\r\n                let stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                stashArray.set(new Uint8Array(chunk), this._stashUsed);\r\n                this._stashUsed += chunk.byteLength;\r\n                let consumed = this._dispatchChunks(this._stashBuffer.slice(0, this._stashUsed), this._stashByteStart);\r\n                if (consumed < this._stashUsed && consumed > 0) {  // unconsumed data remain\r\n                    let remainArray = new Uint8Array(this._stashBuffer, consumed);\r\n                    stashArray.set(remainArray, 0);\r\n                }\r\n                this._stashUsed -= consumed;\r\n                this._stashByteStart += consumed;\r\n            }\r\n        } else {  // enable stash\r\n            if (this._stashUsed === 0 && this._stashByteStart === 0) {  // seeked? or init chunk?\r\n                // This is the first chunk after seek action\r\n                this._stashByteStart = byteStart;\r\n            }\r\n            if (this._stashUsed + chunk.byteLength <= this._stashSize) {\r\n                // just stash\r\n                let stashArray = new Uint8Array(this._stashBuffer, 0, this._stashSize);\r\n                stashArray.set(new Uint8Array(chunk), this._stashUsed);\r\n                this._stashUsed += chunk.byteLength;\r\n            } else {  // stashUsed + chunkSize > stashSize, size limit exceeded\r\n                let stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                if (this._stashUsed > 0) {  // There're stash datas in buffer\r\n                    // dispatch the whole stashBuffer, and stash remain data\r\n                    // then append chunk to stashBuffer (stash)\r\n                    let buffer = this._stashBuffer.slice(0, this._stashUsed);\r\n                    let consumed = this._dispatchChunks(buffer, this._stashByteStart);\r\n                    if (consumed < buffer.byteLength) {\r\n                        if (consumed > 0) {\r\n                            let remainArray = new Uint8Array(buffer, consumed);\r\n                            stashArray.set(remainArray, 0);\r\n                            this._stashUsed = remainArray.byteLength;\r\n                            this._stashByteStart += consumed;\r\n                        }\r\n                    } else {\r\n                        this._stashUsed = 0;\r\n                        this._stashByteStart += consumed;\r\n                    }\r\n                    if (this._stashUsed + chunk.byteLength > this._bufferSize) {\r\n                        this._expandBuffer(this._stashUsed + chunk.byteLength);\r\n                        stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                    }\r\n                    stashArray.set(new Uint8Array(chunk), this._stashUsed);\r\n                    this._stashUsed += chunk.byteLength;\r\n                } else {  // stash buffer empty, but chunkSize > stashSize (oh, holy shit)\r\n                    // dispatch chunk directly and stash remain data\r\n                    let consumed = this._dispatchChunks(chunk, byteStart);\r\n                    if (consumed < chunk.byteLength) {\r\n                        let remain = chunk.byteLength - consumed;\r\n                        if (remain > this._bufferSize) {\r\n                            this._expandBuffer(remain);\r\n                            stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                        }\r\n                        stashArray.set(new Uint8Array(chunk, consumed), 0);\r\n                        this._stashUsed += remain;\r\n                        this._stashByteStart = byteStart + consumed;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _flushStashBuffer(dropUnconsumed) {\r\n        if (this._stashUsed > 0) {\r\n            let buffer = this._stashBuffer.slice(0, this._stashUsed);\r\n            let consumed = this._dispatchChunks(buffer, this._stashByteStart);\r\n            let remain = buffer.byteLength - consumed;\r\n\r\n            if (consumed < buffer.byteLength) {\r\n                if (dropUnconsumed) {\r\n                    Log.w(this.TAG, `${remain} bytes unconsumed data remain when flush buffer, dropped`);\r\n                } else {\r\n                    if (consumed > 0) {\r\n                        let stashArray = new Uint8Array(this._stashBuffer, 0, this._bufferSize);\r\n                        let remainArray = new Uint8Array(buffer, consumed);\r\n                        stashArray.set(remainArray, 0);\r\n                        this._stashUsed = remainArray.byteLength;\r\n                        this._stashByteStart += consumed;\r\n                    }\r\n                    return 0;\r\n                }\r\n            }\r\n            this._stashUsed = 0;\r\n            this._stashByteStart = 0;\r\n            return remain;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    _onLoaderComplete(from, to) {\r\n        // Force-flush stash buffer, and drop unconsumed data\r\n        this._flushStashBuffer(true);\r\n\r\n        if (this._onComplete) {\r\n            this._onComplete(this._extraData);\r\n        }\r\n    }\r\n\r\n    _onLoaderError(type, data) {\r\n        Log.e(this.TAG, `Loader error, code = ${data.code}, msg = ${data.msg}`);\r\n\r\n        this._flushStashBuffer(false);\r\n\r\n        if (this._isEarlyEofReconnecting) {\r\n            // Auto-reconnect for EarlyEof failed, throw UnrecoverableEarlyEof error to upper-layer\r\n            this._isEarlyEofReconnecting = false;\r\n            type = LoaderErrors.UNRECOVERABLE_EARLY_EOF;\r\n        }\r\n\r\n        switch (type) {\r\n            case LoaderErrors.EARLY_EOF: {\r\n                if (!this._config.isLive) {\r\n                    // Do internal http reconnect if not live stream\r\n                    if (this._totalLength) {\r\n                        let nextFrom = this._currentRange.to + 1;\r\n                        if (nextFrom < this._totalLength) {\r\n                            Log.w(this.TAG, 'Connection lost, trying reconnect...');\r\n                            this._isEarlyEofReconnecting = true;\r\n                            this._internalSeek(nextFrom, false);\r\n                        }\r\n                        return;\r\n                    }\r\n                    // else: We don't know totalLength, throw UnrecoverableEarlyEof\r\n                }\r\n                // live stream: throw UnrecoverableEarlyEof error to upper-layer\r\n                type = LoaderErrors.UNRECOVERABLE_EARLY_EOF;\r\n                break;\r\n            }\r\n            case LoaderErrors.UNRECOVERABLE_EARLY_EOF:\r\n            case LoaderErrors.CONNECTING_TIMEOUT:\r\n            case LoaderErrors.HTTP_STATUS_CODE_INVALID:\r\n            case LoaderErrors.EXCEPTION:\r\n                break;\r\n        }\r\n\r\n        if (this._onError) {\r\n            this._onError(type, data);\r\n        } else {\r\n            throw new RuntimeException('IOException: ' + data.msg);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default IOController;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {NotImplementedException} from '../utils/exception.js';\r\n\r\nexport const LoaderStatus = {\r\n    kIdle: 0,\r\n    kConnecting: 1,\r\n    kBuffering: 2,\r\n    kError: 3,\r\n    kComplete: 4\r\n};\r\n\r\nexport const LoaderErrors = {\r\n    OK: 'OK',\r\n    EXCEPTION: 'Exception',\r\n    HTTP_STATUS_CODE_INVALID: 'HttpStatusCodeInvalid',\r\n    CONNECTING_TIMEOUT: 'ConnectingTimeout',\r\n    EARLY_EOF: 'EarlyEof',\r\n    UNRECOVERABLE_EARLY_EOF: 'UnrecoverableEarlyEof'\r\n};\r\n\r\n/* Loader has callbacks which have following prototypes:\r\n *     function onContentLengthKnown(contentLength: number): void\r\n *     function onURLRedirect(url: string): void\r\n *     function onDataArrival(chunk: ArrayBuffer, byteStart: number, receivedLength: number): void\r\n *     function onError(errorType: number, errorInfo: {code: number, msg: string}): void\r\n *     function onComplete(rangeFrom: number, rangeTo: number): void\r\n */\r\nexport class BaseLoader {\r\n\r\n    constructor(typeName) {\r\n        this._type = typeName || 'undefined';\r\n        this._status = LoaderStatus.kIdle;\r\n        this._needStash = false;\r\n        // callbacks\r\n        this._onContentLengthKnown = null;\r\n        this._onURLRedirect = null;\r\n        this._onDataArrival = null;\r\n        this._onError = null;\r\n        this._onComplete = null;\r\n    }\r\n\r\n    destroy() {\r\n        this._status = LoaderStatus.kIdle;\r\n        this._onContentLengthKnown = null;\r\n        this._onURLRedirect = null;\r\n        this._onDataArrival = null;\r\n        this._onError = null;\r\n        this._onComplete = null;\r\n    }\r\n\r\n    isWorking() {\r\n        return this._status === LoaderStatus.kConnecting || this._status === LoaderStatus.kBuffering;\r\n    }\r\n\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    get status() {\r\n        return this._status;\r\n    }\r\n\r\n    get needStashBuffer() {\r\n        return this._needStash;\r\n    }\r\n\r\n    get onContentLengthKnown() {\r\n        return this._onContentLengthKnown;\r\n    }\r\n\r\n    set onContentLengthKnown(callback) {\r\n        this._onContentLengthKnown = callback;\r\n    }\r\n\r\n    get onURLRedirect() {\r\n        return this._onURLRedirect;\r\n    }\r\n\r\n    set onURLRedirect(callback) {\r\n        this._onURLRedirect = callback;\r\n    }\r\n\r\n    get onDataArrival() {\r\n        return this._onDataArrival;\r\n    }\r\n\r\n    set onDataArrival(callback) {\r\n        this._onDataArrival = callback;\r\n    }\r\n\r\n    get onError() {\r\n        return this._onError;\r\n    }\r\n\r\n    set onError(callback) {\r\n        this._onError = callback;\r\n    }\r\n\r\n    get onComplete() {\r\n        return this._onComplete;\r\n    }\r\n\r\n    set onComplete(callback) {\r\n        this._onComplete = callback;\r\n    }\r\n\r\n    // pure virtual\r\n    open(dataSource, range) {\r\n        throw new NotImplementedException('Unimplemented abstract function!');\r\n    }\r\n\r\n    abort() {\r\n        throw new NotImplementedException('Unimplemented abstract function!');\r\n    }\r\n\r\n\r\n}","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nclass ParamSeekHandler {\r\n\r\n    constructor(paramStart, paramEnd) {\r\n        this._startName = paramStart;\r\n        this._endName = paramEnd;\r\n    }\r\n\r\n    getConfig(baseUrl, range) {\r\n        let url = baseUrl;\r\n\r\n        if (range.from !== 0 || range.to !== -1) {\r\n            let needAnd = true;\r\n            if (url.indexOf('?') === -1) {\r\n                url += '?';\r\n                needAnd = false;\r\n            }\r\n\r\n            if (needAnd) {\r\n                url += '&';\r\n            }\r\n\r\n            url += `${this._startName}=${range.from.toString()}`;\r\n\r\n            if (range.to !== -1) {\r\n                url += `&${this._endName}=${range.to.toString()}`;\r\n            }\r\n        }\r\n\r\n        return {\r\n            url: url,\r\n            headers: {}\r\n        };\r\n    }\r\n\r\n    removeURLParameters(seekedURL) {\r\n        let baseURL = seekedURL.split('?')[0];\r\n        let params = undefined;\r\n\r\n        let queryIndex = seekedURL.indexOf('?');\r\n        if (queryIndex !== -1) {\r\n            params = seekedURL.substring(queryIndex + 1);\r\n        }\r\n\r\n        let resultParams = '';\r\n\r\n        if (params != undefined && params.length > 0) {\r\n            let pairs = params.split('&');\r\n\r\n            for (let i = 0; i < pairs.length; i++) {\r\n                let pair = pairs[i].split('=');\r\n                let requireAnd = (i > 0);\r\n\r\n                if (pair[0] !== this._startName && pair[0] !== this._endName) {\r\n                    if (requireAnd) {\r\n                        resultParams += '&';\r\n                    }\r\n                    resultParams += pairs[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return (resultParams.length === 0) ? baseURL : baseURL + '?' + resultParams;\r\n    }\r\n\r\n}\r\n\r\nexport default ParamSeekHandler;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nclass RangeSeekHandler {\r\n\r\n    constructor(zeroStart) {\r\n        this._zeroStart = zeroStart || false;\r\n    }\r\n\r\n    getConfig(url, range) {\r\n        let headers = {};\r\n\r\n        if (range.from !== 0 || range.to !== -1) {\r\n            let param;\r\n            if (range.to !== -1) {\r\n                param = `bytes=${range.from.toString()}-${range.to.toString()}`;\r\n            } else {\r\n                param = `bytes=${range.from.toString()}-`;\r\n            }\r\n            headers['Range'] = param;\r\n        } else if (this._zeroStart) {\r\n            headers['Range'] = 'bytes=0-';\r\n        }\r\n\r\n        return {\r\n            url: url,\r\n            headers: headers\r\n        };\r\n    }\r\n\r\n    removeURLParameters(seekedURL) {\r\n        return seekedURL;\r\n    }\r\n\r\n}\r\n\r\nexport default RangeSeekHandler;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n// Utility class to calculate realtime network I/O speed\r\nclass SpeedSampler {\r\n\r\n    constructor() {\r\n        // milliseconds\r\n        this._firstCheckpoint = 0;\r\n        this._lastCheckpoint = 0;\r\n        this._intervalBytes = 0;\r\n        this._totalBytes = 0;\r\n        this._lastSecondBytes = 0;\r\n\r\n        // compatibility detection\r\n        if (self.performance && self.performance.now) {\r\n            this._now = self.performance.now.bind(self.performance);\r\n        } else {\r\n            this._now = Date.now;\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this._firstCheckpoint = this._lastCheckpoint = 0;\r\n        this._totalBytes = this._intervalBytes = 0;\r\n        this._lastSecondBytes = 0;\r\n    }\r\n\r\n    addBytes(bytes) {\r\n        if (this._firstCheckpoint === 0) {\r\n            this._firstCheckpoint = this._now();\r\n            this._lastCheckpoint = this._firstCheckpoint;\r\n            this._intervalBytes += bytes;\r\n            this._totalBytes += bytes;\r\n        } else if (this._now() - this._lastCheckpoint < 1000) {\r\n            this._intervalBytes += bytes;\r\n            this._totalBytes += bytes;\r\n        } else {  // duration >= 1000\r\n            this._lastSecondBytes = this._intervalBytes;\r\n            this._intervalBytes = bytes;\r\n            this._totalBytes += bytes;\r\n            this._lastCheckpoint = this._now();\r\n        }\r\n    }\r\n\r\n    get currentKBps() {\r\n        this.addBytes(0);\r\n\r\n        let durationSeconds = (this._now() - this._lastCheckpoint) / 1000;\r\n        if (durationSeconds == 0) durationSeconds = 1;\r\n        return (this._intervalBytes / durationSeconds) / 1024;\r\n    }\r\n\r\n    get lastSecondKBps() {\r\n        this.addBytes(0);\r\n\r\n        if (this._lastSecondBytes !== 0) {\r\n            return this._lastSecondBytes / 1024;\r\n        } else {  // lastSecondBytes === 0\r\n            if (this._now() - this._lastCheckpoint >= 500) {\r\n                // if time interval since last checkpoint has exceeded 500ms\r\n                // the speed is nearly accurate\r\n                return this.currentKBps;\r\n            } else {\r\n                // We don't know\r\n                return 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    get averageKBps() {\r\n        let durationSeconds = (this._now() - this._firstCheckpoint) / 1000;\r\n        return (this._totalBytes / durationSeconds) / 1024;\r\n    }\r\n\r\n}\r\n\r\nexport default SpeedSampler;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './loader.js';\r\nimport {RuntimeException} from '../utils/exception.js';\r\n\r\n// For FLV over WebSocket live stream\r\nclass WebSocketLoader extends BaseLoader {\r\n\r\n    static isSupported() {\r\n        try {\r\n            return (typeof self.WebSocket !== 'undefined');\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    constructor() {\r\n        super('websocket-loader');\r\n        this.TAG = 'WebSocketLoader';\r\n\r\n        this._needStash = true;\r\n\r\n        this._ws = null;\r\n        this._requestAbort = false;\r\n        this._receivedLength = 0;\r\n    }\r\n\r\n    destroy() {\r\n        if (this._ws) {\r\n            this.abort();\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    open(dataSource) {\r\n        try {\r\n            let ws = this._ws = new self.WebSocket(dataSource.url);\r\n            ws.binaryType = 'arraybuffer';\r\n            ws.onopen = this._onWebSocketOpen.bind(this);\r\n            ws.onclose = this._onWebSocketClose.bind(this);\r\n            ws.onmessage = this._onWebSocketMessage.bind(this);\r\n            ws.onerror = this._onWebSocketError.bind(this);\r\n\r\n            this._status = LoaderStatus.kConnecting;\r\n        } catch (e) {\r\n            this._status = LoaderStatus.kError;\r\n\r\n            let info = {code: e.code, msg: e.message};\r\n\r\n            if (this._onError) {\r\n                this._onError(LoaderErrors.EXCEPTION, info);\r\n            } else {\r\n                throw new RuntimeException(info.msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    abort() {\r\n        let ws = this._ws;\r\n        if (ws && (ws.readyState === 0 || ws.readyState === 1)) {  // CONNECTING || OPEN\r\n            this._requestAbort = true;\r\n            ws.close();\r\n        }\r\n\r\n        this._ws = null;\r\n        this._status = LoaderStatus.kComplete;\r\n    }\r\n\r\n    _onWebSocketOpen(e) {\r\n        this._status = LoaderStatus.kBuffering;\r\n    }\r\n\r\n    _onWebSocketClose(e) {\r\n        if (this._requestAbort === true) {\r\n            this._requestAbort = false;\r\n            return;\r\n        }\r\n\r\n        this._status = LoaderStatus.kComplete;\r\n\r\n        if (this._onComplete) {\r\n            this._onComplete(0, this._receivedLength - 1);\r\n        }\r\n    }\r\n\r\n    _onWebSocketMessage(e) {\r\n        if (e.data instanceof ArrayBuffer) {\r\n            this._dispatchArrayBuffer(e.data);\r\n        } else if (e.data instanceof Blob) {\r\n            let reader = new FileReader();\r\n            reader.onload = () => {\r\n                this._dispatchArrayBuffer(reader.result);\r\n            };\r\n            reader.readAsArrayBuffer(e.data);\r\n        } else {\r\n            this._status = LoaderStatus.kError;\r\n            let info = {code: -1, msg: 'Unsupported WebSocket message type: ' + e.data.constructor.name};\r\n\r\n            if (this._onError) {\r\n                this._onError(LoaderErrors.EXCEPTION, info);\r\n            } else {\r\n                throw new RuntimeException(info.msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    _dispatchArrayBuffer(arraybuffer) {\r\n        let chunk = arraybuffer;\r\n        let byteStart = this._receivedLength;\r\n        this._receivedLength += chunk.byteLength;\r\n\r\n        if (this._onDataArrival) {\r\n            this._onDataArrival(chunk, byteStart, this._receivedLength);\r\n        }\r\n    }\r\n\r\n    _onWebSocketError(e) {\r\n        this._status = LoaderStatus.kError;\r\n\r\n        let info = {\r\n            code: e.code,\r\n            msg: e.message\r\n        };\r\n\r\n        if (this._onError) {\r\n            this._onError(LoaderErrors.EXCEPTION, info);\r\n        } else {\r\n            throw new RuntimeException(info.msg);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default WebSocketLoader;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './loader.js';\r\nimport {RuntimeException} from '../utils/exception.js';\r\n\r\n// For FireFox browser which supports `xhr.responseType = 'moz-chunked-arraybuffer'`\r\nclass MozChunkedLoader extends BaseLoader {\r\n\r\n    static isSupported() {\r\n        try {\r\n            let xhr = new XMLHttpRequest();\r\n            // Firefox 37- requires .open() to be called before setting responseType\r\n            xhr.open('GET', 'https://example.com', true);\r\n            xhr.responseType = 'moz-chunked-arraybuffer';\r\n            return (xhr.responseType === 'moz-chunked-arraybuffer');\r\n        } catch (e) {\r\n            Log.w('MozChunkedLoader', e.message);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    constructor(seekHandler, config) {\r\n        super('xhr-moz-chunked-loader');\r\n        this.TAG = 'MozChunkedLoader';\r\n\r\n        this._seekHandler = seekHandler;\r\n        this._config = config;\r\n        this._needStash = true;\r\n\r\n        this._xhr = null;\r\n        this._requestAbort = false;\r\n        this._contentLength = null;\r\n        this._receivedLength = 0;\r\n    }\r\n\r\n    destroy() {\r\n        if (this.isWorking()) {\r\n            this.abort();\r\n        }\r\n        if (this._xhr) {\r\n            this._xhr.onreadystatechange = null;\r\n            this._xhr.onprogress = null;\r\n            this._xhr.onloadend = null;\r\n            this._xhr.onerror = null;\r\n            this._xhr = null;\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    open(dataSource, range) {\r\n        this._dataSource = dataSource;\r\n        this._range = range;\r\n\r\n        let sourceURL = dataSource.url;\r\n        if (this._config.reuseRedirectedURL && dataSource.redirectedURL != undefined) {\r\n            sourceURL = dataSource.redirectedURL;\r\n        }\r\n\r\n        let seekConfig = this._seekHandler.getConfig(sourceURL, range);\r\n        this._requestURL = seekConfig.url;\r\n\r\n        let xhr = this._xhr = new XMLHttpRequest();\r\n        xhr.open('GET', seekConfig.url, true);\r\n        xhr.responseType = 'moz-chunked-arraybuffer';\r\n        xhr.onreadystatechange = this._onReadyStateChange.bind(this);\r\n        xhr.onprogress = this._onProgress.bind(this);\r\n        xhr.onloadend = this._onLoadEnd.bind(this);\r\n        xhr.onerror = this._onXhrError.bind(this);\r\n\r\n        // cors is auto detected and enabled by xhr\r\n\r\n        // withCredentials is disabled by default\r\n        if (dataSource.withCredentials) {\r\n            xhr.withCredentials = true;\r\n        }\r\n\r\n        if (typeof seekConfig.headers === 'object') {\r\n            let headers = seekConfig.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // add additional headers\r\n        if (typeof this._config.headers === 'object') {\r\n            let headers = this._config.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        this._status = LoaderStatus.kConnecting;\r\n        xhr.send();\r\n    }\r\n\r\n    abort() {\r\n        this._requestAbort = true;\r\n        if (this._xhr) {\r\n            this._xhr.abort();\r\n        }\r\n        this._status = LoaderStatus.kComplete;\r\n    }\r\n\r\n    _onReadyStateChange(e) {\r\n        let xhr = e.target;\r\n\r\n        if (xhr.readyState === 2) {  // HEADERS_RECEIVED\r\n            if (xhr.responseURL != undefined && xhr.responseURL !== this._requestURL) {\r\n                if (this._onURLRedirect) {\r\n                    let redirectedURL = this._seekHandler.removeURLParameters(xhr.responseURL);\r\n                    this._onURLRedirect(redirectedURL);\r\n                }\r\n            }\r\n\r\n            if (xhr.status !== 0 && (xhr.status < 200 || xhr.status > 299)) {\r\n                this._status = LoaderStatus.kError;\r\n                if (this._onError) {\r\n                    this._onError(LoaderErrors.HTTP_STATUS_CODE_INVALID, {code: xhr.status, msg: xhr.statusText});\r\n                } else {\r\n                    throw new RuntimeException('MozChunkedLoader: Http code invalid, ' + xhr.status + ' ' + xhr.statusText);\r\n                }\r\n            } else {\r\n                this._status = LoaderStatus.kBuffering;\r\n            }\r\n        }\r\n    }\r\n\r\n    _onProgress(e) {\r\n        if (this._status === LoaderStatus.kError) {\r\n            // Ignore error response\r\n            return;\r\n        }\r\n\r\n        if (this._contentLength === null) {\r\n            if (e.total !== null && e.total !== 0) {\r\n                this._contentLength = e.total;\r\n                if (this._onContentLengthKnown) {\r\n                    this._onContentLengthKnown(this._contentLength);\r\n                }\r\n            }\r\n        }\r\n\r\n        let chunk = e.target.response;\r\n        let byteStart = this._range.from + this._receivedLength;\r\n        this._receivedLength += chunk.byteLength;\r\n\r\n        if (this._onDataArrival) {\r\n            this._onDataArrival(chunk, byteStart, this._receivedLength);\r\n        }\r\n    }\r\n\r\n    _onLoadEnd(e) {\r\n        if (this._requestAbort === true) {\r\n            this._requestAbort = false;\r\n            return;\r\n        } else if (this._status === LoaderStatus.kError) {\r\n            return;\r\n        }\r\n\r\n        this._status = LoaderStatus.kComplete;\r\n        if (this._onComplete) {\r\n            this._onComplete(this._range.from, this._range.from + this._receivedLength - 1);\r\n        }\r\n    }\r\n\r\n    _onXhrError(e) {\r\n        this._status = LoaderStatus.kError;\r\n        let type = 0;\r\n        let info = null;\r\n\r\n        if (this._contentLength && e.loaded < this._contentLength) {\r\n            type = LoaderErrors.EARLY_EOF;\r\n            info = {code: -1, msg: 'Moz-Chunked stream meet Early-Eof'};\r\n        } else {\r\n            type = LoaderErrors.EXCEPTION;\r\n            info = {code: -1, msg: e.constructor.name + ' ' + e.type};\r\n        }\r\n\r\n        if (this._onError) {\r\n            this._onError(type, info);\r\n        } else {\r\n            throw new RuntimeException(info.msg);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default MozChunkedLoader;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './loader.js';\r\nimport {RuntimeException} from '../utils/exception.js';\r\n\r\n/* Notice: ms-stream may cause IE/Edge browser crash if seek too frequently!!!\r\n * The browser may crash in wininet.dll. Disable for now.\r\n *\r\n * For IE11/Edge browser by microsoft which supports `xhr.responseType = 'ms-stream'`\r\n * Notice that ms-stream API sucks. The buffer is always expanding along with downloading.\r\n *\r\n * We need to abort the xhr if buffer size exceeded limit size (e.g. 16 MiB), then do reconnect.\r\n * in order to release previous ArrayBuffer to avoid memory leak\r\n *\r\n * Otherwise, the ArrayBuffer will increase to a terrible size that equals final file size.\r\n */\r\nclass MSStreamLoader extends BaseLoader {\r\n\r\n    static isSupported() {\r\n        try {\r\n            if (typeof self.MSStream === 'undefined' || typeof self.MSStreamReader === 'undefined') {\r\n                return false;\r\n            }\r\n\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('GET', 'https://example.com', true);\r\n            xhr.responseType = 'ms-stream';\r\n            return (xhr.responseType === 'ms-stream');\r\n        } catch (e) {\r\n            Log.w('MSStreamLoader', e.message);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    constructor(seekHandler, config) {\r\n        super('xhr-msstream-loader');\r\n        this.TAG = 'MSStreamLoader';\r\n\r\n        this._seekHandler = seekHandler;\r\n        this._config = config;\r\n        this._needStash = true;\r\n\r\n        this._xhr = null;\r\n        this._reader = null;  // MSStreamReader\r\n\r\n        this._totalRange = null;\r\n        this._currentRange = null;\r\n\r\n        this._currentRequestURL = null;\r\n        this._currentRedirectedURL = null;\r\n\r\n        this._contentLength = null;\r\n        this._receivedLength = 0;\r\n\r\n        this._bufferLimit = 16 * 1024 * 1024;  // 16MB\r\n        this._lastTimeBufferSize = 0;\r\n        this._isReconnecting = false;\r\n    }\r\n\r\n    destroy() {\r\n        if (this.isWorking()) {\r\n            this.abort();\r\n        }\r\n        if (this._reader) {\r\n            this._reader.onprogress = null;\r\n            this._reader.onload = null;\r\n            this._reader.onerror = null;\r\n            this._reader = null;\r\n        }\r\n        if (this._xhr) {\r\n            this._xhr.onreadystatechange = null;\r\n            this._xhr = null;\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    open(dataSource, range) {\r\n        this._internalOpen(dataSource, range, false);\r\n    }\r\n\r\n    _internalOpen(dataSource, range, isSubrange) {\r\n        this._dataSource = dataSource;\r\n\r\n        if (!isSubrange) {\r\n            this._totalRange = range;\r\n        } else {\r\n            this._currentRange = range;\r\n        }\r\n\r\n        let sourceURL = dataSource.url;\r\n        if (this._config.reuseRedirectedURL) {\r\n            if (this._currentRedirectedURL != undefined) {\r\n                sourceURL = this._currentRedirectedURL;\r\n            } else if (dataSource.redirectedURL != undefined) {\r\n                sourceURL = dataSource.redirectedURL;\r\n            }\r\n        }\r\n\r\n        let seekConfig = this._seekHandler.getConfig(sourceURL, range);\r\n        this._currentRequestURL = seekConfig.url;\r\n\r\n        let reader = this._reader = new self.MSStreamReader();\r\n        reader.onprogress = this._msrOnProgress.bind(this);\r\n        reader.onload = this._msrOnLoad.bind(this);\r\n        reader.onerror = this._msrOnError.bind(this);\r\n\r\n        let xhr = this._xhr = new XMLHttpRequest();\r\n        xhr.open('GET', seekConfig.url, true);\r\n        xhr.responseType = 'ms-stream';\r\n        xhr.onreadystatechange = this._xhrOnReadyStateChange.bind(this);\r\n        xhr.onerror = this._xhrOnError.bind(this);\r\n\r\n        if (dataSource.withCredentials) {\r\n            xhr.withCredentials = true;\r\n        }\r\n\r\n        if (typeof seekConfig.headers === 'object') {\r\n            let headers = seekConfig.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // add additional headers\r\n        if (typeof this._config.headers === 'object') {\r\n            let headers = this._config.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this._isReconnecting) {\r\n            this._isReconnecting = false;\r\n        } else {\r\n            this._status = LoaderStatus.kConnecting;\r\n        }\r\n        xhr.send();\r\n    }\r\n\r\n    abort() {\r\n        this._internalAbort();\r\n        this._status = LoaderStatus.kComplete;\r\n    }\r\n\r\n    _internalAbort() {\r\n        if (this._reader) {\r\n            if (this._reader.readyState === 1) {  // LOADING\r\n                this._reader.abort();\r\n            }\r\n            this._reader.onprogress = null;\r\n            this._reader.onload = null;\r\n            this._reader.onerror = null;\r\n            this._reader = null;\r\n        }\r\n        if (this._xhr) {\r\n            this._xhr.abort();\r\n            this._xhr.onreadystatechange = null;\r\n            this._xhr = null;\r\n        }\r\n    }\r\n\r\n    _xhrOnReadyStateChange(e) {\r\n        let xhr = e.target;\r\n\r\n        if (xhr.readyState === 2) {  // HEADERS_RECEIVED\r\n            if (xhr.status >= 200 && xhr.status <= 299) {\r\n                this._status = LoaderStatus.kBuffering;\r\n\r\n                if (xhr.responseURL != undefined) {\r\n                    let redirectedURL = this._seekHandler.removeURLParameters(xhr.responseURL);\r\n                    if (xhr.responseURL !== this._currentRequestURL && redirectedURL !== this._currentRedirectedURL) {\r\n                        this._currentRedirectedURL = redirectedURL;\r\n                        if (this._onURLRedirect) {\r\n                            this._onURLRedirect(redirectedURL);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let lengthHeader = xhr.getResponseHeader('Content-Length');\r\n                if (lengthHeader != null && this._contentLength == null) {\r\n                    let length = parseInt(lengthHeader);\r\n                    if (length > 0) {\r\n                        this._contentLength = length;\r\n                        if (this._onContentLengthKnown) {\r\n                            this._onContentLengthKnown(this._contentLength);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                this._status = LoaderStatus.kError;\r\n                if (this._onError) {\r\n                    this._onError(LoaderErrors.HTTP_STATUS_CODE_INVALID, {code: xhr.status, msg: xhr.statusText});\r\n                } else {\r\n                    throw new RuntimeException('MSStreamLoader: Http code invalid, ' + xhr.status + ' ' + xhr.statusText);\r\n                }\r\n            }\r\n        } else if (xhr.readyState === 3) {  // LOADING\r\n            if (xhr.status >= 200 && xhr.status <= 299) {\r\n                this._status = LoaderStatus.kBuffering;\r\n\r\n                let msstream = xhr.response;\r\n                this._reader.readAsArrayBuffer(msstream);\r\n            }\r\n        }\r\n    }\r\n\r\n    _xhrOnError(e) {\r\n        this._status = LoaderStatus.kError;\r\n        let type = LoaderErrors.EXCEPTION;\r\n        let info = {code: -1, msg: e.constructor.name + ' ' + e.type};\r\n\r\n        if (this._onError) {\r\n            this._onError(type, info);\r\n        } else {\r\n            throw new RuntimeException(info.msg);\r\n        }\r\n    }\r\n\r\n    _msrOnProgress(e) {\r\n        let reader = e.target;\r\n        let bigbuffer = reader.result;\r\n        if (bigbuffer == null) {  // result may be null, workaround for buggy M$\r\n            this._doReconnectIfNeeded();\r\n            return;\r\n        }\r\n\r\n        let slice = bigbuffer.slice(this._lastTimeBufferSize);\r\n        this._lastTimeBufferSize = bigbuffer.byteLength;\r\n        let byteStart = this._totalRange.from + this._receivedLength;\r\n        this._receivedLength += slice.byteLength;\r\n\r\n        if (this._onDataArrival) {\r\n            this._onDataArrival(slice, byteStart, this._receivedLength);\r\n        }\r\n\r\n        if (bigbuffer.byteLength >= this._bufferLimit) {\r\n            Log.v(this.TAG, `MSStream buffer exceeded max size near ${byteStart + slice.byteLength}, reconnecting...`);\r\n            this._doReconnectIfNeeded();\r\n        }\r\n    }\r\n\r\n    _doReconnectIfNeeded() {\r\n        if (this._contentLength == null || this._receivedLength < this._contentLength) {\r\n            this._isReconnecting = true;\r\n            this._lastTimeBufferSize = 0;\r\n            this._internalAbort();\r\n\r\n            let range = {\r\n                from: this._totalRange.from + this._receivedLength,\r\n                to: -1\r\n            };\r\n            this._internalOpen(this._dataSource, range, true);\r\n        }\r\n    }\r\n\r\n    _msrOnLoad(e) {  // actually it is onComplete event\r\n        this._status = LoaderStatus.kComplete;\r\n        if (this._onComplete) {\r\n            this._onComplete(this._totalRange.from, this._totalRange.from + this._receivedLength - 1);\r\n        }\r\n    }\r\n\r\n    _msrOnError(e) {\r\n        this._status = LoaderStatus.kError;\r\n        let type = 0;\r\n        let info = null;\r\n\r\n        if (this._contentLength && this._receivedLength < this._contentLength) {\r\n            type = LoaderErrors.EARLY_EOF;\r\n            info = {code: -1, msg: 'MSStream meet Early-Eof'};\r\n        } else {\r\n            type = LoaderErrors.EARLY_EOF;\r\n            info = {code: -1, msg: e.constructor.name + ' ' + e.type};\r\n        }\r\n\r\n        if (this._onError) {\r\n            this._onError(type, info);\r\n        } else {\r\n            throw new RuntimeException(info.msg);\r\n        }\r\n    }\r\n}\r\n\r\nexport default MSStreamLoader;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport SpeedSampler from './speed-sampler.js';\r\nimport {BaseLoader, LoaderStatus, LoaderErrors} from './loader.js';\r\nimport {RuntimeException} from '../utils/exception.js';\r\n\r\n// Universal IO Loader, implemented by adding Range header in xhr's request header\r\nclass RangeLoader extends BaseLoader {\r\n\r\n    static isSupported() {\r\n        try {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('GET', 'https://example.com', true);\r\n            xhr.responseType = 'arraybuffer';\r\n            return (xhr.responseType === 'arraybuffer');\r\n        } catch (e) {\r\n            Log.w('RangeLoader', e.message);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    constructor(seekHandler, config) {\r\n        super('xhr-range-loader');\r\n        this.TAG = 'RangeLoader';\r\n\r\n        this._seekHandler = seekHandler;\r\n        this._config = config;\r\n        this._needStash = false;\r\n\r\n        this._chunkSizeKBList = [\r\n            128, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 5120, 6144, 7168, 8192\r\n        ];\r\n        this._currentChunkSizeKB = 384;\r\n        this._currentSpeedNormalized = 0;\r\n        this._zeroSpeedChunkCount = 0;\r\n\r\n        this._xhr = null;\r\n        this._speedSampler = new SpeedSampler();\r\n\r\n        this._requestAbort = false;\r\n        this._waitForTotalLength = false;\r\n        this._totalLengthReceived = false;\r\n\r\n        this._currentRequestURL = null;\r\n        this._currentRedirectedURL = null;\r\n        this._currentRequestRange = null;\r\n        this._totalLength = null;  // size of the entire file\r\n        this._contentLength = null;  // Content-Length of entire request range\r\n        this._receivedLength = 0;  // total received bytes\r\n        this._lastTimeLoaded = 0;  // received bytes of current request sub-range\r\n    }\r\n\r\n    destroy() {\r\n        if (this.isWorking()) {\r\n            this.abort();\r\n        }\r\n        if (this._xhr) {\r\n            this._xhr.onreadystatechange = null;\r\n            this._xhr.onprogress = null;\r\n            this._xhr.onload = null;\r\n            this._xhr.onerror = null;\r\n            this._xhr = null;\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    get currentSpeed() {\r\n        return this._speedSampler.lastSecondKBps;\r\n    }\r\n\r\n    open(dataSource, range) {\r\n        this._dataSource = dataSource;\r\n        this._range = range;\r\n        this._status = LoaderStatus.kConnecting;\r\n\r\n        let useRefTotalLength = false;\r\n        if (this._dataSource.filesize != undefined && this._dataSource.filesize !== 0) {\r\n            useRefTotalLength = true;\r\n            this._totalLength = this._dataSource.filesize;\r\n        }\r\n\r\n        if (!this._totalLengthReceived && !useRefTotalLength) {\r\n            // We need total filesize\r\n            this._waitForTotalLength = true;\r\n            this._internalOpen(this._dataSource, {from: 0, to: -1});\r\n        } else {\r\n            // We have filesize, start loading\r\n            this._openSubRange();\r\n        }\r\n    }\r\n\r\n    _openSubRange() {\r\n        let chunkSize = this._currentChunkSizeKB * 1024;\r\n\r\n        let from = this._range.from + this._receivedLength;\r\n        let to = from + chunkSize;\r\n\r\n        if (this._contentLength != null) {\r\n            if (to - this._range.from >= this._contentLength) {\r\n                to = this._range.from + this._contentLength - 1;\r\n            }\r\n        }\r\n\r\n        this._currentRequestRange = {from, to};\r\n        this._internalOpen(this._dataSource, this._currentRequestRange);\r\n    }\r\n\r\n    _internalOpen(dataSource, range) {\r\n        this._lastTimeLoaded = 0;\r\n\r\n        let sourceURL = dataSource.url;\r\n        if (this._config.reuseRedirectedURL) {\r\n            if (this._currentRedirectedURL != undefined) {\r\n                sourceURL = this._currentRedirectedURL;\r\n            } else if (dataSource.redirectedURL != undefined) {\r\n                sourceURL = dataSource.redirectedURL;\r\n            }\r\n        }\r\n\r\n        let seekConfig = this._seekHandler.getConfig(sourceURL, range);\r\n        this._currentRequestURL = seekConfig.url;\r\n\r\n        let xhr = this._xhr = new XMLHttpRequest();\r\n        xhr.open('GET', seekConfig.url, true);\r\n        xhr.responseType = 'arraybuffer';\r\n        xhr.onreadystatechange = this._onReadyStateChange.bind(this);\r\n        xhr.onprogress = this._onProgress.bind(this);\r\n        xhr.onload = this._onLoad.bind(this);\r\n        xhr.onerror = this._onXhrError.bind(this);\r\n\r\n        if (dataSource.withCredentials) {\r\n            xhr.withCredentials = true;\r\n        }\r\n\r\n        if (typeof seekConfig.headers === 'object') {\r\n            let headers = seekConfig.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // add additional headers\r\n        if (typeof this._config.headers === 'object') {\r\n            let headers = this._config.headers;\r\n\r\n            for (let key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    xhr.setRequestHeader(key, headers[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        xhr.send();\r\n    }\r\n\r\n    abort() {\r\n        this._requestAbort = true;\r\n        this._internalAbort();\r\n        this._status = LoaderStatus.kComplete;\r\n    }\r\n\r\n    _internalAbort() {\r\n        if (this._xhr) {\r\n            this._xhr.onreadystatechange = null;\r\n            this._xhr.onprogress = null;\r\n            this._xhr.onload = null;\r\n            this._xhr.onerror = null;\r\n            this._xhr.abort();\r\n            this._xhr = null;\r\n        }\r\n    }\r\n\r\n    _onReadyStateChange(e) {\r\n        let xhr = e.target;\r\n\r\n        if (xhr.readyState === 2) {  // HEADERS_RECEIVED\r\n            if (xhr.responseURL != undefined) {  // if the browser support this property\r\n                let redirectedURL = this._seekHandler.removeURLParameters(xhr.responseURL);\r\n                if (xhr.responseURL !== this._currentRequestURL && redirectedURL !== this._currentRedirectedURL) {\r\n                    this._currentRedirectedURL = redirectedURL;\r\n                    if (this._onURLRedirect) {\r\n                        this._onURLRedirect(redirectedURL);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if ((xhr.status >= 200 && xhr.status <= 299)) {\r\n                if (this._waitForTotalLength) {\r\n                    return;\r\n                }\r\n                this._status = LoaderStatus.kBuffering;\r\n            } else {\r\n                this._status = LoaderStatus.kError;\r\n                if (this._onError) {\r\n                    this._onError(LoaderErrors.HTTP_STATUS_CODE_INVALID, {code: xhr.status, msg: xhr.statusText});\r\n                } else {\r\n                    throw new RuntimeException('RangeLoader: Http code invalid, ' + xhr.status + ' ' + xhr.statusText);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _onProgress(e) {\r\n        if (this._status === LoaderStatus.kError) {\r\n            // Ignore error response\r\n            return;\r\n        }\r\n\r\n        if (this._contentLength === null) {\r\n            let openNextRange = false;\r\n\r\n            if (this._waitForTotalLength) {\r\n                this._waitForTotalLength = false;\r\n                this._totalLengthReceived = true;\r\n                openNextRange = true;\r\n\r\n                let total = e.total;\r\n                this._internalAbort();\r\n                if (total != null & total !== 0) {\r\n                    this._totalLength = total;\r\n                }\r\n            }\r\n\r\n            // calculate currrent request range's contentLength\r\n            if (this._range.to === -1) {\r\n                this._contentLength = this._totalLength - this._range.from;\r\n            } else {  // to !== -1\r\n                this._contentLength = this._range.to - this._range.from + 1;\r\n            }\r\n\r\n            if (openNextRange) {\r\n                this._openSubRange();\r\n                return;\r\n            }\r\n            if (this._onContentLengthKnown) {\r\n                this._onContentLengthKnown(this._contentLength);\r\n            }\r\n        }\r\n\r\n        let delta = e.loaded - this._lastTimeLoaded;\r\n        this._lastTimeLoaded = e.loaded;\r\n        this._speedSampler.addBytes(delta);\r\n    }\r\n\r\n    _normalizeSpeed(input) {\r\n        let list = this._chunkSizeKBList;\r\n        let last = list.length - 1;\r\n        let mid = 0;\r\n        let lbound = 0;\r\n        let ubound = last;\r\n\r\n        if (input < list[0]) {\r\n            return list[0];\r\n        }\r\n\r\n        while (lbound <= ubound) {\r\n            mid = lbound + Math.floor((ubound - lbound) / 2);\r\n            if (mid === last || (input >= list[mid] && input < list[mid + 1])) {\r\n                return list[mid];\r\n            } else if (list[mid] < input) {\r\n                lbound = mid + 1;\r\n            } else {\r\n                ubound = mid - 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    _onLoad(e) {\r\n        if (this._status === LoaderStatus.kError) {\r\n            // Ignore error response\r\n            return;\r\n        }\r\n\r\n        if (this._waitForTotalLength) {\r\n            this._waitForTotalLength = false;\r\n            return;\r\n        }\r\n\r\n        this._lastTimeLoaded = 0;\r\n        let KBps = this._speedSampler.lastSecondKBps;\r\n        if (KBps === 0) {\r\n            this._zeroSpeedChunkCount++;\r\n            if (this._zeroSpeedChunkCount >= 3) {\r\n                // Try get currentKBps after 3 chunks\r\n                KBps = this._speedSampler.currentKBps;\r\n            }\r\n        }\r\n\r\n        if (KBps !== 0) {\r\n            let normalized = this._normalizeSpeed(KBps);\r\n            if (this._currentSpeedNormalized !== normalized) {\r\n                this._currentSpeedNormalized = normalized;\r\n                this._currentChunkSizeKB = normalized;\r\n            }\r\n        }\r\n\r\n        let chunk = e.target.response;\r\n        let byteStart = this._range.from + this._receivedLength;\r\n        this._receivedLength += chunk.byteLength;\r\n\r\n        let reportComplete = false;\r\n\r\n        if (this._contentLength != null && this._receivedLength < this._contentLength) {\r\n            // continue load next chunk\r\n            this._openSubRange();\r\n        } else {\r\n            reportComplete = true;\r\n        }\r\n\r\n        // dispatch received chunk\r\n        if (this._onDataArrival) {\r\n            this._onDataArrival(chunk, byteStart, this._receivedLength);\r\n        }\r\n\r\n        if (reportComplete) {\r\n            this._status = LoaderStatus.kComplete;\r\n            if (this._onComplete) {\r\n                this._onComplete(this._range.from, this._range.from + this._receivedLength - 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    _onXhrError(e) {\r\n        this._status = LoaderStatus.kError;\r\n        let type = 0;\r\n        let info = null;\r\n\r\n        if (this._contentLength && this._receivedLength > 0\r\n                                && this._receivedLength < this._contentLength) {\r\n            type = LoaderErrors.EARLY_EOF;\r\n            info = {code: -1, msg: 'RangeLoader meet Early-Eof'};\r\n        } else {\r\n            type = LoaderErrors.EXCEPTION;\r\n            info = {code: -1, msg: e.constructor.name + ' ' + e.type};\r\n        }\r\n\r\n        if (this._onError) {\r\n            this._onError(type, info);\r\n        } else {\r\n            throw new RuntimeException(info.msg);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default RangeLoader;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport Log from '../utils/logger.js';\r\nimport Browser from '../utils/browser.js';\r\nimport PlayerEvents from './player-events.js';\r\nimport Transmuxer from '../core/transmuxer.js';\r\nimport TransmuxingEvents from '../core/transmuxing-events.js';\r\nimport MSEController from '../core/mse-controller.js';\r\nimport MSEEvents from '../core/mse-events.js';\r\nimport {ErrorTypes, ErrorDetails} from './player-errors.js';\r\nimport {createDefaultConfig} from '../config.js';\r\nimport {InvalidArgumentException, IllegalStateException} from '../utils/exception.js';\r\n\r\nclass FlvPlayer {\r\n\r\n    constructor(mediaDataSource, config) {\r\n        this.TAG = 'FlvPlayer';\r\n        this._type = 'FlvPlayer';\r\n        this._emitter = new EventEmitter();\r\n\r\n        this._config = createDefaultConfig();\r\n        if (typeof config === 'object') {\r\n            Object.assign(this._config, config);\r\n        }\r\n\r\n        if (mediaDataSource.type.toLowerCase() !== 'flv') {\r\n            throw new InvalidArgumentException('FlvPlayer requires an flv MediaDataSource input!');\r\n        }\r\n\r\n        if (mediaDataSource.isLive === true) {\r\n            this._config.isLive = true;\r\n        }\r\n\r\n        this.e = {\r\n            onvLoadedMetadata: this._onvLoadedMetadata.bind(this),\r\n            onvSeeking: this._onvSeeking.bind(this),\r\n            onvCanPlay: this._onvCanPlay.bind(this),\r\n            onvStalled: this._onvStalled.bind(this),\r\n            onvProgress: this._onvProgress.bind(this)\r\n        };\r\n\r\n        if (self.performance && self.performance.now) {\r\n            this._now = self.performance.now.bind(self.performance);\r\n        } else {\r\n            this._now = Date.now;\r\n        }\r\n\r\n        this._pendingSeekTime = null;  // in seconds\r\n        this._requestSetTime = false;\r\n        this._seekpointRecord = null;\r\n        this._progressChecker = null;\r\n\r\n        this._mediaDataSource = mediaDataSource;\r\n        this._mediaElement = null;\r\n        this._msectl = null;\r\n        this._transmuxer = null;\r\n\r\n        this._mseSourceOpened = false;\r\n        this._hasPendingLoad = false;\r\n        this._receivedCanPlay = false;\r\n\r\n        this._mediaInfo = null;\r\n        this._statisticsInfo = null;\r\n\r\n        let chromeNeedIDRFix = (Browser.chrome &&\r\n                               (Browser.version.major < 50 ||\r\n                               (Browser.version.major === 50 && Browser.version.build < 2661)));\r\n        this._alwaysSeekKeyframe = (chromeNeedIDRFix || Browser.msedge || Browser.msie) ? true : false;\r\n\r\n        if (this._alwaysSeekKeyframe) {\r\n            this._config.accurateSeek = false;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this._progressChecker != null) {\r\n            window.clearInterval(this._progressChecker);\r\n            this._progressChecker = null;\r\n        }\r\n        if (this._transmuxer) {\r\n            this.unload();\r\n        }\r\n        if (this._mediaElement) {\r\n            this.detachMediaElement();\r\n        }\r\n        this.e = null;\r\n        this._mediaDataSource = null;\r\n\r\n        this._emitter.removeAllListeners();\r\n        this._emitter = null;\r\n    }\r\n\r\n    on(event, listener) {\r\n        if (event === PlayerEvents.MEDIA_INFO) {\r\n            if (this._mediaInfo != null) {\r\n                Promise.resolve().then(() => {\r\n                    this._emitter.emit(PlayerEvents.MEDIA_INFO, this.mediaInfo);\r\n                });\r\n            }\r\n        } else if (event === PlayerEvents.STATISTICS_INFO) {\r\n            if (this._statisticsInfo != null) {\r\n                Promise.resolve().then(() => {\r\n                    this._emitter.emit(PlayerEvents.STATISTICS_INFO, this.statisticsInfo);\r\n                });\r\n            }\r\n        }\r\n        this._emitter.addListener(event, listener);\r\n    }\r\n\r\n    off(event, listener) {\r\n        this._emitter.removeListener(event, listener);\r\n    }\r\n\r\n    attachMediaElement(mediaElement) {\r\n        this._mediaElement = mediaElement;\r\n        mediaElement.addEventListener('loadedmetadata', this.e.onvLoadedMetadata);\r\n        mediaElement.addEventListener('seeking', this.e.onvSeeking);\r\n        mediaElement.addEventListener('canplay', this.e.onvCanPlay);\r\n        mediaElement.addEventListener('stalled', this.e.onvStalled);\r\n        mediaElement.addEventListener('progress', this.e.onvProgress);\r\n\r\n        this._msectl = new MSEController(this._config);\r\n\r\n        this._msectl.on(MSEEvents.UPDATE_END, this._onmseUpdateEnd.bind(this));\r\n        this._msectl.on(MSEEvents.BUFFER_FULL, this._onmseBufferFull.bind(this));\r\n        this._msectl.on(MSEEvents.SOURCE_OPEN, () => {\r\n            this._mseSourceOpened = true;\r\n            if (this._hasPendingLoad) {\r\n                this._hasPendingLoad = false;\r\n                this.load();\r\n            }\r\n        });\r\n        this._msectl.on(MSEEvents.ERROR, (info) => {\r\n            this._emitter.emit(PlayerEvents.ERROR,\r\n                               ErrorTypes.MEDIA_ERROR,\r\n                               ErrorDetails.MEDIA_MSE_ERROR,\r\n                               info\r\n            );\r\n        });\r\n\r\n        this._msectl.attachMediaElement(mediaElement);\r\n\r\n        if (this._pendingSeekTime != null) {\r\n            try {\r\n                mediaElement.currentTime = this._pendingSeekTime;\r\n                this._pendingSeekTime = null;\r\n            } catch (e) {\r\n                // IE11 may throw InvalidStateError if readyState === 0\r\n                // We can defer set currentTime operation after loadedmetadata\r\n            }\r\n        }\r\n    }\r\n\r\n    detachMediaElement() {\r\n        if (this._mediaElement) {\r\n            this._msectl.detachMediaElement();\r\n            this._mediaElement.removeEventListener('loadedmetadata', this.e.onvLoadedMetadata);\r\n            this._mediaElement.removeEventListener('seeking', this.e.onvSeeking);\r\n            this._mediaElement.removeEventListener('canplay', this.e.onvCanPlay);\r\n            this._mediaElement.removeEventListener('stalled', this.e.onvStalled);\r\n            this._mediaElement.removeEventListener('progress', this.e.onvProgress);\r\n            this._mediaElement = null;\r\n        }\r\n        if (this._msectl) {\r\n            this._msectl.destroy();\r\n            this._msectl = null;\r\n        }\r\n    }\r\n\r\n    load() {\r\n        if (!this._mediaElement) {\r\n            throw new IllegalStateException('HTMLMediaElement must be attached before load()!');\r\n        }\r\n        if (this._transmuxer) {\r\n            throw new IllegalStateException('FlvPlayer.load() has been called, please call unload() first!');\r\n        }\r\n        if (this._hasPendingLoad) {\r\n            return;\r\n        }\r\n\r\n        if (this._config.deferLoadAfterSourceOpen && this._mseSourceOpened === false) {\r\n            this._hasPendingLoad = true;\r\n            return;\r\n        }\r\n\r\n        if (this._mediaElement.readyState > 0) {\r\n            this._requestSetTime = true;\r\n            // IE11 may throw InvalidStateError if readyState === 0\r\n            this._mediaElement.currentTime = 0;\r\n        }\r\n\r\n        this._transmuxer = new Transmuxer(this._mediaDataSource, this._config);\r\n\r\n        this._transmuxer.on(TransmuxingEvents.INIT_SEGMENT, (type, is) => {\r\n            this._msectl.appendInitSegment(is);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.MEDIA_SEGMENT, (type, ms) => {\r\n            this._msectl.appendMediaSegment(ms);\r\n\r\n            // lazyLoad check\r\n            if (this._config.lazyLoad && !this._config.isLive) {\r\n                let currentTime = this._mediaElement.currentTime;\r\n                if (ms.info.endDts >= (currentTime + this._config.lazyLoadMaxDuration) * 1000) {\r\n                    if (this._progressChecker == null) {\r\n                        Log.v(this.TAG, 'Maximum buffering duration exceeded, suspend transmuxing task');\r\n                        this._suspendTransmuxer();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.LOADING_COMPLETE, () => {\r\n            this._msectl.endOfStream();\r\n            this._emitter.emit(PlayerEvents.LOADING_COMPLETE);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.RECOVERED_EARLY_EOF, () => {\r\n            this._emitter.emit(PlayerEvents.RECOVERED_EARLY_EOF);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.IO_ERROR, (detail, info) => {\r\n            this._emitter.emit(PlayerEvents.ERROR, ErrorTypes.NETWORK_ERROR, detail, info);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.DEMUX_ERROR, (detail, info) => {\r\n            this._emitter.emit(PlayerEvents.ERROR, ErrorTypes.MEDIA_ERROR, detail, {code: -1, msg: info});\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.MEDIA_INFO, (mediaInfo) => {\r\n            this._mediaInfo = mediaInfo;\r\n            this._emitter.emit(PlayerEvents.MEDIA_INFO, Object.assign({}, mediaInfo));\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.METADATA_ARRIVED, (metadata) => {\r\n            this._emitter.emit(PlayerEvents.METADATA_ARRIVED, metadata);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.SCRIPTDATA_ARRIVED, (data) => {\r\n            this._emitter.emit(PlayerEvents.SCRIPTDATA_ARRIVED, data);\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.STATISTICS_INFO, (statInfo) => {\r\n            this._statisticsInfo = this._fillStatisticsInfo(statInfo);\r\n            this._emitter.emit(PlayerEvents.STATISTICS_INFO, Object.assign({}, this._statisticsInfo));\r\n        });\r\n        this._transmuxer.on(TransmuxingEvents.RECOMMEND_SEEKPOINT, (milliseconds) => {\r\n            if (this._mediaElement && !this._config.accurateSeek) {\r\n                this._requestSetTime = true;\r\n                this._mediaElement.currentTime = milliseconds / 1000;\r\n            }\r\n        });\r\n\r\n        this._transmuxer.open();\r\n    }\r\n\r\n    unload() {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.pause();\r\n        }\r\n        if (this._msectl) {\r\n            this._msectl.seek(0);\r\n        }\r\n        if (this._transmuxer) {\r\n            this._transmuxer.close();\r\n            this._transmuxer.destroy();\r\n            this._transmuxer = null;\r\n        }\r\n    }\r\n\r\n    play() {\r\n        return this._mediaElement.play();\r\n    }\r\n\r\n    pause() {\r\n        this._mediaElement.pause();\r\n    }\r\n\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    get buffered() {\r\n        return this._mediaElement.buffered;\r\n    }\r\n\r\n    get duration() {\r\n        return this._mediaElement.duration;\r\n    }\r\n\r\n    get volume() {\r\n        return this._mediaElement.volume;\r\n    }\r\n\r\n    set volume(value) {\r\n        this._mediaElement.volume = value;\r\n    }\r\n\r\n    get muted() {\r\n        return this._mediaElement.muted;\r\n    }\r\n\r\n    set muted(muted) {\r\n        this._mediaElement.muted = muted;\r\n    }\r\n\r\n    get currentTime() {\r\n        if (this._mediaElement) {\r\n            return this._mediaElement.currentTime;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    set currentTime(seconds) {\r\n        if (this._mediaElement) {\r\n            this._internalSeek(seconds);\r\n        } else {\r\n            this._pendingSeekTime = seconds;\r\n        }\r\n    }\r\n\r\n    get mediaInfo() {\r\n        return Object.assign({}, this._mediaInfo);\r\n    }\r\n\r\n    get statisticsInfo() {\r\n        if (this._statisticsInfo == null) {\r\n            this._statisticsInfo = {};\r\n        }\r\n        this._statisticsInfo = this._fillStatisticsInfo(this._statisticsInfo);\r\n        return Object.assign({}, this._statisticsInfo);\r\n    }\r\n\r\n    _fillStatisticsInfo(statInfo) {\r\n        statInfo.playerType = this._type;\r\n\r\n        if (!(this._mediaElement instanceof HTMLVideoElement)) {\r\n            return statInfo;\r\n        }\r\n\r\n        let hasQualityInfo = true;\r\n        let decoded = 0;\r\n        let dropped = 0;\r\n\r\n        if (this._mediaElement.getVideoPlaybackQuality) {\r\n            let quality = this._mediaElement.getVideoPlaybackQuality();\r\n            decoded = quality.totalVideoFrames;\r\n            dropped = quality.droppedVideoFrames;\r\n        } else if (this._mediaElement.webkitDecodedFrameCount != undefined) {\r\n            decoded = this._mediaElement.webkitDecodedFrameCount;\r\n            dropped = this._mediaElement.webkitDroppedFrameCount;\r\n        } else {\r\n            hasQualityInfo = false;\r\n        }\r\n\r\n        if (hasQualityInfo) {\r\n            statInfo.decodedFrames = decoded;\r\n            statInfo.droppedFrames = dropped;\r\n        }\r\n\r\n        return statInfo;\r\n    }\r\n\r\n    _onmseUpdateEnd() {\r\n        if (!this._config.lazyLoad || this._config.isLive) {\r\n            return;\r\n        }\r\n\r\n        let buffered = this._mediaElement.buffered;\r\n        let currentTime = this._mediaElement.currentTime;\r\n        let currentRangeStart = 0;\r\n        let currentRangeEnd = 0;\r\n\r\n        for (let i = 0; i < buffered.length; i++) {\r\n            let start = buffered.start(i);\r\n            let end = buffered.end(i);\r\n            if (start <= currentTime && currentTime < end) {\r\n                currentRangeStart = start;\r\n                currentRangeEnd = end;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (currentRangeEnd >= currentTime + this._config.lazyLoadMaxDuration && this._progressChecker == null) {\r\n            Log.v(this.TAG, 'Maximum buffering duration exceeded, suspend transmuxing task');\r\n            this._suspendTransmuxer();\r\n        }\r\n    }\r\n\r\n    _onmseBufferFull() {\r\n        Log.v(this.TAG, 'MSE SourceBuffer is full, suspend transmuxing task');\r\n        if (this._progressChecker == null) {\r\n            this._suspendTransmuxer();\r\n        }\r\n    }\r\n\r\n    _suspendTransmuxer() {\r\n        if (this._transmuxer) {\r\n            this._transmuxer.pause();\r\n\r\n            if (this._progressChecker == null) {\r\n                this._progressChecker = window.setInterval(this._checkProgressAndResume.bind(this), 1000);\r\n            }\r\n        }\r\n    }\r\n\r\n    _checkProgressAndResume() {\r\n        let currentTime = this._mediaElement.currentTime;\r\n        let buffered = this._mediaElement.buffered;\r\n\r\n        let needResume = false;\r\n\r\n        for (let i = 0; i < buffered.length; i++) {\r\n            let from = buffered.start(i);\r\n            let to = buffered.end(i);\r\n            if (currentTime >= from && currentTime < to) {\r\n                if (currentTime >= to - this._config.lazyLoadRecoverDuration) {\r\n                    needResume = true;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (needResume) {\r\n            window.clearInterval(this._progressChecker);\r\n            this._progressChecker = null;\r\n            if (needResume) {\r\n                Log.v(this.TAG, 'Continue loading from paused position');\r\n                this._transmuxer.resume();\r\n            }\r\n        }\r\n    }\r\n\r\n    _isTimepointBuffered(seconds) {\r\n        let buffered = this._mediaElement.buffered;\r\n\r\n        for (let i = 0; i < buffered.length; i++) {\r\n            let from = buffered.start(i);\r\n            let to = buffered.end(i);\r\n            if (seconds >= from && seconds < to) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    _internalSeek(seconds) {\r\n        let directSeek = this._isTimepointBuffered(seconds);\r\n\r\n        let directSeekBegin = false;\r\n        let directSeekBeginTime = 0;\r\n\r\n        if (seconds < 1.0 && this._mediaElement.buffered.length > 0) {\r\n            let videoBeginTime = this._mediaElement.buffered.start(0);\r\n            if ((videoBeginTime < 1.0 && seconds < videoBeginTime) || Browser.safari) {\r\n                directSeekBegin = true;\r\n                // also workaround for Safari: Seek to 0 may cause video stuck, use 0.1 to avoid\r\n                directSeekBeginTime = Browser.safari ? 0.1 : videoBeginTime;\r\n            }\r\n        }\r\n\r\n        if (directSeekBegin) {  // seek to video begin, set currentTime directly if beginPTS buffered\r\n            this._requestSetTime = true;\r\n            this._mediaElement.currentTime = directSeekBeginTime;\r\n        }  else if (directSeek) {  // buffered position\r\n            if (!this._alwaysSeekKeyframe) {\r\n                this._requestSetTime = true;\r\n                this._mediaElement.currentTime = seconds;\r\n            } else {\r\n                let idr = this._msectl.getNearestKeyframe(Math.floor(seconds * 1000));\r\n                this._requestSetTime = true;\r\n                if (idr != null) {\r\n                    this._mediaElement.currentTime = idr.dts / 1000;\r\n                } else {\r\n                    this._mediaElement.currentTime = seconds;\r\n                }\r\n            }\r\n            if (this._progressChecker != null) {\r\n                this._checkProgressAndResume();\r\n            }\r\n        } else {\r\n            if (this._progressChecker != null) {\r\n                window.clearInterval(this._progressChecker);\r\n                this._progressChecker = null;\r\n            }\r\n            this._msectl.seek(seconds);\r\n            this._transmuxer.seek(Math.floor(seconds * 1000));  // in milliseconds\r\n            // no need to set mediaElement.currentTime if non-accurateSeek,\r\n            // just wait for the recommend_seekpoint callback\r\n            if (this._config.accurateSeek) {\r\n                this._requestSetTime = true;\r\n                this._mediaElement.currentTime = seconds;\r\n            }\r\n        }\r\n    }\r\n\r\n    _checkAndApplyUnbufferedSeekpoint() {\r\n        if (this._seekpointRecord) {\r\n            if (this._seekpointRecord.recordTime <= this._now() - 100) {\r\n                let target = this._mediaElement.currentTime;\r\n                this._seekpointRecord = null;\r\n                if (!this._isTimepointBuffered(target)) {\r\n                    if (this._progressChecker != null) {\r\n                        window.clearTimeout(this._progressChecker);\r\n                        this._progressChecker = null;\r\n                    }\r\n                    // .currentTime is consists with .buffered timestamp\r\n                    // Chrome/Edge use DTS, while FireFox/Safari use PTS\r\n                    this._msectl.seek(target);\r\n                    this._transmuxer.seek(Math.floor(target * 1000));\r\n                    // set currentTime if accurateSeek, or wait for recommend_seekpoint callback\r\n                    if (this._config.accurateSeek) {\r\n                        this._requestSetTime = true;\r\n                        this._mediaElement.currentTime = target;\r\n                    }\r\n                }\r\n            } else {\r\n                window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this), 50);\r\n            }\r\n        }\r\n    }\r\n\r\n    _checkAndResumeStuckPlayback(stalled) {\r\n        let media = this._mediaElement;\r\n        if (stalled || !this._receivedCanPlay || media.readyState < 2) {  // HAVE_CURRENT_DATA\r\n            let buffered = media.buffered;\r\n            if (buffered.length > 0 && media.currentTime < buffered.start(0)) {\r\n                Log.w(this.TAG, `Playback seems stuck at ${media.currentTime}, seek to ${buffered.start(0)}`);\r\n                this._requestSetTime = true;\r\n                this._mediaElement.currentTime = buffered.start(0);\r\n                this._mediaElement.removeEventListener('progress', this.e.onvProgress);\r\n            }\r\n        } else {\r\n            // Playback didn't stuck, remove progress event listener\r\n            this._mediaElement.removeEventListener('progress', this.e.onvProgress);\r\n        }\r\n    }\r\n\r\n    _onvLoadedMetadata(e) {\r\n        if (this._pendingSeekTime != null) {\r\n            this._mediaElement.currentTime = this._pendingSeekTime;\r\n            this._pendingSeekTime = null;\r\n        }\r\n    }\r\n\r\n    _onvSeeking(e) {  // handle seeking request from browser's progress bar\r\n        let target = this._mediaElement.currentTime;\r\n        let buffered = this._mediaElement.buffered;\r\n\r\n        if (this._requestSetTime) {\r\n            this._requestSetTime = false;\r\n            return;\r\n        }\r\n\r\n        if (target < 1.0 && buffered.length > 0) {\r\n            // seek to video begin, set currentTime directly if beginPTS buffered\r\n            let videoBeginTime = buffered.start(0);\r\n            if ((videoBeginTime < 1.0 && target < videoBeginTime) || Browser.safari) {\r\n                this._requestSetTime = true;\r\n                // also workaround for Safari: Seek to 0 may cause video stuck, use 0.1 to avoid\r\n                this._mediaElement.currentTime = Browser.safari ? 0.1 : videoBeginTime;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this._isTimepointBuffered(target)) {\r\n            if (this._alwaysSeekKeyframe) {\r\n                let idr = this._msectl.getNearestKeyframe(Math.floor(target * 1000));\r\n                if (idr != null) {\r\n                    this._requestSetTime = true;\r\n                    this._mediaElement.currentTime = idr.dts / 1000;\r\n                }\r\n            }\r\n            if (this._progressChecker != null) {\r\n                this._checkProgressAndResume();\r\n            }\r\n            return;\r\n        }\r\n\r\n        this._seekpointRecord = {\r\n            seekPoint: target,\r\n            recordTime: this._now()\r\n        };\r\n        window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this), 50);\r\n    }\r\n\r\n    _onvCanPlay(e) {\r\n        this._receivedCanPlay = true;\r\n        this._mediaElement.removeEventListener('canplay', this.e.onvCanPlay);\r\n    }\r\n\r\n    _onvStalled(e) {\r\n        this._checkAndResumeStuckPlayback(true);\r\n    }\r\n\r\n    _onvProgress(e) {\r\n        this._checkAndResumeStuckPlayback();\r\n    }\r\n\r\n}\r\n\r\nexport default FlvPlayer;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport PlayerEvents from './player-events.js';\r\nimport {createDefaultConfig} from '../config.js';\r\nimport {InvalidArgumentException, IllegalStateException} from '../utils/exception.js';\r\n\r\n// Player wrapper for browser's native player (HTMLVideoElement) without MediaSource src. \r\nclass NativePlayer {\r\n\r\n    constructor(mediaDataSource, config) {\r\n        this.TAG = 'NativePlayer';\r\n        this._type = 'NativePlayer';\r\n        this._emitter = new EventEmitter();\r\n\r\n        this._config = createDefaultConfig();\r\n        if (typeof config === 'object') {\r\n            Object.assign(this._config, config);\r\n        }\r\n\r\n        if (mediaDataSource.type.toLowerCase() === 'flv') {\r\n            throw new InvalidArgumentException('NativePlayer does\\'t support flv MediaDataSource input!');\r\n        }\r\n        if (mediaDataSource.hasOwnProperty('segments')) {\r\n            throw new InvalidArgumentException(`NativePlayer(${mediaDataSource.type}) doesn't support multipart playback!`);\r\n        }\r\n\r\n        this.e = {\r\n            onvLoadedMetadata: this._onvLoadedMetadata.bind(this)\r\n        };\r\n\r\n        this._pendingSeekTime = null;\r\n        this._statisticsReporter = null;\r\n\r\n        this._mediaDataSource = mediaDataSource;\r\n        this._mediaElement = null;\r\n    }\r\n\r\n    destroy() {\r\n        if (this._mediaElement) {\r\n            this.unload();\r\n            this.detachMediaElement();\r\n        }\r\n        this.e = null;\r\n        this._mediaDataSource = null;\r\n        this._emitter.removeAllListeners();\r\n        this._emitter = null;\r\n    }\r\n\r\n    on(event, listener) {\r\n        if (event === PlayerEvents.MEDIA_INFO) {\r\n            if (this._mediaElement != null && this._mediaElement.readyState !== 0) {  // HAVE_NOTHING\r\n                Promise.resolve().then(() => {\r\n                    this._emitter.emit(PlayerEvents.MEDIA_INFO, this.mediaInfo);\r\n                });\r\n            }\r\n        } else if (event === PlayerEvents.STATISTICS_INFO) {\r\n            if (this._mediaElement != null && this._mediaElement.readyState !== 0) {\r\n                Promise.resolve().then(() => {\r\n                    this._emitter.emit(PlayerEvents.STATISTICS_INFO, this.statisticsInfo);\r\n                });\r\n            }\r\n        }\r\n        this._emitter.addListener(event, listener);\r\n    }\r\n\r\n    off(event, listener) {\r\n        this._emitter.removeListener(event, listener);\r\n    }\r\n\r\n    attachMediaElement(mediaElement) {\r\n        this._mediaElement = mediaElement;\r\n        mediaElement.addEventListener('loadedmetadata', this.e.onvLoadedMetadata);\r\n\r\n        if (this._pendingSeekTime != null) {\r\n            try {\r\n                mediaElement.currentTime = this._pendingSeekTime;\r\n                this._pendingSeekTime = null;\r\n            } catch (e) {\r\n                // IE11 may throw InvalidStateError if readyState === 0\r\n                // Defer set currentTime operation after loadedmetadata\r\n            }\r\n        }\r\n    }\r\n\r\n    detachMediaElement() {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.src = '';\r\n            this._mediaElement.removeAttribute('src');\r\n            this._mediaElement.removeEventListener('loadedmetadata', this.e.onvLoadedMetadata);\r\n            this._mediaElement = null;\r\n        }\r\n        if (this._statisticsReporter != null) {\r\n            window.clearInterval(this._statisticsReporter);\r\n            this._statisticsReporter = null;\r\n        }\r\n    }\r\n\r\n    load() {\r\n        if (!this._mediaElement) {\r\n            throw new IllegalStateException('HTMLMediaElement must be attached before load()!');\r\n        }\r\n        this._mediaElement.src = this._mediaDataSource.url;\r\n\r\n        if (this._mediaElement.readyState > 0) {\r\n            this._mediaElement.currentTime = 0;\r\n        }\r\n\r\n        this._mediaElement.preload = 'auto';\r\n        this._mediaElement.load();\r\n        this._statisticsReporter = window.setInterval(\r\n            this._reportStatisticsInfo.bind(this),\r\n        this._config.statisticsInfoReportInterval);\r\n    }\r\n\r\n    unload() {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.src = '';\r\n            this._mediaElement.removeAttribute('src');\r\n        }\r\n        if (this._statisticsReporter != null) {\r\n            window.clearInterval(this._statisticsReporter);\r\n            this._statisticsReporter = null;\r\n        }\r\n    }\r\n\r\n    play() {\r\n        return this._mediaElement.play();\r\n    }\r\n\r\n    pause() {\r\n        this._mediaElement.pause();\r\n    }\r\n\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    get buffered() {\r\n        return this._mediaElement.buffered;\r\n    }\r\n\r\n    get duration() {\r\n        return this._mediaElement.duration;\r\n    }\r\n\r\n    get volume() {\r\n        return this._mediaElement.volume;\r\n    }\r\n\r\n    set volume(value) {\r\n        this._mediaElement.volume = value;\r\n    }\r\n\r\n    get muted() {\r\n        return this._mediaElement.muted;\r\n    }\r\n\r\n    set muted(muted) {\r\n        this._mediaElement.muted = muted;\r\n    }\r\n\r\n    get currentTime() {\r\n        if (this._mediaElement) {\r\n            return this._mediaElement.currentTime;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    set currentTime(seconds) {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.currentTime = seconds;\r\n        } else {\r\n            this._pendingSeekTime = seconds;\r\n        }\r\n    }\r\n\r\n    get mediaInfo() {\r\n        let mediaPrefix = (this._mediaElement instanceof HTMLAudioElement) ? 'audio/' : 'video/';\r\n        let info = {\r\n            mimeType: mediaPrefix + this._mediaDataSource.type\r\n        };\r\n        if (this._mediaElement) {\r\n            info.duration = Math.floor(this._mediaElement.duration * 1000);\r\n            if (this._mediaElement instanceof HTMLVideoElement) {\r\n                info.width = this._mediaElement.videoWidth;\r\n                info.height = this._mediaElement.videoHeight;\r\n            }\r\n        }\r\n        return info;\r\n    }\r\n\r\n    get statisticsInfo() {\r\n        let info = {\r\n            playerType: this._type,\r\n            url: this._mediaDataSource.url\r\n        };\r\n\r\n        if (!(this._mediaElement instanceof HTMLVideoElement)) {\r\n            return info;\r\n        }\r\n\r\n        let hasQualityInfo = true;\r\n        let decoded = 0;\r\n        let dropped = 0;\r\n\r\n        if (this._mediaElement.getVideoPlaybackQuality) {\r\n            let quality = this._mediaElement.getVideoPlaybackQuality();\r\n            decoded = quality.totalVideoFrames;\r\n            dropped = quality.droppedVideoFrames;\r\n        } else if (this._mediaElement.webkitDecodedFrameCount != undefined) {\r\n            decoded = this._mediaElement.webkitDecodedFrameCount;\r\n            dropped = this._mediaElement.webkitDroppedFrameCount;\r\n        } else {\r\n            hasQualityInfo = false;\r\n        }\r\n\r\n        if (hasQualityInfo) {\r\n            info.decodedFrames = decoded;\r\n            info.droppedFrames = dropped;\r\n        }\r\n        \r\n        return info;\r\n    }\r\n\r\n    _onvLoadedMetadata(e) {\r\n        if (this._pendingSeekTime != null) {\r\n            this._mediaElement.currentTime = this._pendingSeekTime;\r\n            this._pendingSeekTime = null;\r\n        }\r\n        this._emitter.emit(PlayerEvents.MEDIA_INFO, this.mediaInfo);\r\n    }\r\n\r\n    _reportStatisticsInfo() {\r\n        this._emitter.emit(PlayerEvents.STATISTICS_INFO, this.statisticsInfo);\r\n    }\r\n\r\n}\r\n\r\nexport default NativePlayer;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport {LoaderErrors} from '../io/loader.js';\r\nimport DemuxErrors from '../demux/demux-errors.js';\r\n\r\nexport const ErrorTypes = {\r\n    NETWORK_ERROR: 'NetworkError',\r\n    MEDIA_ERROR: 'MediaError',\r\n    OTHER_ERROR: 'OtherError'\r\n};\r\n\r\nexport const ErrorDetails = {\r\n    NETWORK_EXCEPTION: LoaderErrors.EXCEPTION,\r\n    NETWORK_STATUS_CODE_INVALID: LoaderErrors.HTTP_STATUS_CODE_INVALID,\r\n    NETWORK_TIMEOUT: LoaderErrors.CONNECTING_TIMEOUT,\r\n    NETWORK_UNRECOVERABLE_EARLY_EOF: LoaderErrors.UNRECOVERABLE_EARLY_EOF,\r\n\r\n    MEDIA_MSE_ERROR: 'MediaMSEError',\r\n\r\n    MEDIA_FORMAT_ERROR: DemuxErrors.FORMAT_ERROR,\r\n    MEDIA_FORMAT_UNSUPPORTED: DemuxErrors.FORMAT_UNSUPPORTED,\r\n    MEDIA_CODEC_UNSUPPORTED: DemuxErrors.CODEC_UNSUPPORTED\r\n};","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst PlayerEvents = {\r\n    ERROR: 'error',\r\n    LOADING_COMPLETE: 'loading_complete',\r\n    RECOVERED_EARLY_EOF: 'recovered_early_eof',\r\n    MEDIA_INFO: 'media_info',\r\n    METADATA_ARRIVED: 'metadata_arrived',\r\n    SCRIPTDATA_ARRIVED: 'scriptdata_arrived',\r\n    STATISTICS_INFO: 'statistics_info'\r\n};\r\n\r\nexport default PlayerEvents;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * This file is modified from dailymotion's hls.js library (hls.js/src/helper/aac.js)\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nclass AAC {\r\n\r\n    static getSilentFrame(codec, channelCount) {\r\n        if (codec === 'mp4a.40.2') {\r\n            // handle LC-AAC\r\n            if (channelCount === 1) {\r\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\r\n            } else if (channelCount === 2) {\r\n                return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\r\n            } else if (channelCount === 3) {\r\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\r\n            } else if (channelCount === 4) {\r\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\r\n            } else if (channelCount === 5) {\r\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\r\n            } else if (channelCount === 6) {\r\n                return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\r\n            }\r\n        } else {\r\n            // handle HE-AAC (mp4a.40.5 / mp4a.40.29)\r\n            if (channelCount === 1) {\r\n                // ffmpeg -y -f lavfi -i \"aevalsrc=0:d=0.05\" -c:a libfdk_aac -profile:a aac_he -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\r\n                return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x4e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x1c, 0x6, 0xf1, 0xc1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\r\n            } else if (channelCount === 2) {\r\n                // ffmpeg -y -f lavfi -i \"aevalsrc=0|0:d=0.05\" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\r\n                return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\r\n            } else if (channelCount === 3) {\r\n                // ffmpeg -y -f lavfi -i \"aevalsrc=0|0|0:d=0.05\" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\r\n                return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default AAC;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * This file is derived from dailymotion's hls.js library (hls.js/src/remux/mp4-generator.js)\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n//  MP4 boxes generator for ISO BMFF (ISO Base Media File Format, defined in ISO/IEC 14496-12)\r\nclass MP4 {\r\n\r\n    static init() {\r\n        MP4.types = {\r\n            avc1: [], avcC: [], btrt: [], dinf: [],\r\n            dref: [], esds: [], ftyp: [], hdlr: [],\r\n            mdat: [], mdhd: [], mdia: [], mfhd: [],\r\n            minf: [], moof: [], moov: [], mp4a: [],\r\n            mvex: [], mvhd: [], sdtp: [], stbl: [],\r\n            stco: [], stsc: [], stsd: [], stsz: [],\r\n            stts: [], tfdt: [], tfhd: [], traf: [],\r\n            trak: [], trun: [], trex: [], tkhd: [],\r\n            vmhd: [], smhd: [], hvcC: [], hvc1: [],\r\n            fiel: [], pasp: [],\r\n            '.mp3': []\r\n        };\r\n\r\n        for (let name in MP4.types) {\r\n            if (MP4.types.hasOwnProperty(name)) {\r\n                MP4.types[name] = [\r\n                    name.charCodeAt(0),\r\n                    name.charCodeAt(1),\r\n                    name.charCodeAt(2),\r\n                    name.charCodeAt(3)\r\n                ];\r\n            }\r\n        }\r\n\r\n        let constants = MP4.constants = {};\r\n\r\n        constants.FIEL = new Uint8Array([\r\n            0x01, 0x00\r\n        ]);\r\n\r\n        constants.PASP = new Uint8Array([\r\n            0x20, 0x20, 0x02, 0x80,\r\n            0x20, 0x20, 0x02, 0x7f\r\n        ]);\r\n          \r\n\r\n        constants.FTYP = new Uint8Array([\r\n            0x69, 0x73, 0x6F, 0x6D,  // major_brand: isom\r\n            0x0,  0x0,  0x0,  0x1,   // minor_version: 0x01\r\n            0x69, 0x73, 0x6F, 0x6D,  // isom\r\n            0x61, 0x76, 0x63, 0x31   // avc1\r\n        ]);\r\n\r\n        constants.HVCFTYP = new Uint8Array([\r\n            0x69, 0x73, 0x6f, 0x6d,  // major_brand: isom\r\n            0x0,  0x0,  0x02,  0x0,   // minor_version: 0x01\r\n            0x69, 0x73, 0x6F, 0x6D,  // isom\r\n            0x69, 0x73, 0x6F, 0x32,  // iso2\r\n            0x6d, 0x70, 0x34, 0x31,  // mp41\r\n            //0x68, 0x76, 0x63, 0x31   // hvc1\r\n        ]);\r\n\r\n        constants.STSD_PREFIX = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x01   // entry_count\r\n        ]);\r\n\r\n        constants.STTS = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00   // entry_count\r\n        ]);\r\n\r\n        constants.STSC = constants.STCO = constants.STTS;\r\n\r\n        constants.STSZ = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // sample_size\r\n            0x00, 0x00, 0x00, 0x00   // sample_count\r\n        ]);\r\n\r\n        constants.HDLR_VIDEO = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined\r\n            0x76, 0x69, 0x64, 0x65,  // handler_type: 'vide'\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 3 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x56, 0x69, 0x64, 0x65,\r\n            0x6F, 0x48, 0x61, 0x6E,\r\n            0x64, 0x6C, 0x65, 0x72, 0x00  // name: VideoHandler\r\n        ]);\r\n\r\n        constants.HDLR_AUDIO = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined\r\n            0x73, 0x6F, 0x75, 0x6E,  // handler_type: 'soun'\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 3 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x53, 0x6F, 0x75, 0x6E,\r\n            0x64, 0x48, 0x61, 0x6E,\r\n            0x64, 0x6C, 0x65, 0x72, 0x00  // name: SoundHandler\r\n        ]);\r\n\r\n        constants.DREF = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x01,  // entry_count\r\n            0x00, 0x00, 0x00, 0x0C,  // entry_size\r\n            0x75, 0x72, 0x6C, 0x20,  // type 'url '\r\n            0x00, 0x00, 0x00, 0x01   // version(0) + flags\r\n        ]);\r\n\r\n        // Sound media header\r\n        constants.SMHD = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00   // balance(2) + reserved(2)\r\n        ]);\r\n\r\n        // video media header\r\n        constants.VMHD = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x01,  // version(0) + flags\r\n            0x00, 0x00,              // graphicsmode: 2 bytes\r\n            0x00, 0x00, 0x00, 0x00,  // opcolor: 3 * 2 bytes\r\n            0x00, 0x00\r\n        ]);\r\n    }\r\n\r\n    // Generate a box\r\n    static box(type) {\r\n        let size = 8;\r\n        let result = null;\r\n        let datas = Array.prototype.slice.call(arguments, 1);\r\n        let arrayCount = datas.length;\r\n\r\n        for (let i = 0; i < arrayCount; i++) {\r\n            size += datas[i].byteLength;\r\n        }\r\n\r\n        result = new Uint8Array(size);\r\n        result[0] = (size >>> 24) & 0xFF;  // size\r\n        result[1] = (size >>> 16) & 0xFF;\r\n        result[2] = (size >>>  8) & 0xFF;\r\n        result[3] = (size) & 0xFF;\r\n\r\n        result.set(type, 4);  // type\r\n\r\n        let offset = 8;\r\n        for (let i = 0; i < arrayCount; i++) {  // data body\r\n            result.set(datas[i], offset);\r\n            offset += datas[i].byteLength;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    // emit ftyp & moov\r\n    static generateInitSegment(meta) {\r\n        let ftyp = null;\r\n        if (meta.propty == 'avc')\r\n        {\r\n            ftyp = MP4.box(MP4.types.ftyp, MP4.constants.FTYP);\r\n        }\r\n        else if (meta.propty == 'hevc')\r\n        {\r\n            ftyp = MP4.box(MP4.types.ftyp, MP4.constants.HVCFTYP);\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n        \r\n        let moov = MP4.moov(meta);\r\n\r\n        let result = new Uint8Array(ftyp.byteLength + moov.byteLength);\r\n        result.set(ftyp, 0);\r\n        result.set(moov, ftyp.byteLength);\r\n        return result;\r\n    }\r\n\r\n    // Movie metadata box\r\n    static moov(meta) {\r\n        let mvhd = MP4.mvhd(meta.timescale, meta.duration);\r\n        let trak = MP4.trak(meta);\r\n        let mvex = MP4.mvex(meta);\r\n        return MP4.box(MP4.types.moov, mvhd, trak, mvex);\r\n    }\r\n\r\n    // Movie header box\r\n    static mvhd(timescale, duration) {\r\n        return MP4.box(MP4.types.mvhd, new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // creation_time\r\n            0x00, 0x00, 0x00, 0x00,  // modification_time\r\n            (timescale >>> 24) & 0xFF,  // timescale: 4 bytes\r\n            (timescale >>> 16) & 0xFF,\r\n            (timescale >>>  8) & 0xFF,\r\n            (timescale) & 0xFF,\r\n            (duration >>> 24) & 0xFF,   // duration: 4 bytes\r\n            (duration >>> 16) & 0xFF,\r\n            (duration >>>  8) & 0xFF,\r\n            (duration) & 0xFF,\r\n            0x00, 0x01, 0x00, 0x00,  // Preferred rate: 1.0\r\n            0x01, 0x00, 0x00, 0x00,  // PreferredVolume(1.0, 2bytes) + reserved(2bytes)\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 + 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x01, 0x00, 0x00,  // ----begin composition matrix----\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x40, 0x00, 0x00, 0x00,  // ----end composition matrix----\r\n            0x00, 0x00, 0x00, 0x00,  // ----begin pre_defined 6 * 4 bytes----\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,  // ----end pre_defined 6 * 4 bytes----\r\n            0xFF, 0xFF, 0xFF, 0xFF   // next_track_ID\r\n        ]));\r\n    }\r\n\r\n    // Track box\r\n    static trak(meta) {\r\n        return MP4.box(MP4.types.trak, MP4.tkhd(meta), MP4.mdia(meta));\r\n    }\r\n\r\n    // Track header box\r\n    static tkhd(meta) {\r\n        let trackId = meta.id, duration = meta.duration;\r\n        let width = meta.presentWidth, height = meta.presentHeight;\r\n\r\n        return MP4.box(MP4.types.tkhd, new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x01,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // creation_time\r\n            0x00, 0x00, 0x00, 0x00,  // modification_time\r\n            (trackId >>> 24) & 0xFF,  // track_ID: 4 bytes\r\n            (trackId >>> 16) & 0xFF,\r\n            (trackId >>>  8) & 0xFF,\r\n            (trackId) & 0xFF,\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 bytes\r\n            (duration >>> 24) & 0xFF, // duration: 4 bytes\r\n            (duration >>> 16) & 0xFF,\r\n            (duration >>>  8) & 0xFF,\r\n            (duration) & 0xFF,\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 2 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,  // layer(2bytes) + alternate_group(2bytes)\r\n            0x00, 0x00, 0x00, 0x00,  // volume(2bytes) + reserved(2bytes)\r\n            0x00, 0x01, 0x00, 0x00,  // ----begin composition matrix----\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00, \r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x40, 0x00, 0x00, 0x00,  // ----end composition matrix----\r\n            (width >>> 8) & 0xFF,    // width and height\r\n            (width) & 0xFF,\r\n            0x00, 0x00,\r\n            (height >>> 8) & 0xFF,\r\n            (height) & 0xFF,\r\n            0x00, 0x00\r\n        ]));\r\n    }\r\n\r\n    // Media Box\r\n    static mdia(meta) {\r\n        return MP4.box(MP4.types.mdia, MP4.mdhd(meta), MP4.hdlr(meta), MP4.minf(meta));\r\n    }\r\n\r\n    // Media header box\r\n    static mdhd(meta) {\r\n        let timescale = meta.timescale;\r\n        let duration = meta.duration;\r\n        return MP4.box(MP4.types.mdhd, new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            0x00, 0x00, 0x00, 0x00,  // creation_time\r\n            0x00, 0x00, 0x00, 0x00,  // modification_time\r\n            (timescale >>> 24) & 0xFF,  // timescale: 4 bytes\r\n            (timescale >>> 16) & 0xFF,\r\n            (timescale >>>  8) & 0xFF,\r\n            (timescale) & 0xFF,\r\n            (duration >>> 24) & 0xFF,   // duration: 4 bytes\r\n            (duration >>> 16) & 0xFF,\r\n            (duration >>>  8) & 0xFF,\r\n            (duration) & 0xFF,\r\n            0x55, 0xC4,             // language: und (undetermined)\r\n            0x00, 0x00              // pre_defined = 0\r\n        ]));\r\n    }\r\n\r\n    // Media handler reference box\r\n    static hdlr(meta) {\r\n        let data = null;\r\n        if (meta.type === 'audio') {\r\n            data = MP4.constants.HDLR_AUDIO;\r\n        } else {\r\n            data = MP4.constants.HDLR_VIDEO;\r\n        }\r\n        return MP4.box(MP4.types.hdlr, data);\r\n    }\r\n\r\n    // Media infomation box\r\n    static minf(meta) {\r\n        let xmhd = null;\r\n        if (meta.type === 'audio') {\r\n            xmhd = MP4.box(MP4.types.smhd, MP4.constants.SMHD);\r\n        } else {\r\n            xmhd = MP4.box(MP4.types.vmhd, MP4.constants.VMHD);\r\n        }\r\n        return MP4.box(MP4.types.minf, xmhd, MP4.dinf(), MP4.stbl(meta));\r\n    }\r\n\r\n    // Data infomation box\r\n    static dinf() {\r\n        let result = MP4.box(MP4.types.dinf,\r\n            MP4.box(MP4.types.dref, MP4.constants.DREF)\r\n        );\r\n        return result;\r\n    }\r\n\r\n    // Sample table box\r\n    static stbl(meta) {\r\n        let result = MP4.box(MP4.types.stbl,  // type: stbl\r\n            MP4.stsd(meta),  // Sample Description Table\r\n            MP4.box(MP4.types.stts, MP4.constants.STTS),  // Time-To-Sample\r\n            MP4.box(MP4.types.stsc, MP4.constants.STSC),  // Sample-To-Chunk\r\n            MP4.box(MP4.types.stsz, MP4.constants.STSZ),  // Sample size\r\n            MP4.box(MP4.types.stco, MP4.constants.STCO)   // Chunk offset\r\n        ); \r\n        return result; \r\n    }\r\n\r\n    // Sample description box\r\n    static stsd(meta) {\r\n        if (meta.type === 'audio') {\r\n            if (meta.codec === 'mp3') {\r\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp3(meta));\r\n            }\r\n            // else: aac -> mp4a\r\n            return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.mp4a(meta));\r\n        } else {\r\n            if (meta.propty == 'avc')\r\n            {\r\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.avc1(meta));\r\n            }\r\n            else if (meta.propty == 'hevc')\r\n            {\r\n                return MP4.box(MP4.types.stsd, MP4.constants.STSD_PREFIX, MP4.hvc1(meta));\r\n            }\r\n            else;\r\n            \r\n        }\r\n    }\r\n\r\n    static mp3(meta) {\r\n        let channelCount = meta.channelCount;\r\n        let sampleRate = meta.audioSampleRate;\r\n\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            0x00, 0x00, 0x00, 0x01,  // reserved(2) + data_reference_index(2)\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 2 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, channelCount,      // channelCount(2)\r\n            0x00, 0x10,              // sampleSize(2)\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            (sampleRate >>> 8) & 0xFF,  // Audio sample rate\r\n            (sampleRate) & 0xFF,\r\n            0x00, 0x00\r\n        ]);\r\n\r\n        return MP4.box(MP4.types['.mp3'], data);\r\n    }\r\n\r\n    static mp4a(meta) {\r\n        let channelCount = meta.channelCount;\r\n        let sampleRate = meta.audioSampleRate;\r\n\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            0x00, 0x00, 0x00, 0x01,  // reserved(2) + data_reference_index(2)\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 2 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, channelCount,      // channelCount(2)\r\n            0x00, 0x10,              // sampleSize(2)\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            (sampleRate >>> 8) & 0xFF,  // Audio sample rate\r\n            (sampleRate) & 0xFF,\r\n            0x00, 0x00\r\n        ]);\r\n\r\n        return MP4.box(MP4.types.mp4a, data, MP4.esds(meta));\r\n    }\r\n\r\n    static esds(meta) {\r\n        let config = meta.config || [];\r\n        let configSize = config.length;\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version 0 + flags\r\n\r\n            0x03,                    // descriptor_type\r\n            0x17 + configSize,       // length3\r\n            0x00, 0x01,              // es_id\r\n            0x00,                    // stream_priority\r\n\r\n            0x04,                    // descriptor_type\r\n            0x0F + configSize,       // length\r\n            0x40,                    // codec: mpeg4_audio\r\n            0x15,                    // stream_type: Audio\r\n            0x00, 0x00, 0x00,        // buffer_size\r\n            0x00, 0x00, 0x00, 0x00,  // maxBitrate\r\n            0x00, 0x00, 0x00, 0x00,  // avgBitrate\r\n\r\n            0x05                     // descriptor_type\r\n        ].concat([\r\n            configSize\r\n        ]).concat(\r\n            config\r\n        ).concat([\r\n            0x06, 0x01, 0x02         // GASpecificConfig\r\n        ]));\r\n        return MP4.box(MP4.types.esds, data);\r\n    }\r\n\r\n    static hvc1(meta)\r\n    {\r\n        let hvcc = meta.hvcc;\r\n        let width = meta.codecWidth, height = meta.codecHeight;\r\n\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            0x00, 0x00, 0x00, 0x01,  // reserved(2) + data_reference_index(2)\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined(2) + reserved(2)\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined: 3 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            (width >>> 8) & 0xFF,    // width: 2 bytes\r\n            (width) & 0xFF,\r\n            (height >>> 8) & 0xFF,   // height: 2 bytes\r\n            (height) & 0xFF,\r\n            0x00, 0x48, 0x00, 0x00,  // horizresolution: 4 bytes\r\n            0x00, 0x48, 0x00, 0x00,  // vertresolution: 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 bytes\r\n            0x00, 0x01,              // frame_count\r\n            0x00,                    // strlen\r\n            0x00, 0x00, 0x00, 0x00,  // compressorname: 32 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00,\r\n            0x00, 0x18,              // depth\r\n            0xFF, 0xFF               // pre_defined = -1\r\n        ]);\r\n        return MP4.box(MP4.types.hvc1, data, \r\n            MP4.box(MP4.types.hvcC, hvcc), \r\n            MP4.box(MP4.types.fiel, MP4.constants.FIEL), \r\n            MP4.box(MP4.types.pasp, MP4.constants.PASP));\r\n    }\r\n\r\n    static avc1(meta) {\r\n        let avcc = meta.avcc;\r\n        let width = meta.codecWidth, height = meta.codecHeight;\r\n\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // reserved(4)\r\n            0x00, 0x00, 0x00, 0x01,  // reserved(2) + data_reference_index(2)\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined(2) + reserved(2)\r\n            0x00, 0x00, 0x00, 0x00,  // pre_defined: 3 * 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            (width >>> 8) & 0xFF,    // width: 2 bytes\r\n            (width) & 0xFF,\r\n            (height >>> 8) & 0xFF,   // height: 2 bytes\r\n            (height) & 0xFF,\r\n            0x00, 0x48, 0x00, 0x00,  // horizresolution: 4 bytes\r\n            0x00, 0x48, 0x00, 0x00,  // vertresolution: 4 bytes\r\n            0x00, 0x00, 0x00, 0x00,  // reserved: 4 bytes\r\n            0x00, 0x01,              // frame_count\r\n            0x0A,                    // strlen\r\n            0x78, 0x71, 0x71, 0x2F,  // compressorname: 32 bytes\r\n            0x66, 0x6C, 0x76, 0x2E,\r\n            0x6A, 0x73, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00,\r\n            0x00, 0x18,              // depth\r\n            0xFF, 0xFF               // pre_defined = -1\r\n        ]);\r\n        return MP4.box(MP4.types.avc1, data, MP4.box(MP4.types.avcC, avcc));\r\n    }\r\n\r\n    // Movie Extends box\r\n    static mvex(meta) {\r\n        return MP4.box(MP4.types.mvex, MP4.trex(meta));\r\n    }\r\n\r\n    // Track Extends box\r\n    static trex(meta) {\r\n        let trackId = meta.id;\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) + flags\r\n            (trackId >>> 24) & 0xFF, // track_ID\r\n            (trackId >>> 16) & 0xFF,\r\n            (trackId >>>  8) & 0xFF,\r\n            (trackId) & 0xFF,\r\n            0x00, 0x00, 0x00, 0x01,  // default_sample_description_index\r\n            0x00, 0x00, 0x00, 0x00,  // default_sample_duration\r\n            0x00, 0x00, 0x00, 0x00,  // default_sample_size\r\n            0x00, 0x01, 0x00, 0x01   // default_sample_flags\r\n        ]);\r\n        return MP4.box(MP4.types.trex, data);\r\n    }\r\n\r\n    // Movie fragment box\r\n    static moof(track, baseMediaDecodeTime) {\r\n        return MP4.box(MP4.types.moof, MP4.mfhd(track.sequenceNumber), MP4.traf(track, baseMediaDecodeTime));\r\n    }\r\n\r\n    static mfhd(sequenceNumber) {\r\n        let data = new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,\r\n            (sequenceNumber >>> 24) & 0xFF,  // sequence_number: int32\r\n            (sequenceNumber >>> 16) & 0xFF,\r\n            (sequenceNumber >>>  8) & 0xFF,\r\n            (sequenceNumber) & 0xFF\r\n        ]);\r\n        return MP4.box(MP4.types.mfhd, data);\r\n    }\r\n\r\n    // Track fragment box\r\n    static traf(track, baseMediaDecodeTime) {\r\n        let trackId = track.id;\r\n\r\n        // Track fragment header box\r\n        let tfhd = MP4.box(MP4.types.tfhd, new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) & flags\r\n            (trackId >>> 24) & 0xFF, // track_ID\r\n            (trackId >>> 16) & 0xFF,\r\n            (trackId >>>  8) & 0xFF,\r\n            (trackId) & 0xFF\r\n        ]));\r\n        // Track Fragment Decode Time\r\n        let tfdt = MP4.box(MP4.types.tfdt, new Uint8Array([\r\n            0x00, 0x00, 0x00, 0x00,  // version(0) & flags\r\n            (baseMediaDecodeTime >>> 24) & 0xFF,  // baseMediaDecodeTime: int32\r\n            (baseMediaDecodeTime >>> 16) & 0xFF,\r\n            (baseMediaDecodeTime >>>  8) & 0xFF,\r\n            (baseMediaDecodeTime) & 0xFF\r\n        ]));\r\n        let sdtp = MP4.sdtp(track);\r\n        let trun = MP4.trun(track, sdtp.byteLength + 16 + 16 + 8 + 16 + 8 + 8);\r\n\r\n        return MP4.box(MP4.types.traf, tfhd, tfdt, trun, sdtp);\r\n    }\r\n\r\n    // Sample Dependency Type box\r\n    static sdtp(track) {\r\n        let samples = track.samples || [];\r\n        let sampleCount = samples.length;\r\n        let data = new Uint8Array(4 + sampleCount);\r\n        // 0~4 bytes: version(0) & flags\r\n        for (let i = 0; i < sampleCount; i++) {\r\n            let flags = samples[i].flags;\r\n            data[i + 4] = (flags.isLeading << 6)    // is_leading: 2 (bit)\r\n                        | (flags.dependsOn << 4)    // sample_depends_on\r\n                        | (flags.isDependedOn << 2) // sample_is_depended_on\r\n                        | (flags.hasRedundancy);    // sample_has_redundancy\r\n        }\r\n        return MP4.box(MP4.types.sdtp, data);\r\n    }\r\n\r\n    // Track fragment run box\r\n    static trun(track, offset) {\r\n        let samples = track.samples || [];\r\n        let sampleCount = samples.length;\r\n        let dataSize = 12 + 16 * sampleCount;\r\n        let data = new Uint8Array(dataSize);\r\n        offset += 8 + dataSize;\r\n\r\n        data.set([\r\n            0x00, 0x00, 0x0F, 0x01,      // version(0) & flags\r\n            (sampleCount >>> 24) & 0xFF, // sample_count\r\n            (sampleCount >>> 16) & 0xFF,\r\n            (sampleCount >>>  8) & 0xFF,\r\n            (sampleCount) & 0xFF,\r\n            (offset >>> 24) & 0xFF,      // data_offset\r\n            (offset >>> 16) & 0xFF,\r\n            (offset >>>  8) & 0xFF,\r\n            (offset) & 0xFF\r\n        ], 0);\r\n\r\n        for (let i = 0; i < sampleCount; i++) {\r\n            let duration = samples[i].duration;\r\n            let size = samples[i].size;\r\n            let flags = samples[i].flags;\r\n            let cts = samples[i].cts;\r\n            data.set([\r\n                (duration >>> 24) & 0xFF,  // sample_duration\r\n                (duration >>> 16) & 0xFF,\r\n                (duration >>>  8) & 0xFF,\r\n                (duration) & 0xFF,\r\n                (size >>> 24) & 0xFF,      // sample_size\r\n                (size >>> 16) & 0xFF,\r\n                (size >>>  8) & 0xFF,\r\n                (size) & 0xFF,\r\n                (flags.isLeading << 2) | flags.dependsOn,  // sample_flags\r\n                (flags.isDependedOn << 6) | (flags.hasRedundancy << 4) | flags.isNonSync,\r\n                0x00, 0x00,                // sample_degradation_priority\r\n                (cts >>> 24) & 0xFF,       // sample_composition_time_offset\r\n                (cts >>> 16) & 0xFF,\r\n                (cts >>>  8) & 0xFF,\r\n                (cts) & 0xFF\r\n            ], 12 + 16 * i);\r\n        }\r\n        return MP4.box(MP4.types.trun, data);\r\n    }\r\n\r\n    static mdat(data) {\r\n        return MP4.box(MP4.types.mdat, data);\r\n    }\r\n\r\n}\r\n\r\nMP4.init();\r\n\r\nexport default MP4;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport Log from '../utils/logger.js';\r\nimport MP4 from './mp4-generator.js';\r\nimport AAC from './aac-silent.js';\r\nimport Browser from '../utils/browser.js';\r\nimport {SampleInfo, MediaSegmentInfo, MediaSegmentInfoList} from '../core/media-segment-info.js';\r\nimport {IllegalStateException} from '../utils/exception.js';\r\n\r\n\r\n// Fragmented mp4 remuxer\r\nclass MP4Remuxer {\r\n\r\n    constructor(config) {\r\n        this.TAG = 'MP4Remuxer';\r\n\r\n        this._config = config;\r\n        this._isLive = (config.isLive === true) ? true : false;\r\n\r\n        this._dtsBase = -1;\r\n        this._dtsBaseInited = false;\r\n        this._audioDtsBase = Infinity;\r\n        this._videoDtsBase = Infinity;\r\n        this._audioNextDts = undefined;\r\n        this._videoNextDts = undefined;\r\n        this._audioStashedLastSample = null;\r\n        this._videoStashedLastSample = null;\r\n\r\n        this._audioMeta = null;\r\n        this._videoMeta = null;\r\n\r\n        this._audioSegmentInfoList = new MediaSegmentInfoList('audio');\r\n        this._videoSegmentInfoList = new MediaSegmentInfoList('video');\r\n\r\n        this._onInitSegment = null;\r\n        this._onMediaSegment = null;\r\n\r\n        // Workaround for chrome < 50: Always force first sample as a Random Access Point in media segment\r\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\r\n        this._forceFirstIDR = (Browser.chrome &&\r\n                              (Browser.version.major < 50 ||\r\n                              (Browser.version.major === 50 && Browser.version.build < 2661))) ? true : false;\r\n\r\n        // Workaround for IE11/Edge: Fill silent aac frame after keyframe-seeking\r\n        // Make audio beginDts equals with video beginDts, in order to fix seek freeze\r\n        this._fillSilentAfterSeek = (Browser.msedge || Browser.msie);\r\n\r\n        // While only FireFox supports 'audio/mp4, codecs=\"mp3\"', use 'audio/mpeg' for chrome, safari, ...\r\n        this._mp3UseMpegAudio = !Browser.firefox;\r\n\r\n        this._fillAudioTimestampGap = this._config.fixAudioTimestampGap;\r\n    }\r\n\r\n    destroy() {\r\n        this._dtsBase = -1;\r\n        this._dtsBaseInited = false;\r\n        this._audioMeta = null;\r\n        this._videoMeta = null;\r\n        this._audioSegmentInfoList.clear();\r\n        this._audioSegmentInfoList = null;\r\n        this._videoSegmentInfoList.clear();\r\n        this._videoSegmentInfoList = null;\r\n        this._onInitSegment = null;\r\n        this._onMediaSegment = null;\r\n    }\r\n\r\n    bindDataSource(producer) {\r\n        producer.onDataAvailable = this.remux.bind(this);\r\n        producer.onTrackMetadata = this._onTrackMetadataReceived.bind(this);\r\n        return this;\r\n    }\r\n\r\n    /* prototype: function onInitSegment(type: string, initSegment: ArrayBuffer): void\r\n       InitSegment: {\r\n           type: string,\r\n           data: ArrayBuffer,\r\n           codec: string,\r\n           container: string\r\n       }\r\n    */\r\n    get onInitSegment() {\r\n        return this._onInitSegment;\r\n    }\r\n\r\n    set onInitSegment(callback) {\r\n        this._onInitSegment = callback;\r\n    }\r\n\r\n    /* prototype: function onMediaSegment(type: string, mediaSegment: MediaSegment): void\r\n       MediaSegment: {\r\n           type: string,\r\n           data: ArrayBuffer,\r\n           sampleCount: int32\r\n           info: MediaSegmentInfo\r\n       }\r\n    */\r\n    get onMediaSegment() {\r\n        return this._onMediaSegment;\r\n    }\r\n\r\n    set onMediaSegment(callback) {\r\n        this._onMediaSegment = callback;\r\n    }\r\n\r\n    insertDiscontinuity() {\r\n        this._audioNextDts = this._videoNextDts = undefined;\r\n    }\r\n\r\n    seek(originalDts) {\r\n        this._audioStashedLastSample = null;\r\n        this._videoStashedLastSample = null;\r\n        this._videoSegmentInfoList.clear();\r\n        this._audioSegmentInfoList.clear();\r\n    }\r\n\r\n    remux(audioTrack, videoTrack) {\r\n        if (!this._onMediaSegment) {\r\n            throw new IllegalStateException('MP4Remuxer: onMediaSegment callback must be specificed!');\r\n        }\r\n        if (!this._dtsBaseInited) {\r\n            this._calculateDtsBase(audioTrack, videoTrack);\r\n        }\r\n        this._remuxVideo(videoTrack);\r\n        this._remuxAudio(audioTrack);\r\n    }\r\n\r\n    _onTrackMetadataReceived(type, metadata) {\r\n        let metabox = null;\r\n\r\n        let container = 'mp4';\r\n        let codec = metadata.codec;\r\n\r\n        if (type === 'audio') {\r\n            this._audioMeta = metadata;\r\n            if (metadata.codec === 'mp3' && this._mp3UseMpegAudio) {\r\n                // 'audio/mpeg' for MP3 audio track\r\n                container = 'mpeg';\r\n                codec = '';\r\n                metabox = new Uint8Array();\r\n            } else {\r\n                // 'audio/mp4, codecs=\"codec\"'\r\n                metabox = MP4.generateInitSegment(metadata);\r\n            }\r\n        } else if (type === 'video') {\r\n            this._videoMeta = metadata;\r\n            metabox = MP4.generateInitSegment(metadata);\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        // dispatch metabox (Initialization Segment)\r\n        if (!this._onInitSegment) {\r\n            throw new IllegalStateException('MP4Remuxer: onInitSegment callback must be specified!');\r\n        }\r\n        this._onInitSegment(type, {\r\n            type: type,\r\n            data: metabox.buffer,\r\n            codec: codec,\r\n            container: `${type}/${container}`,\r\n            mediaDuration: metadata.duration  // in timescale 1000 (milliseconds)\r\n        });\r\n    }\r\n\r\n    _calculateDtsBase(audioTrack, videoTrack) {\r\n        if (this._dtsBaseInited) {\r\n            return;\r\n        }\r\n\r\n        if (audioTrack.samples && audioTrack.samples.length) {\r\n            this._audioDtsBase = audioTrack.samples[0].dts;\r\n        }\r\n        if (videoTrack.samples && videoTrack.samples.length) {\r\n            this._videoDtsBase = videoTrack.samples[0].dts;\r\n        }\r\n\r\n        this._dtsBase = Math.min(this._audioDtsBase, this._videoDtsBase);\r\n        this._dtsBaseInited = true;\r\n    }\r\n\r\n    flushStashedSamples() {\r\n        let videoSample = this._videoStashedLastSample;\r\n        let audioSample = this._audioStashedLastSample;\r\n\r\n        let videoTrack = {\r\n            type: 'video',\r\n            id: 1,\r\n            sequenceNumber: 0,\r\n            samples: [],\r\n            length: 0\r\n        };\r\n\r\n        if (videoSample != null) {\r\n            videoTrack.samples.push(videoSample);\r\n            videoTrack.length = videoSample.length;\r\n        }\r\n\r\n        let audioTrack = {\r\n            type: 'audio',\r\n            id: 2,\r\n            sequenceNumber: 0,\r\n            samples: [],\r\n            length: 0\r\n        };\r\n\r\n        if (audioSample != null) {\r\n            audioTrack.samples.push(audioSample);\r\n            audioTrack.length = audioSample.length;\r\n        }\r\n\r\n        this._videoStashedLastSample = null;\r\n        this._audioStashedLastSample = null;\r\n\r\n        this._remuxVideo(videoTrack, true);\r\n        this._remuxAudio(audioTrack, true);\r\n    }\r\n\r\n    _remuxAudio(audioTrack, force) {\r\n        if (this._audioMeta == null) {\r\n            return;\r\n        }\r\n\r\n        let track = audioTrack;\r\n        let samples = track.samples;\r\n        let dtsCorrection = undefined;\r\n        let firstDts = -1, lastDts = -1, lastPts = -1;\r\n        let refSampleDuration = this._audioMeta.refSampleDuration;\r\n\r\n        let mpegRawTrack = this._audioMeta.codec === 'mp3' && this._mp3UseMpegAudio;\r\n        let firstSegmentAfterSeek = this._dtsBaseInited && this._audioNextDts === undefined;\r\n\r\n        let insertPrefixSilentFrame = false;\r\n\r\n        if (!samples || samples.length === 0) {\r\n            return;\r\n        }\r\n        if (samples.length === 1 && !force) {\r\n            // If [sample count in current batch] === 1 && (force != true)\r\n            // Ignore and keep in demuxer's queue\r\n            return;\r\n        }  // else if (force === true) do remux\r\n\r\n        let offset = 0;\r\n        let mdatbox = null;\r\n        let mdatBytes = 0;\r\n\r\n        // calculate initial mdat size\r\n        if (mpegRawTrack) {\r\n            // for raw mpeg buffer\r\n            offset = 0;\r\n            mdatBytes = track.length;\r\n        } else {\r\n            // for fmp4 mdat box\r\n            offset = 8;  // size + type\r\n            mdatBytes = 8 + track.length;\r\n        }\r\n\r\n\r\n        let lastSample = null;\r\n\r\n        // Pop the lastSample and waiting for stash\r\n        if (samples.length > 1) {\r\n            lastSample = samples.pop();\r\n            mdatBytes -= lastSample.length;\r\n        }\r\n\r\n        // Insert [stashed lastSample in the previous batch] to the front\r\n        if (this._audioStashedLastSample != null) {\r\n            let sample = this._audioStashedLastSample;\r\n            this._audioStashedLastSample = null;\r\n            samples.unshift(sample);\r\n            mdatBytes += sample.length;\r\n        }\r\n\r\n        // Stash the lastSample of current batch, waiting for next batch\r\n        if (lastSample != null) {\r\n            this._audioStashedLastSample = lastSample;\r\n        }\r\n\r\n\r\n        let firstSampleOriginalDts = samples[0].dts - this._dtsBase;\r\n\r\n        // calculate dtsCorrection\r\n        if (this._audioNextDts) {\r\n            dtsCorrection = firstSampleOriginalDts - this._audioNextDts;\r\n        } else {  // this._audioNextDts == undefined\r\n            if (this._audioSegmentInfoList.isEmpty()) {\r\n                dtsCorrection = 0;\r\n                if (this._fillSilentAfterSeek && !this._videoSegmentInfoList.isEmpty()) {\r\n                    if (this._audioMeta.originalCodec !== 'mp3') {\r\n                        insertPrefixSilentFrame = true;\r\n                    }\r\n                }\r\n            } else {\r\n                let lastSample = this._audioSegmentInfoList.getLastSampleBefore(firstSampleOriginalDts);\r\n                if (lastSample != null) {\r\n                    let distance = (firstSampleOriginalDts - (lastSample.originalDts + lastSample.duration));\r\n                    if (distance <= 3) {\r\n                        distance = 0;\r\n                    }\r\n                    let expectedDts = lastSample.dts + lastSample.duration + distance;\r\n                    dtsCorrection = firstSampleOriginalDts - expectedDts;\r\n                } else { // lastSample == null, cannot found\r\n                    dtsCorrection = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (insertPrefixSilentFrame) {\r\n            // align audio segment beginDts to match with current video segment's beginDts\r\n            let firstSampleDts = firstSampleOriginalDts - dtsCorrection;\r\n            let videoSegment = this._videoSegmentInfoList.getLastSegmentBefore(firstSampleOriginalDts);\r\n            if (videoSegment != null && videoSegment.beginDts < firstSampleDts) {\r\n                let silentUnit = AAC.getSilentFrame(this._audioMeta.originalCodec, this._audioMeta.channelCount);\r\n                if (silentUnit) {\r\n                    let dts = videoSegment.beginDts;\r\n                    let silentFrameDuration = firstSampleDts - videoSegment.beginDts;\r\n                    Log.v(this.TAG, `InsertPrefixSilentAudio: dts: ${dts}, duration: ${silentFrameDuration}`);\r\n                    samples.unshift({unit: silentUnit, dts: dts, pts: dts});\r\n                    mdatBytes += silentUnit.byteLength;\r\n                }  // silentUnit == null: Cannot generate, skip\r\n            } else {\r\n                insertPrefixSilentFrame = false;\r\n            }\r\n        }\r\n\r\n        let mp4Samples = [];\r\n\r\n        // Correct dts for each sample, and calculate sample duration. Then output to mp4Samples\r\n        for (let i = 0; i < samples.length; i++) {\r\n            let sample = samples[i];\r\n            let unit = sample.unit;\r\n            let originalDts = sample.dts - this._dtsBase;\r\n            let dts = originalDts - dtsCorrection;\r\n\r\n            if (firstDts === -1) {\r\n                firstDts = dts;\r\n            }\r\n\r\n            let sampleDuration = 0;\r\n\r\n            if (i !== samples.length - 1) {\r\n                let nextDts = samples[i + 1].dts - this._dtsBase - dtsCorrection;\r\n                sampleDuration = nextDts - dts;\r\n            } else {  // the last sample\r\n                if (lastSample != null) {  // use stashed sample's dts to calculate sample duration\r\n                    let nextDts = lastSample.dts - this._dtsBase - dtsCorrection;\r\n                    sampleDuration = nextDts - dts;\r\n                } else if (mp4Samples.length >= 1) {  // use second last sample duration\r\n                    sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\r\n                } else {  // the only one sample, use reference sample duration\r\n                    sampleDuration = Math.floor(refSampleDuration);\r\n                }\r\n            }\r\n\r\n            let needFillSilentFrames = false;\r\n            let silentFrames = null;\r\n\r\n            // Silent frame generation, if large timestamp gap detected && config.fixAudioTimestampGap\r\n            if (sampleDuration > refSampleDuration * 1.5 && this._audioMeta.codec !== 'mp3' && this._fillAudioTimestampGap && !Browser.safari) {\r\n                // We need to insert silent frames to fill timestamp gap\r\n                needFillSilentFrames = true;\r\n                let delta = Math.abs(sampleDuration - refSampleDuration);\r\n                let frameCount = Math.ceil(delta / refSampleDuration);\r\n                let currentDts = dts + refSampleDuration;  // Notice: in float\r\n\r\n                Log.w(this.TAG, 'Large audio timestamp gap detected, may cause AV sync to drift. ' +\r\n                                'Silent frames will be generated to avoid unsync.\\n' +\r\n                                `dts: ${dts + sampleDuration} ms, expected: ${dts + Math.round(refSampleDuration)} ms, ` +\r\n                                `delta: ${Math.round(delta)} ms, generate: ${frameCount} frames`);\r\n\r\n                let silentUnit = AAC.getSilentFrame(this._audioMeta.originalCodec, this._audioMeta.channelCount);\r\n                if (silentUnit == null) {\r\n                    Log.w(this.TAG, 'Unable to generate silent frame for ' +\r\n                                    `${this._audioMeta.originalCodec} with ${this._audioMeta.channelCount} channels, repeat last frame`);\r\n                    // Repeat last frame\r\n                    silentUnit = unit;\r\n                }\r\n                silentFrames = [];\r\n\r\n                for (let j = 0; j < frameCount; j++) {\r\n                    let intDts = Math.round(currentDts);  // round to integer\r\n                    if (silentFrames.length > 0) {\r\n                        // Set previous frame sample duration\r\n                        let previousFrame = silentFrames[silentFrames.length - 1];\r\n                        previousFrame.duration = intDts - previousFrame.dts;\r\n                    }\r\n                    let frame = {\r\n                        dts: intDts,\r\n                        pts: intDts,\r\n                        cts: 0,\r\n                        unit: silentUnit,\r\n                        size: silentUnit.byteLength,\r\n                        duration: 0,  // wait for next sample\r\n                        originalDts: originalDts,\r\n                        flags: {\r\n                            isLeading: 0,\r\n                            dependsOn: 1,\r\n                            isDependedOn: 0,\r\n                            hasRedundancy: 0\r\n                        }\r\n                    };\r\n                    silentFrames.push(frame);\r\n                    mdatBytes += frame.size;\r\n                    currentDts += refSampleDuration;\r\n                }\r\n\r\n                // last frame: align end time to next frame dts\r\n                let lastFrame = silentFrames[silentFrames.length - 1];\r\n                lastFrame.duration = dts + sampleDuration - lastFrame.dts;\r\n\r\n                // silentFrames.forEach((frame) => {\r\n                //     Log.w(this.TAG, `SilentAudio: dts: ${frame.dts}, duration: ${frame.duration}`);\r\n                // });\r\n\r\n                // Set correct sample duration for current frame\r\n                sampleDuration = Math.round(refSampleDuration);\r\n            }\r\n\r\n            mp4Samples.push({\r\n                dts: dts,\r\n                pts: dts,\r\n                cts: 0,\r\n                unit: sample.unit,\r\n                size: sample.unit.byteLength,\r\n                duration: sampleDuration,\r\n                originalDts: originalDts,\r\n                flags: {\r\n                    isLeading: 0,\r\n                    dependsOn: 1,\r\n                    isDependedOn: 0,\r\n                    hasRedundancy: 0\r\n                }\r\n            });\r\n\r\n            if (needFillSilentFrames) {\r\n                // Silent frames should be inserted after wrong-duration frame\r\n                mp4Samples.push.apply(mp4Samples, silentFrames);\r\n            }\r\n        }\r\n\r\n        // allocate mdatbox\r\n        if (mpegRawTrack) {\r\n            // allocate for raw mpeg buffer\r\n            mdatbox = new Uint8Array(mdatBytes);\r\n        } else {\r\n            // allocate for fmp4 mdat box\r\n            mdatbox = new Uint8Array(mdatBytes);\r\n            // size field\r\n            mdatbox[0] = (mdatBytes >>> 24) & 0xFF;\r\n            mdatbox[1] = (mdatBytes >>> 16) & 0xFF;\r\n            mdatbox[2] = (mdatBytes >>>  8) & 0xFF;\r\n            mdatbox[3] = (mdatBytes) & 0xFF;\r\n            // type field (fourCC)\r\n            mdatbox.set(MP4.types.mdat, 4);\r\n        }\r\n\r\n        // Write samples into mdatbox\r\n        for (let i = 0; i < mp4Samples.length; i++) {\r\n            let unit = mp4Samples[i].unit;\r\n            mdatbox.set(unit, offset);\r\n            offset += unit.byteLength;\r\n        }\r\n\r\n        let latest = mp4Samples[mp4Samples.length - 1];\r\n        lastDts = latest.dts + latest.duration;\r\n        this._audioNextDts = lastDts;\r\n\r\n        // fill media segment info & add to info list\r\n        let info = new MediaSegmentInfo();\r\n        info.beginDts = firstDts;\r\n        info.endDts = lastDts;\r\n        info.beginPts = firstDts;\r\n        info.endPts = lastDts;\r\n        info.originalBeginDts = mp4Samples[0].originalDts;\r\n        info.originalEndDts = latest.originalDts + latest.duration;\r\n        info.firstSample = new SampleInfo(mp4Samples[0].dts,\r\n                                          mp4Samples[0].pts,\r\n                                          mp4Samples[0].duration,\r\n                                          mp4Samples[0].originalDts,\r\n                                          false);\r\n        info.lastSample = new SampleInfo(latest.dts,\r\n                                         latest.pts,\r\n                                         latest.duration,\r\n                                         latest.originalDts,\r\n                                         false);\r\n        if (!this._isLive) {\r\n            this._audioSegmentInfoList.append(info);\r\n        }\r\n\r\n        track.samples = mp4Samples;\r\n        track.sequenceNumber++;\r\n\r\n        let moofbox = null;\r\n\r\n        if (mpegRawTrack) {\r\n            // Generate empty buffer, because useless for raw mpeg\r\n            moofbox = new Uint8Array();\r\n        } else {\r\n            // Generate moof for fmp4 segment\r\n            moofbox = MP4.moof(track, firstDts);\r\n        }\r\n\r\n        track.samples = [];\r\n        track.length = 0;\r\n\r\n        let segment = {\r\n            type: 'audio',\r\n            data: this._mergeBoxes(moofbox, mdatbox).buffer,\r\n            sampleCount: mp4Samples.length,\r\n            info: info\r\n        };\r\n\r\n        if (mpegRawTrack && firstSegmentAfterSeek) {\r\n            // For MPEG audio stream in MSE, if seeking occurred, before appending new buffer\r\n            // We need explicitly set timestampOffset to the desired point in timeline for mpeg SourceBuffer.\r\n            segment.timestampOffset = firstDts;\r\n        }\r\n\r\n        this._onMediaSegment('audio', segment);\r\n    }\r\n\r\n    _remuxVideo(videoTrack, force) {\r\n        if (this._videoMeta == null) {\r\n            return;\r\n        }\r\n\r\n        let track = videoTrack;\r\n        let samples = track.samples;\r\n        let dtsCorrection = undefined;\r\n        let firstDts = -1, lastDts = -1;\r\n        let firstPts = -1, lastPts = -1;\r\n\r\n        if (!samples || samples.length === 0) {\r\n            return;\r\n        }\r\n        if (samples.length === 1 && !force) {\r\n            // If [sample count in current batch] === 1 && (force != true)\r\n            // Ignore and keep in demuxer's queue\r\n            return;\r\n        }  // else if (force === true) do remux\r\n\r\n        let offset = 8;\r\n        let mdatbox = null;\r\n        let mdatBytes = 8 + videoTrack.length;\r\n\r\n\r\n        let lastSample = null;\r\n\r\n        // Pop the lastSample and waiting for stash\r\n        if (samples.length > 1) {\r\n            lastSample = samples.pop();\r\n            mdatBytes -= lastSample.length;\r\n        }\r\n\r\n        // Insert [stashed lastSample in the previous batch] to the front\r\n        if (this._videoStashedLastSample != null) {\r\n            let sample = this._videoStashedLastSample;\r\n            this._videoStashedLastSample = null;\r\n            samples.unshift(sample);\r\n            mdatBytes += sample.length;\r\n        }\r\n\r\n        // Stash the lastSample of current batch, waiting for next batch\r\n        if (lastSample != null) {\r\n            this._videoStashedLastSample = lastSample;\r\n        }\r\n\r\n\r\n        let firstSampleOriginalDts = samples[0].dts - this._dtsBase;\r\n\r\n        // calculate dtsCorrection\r\n        if (this._videoNextDts) {\r\n            dtsCorrection = firstSampleOriginalDts - this._videoNextDts;\r\n        } else {  // this._videoNextDts == undefined\r\n            if (this._videoSegmentInfoList.isEmpty()) {\r\n                dtsCorrection = 0;\r\n            } else {\r\n                let lastSample = this._videoSegmentInfoList.getLastSampleBefore(firstSampleOriginalDts);\r\n                if (lastSample != null) {\r\n                    let distance = (firstSampleOriginalDts - (lastSample.originalDts + lastSample.duration));\r\n                    if (distance <= 3) {\r\n                        distance = 0;\r\n                    }\r\n                    let expectedDts = lastSample.dts + lastSample.duration + distance;\r\n                    dtsCorrection = firstSampleOriginalDts - expectedDts;\r\n                } else { // lastSample == null, cannot found\r\n                    dtsCorrection = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        let info = new MediaSegmentInfo();\r\n        let mp4Samples = [];\r\n\r\n        // Correct dts for each sample, and calculate sample duration. Then output to mp4Samples\r\n        for (let i = 0; i < samples.length; i++) {\r\n            let sample = samples[i];\r\n            let originalDts = sample.dts - this._dtsBase;\r\n            let isKeyframe = sample.isKeyframe;\r\n            let dts = originalDts - dtsCorrection;\r\n            let cts = sample.cts;\r\n            let pts = dts + cts;\r\n\r\n            if (firstDts === -1) {\r\n                firstDts = dts;\r\n                firstPts = pts;\r\n            }\r\n\r\n            let sampleDuration = 0;\r\n\r\n            if (i !== samples.length - 1) {\r\n                let nextDts = samples[i + 1].dts - this._dtsBase - dtsCorrection;\r\n                sampleDuration = nextDts - dts;\r\n            } else {  // the last sample\r\n                if (lastSample != null) {  // use stashed sample's dts to calculate sample duration\r\n                    let nextDts = lastSample.dts - this._dtsBase - dtsCorrection;\r\n                    sampleDuration = nextDts - dts;\r\n                } else if (mp4Samples.length >= 1) {  // use second last sample duration\r\n                    sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\r\n                } else {  // the only one sample, use reference sample duration\r\n                    sampleDuration = Math.floor(this._videoMeta.refSampleDuration);\r\n                }\r\n            }\r\n\r\n            if (isKeyframe) {\r\n                let syncPoint = new SampleInfo(dts, pts, sampleDuration, sample.dts, true);\r\n                syncPoint.fileposition = sample.fileposition;\r\n                info.appendSyncPoint(syncPoint);\r\n            }\r\n\r\n            mp4Samples.push({\r\n                dts: dts,\r\n                pts: pts,\r\n                cts: cts,\r\n                units: sample.units,\r\n                size: sample.length,\r\n                isKeyframe: isKeyframe,\r\n                duration: sampleDuration,\r\n                originalDts: originalDts,\r\n                flags: {\r\n                    isLeading: 0,\r\n                    dependsOn: isKeyframe ? 2 : 1,\r\n                    isDependedOn: isKeyframe ? 1 : 0,\r\n                    hasRedundancy: 0,\r\n                    isNonSync: isKeyframe ? 0 : 1\r\n                }\r\n            });\r\n        }\r\n\r\n        // allocate mdatbox\r\n        mdatbox = new Uint8Array(mdatBytes);\r\n        mdatbox[0] = (mdatBytes >>> 24) & 0xFF;\r\n        mdatbox[1] = (mdatBytes >>> 16) & 0xFF;\r\n        mdatbox[2] = (mdatBytes >>>  8) & 0xFF;\r\n        mdatbox[3] = (mdatBytes) & 0xFF;\r\n        mdatbox.set(MP4.types.mdat, 4);\r\n\r\n        // Write samples into mdatbox\r\n        for (let i = 0; i < mp4Samples.length; i++) {\r\n            let units = mp4Samples[i].units;\r\n            while (units.length) {\r\n                let unit = units.shift();\r\n                let data = unit.data;\r\n                mdatbox.set(data, offset);\r\n                offset += data.byteLength;\r\n            }\r\n        }\r\n\r\n        let latest = mp4Samples[mp4Samples.length - 1];\r\n        lastDts = latest.dts + latest.duration;\r\n        lastPts = latest.pts + latest.duration;\r\n        this._videoNextDts = lastDts;\r\n\r\n        // fill media segment info & add to info list\r\n        info.beginDts = firstDts;\r\n        info.endDts = lastDts;\r\n        info.beginPts = firstPts;\r\n        info.endPts = lastPts;\r\n        info.originalBeginDts = mp4Samples[0].originalDts;\r\n        info.originalEndDts = latest.originalDts + latest.duration;\r\n        info.firstSample = new SampleInfo(mp4Samples[0].dts,\r\n                                          mp4Samples[0].pts,\r\n                                          mp4Samples[0].duration,\r\n                                          mp4Samples[0].originalDts,\r\n                                          mp4Samples[0].isKeyframe);\r\n        info.lastSample = new SampleInfo(latest.dts,\r\n                                         latest.pts,\r\n                                         latest.duration,\r\n                                         latest.originalDts,\r\n                                         latest.isKeyframe);\r\n        if (!this._isLive) {\r\n            this._videoSegmentInfoList.append(info);\r\n        }\r\n\r\n        track.samples = mp4Samples;\r\n        track.sequenceNumber++;\r\n\r\n        // workaround for chrome < 50: force first sample as a random access point\r\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=229412\r\n        if (this._forceFirstIDR) {\r\n            let flags = mp4Samples[0].flags;\r\n            flags.dependsOn = 2;\r\n            flags.isNonSync = 0;\r\n        }\r\n\r\n        let moofbox = MP4.moof(track, firstDts);\r\n        track.samples = [];\r\n        track.length = 0;\r\n\r\n        this._onMediaSegment('video', {\r\n            type: 'video',\r\n            data: this._mergeBoxes(moofbox, mdatbox).buffer,\r\n            sampleCount: mp4Samples.length,\r\n            info: info\r\n        });\r\n    }\r\n\r\n    _mergeBoxes(moof, mdat) {\r\n        let result = new Uint8Array(moof.byteLength + mdat.byteLength);\r\n        result.set(moof, 0);\r\n        result.set(mdat, moof.byteLength);\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nexport default MP4Remuxer;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nlet Browser = {};\r\n\r\nfunction detect() {\r\n    // modified from jquery-browser-plugin\r\n\r\n    let ua = self.navigator.userAgent.toLowerCase();\r\n\r\n    let match = /(edge)\\/([\\w.]+)/.exec(ua) ||\r\n        /(opr)[\\/]([\\w.]+)/.exec(ua) ||\r\n        /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        /(iemobile)[\\/]([\\w.]+)/.exec(ua) ||\r\n        /(version)(applewebkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        /(webkit)[ \\/]([\\w.]+).*(version)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        /(msie) ([\\w.]+)/.exec(ua) ||\r\n        ua.indexOf('trident') >= 0 && /(rv)(?::| )([\\w.]+)/.exec(ua) ||\r\n        ua.indexOf('compatible') < 0 && /(firefox)[ \\/]([\\w.]+)/.exec(ua) ||\r\n        [];\r\n\r\n    let platform_match = /(ipad)/.exec(ua) ||\r\n        /(ipod)/.exec(ua) ||\r\n        /(windows phone)/.exec(ua) ||\r\n        /(iphone)/.exec(ua) ||\r\n        /(kindle)/.exec(ua) ||\r\n        /(android)/.exec(ua) ||\r\n        /(windows)/.exec(ua) ||\r\n        /(mac)/.exec(ua) ||\r\n        /(linux)/.exec(ua) ||\r\n        /(cros)/.exec(ua) ||\r\n        [];\r\n\r\n    let matched = {\r\n        browser: match[5] || match[3] || match[1] || '',\r\n        version: match[2] || match[4] || '0',\r\n        majorVersion: match[4] || match[2] || '0',\r\n        platform: platform_match[0] || ''\r\n    };\r\n\r\n    let browser = {};\r\n    if (matched.browser) {\r\n        browser[matched.browser] = true;\r\n\r\n        let versionArray = matched.majorVersion.split('.');\r\n        browser.version = {\r\n            major: parseInt(matched.majorVersion, 10),\r\n            string: matched.version\r\n        };\r\n        if (versionArray.length > 1) {\r\n            browser.version.minor = parseInt(versionArray[1], 10);\r\n        }\r\n        if (versionArray.length > 2) {\r\n            browser.version.build = parseInt(versionArray[2], 10);\r\n        }\r\n    }\r\n\r\n    if (matched.platform) {\r\n        browser[matched.platform] = true;\r\n    }\r\n\r\n    if (browser.chrome || browser.opr || browser.safari) {\r\n        browser.webkit = true;\r\n    }\r\n\r\n    // MSIE. IE11 has 'rv' identifer\r\n    if (browser.rv || browser.iemobile) {\r\n        if (browser.rv) {\r\n            delete browser.rv;\r\n        }\r\n        let msie = 'msie';\r\n        matched.browser = msie;\r\n        browser[msie] = true;\r\n    }\r\n\r\n    // Microsoft Edge\r\n    if (browser.edge) {\r\n        delete browser.edge;\r\n        let msedge = 'msedge';\r\n        matched.browser = msedge;\r\n        browser[msedge] = true;\r\n    }\r\n\r\n    // Opera 15+\r\n    if (browser.opr) {\r\n        let opera = 'opera';\r\n        matched.browser = opera;\r\n        browser[opera] = true;\r\n    }\r\n\r\n    // Stock android browsers are marked as Safari\r\n    if (browser.safari && browser.android) {\r\n        let android = 'android';\r\n        matched.browser = android;\r\n        browser[android] = true;\r\n    }\r\n\r\n    browser.name = matched.browser;\r\n    browser.platform = matched.platform;\r\n\r\n    for (let key in Browser) {\r\n        if (Browser.hasOwnProperty(key)) {\r\n            delete Browser[key];\r\n        }\r\n    }\r\n    Object.assign(Browser, browser);\r\n}\r\n\r\ndetect();\r\n\r\nexport default Browser;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport class RuntimeException {\r\n\r\n    constructor(message) {\r\n        this._message = message;\r\n    }\r\n\r\n    get name() {\r\n        return 'RuntimeException';\r\n    }\r\n\r\n    get message() {\r\n        return this._message;\r\n    }\r\n\r\n    toString() {\r\n        return this.name + ': ' + this.message;\r\n    }\r\n\r\n}\r\n\r\nexport class IllegalStateException extends RuntimeException {\r\n\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n\r\n    get name() {\r\n        return 'IllegalStateException';\r\n    }\r\n\r\n}\r\n\r\nexport class InvalidArgumentException extends RuntimeException {\r\n\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n\r\n    get name() {\r\n        return 'InvalidArgumentException';\r\n    }\r\n\r\n}\r\n\r\nexport class NotImplementedException extends RuntimeException {\r\n\r\n    constructor(message) {\r\n        super(message);\r\n    }\r\n\r\n    get name() {\r\n        return 'NotImplementedException';\r\n    }\r\n\r\n}\r\n","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\n\r\nclass Log {\r\n\r\n    static e(tag, msg) {\r\n        if (!tag || Log.FORCE_GLOBAL_TAG)\r\n            tag = Log.GLOBAL_TAG;\r\n\r\n        let str = `[${tag}] > ${msg}`;\r\n\r\n        if (Log.ENABLE_CALLBACK) {\r\n            Log.emitter.emit('log', 'error', str);\r\n        }\r\n\r\n        if (!Log.ENABLE_ERROR) {\r\n            return;\r\n        }\r\n\r\n        if (console.error) {\r\n            console.error(str);\r\n        } else if (console.warn) {\r\n            console.warn(str);\r\n        } else {\r\n            console.log(str);\r\n        }\r\n    }\r\n\r\n    static i(tag, msg) {\r\n        if (!tag || Log.FORCE_GLOBAL_TAG)\r\n            tag = Log.GLOBAL_TAG;\r\n\r\n        let str = `[${tag}] > ${msg}`;\r\n\r\n        if (Log.ENABLE_CALLBACK) {\r\n            Log.emitter.emit('log', 'info', str);\r\n        }\r\n\r\n        if (!Log.ENABLE_INFO) {\r\n            return;\r\n        }\r\n\r\n        if (console.info) {\r\n            console.info(str);\r\n        } else {\r\n            console.log(str);\r\n        }\r\n    }\r\n\r\n    static w(tag, msg) {\r\n        if (!tag || Log.FORCE_GLOBAL_TAG)\r\n            tag = Log.GLOBAL_TAG;\r\n\r\n        let str = `[${tag}] > ${msg}`;\r\n\r\n        if (Log.ENABLE_CALLBACK) {\r\n            Log.emitter.emit('log', 'warn', str);\r\n        }\r\n\r\n        if (!Log.ENABLE_WARN) {\r\n            return;\r\n        }\r\n\r\n        if (console.warn) {\r\n            console.warn(str);\r\n        } else {\r\n            console.log(str);\r\n        }\r\n    }\r\n\r\n    static d(tag, msg) {\r\n        if (!tag || Log.FORCE_GLOBAL_TAG)\r\n            tag = Log.GLOBAL_TAG;\r\n\r\n        let str = `[${tag}] > ${msg}`;\r\n\r\n        if (Log.ENABLE_CALLBACK) {\r\n            Log.emitter.emit('log', 'debug', str);\r\n        }\r\n\r\n        if (!Log.ENABLE_DEBUG) {\r\n            return;\r\n        }\r\n\r\n        if (console.debug) {\r\n            console.debug(str);\r\n        } else {\r\n            console.log(str);\r\n        }\r\n    }\r\n\r\n    static v(tag, msg) {\r\n        if (!tag || Log.FORCE_GLOBAL_TAG)\r\n            tag = Log.GLOBAL_TAG;\r\n\r\n        let str = `[${tag}] > ${msg}`;\r\n\r\n        if (Log.ENABLE_CALLBACK) {\r\n            Log.emitter.emit('log', 'verbose', str);\r\n        }\r\n\r\n        if (!Log.ENABLE_VERBOSE) {\r\n            return;\r\n        }\r\n\r\n        console.log(str);\r\n    }\r\n\r\n}\r\n\r\nLog.GLOBAL_TAG = 'flv.js';\r\nLog.FORCE_GLOBAL_TAG = false;\r\nLog.ENABLE_ERROR = true;\r\nLog.ENABLE_INFO = true;\r\nLog.ENABLE_WARN = true;\r\nLog.ENABLE_DEBUG = true;\r\nLog.ENABLE_VERBOSE = true;\r\n\r\nLog.ENABLE_CALLBACK = false;\r\n\r\nLog.emitter = new EventEmitter();\r\n\r\nexport default Log;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport EventEmitter from 'events';\r\nimport Log from './logger.js';\r\n\r\nclass LoggingControl {\r\n\r\n    static get forceGlobalTag() {\r\n        return Log.FORCE_GLOBAL_TAG;\r\n    }\r\n\r\n    static set forceGlobalTag(enable) {\r\n        Log.FORCE_GLOBAL_TAG = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get globalTag() {\r\n        return Log.GLOBAL_TAG;\r\n    }\r\n\r\n    static set globalTag(tag) {\r\n        Log.GLOBAL_TAG = tag;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableAll() {\r\n        return Log.ENABLE_VERBOSE\r\n            && Log.ENABLE_DEBUG\r\n            && Log.ENABLE_INFO\r\n            && Log.ENABLE_WARN\r\n            && Log.ENABLE_ERROR;\r\n    }\r\n\r\n    static set enableAll(enable) {\r\n        Log.ENABLE_VERBOSE = enable;\r\n        Log.ENABLE_DEBUG = enable;\r\n        Log.ENABLE_INFO = enable;\r\n        Log.ENABLE_WARN = enable;\r\n        Log.ENABLE_ERROR = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableDebug() {\r\n        return Log.ENABLE_DEBUG;\r\n    }\r\n\r\n    static set enableDebug(enable) {\r\n        Log.ENABLE_DEBUG = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableVerbose() {\r\n        return Log.ENABLE_VERBOSE;\r\n    }\r\n\r\n    static set enableVerbose(enable) {\r\n        Log.ENABLE_VERBOSE = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableInfo() {\r\n        return Log.ENABLE_INFO;\r\n    }\r\n\r\n    static set enableInfo(enable) {\r\n        Log.ENABLE_INFO = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableWarn() {\r\n        return Log.ENABLE_WARN;\r\n    }\r\n\r\n    static set enableWarn(enable) {\r\n        Log.ENABLE_WARN = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static get enableError() {\r\n        return Log.ENABLE_ERROR;\r\n    }\r\n\r\n    static set enableError(enable) {\r\n        Log.ENABLE_ERROR = enable;\r\n        LoggingControl._notifyChange();\r\n    }\r\n\r\n    static getConfig() {\r\n        return {\r\n            globalTag: Log.GLOBAL_TAG,\r\n            forceGlobalTag: Log.FORCE_GLOBAL_TAG,\r\n            enableVerbose: Log.ENABLE_VERBOSE,\r\n            enableDebug: Log.ENABLE_DEBUG,\r\n            enableInfo: Log.ENABLE_INFO,\r\n            enableWarn: Log.ENABLE_WARN,\r\n            enableError: Log.ENABLE_ERROR,\r\n            enableCallback: Log.ENABLE_CALLBACK\r\n        };\r\n    }\r\n\r\n    static applyConfig(config) {\r\n        Log.GLOBAL_TAG = config.globalTag;\r\n        Log.FORCE_GLOBAL_TAG = config.forceGlobalTag;\r\n        Log.ENABLE_VERBOSE = config.enableVerbose;\r\n        Log.ENABLE_DEBUG = config.enableDebug;\r\n        Log.ENABLE_INFO = config.enableInfo;\r\n        Log.ENABLE_WARN = config.enableWarn;\r\n        Log.ENABLE_ERROR = config.enableError;\r\n        Log.ENABLE_CALLBACK = config.enableCallback;\r\n    }\r\n\r\n    static _notifyChange() {\r\n        let emitter = LoggingControl.emitter;\r\n\r\n        if (emitter.listenerCount('change') > 0) {\r\n            let config = LoggingControl.getConfig();\r\n            emitter.emit('change', config);\r\n        }\r\n    }\r\n\r\n    static registerListener(listener) {\r\n        LoggingControl.emitter.addListener('change', listener);\r\n    }\r\n\r\n    static removeListener(listener) {\r\n        LoggingControl.emitter.removeListener('change', listener);\r\n    }\r\n\r\n    static addLogListener(listener) {\r\n        Log.emitter.addListener('log', listener);\r\n        if (Log.emitter.listenerCount('log') > 0) {\r\n            Log.ENABLE_CALLBACK = true;\r\n            LoggingControl._notifyChange();\r\n        }\r\n    }\r\n\r\n    static removeLogListener(listener) {\r\n        Log.emitter.removeListener('log', listener);\r\n        if (Log.emitter.listenerCount('log') === 0) {\r\n            Log.ENABLE_CALLBACK = false;\r\n            LoggingControl._notifyChange();\r\n        }\r\n    }\r\n\r\n}\r\n\r\nLoggingControl.emitter = new EventEmitter();\r\n\r\nexport default LoggingControl;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nclass Polyfill {\r\n\r\n    static install() {\r\n        // ES6 Object.setPrototypeOf\r\n        Object.setPrototypeOf = Object.setPrototypeOf || function (obj, proto) {\r\n            obj.__proto__ = proto;\r\n            return obj;\r\n        };\r\n\r\n        // ES6 Object.assign\r\n        Object.assign = Object.assign || function (target) {\r\n            if (target === undefined || target === null) {\r\n                throw new TypeError('Cannot convert undefined or null to object');\r\n            }\r\n\r\n            let output = Object(target);\r\n            for (let i = 1; i < arguments.length; i++) {\r\n                let source = arguments[i];\r\n                if (source !== undefined && source !== null) {\r\n                    for (let key in source) {\r\n                        if (source.hasOwnProperty(key)) {\r\n                            output[key] = source[key];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return output;\r\n        };\r\n\r\n        // ES6 Promise (missing support in IE11)\r\n        if (typeof self.Promise !== 'function') {\r\n            require('es6-promise').polyfill();\r\n        }\r\n    }\r\n\r\n}\r\n\r\nPolyfill.install();\r\n\r\nexport default Polyfill;","/*\r\n * Copyright (C) 2016 Bilibili. All Rights Reserved.\r\n *\r\n * This file is derived from C++ project libWinTF8 (https://github.com/m13253/libWinTF8)\r\n * @author zheng qian <xqq@xqq.im>\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nfunction checkContinuation(uint8array, start, checkLength) {\r\n    let array = uint8array;\r\n    if (start + checkLength < array.length) {\r\n        while (checkLength--) {\r\n            if ((array[++start] & 0xC0) !== 0x80)\r\n                return false;\r\n        }\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction decodeUTF8(uint8array) {\r\n    let out = [];\r\n    let input = uint8array;\r\n    let i = 0;\r\n    let length = uint8array.length;\r\n\r\n    while (i < length) {\r\n        if (input[i] < 0x80) {\r\n            out.push(String.fromCharCode(input[i]));\r\n            ++i;\r\n            continue;\r\n        } else if (input[i] < 0xC0) {\r\n            // fallthrough\r\n        } else if (input[i] < 0xE0) {\r\n            if (checkContinuation(input, i, 1)) {\r\n                let ucs4 = (input[i] & 0x1F) << 6 | (input[i + 1] & 0x3F);\r\n                if (ucs4 >= 0x80) {\r\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\r\n                    i += 2;\r\n                    continue;\r\n                }\r\n            }\r\n        } else if (input[i] < 0xF0) {\r\n            if (checkContinuation(input, i, 2)) {\r\n                let ucs4 = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\r\n                if (ucs4 >= 0x800 && (ucs4 & 0xF800) !== 0xD800) {\r\n                    out.push(String.fromCharCode(ucs4 & 0xFFFF));\r\n                    i += 3;\r\n                    continue;\r\n                }\r\n            }\r\n        } else if (input[i] < 0xF8) {\r\n            if (checkContinuation(input, i, 3)) {\r\n                let ucs4 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12\r\n                         | (input[i + 2] & 0x3F) << 6 | (input[i + 3] & 0x3F);\r\n                if (ucs4 > 0x10000 && ucs4 < 0x110000) {\r\n                    ucs4 -= 0x10000;\r\n                    out.push(String.fromCharCode((ucs4 >>> 10) | 0xD800));\r\n                    out.push(String.fromCharCode((ucs4 & 0x3FF) | 0xDC00));\r\n                    i += 4;\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        out.push(String.fromCharCode(0xFFFD));\r\n        ++i;\r\n    }\r\n\r\n    return out.join('');\r\n}\r\n\r\nexport default decodeUTF8;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9fYnJvd3Nlci1wYWNrQDYuMS4wQGJyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIm5vZGVfbW9kdWxlcy9fZXM2LXByb21pc2VANC4yLjhAZXM2LXByb21pc2UvZGlzdC9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9fZXZlbnRzQDEuMS4xQGV2ZW50cy9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvX3Byb2Nlc3NAMC4xMS4xMEBwcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvX3dlYndvcmtpZnlAMS41LjBAd2Vid29ya2lmeS9pbmRleC5qcyIsInNyYy9jb25maWcuanMiLCJzcmMvY29yZS9mZWF0dXJlcy5qcyIsInNyYy9jb3JlL21lZGlhLWluZm8uanMiLCJzcmMvY29yZS9tZWRpYS1zZWdtZW50LWluZm8uanMiLCJzcmMvY29yZS9tc2UtY29udHJvbGxlci5qcyIsInNyYy9jb3JlL21zZS1ldmVudHMuanMiLCJzcmMvY29yZS90cmFuc211eGVyLmpzIiwic3JjL2NvcmUvdHJhbnNtdXhpbmctY29udHJvbGxlci5qcyIsInNyYy9jb3JlL3RyYW5zbXV4aW5nLWV2ZW50cy5qcyIsInNyYy9jb3JlL3RyYW5zbXV4aW5nLXdvcmtlci5qcyIsInNyYy9kZW11eC9hbWYtcGFyc2VyLmpzIiwic3JjL2RlbXV4L2RlbXV4LWVycm9ycy5qcyIsInNyYy9kZW11eC9leHAtZ29sb21iLmpzIiwic3JjL2RlbXV4L2Zsdi1kZW11eGVyLmpzIiwic3JjL2RlbXV4L2hldmMtZ29sb21iLmpzIiwic3JjL2RlbXV4L3Nwcy1wYXJzZXIuanMiLCJzcmMvZGVtdXgvdnBzLXBhcnNlci5qcyIsInNyYy9mbHYuanMiLCJzcmMvaW5kZXguanMiLCJzcmMvaW8vZmV0Y2gtc3RyZWFtLWxvYWRlci5qcyIsInNyYy9pby9pby1jb250cm9sbGVyLmpzIiwic3JjL2lvL2xvYWRlci5qcyIsInNyYy9pby9wYXJhbS1zZWVrLWhhbmRsZXIuanMiLCJzcmMvaW8vcmFuZ2Utc2Vlay1oYW5kbGVyLmpzIiwic3JjL2lvL3NwZWVkLXNhbXBsZXIuanMiLCJzcmMvaW8vd2Vic29ja2V0LWxvYWRlci5qcyIsInNyYy9pby94aHItbW96LWNodW5rZWQtbG9hZGVyLmpzIiwic3JjL2lvL3hoci1tc3N0cmVhbS1sb2FkZXIuanMiLCJzcmMvaW8veGhyLXJhbmdlLWxvYWRlci5qcyIsInNyYy9wbGF5ZXIvZmx2LXBsYXllci5qcyIsInNyYy9wbGF5ZXIvbmF0aXZlLXBsYXllci5qcyIsInNyYy9wbGF5ZXIvcGxheWVyLWVycm9ycy5qcyIsInNyYy9wbGF5ZXIvcGxheWVyLWV2ZW50cy5qcyIsInNyYy9yZW11eC9hYWMtc2lsZW50LmpzIiwic3JjL3JlbXV4L21wNC1nZW5lcmF0b3IuanMiLCJzcmMvcmVtdXgvbXA0LXJlbXV4ZXIuanMiLCJzcmMvdXRpbHMvYnJvd3Nlci5qcyIsInNyYy91dGlscy9leGNlcHRpb24uanMiLCJzcmMvdXRpbHMvbG9nZ2VyLmpzIiwic3JjL3V0aWxzL2xvZ2dpbmctY29udHJvbC5qcyIsInNyYy91dGlscy9wb2x5ZmlsbC5qcyIsInNyYy91dGlscy91dGY4LWNvbnYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3RwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNKO0FBQ0QsWUFBSSxJQUFKLENBQVMsT0FBTyxZQUFQLENBQW9CLE1BQXBCLENBQVQ7QUFDQSxVQUFFLENBQUY7QUFDSDs7QUFFRCxXQUFPLElBQUksSUFBSixDQUFTLEVBQVQsQ0FBUDtBQUNIOztrQkFFYyxVIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICB2NC4yLjgrMWU2OGRjZTZcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHg7XG4gIHJldHVybiB4ICE9PSBudWxsICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuXG5cbnZhciBfaXNBcnJheSA9IHZvaWQgMDtcbmlmIChBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB2b2lkIDA7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB2b2lkIDA7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgdmVydHggPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpLnJlcXVpcmUoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHZvaWQgMDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuXG4gIGlmIChfc3RhdGUpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxuICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlc29sdmUoMSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZSQxKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkMSkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIHRoZW4kJDEgPSB2b2lkIDA7XG4gICAgdHJ5IHtcbiAgICAgIHRoZW4kJDEgPSB2YWx1ZS50aGVuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCB0aGVuJCQxKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdm9pZCAwLFxuICAgICAgY2FsbGJhY2sgPSB2b2lkIDAsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB2b2lkIDAsXG4gICAgICBlcnJvciA9IHZvaWQgMCxcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhbHVlID0gY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzdWNjZWVkZWQgPSBmYWxzZTtcbiAgICAgIGVycm9yID0gZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHN1Y2NlZWRlZCA9PT0gZmFsc2UpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59XG5cbnZhciBFbnVtZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cbiAgICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgfVxuICB9XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uIF9lbnVtZXJhdGUoaW5wdXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgIH1cbiAgfTtcblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gX2VhY2hFbnRyeShlbnRyeSwgaSkge1xuICAgIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgICB2YXIgcmVzb2x2ZSQkMSA9IGMucmVzb2x2ZTtcblxuXG4gICAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuICAgICAgdmFyIF90aGVuID0gdm9pZCAwO1xuICAgICAgdmFyIGVycm9yID0gdm9pZCAwO1xuICAgICAgdmFyIGRpZEVycm9yID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBfdGhlbiA9IGVudHJ5LnRoZW47XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGRpZEVycm9yID0gdHJ1ZTtcbiAgICAgICAgZXJyb3IgPSBlO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDEpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgICAgaWYgKGRpZEVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUkJDEoZW50cnkpO1xuICAgICAgICB9KSwgaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiBfc2V0dGxlZEF0KHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG5cbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiBfd2lsbFNldHRsZUF0KHByb21pc2UsIGkpIHtcbiAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gRW51bWVyYXRvcjtcbn0oKTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5cbnZhciBQcm9taXNlJDEgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XG4gICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgIGlmIChub29wICE9PSByZXNvbHZlcikge1xuICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gIH0pO1xuICBgYGBcbiAgIENoYWluaW5nXG4gIC0tLS0tLS0tXG4gICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gIH0pO1xuICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgfSk7XG4gIGBgYFxuICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgQXNzaW1pbGF0aW9uXG4gIC0tLS0tLS0tLS0tLVxuICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gIH0pO1xuICBgYGBcbiAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgU2ltcGxlIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IHJlc3VsdDtcbiAgIHRyeSB7XG4gICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH1cbiAgfSk7XG4gIGBgYFxuICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgYGBgamF2YXNjcmlwdFxuICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBmYWlsdXJlXG4gIH0pO1xuICBgYGBcbiAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IGF1dGhvciwgYm9va3M7XG4gICB0cnkge1xuICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gICB9XG4gICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICAgfVxuICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRBdXRob3IoKS5cbiAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgIC8vIGZvdW5kIGJvb2tzXG4gIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICAgQG1ldGhvZCB0aGVuXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG4gIC8qKlxuICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gIH1cbiAgLy8gc3luY2hyb25vdXNcbiAgdHJ5IHtcbiAgZmluZEF1dGhvcigpO1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9XG4gIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH0pO1xuICBgYGBcbiAgQG1ldGhvZCBjYXRjaFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cblxuICBQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgIGBmaW5hbGx5YCB3aWxsIGJlIGludm9rZWQgcmVnYXJkbGVzcyBvZiB0aGUgcHJvbWlzZSdzIGZhdGUganVzdCBhcyBuYXRpdmVcbiAgICB0cnkvY2F0Y2gvZmluYWxseSBiZWhhdmVzXG4gIFxuICAgIFN5bmNocm9ub3VzIGV4YW1wbGU6XG4gIFxuICAgIGBgYGpzXG4gICAgZmluZEF1dGhvcigpIHtcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBBdXRob3IoKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZmluZEF1dGhvcigpOyAvLyBzdWNjZWVkIG9yIGZhaWxcbiAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIGFsd2F5cyBydW5zXG4gICAgICAvLyBkb2Vzbid0IGFmZmVjdCB0aGUgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBBc3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyBhdXRob3Igd2FzIGVpdGhlciBmb3VuZCwgb3Igbm90XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgZmluYWxseVxuICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiBfZmluYWxseShjYWxsYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYWxsYmFjaywgY2FsbGJhY2spO1xuICB9O1xuXG4gIHJldHVybiBQcm9taXNlO1xufSgpO1xuXG5Qcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuUHJvbWlzZSQxLmFsbCA9IGFsbDtcblByb21pc2UkMS5yYWNlID0gcmFjZTtcblByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQxLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgdmFyIGxvY2FsID0gdm9pZCAwO1xuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gc2VsZjtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gIGlmIChQKSB7XG4gICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgIH1cblxuICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQxLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblxucmV0dXJuIFByb21pc2UkMTtcblxufSkpKTtcblxuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBidW5kbGVGbiA9IGFyZ3VtZW50c1szXTtcbnZhciBzb3VyY2VzID0gYXJndW1lbnRzWzRdO1xudmFyIGNhY2hlID0gYXJndW1lbnRzWzVdO1xuXG52YXIgc3RyaW5naWZ5ID0gSlNPTi5zdHJpbmdpZnk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgdmFyIHdrZXk7XG4gICAgdmFyIGNhY2hlS2V5cyA9IE9iamVjdC5rZXlzKGNhY2hlKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2FjaGVLZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0gY2FjaGVLZXlzW2ldO1xuICAgICAgICB2YXIgZXhwID0gY2FjaGVba2V5XS5leHBvcnRzO1xuICAgICAgICAvLyBVc2luZyBiYWJlbCBhcyBhIHRyYW5zcGlsZXIgdG8gdXNlIGVzbW9kdWxlLCB0aGUgZXhwb3J0IHdpbGwgYWx3YXlzXG4gICAgICAgIC8vIGJlIGFuIG9iamVjdCB3aXRoIHRoZSBkZWZhdWx0IGV4cG9ydCBhcyBhIHByb3BlcnR5IG9mIGl0LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhlIGV4aXN0aW5nIGFwaSBhbmQgYmFiZWwgZXNtb2R1bGUgZXhwb3J0cyBhcmUgYm90aCBzdXBwb3J0ZWQgd2VcbiAgICAgICAgLy8gY2hlY2sgZm9yIGJvdGhcbiAgICAgICAgaWYgKGV4cCA9PT0gZm4gfHwgZXhwICYmIGV4cC5kZWZhdWx0ID09PSBmbikge1xuICAgICAgICAgICAgd2tleSA9IGtleTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF3a2V5KSB7XG4gICAgICAgIHdrZXkgPSBNYXRoLmZsb29yKE1hdGgucG93KDE2LCA4KSAqIE1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgdmFyIHdjYWNoZSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNhY2hlS2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjYWNoZUtleXNbaV07XG4gICAgICAgICAgICB3Y2FjaGVba2V5XSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICBzb3VyY2VzW3drZXldID0gW1xuICAgICAgICAgICAgJ2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeycgKyBmbiArICcoc2VsZik7IH0nLFxuICAgICAgICAgICAgd2NhY2hlXG4gICAgICAgIF07XG4gICAgfVxuICAgIHZhciBza2V5ID0gTWF0aC5mbG9vcihNYXRoLnBvdygxNiwgOCkgKiBNYXRoLnJhbmRvbSgpKS50b1N0cmluZygxNik7XG5cbiAgICB2YXIgc2NhY2hlID0ge307IHNjYWNoZVt3a2V5XSA9IHdrZXk7XG4gICAgc291cmNlc1tza2V5XSA9IFtcbiAgICAgICAgJ2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeycgK1xuICAgICAgICAgICAgLy8gdHJ5IHRvIGNhbGwgZGVmYXVsdCBpZiBkZWZpbmVkIHRvIGFsc28gc3VwcG9ydCBiYWJlbCBlc21vZHVsZSBleHBvcnRzXG4gICAgICAgICAgICAndmFyIGYgPSByZXF1aXJlKCcgKyBzdHJpbmdpZnkod2tleSkgKyAnKTsnICtcbiAgICAgICAgICAgICcoZi5kZWZhdWx0ID8gZi5kZWZhdWx0IDogZikoc2VsZik7JyArXG4gICAgICAgICd9JyxcbiAgICAgICAgc2NhY2hlXG4gICAgXTtcblxuICAgIHZhciB3b3JrZXJTb3VyY2VzID0ge307XG4gICAgcmVzb2x2ZVNvdXJjZXMoc2tleSk7XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlU291cmNlcyhrZXkpIHtcbiAgICAgICAgd29ya2VyU291cmNlc1trZXldID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKHZhciBkZXBQYXRoIGluIHNvdXJjZXNba2V5XVsxXSkge1xuICAgICAgICAgICAgdmFyIGRlcEtleSA9IHNvdXJjZXNba2V5XVsxXVtkZXBQYXRoXTtcbiAgICAgICAgICAgIGlmICghd29ya2VyU291cmNlc1tkZXBLZXldKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZVNvdXJjZXMoZGVwS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzcmMgPSAnKCcgKyBidW5kbGVGbiArICcpKHsnXG4gICAgICAgICsgT2JqZWN0LmtleXMod29ya2VyU291cmNlcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdpZnkoa2V5KSArICc6WydcbiAgICAgICAgICAgICAgICArIHNvdXJjZXNba2V5XVswXVxuICAgICAgICAgICAgICAgICsgJywnICsgc3RyaW5naWZ5KHNvdXJjZXNba2V5XVsxXSkgKyAnXSdcbiAgICAgICAgICAgIDtcbiAgICAgICAgfSkuam9pbignLCcpXG4gICAgICAgICsgJ30se30sWycgKyBzdHJpbmdpZnkoc2tleSkgKyAnXSknXG4gICAgO1xuXG4gICAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTCB8fCB3aW5kb3cubW96VVJMIHx8IHdpbmRvdy5tc1VSTDtcblxuICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3NyY10sIHsgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcgfSk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5iYXJlKSB7IHJldHVybiBibG9iOyB9XG4gICAgdmFyIHdvcmtlclVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIod29ya2VyVXJsKTtcbiAgICB3b3JrZXIub2JqZWN0VVJMID0gd29ya2VyVXJsO1xuICAgIHJldHVybiB3b3JrZXI7XG59O1xuIiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29uZmlnID0ge1xyXG4gICAgZW5hYmxlV29ya2VyOiBmYWxzZSxcclxuICAgIGVuYWJsZVN0YXNoQnVmZmVyOiB0cnVlLFxyXG4gICAgc3Rhc2hJbml0aWFsU2l6ZTogdW5kZWZpbmVkLFxyXG5cclxuICAgIGlzTGl2ZTogZmFsc2UsXHJcblxyXG4gICAgbGF6eUxvYWQ6IHRydWUsXHJcbiAgICBsYXp5TG9hZE1heER1cmF0aW9uOiAzICogNjAsXHJcbiAgICBsYXp5TG9hZFJlY292ZXJEdXJhdGlvbjogMzAsXHJcbiAgICBkZWZlckxvYWRBZnRlclNvdXJjZU9wZW46IHRydWUsXHJcblxyXG4gICAgLy8gYXV0b0NsZWFudXBTb3VyY2VCdWZmZXI6IGRlZmF1bHQgYXMgZmFsc2UsIGxlYXZlIHVuc3BlY2lmaWVkXHJcbiAgICBhdXRvQ2xlYW51cE1heEJhY2t3YXJkRHVyYXRpb246IDMgKiA2MCxcclxuICAgIGF1dG9DbGVhbnVwTWluQmFja3dhcmREdXJhdGlvbjogMiAqIDYwLFxyXG5cclxuICAgIHN0YXRpc3RpY3NJbmZvUmVwb3J0SW50ZXJ2YWw6IDYwMCxcclxuXHJcbiAgICBmaXhBdWRpb1RpbWVzdGFtcEdhcDogdHJ1ZSxcclxuXHJcbiAgICBhY2N1cmF0ZVNlZWs6IGZhbHNlLFxyXG4gICAgc2Vla1R5cGU6ICdyYW5nZScsICAvLyBbcmFuZ2UsIHBhcmFtLCBjdXN0b21dXHJcbiAgICBzZWVrUGFyYW1TdGFydDogJ2JzdGFydCcsXHJcbiAgICBzZWVrUGFyYW1FbmQ6ICdiZW5kJyxcclxuICAgIHJhbmdlTG9hZFplcm9TdGFydDogZmFsc2UsXHJcbiAgICBjdXN0b21TZWVrSGFuZGxlcjogdW5kZWZpbmVkLFxyXG4gICAgcmV1c2VSZWRpcmVjdGVkVVJMOiBmYWxzZSxcclxuICAgIC8vIHJlZmVycmVyUG9saWN5OiBsZWF2ZSBhcyB1bnNwZWNpZmllZFxyXG5cclxuICAgIGhlYWRlcnM6IHVuZGVmaW5lZCxcclxuICAgIGN1c3RvbUxvYWRlcjogdW5kZWZpbmVkXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdENvbmZpZygpIHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0Q29uZmlnKTtcclxufSIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgSU9Db250cm9sbGVyIGZyb20gJy4uL2lvL2lvLWNvbnRyb2xsZXIuanMnO1xyXG5pbXBvcnQge2NyZWF0ZURlZmF1bHRDb25maWd9IGZyb20gJy4uL2NvbmZpZy5qcyc7XHJcblxyXG5jbGFzcyBGZWF0dXJlcyB7XHJcblxyXG4gICAgc3RhdGljIHN1cHBvcnRNU0VIMjY0UGxheWJhY2soKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5NZWRpYVNvdXJjZSAmJlxyXG4gICAgICAgICAgICAgICB3aW5kb3cuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKCd2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNDJFMDFFLG1wNGEuNDAuMlwiJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN1cHBvcnROZXR3b3JrU3RyZWFtSU8oKSB7XHJcbiAgICAgICAgbGV0IGlvY3RsID0gbmV3IElPQ29udHJvbGxlcih7fSwgY3JlYXRlRGVmYXVsdENvbmZpZygpKTtcclxuICAgICAgICBsZXQgbG9hZGVyVHlwZSA9IGlvY3RsLmxvYWRlclR5cGU7XHJcbiAgICAgICAgaW9jdGwuZGVzdHJveSgpO1xyXG4gICAgICAgIHJldHVybiBsb2FkZXJUeXBlID09ICdmZXRjaC1zdHJlYW0tbG9hZGVyJyB8fCBsb2FkZXJUeXBlID09ICd4aHItbW96LWNodW5rZWQtbG9hZGVyJztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TmV0d29ya0xvYWRlclR5cGVOYW1lKCkge1xyXG4gICAgICAgIGxldCBpb2N0bCA9IG5ldyBJT0NvbnRyb2xsZXIoe30sIGNyZWF0ZURlZmF1bHRDb25maWcoKSk7XHJcbiAgICAgICAgbGV0IGxvYWRlclR5cGUgPSBpb2N0bC5sb2FkZXJUeXBlO1xyXG4gICAgICAgIGlvY3RsLmRlc3Ryb3koKTtcclxuICAgICAgICByZXR1cm4gbG9hZGVyVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3VwcG9ydE5hdGl2ZU1lZGlhUGxheWJhY2sobWltZVR5cGUpIHtcclxuICAgICAgICBpZiAoRmVhdHVyZXMudmlkZW9FbGVtZW50ID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBGZWF0dXJlcy52aWRlb0VsZW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNhblBsYXkgPSBGZWF0dXJlcy52aWRlb0VsZW1lbnQuY2FuUGxheVR5cGUobWltZVR5cGUpO1xyXG4gICAgICAgIHJldHVybiBjYW5QbGF5ID09PSAncHJvYmFibHknIHx8IGNhblBsYXkgPT0gJ21heWJlJztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RmVhdHVyZUxpc3QoKSB7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVzID0ge1xyXG4gICAgICAgICAgICBtc2VGbHZQbGF5YmFjazogZmFsc2UsXHJcbiAgICAgICAgICAgIG1zZUxpdmVGbHZQbGF5YmFjazogZmFsc2UsXHJcbiAgICAgICAgICAgIG5ldHdvcmtTdHJlYW1JTzogZmFsc2UsXHJcbiAgICAgICAgICAgIG5ldHdvcmtMb2FkZXJOYW1lOiAnJyxcclxuICAgICAgICAgICAgbmF0aXZlTVA0SDI2NFBsYXliYWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgbmF0aXZlV2VibVZQOFBsYXliYWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgbmF0aXZlV2VibVZQOVBsYXliYWNrOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZlYXR1cmVzLm1zZUZsdlBsYXliYWNrID0gRmVhdHVyZXMuc3VwcG9ydE1TRUgyNjRQbGF5YmFjaygpO1xyXG4gICAgICAgIGZlYXR1cmVzLm5ldHdvcmtTdHJlYW1JTyA9IEZlYXR1cmVzLnN1cHBvcnROZXR3b3JrU3RyZWFtSU8oKTtcclxuICAgICAgICBmZWF0dXJlcy5uZXR3b3JrTG9hZGVyTmFtZSA9IEZlYXR1cmVzLmdldE5ldHdvcmtMb2FkZXJUeXBlTmFtZSgpO1xyXG4gICAgICAgIGZlYXR1cmVzLm1zZUxpdmVGbHZQbGF5YmFjayA9IGZlYXR1cmVzLm1zZUZsdlBsYXliYWNrICYmIGZlYXR1cmVzLm5ldHdvcmtTdHJlYW1JTztcclxuICAgICAgICBmZWF0dXJlcy5uYXRpdmVNUDRIMjY0UGxheWJhY2sgPSBGZWF0dXJlcy5zdXBwb3J0TmF0aXZlTWVkaWFQbGF5YmFjaygndmlkZW8vbXA0OyBjb2RlY3M9XCJhdmMxLjQyMDAxRSwgbXA0YS40MC4yXCInKTtcclxuICAgICAgICBmZWF0dXJlcy5uYXRpdmVXZWJtVlA4UGxheWJhY2sgPSBGZWF0dXJlcy5zdXBwb3J0TmF0aXZlTWVkaWFQbGF5YmFjaygndmlkZW8vd2VibTsgY29kZWNzPVwidnA4LjAsIHZvcmJpc1wiJyk7XHJcbiAgICAgICAgZmVhdHVyZXMubmF0aXZlV2VibVZQOVBsYXliYWNrID0gRmVhdHVyZXMuc3VwcG9ydE5hdGl2ZU1lZGlhUGxheWJhY2soJ3ZpZGVvL3dlYm07IGNvZGVjcz1cInZwOVwiJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZlYXR1cmVzOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jbGFzcyBNZWRpYUluZm8ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubWltZVR5cGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmhhc0F1ZGlvID0gbnVsbDtcclxuICAgICAgICB0aGlzLmhhc1ZpZGVvID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF1ZGlvQ29kZWMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmlkZW9Db2RlYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdWRpb0RhdGFSYXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZpZGVvRGF0YVJhdGUgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmF1ZGlvU2FtcGxlUmF0ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdWRpb0NoYW5uZWxDb3VudCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMud2lkdGggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZwcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxldmVsID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlZkZyYW1lcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaHJvbWFGb3JtYXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2FyTnVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNhckRlbiA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSBudWxsOyAgLy8gTWVkaWFJbmZvW11cclxuICAgICAgICB0aGlzLnNlZ21lbnRDb3VudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNLZXlmcmFtZXNJbmRleCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5rZXlmcmFtZXNJbmRleCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb21wbGV0ZSgpIHtcclxuICAgICAgICBsZXQgYXVkaW9JbmZvQ29tcGxldGUgPSAodGhpcy5oYXNBdWRpbyA9PT0gZmFsc2UpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaGFzQXVkaW8gPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvZGVjICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb1NhbXBsZVJhdGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvQ2hhbm5lbENvdW50ICE9IG51bGwpO1xyXG5cclxuICAgICAgICBsZXQgdmlkZW9JbmZvQ29tcGxldGUgPSAodGhpcy5oYXNWaWRlbyA9PT0gZmFsc2UpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaGFzVmlkZW8gPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb0NvZGVjICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcHMgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZGcmFtZXMgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNocm9tYUZvcm1hdCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FyTnVtICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXJEZW4gIT0gbnVsbCk7XHJcblxyXG4gICAgICAgIC8vIGtleWZyYW1lc0luZGV4IG1heSBub3QgYmUgcHJlc2VudFxyXG4gICAgICAgIHJldHVybiB0aGlzLm1pbWVUeXBlICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGEgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICB0aGlzLmhhc0tleWZyYW1lc0luZGV4ICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgYXVkaW9JbmZvQ29tcGxldGUgJiZcclxuICAgICAgICAgICAgICAgdmlkZW9JbmZvQ29tcGxldGU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNTZWVrYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYXNLZXlmcmFtZXNJbmRleCA9PT0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROZWFyZXN0S2V5ZnJhbWUobWlsbGlzZWNvbmRzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMua2V5ZnJhbWVzSW5kZXggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0YWJsZSA9IHRoaXMua2V5ZnJhbWVzSW5kZXg7XHJcbiAgICAgICAgbGV0IGtleWZyYW1lSWR4ID0gdGhpcy5fc2VhcmNoKHRhYmxlLnRpbWVzLCBtaWxsaXNlY29uZHMpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbmRleDoga2V5ZnJhbWVJZHgsXHJcbiAgICAgICAgICAgIG1pbGxpc2Vjb25kczogdGFibGUudGltZXNba2V5ZnJhbWVJZHhdLFxyXG4gICAgICAgICAgICBmaWxlcG9zaXRpb246IHRhYmxlLmZpbGVwb3NpdGlvbnNba2V5ZnJhbWVJZHhdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfc2VhcmNoKGxpc3QsIHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IGlkeCA9IDA7XHJcblxyXG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xyXG4gICAgICAgIGxldCBtaWQgPSAwO1xyXG4gICAgICAgIGxldCBsYm91bmQgPSAwO1xyXG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgPCBsaXN0WzBdKSB7XHJcbiAgICAgICAgICAgIGlkeCA9IDA7XHJcbiAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7ICAvLyBza2lwIHNlYXJjaFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2hpbGUgKGxib3VuZCA8PSB1Ym91bmQpIHtcclxuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xyXG4gICAgICAgICAgICBpZiAobWlkID09PSBsYXN0IHx8ICh2YWx1ZSA+PSBsaXN0W21pZF0gJiYgdmFsdWUgPCBsaXN0W21pZCArIDFdKSkge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdIDwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1Ym91bmQgPSBtaWQgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaWR4O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVkaWFJbmZvOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG4vLyBSZXByZXNlbnRzIGFuIG1lZGlhIHNhbXBsZSAoYXVkaW8gLyB2aWRlbylcclxuZXhwb3J0IGNsYXNzIFNhbXBsZUluZm8ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGR0cywgcHRzLCBkdXJhdGlvbiwgb3JpZ2luYWxEdHMsIGlzU3luYykge1xyXG4gICAgICAgIHRoaXMuZHRzID0gZHRzO1xyXG4gICAgICAgIHRoaXMucHRzID0gcHRzO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsRHRzID0gb3JpZ2luYWxEdHM7XHJcbiAgICAgICAgdGhpcy5pc1N5bmNQb2ludCA9IGlzU3luYztcclxuICAgICAgICB0aGlzLmZpbGVwb3NpdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vLyBNZWRpYSBTZWdtZW50IGNvbmNlcHQgaXMgZGVmaW5lZCBpbiBNZWRpYSBTb3VyY2UgRXh0ZW5zaW9ucyBzcGVjLlxyXG4vLyBQYXJ0aWN1bGFybHkgaW4gSVNPIEJNRkYgZm9ybWF0LCBhbiBNZWRpYSBTZWdtZW50IGNvbnRhaW5zIGEgbW9vZiBib3ggZm9sbG93ZWQgYnkgYSBtZGF0IGJveC5cclxuZXhwb3J0IGNsYXNzIE1lZGlhU2VnbWVudEluZm8ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuYmVnaW5EdHMgPSAwO1xyXG4gICAgICAgIHRoaXMuZW5kRHRzID0gMDtcclxuICAgICAgICB0aGlzLmJlZ2luUHRzID0gMDtcclxuICAgICAgICB0aGlzLmVuZFB0cyA9IDA7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbEJlZ2luRHRzID0gMDtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsRW5kRHRzID0gMDtcclxuICAgICAgICB0aGlzLnN5bmNQb2ludHMgPSBbXTsgICAgIC8vIFNhbXBsZUluZm9bbl0sIGZvciB2aWRlbyBJRFIgZnJhbWVzIG9ubHlcclxuICAgICAgICB0aGlzLmZpcnN0U2FtcGxlID0gbnVsbDsgIC8vIFNhbXBsZUluZm9cclxuICAgICAgICB0aGlzLmxhc3RTYW1wbGUgPSBudWxsOyAgIC8vIFNhbXBsZUluZm9cclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRTeW5jUG9pbnQoc2FtcGxlSW5mbykgeyAgLy8gYWxzbyBjYWxsZWQgUmFuZG9tIEFjY2VzcyBQb2ludFxyXG4gICAgICAgIHNhbXBsZUluZm8uaXNTeW5jUG9pbnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3luY1BvaW50cy5wdXNoKHNhbXBsZUluZm8pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy8gT3JkZXJlZCBsaXN0IGZvciByZWNvcmRpbmcgdmlkZW8gSURSIGZyYW1lcywgc29ydGVkIGJ5IG9yaWdpbmFsRHRzXHJcbmV4cG9ydCBjbGFzcyBJRFJTYW1wbGVMaXN0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9saXN0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZEFycmF5KHN5bmNQb2ludHMpIHtcclxuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XHJcblxyXG4gICAgICAgIGlmIChzeW5jUG9pbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwICYmIHN5bmNQb2ludHNbMF0ub3JpZ2luYWxEdHMgPCBsaXN0W2xpc3QubGVuZ3RoIC0gMV0ub3JpZ2luYWxEdHMpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobGlzdCwgc3luY1BvaW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFzdFN5bmNQb2ludEJlZm9yZUR0cyhkdHMpIHtcclxuICAgICAgICBpZiAodGhpcy5fbGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcclxuICAgICAgICBsZXQgaWR4ID0gMDtcclxuICAgICAgICBsZXQgbGFzdCA9IGxpc3QubGVuZ3RoIC0gMTtcclxuICAgICAgICBsZXQgbWlkID0gMDtcclxuICAgICAgICBsZXQgbGJvdW5kID0gMDtcclxuICAgICAgICBsZXQgdWJvdW5kID0gbGFzdDtcclxuXHJcbiAgICAgICAgaWYgKGR0cyA8IGxpc3RbMF0uZHRzKSB7XHJcbiAgICAgICAgICAgIGlkeCA9IDA7XHJcbiAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xyXG4gICAgICAgICAgICBtaWQgPSBsYm91bmQgKyBNYXRoLmZsb29yKCh1Ym91bmQgLSBsYm91bmQpIC8gMik7XHJcbiAgICAgICAgICAgIGlmIChtaWQgPT09IGxhc3QgfHwgKGR0cyA+PSBsaXN0W21pZF0uZHRzICYmIGR0cyA8IGxpc3RbbWlkICsgMV0uZHRzKSkge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdLmR0cyA8IGR0cykge1xyXG4gICAgICAgICAgICAgICAgbGJvdW5kID0gbWlkICsgMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RbaWR4XTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8vIERhdGEgc3RydWN0dXJlIGZvciByZWNvcmRpbmcgaW5mb3JtYXRpb24gb2YgbWVkaWEgc2VnbWVudHMgaW4gc2luZ2xlIHRyYWNrLlxyXG5leHBvcnQgY2xhc3MgTWVkaWFTZWdtZW50SW5mb0xpc3Qge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHR5cGUpIHtcclxuICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLl9saXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uID0gLTE7ICAvLyBjYWNoZWQgbGFzdCBpbnNlcnQgbG9jYXRpb25cclxuICAgIH1cclxuXHJcbiAgICBnZXQgdHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBpc0VtcHR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9saXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uID0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKG9yaWdpbmFsQmVnaW5EdHMpIHtcclxuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XHJcbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGxhc3QgPSBsaXN0Lmxlbmd0aCAtIDE7XHJcbiAgICAgICAgbGV0IG1pZCA9IDA7XHJcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XHJcbiAgICAgICAgbGV0IHVib3VuZCA9IGxhc3Q7XHJcblxyXG4gICAgICAgIGxldCBpZHggPSAwO1xyXG5cclxuICAgICAgICBpZiAob3JpZ2luYWxCZWdpbkR0cyA8IGxpc3RbMF0ub3JpZ2luYWxCZWdpbkR0cykge1xyXG4gICAgICAgICAgICBpZHggPSAtMTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkeDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7XHJcbiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTtcclxuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAob3JpZ2luYWxCZWdpbkR0cyA+IGxpc3RbbWlkXS5sYXN0U2FtcGxlLm9yaWdpbmFsRHRzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9yaWdpbmFsQmVnaW5EdHMgPCBsaXN0W21pZCArIDFdLm9yaWdpbmFsQmVnaW5EdHMpKSkge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdLm9yaWdpbmFsQmVnaW5EdHMgPCBvcmlnaW5hbEJlZ2luRHRzKSB7XHJcbiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaWR4O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZWFyY2hOZWFyZXN0U2VnbWVudEFmdGVyKG9yaWdpbmFsQmVnaW5EdHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykgKyAxO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZChtZWRpYVNlZ21lbnRJbmZvKSB7XHJcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xyXG4gICAgICAgIGxldCBtc2kgPSBtZWRpYVNlZ21lbnRJbmZvO1xyXG4gICAgICAgIGxldCBsYXN0QXBwZW5kSWR4ID0gdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uO1xyXG4gICAgICAgIGxldCBpbnNlcnRJZHggPSAwO1xyXG5cclxuICAgICAgICBpZiAobGFzdEFwcGVuZElkeCAhPT0gLTEgJiYgbGFzdEFwcGVuZElkeCA8IGxpc3QubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zaS5vcmlnaW5hbEJlZ2luRHRzID49IGxpc3RbbGFzdEFwcGVuZElkeF0ubGFzdFNhbXBsZS5vcmlnaW5hbER0cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGxhc3RBcHBlbmRJZHggPT09IGxpc3QubGVuZ3RoIC0gMSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxhc3RBcHBlbmRJZHggPCBsaXN0Lmxlbmd0aCAtIDEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNpLm9yaWdpbmFsQmVnaW5EdHMgPCBsaXN0W2xhc3RBcHBlbmRJZHggKyAxXS5vcmlnaW5hbEJlZ2luRHRzKSkpIHtcclxuICAgICAgICAgICAgaW5zZXJ0SWR4ID0gbGFzdEFwcGVuZElkeCArIDE7ICAvLyB1c2UgY2FjaGVkIGxvY2F0aW9uIGlkeFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGluc2VydElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKG1zaS5vcmlnaW5hbEJlZ2luRHRzKSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IGluc2VydElkeDtcclxuICAgICAgICB0aGlzLl9saXN0LnNwbGljZShpbnNlcnRJZHgsIDAsIG1zaSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykge1xyXG4gICAgICAgIGxldCBpZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcclxuICAgICAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RbaWR4XTtcclxuICAgICAgICB9IGVsc2UgeyAgLy8gLTFcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldExhc3RTYW1wbGVCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykge1xyXG4gICAgICAgIGxldCBzZWdtZW50ID0gdGhpcy5nZXRMYXN0U2VnbWVudEJlZm9yZShvcmlnaW5hbEJlZ2luRHRzKTtcclxuICAgICAgICBpZiAoc2VnbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWdtZW50Lmxhc3RTYW1wbGU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldExhc3RTeW5jUG9pbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cykge1xyXG4gICAgICAgIGxldCBzZWdtZW50SWR4ID0gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUob3JpZ2luYWxCZWdpbkR0cyk7XHJcbiAgICAgICAgbGV0IHN5bmNQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnN5bmNQb2ludHM7XHJcbiAgICAgICAgd2hpbGUgKHN5bmNQb2ludHMubGVuZ3RoID09PSAwICYmIHNlZ21lbnRJZHggPiAwKSB7XHJcbiAgICAgICAgICAgIHNlZ21lbnRJZHgtLTtcclxuICAgICAgICAgICAgc3luY1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0uc3luY1BvaW50cztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN5bmNQb2ludHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3luY1BvaW50c1tzeW5jUG9pbnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xyXG5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XHJcbmltcG9ydCBCcm93c2VyIGZyb20gJy4uL3V0aWxzL2Jyb3dzZXIuanMnO1xyXG5pbXBvcnQgTVNFRXZlbnRzIGZyb20gJy4vbXNlLWV2ZW50cy5qcyc7XHJcbmltcG9ydCB7U2FtcGxlSW5mbywgSURSU2FtcGxlTGlzdH0gZnJvbSAnLi9tZWRpYS1zZWdtZW50LWluZm8uanMnO1xyXG5pbXBvcnQge0lsbGVnYWxTdGF0ZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbi8vIE1lZGlhIFNvdXJjZSBFeHRlbnNpb25zIGNvbnRyb2xsZXJcclxuY2xhc3MgTVNFQ29udHJvbGxlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5UQUcgPSAnTVNFQ29udHJvbGxlcic7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLl9lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLmlzTGl2ZSAmJiB0aGlzLl9jb25maWcuYXV0b0NsZWFudXBTb3VyY2VCdWZmZXIgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBsaXZlIHN0cmVhbSwgZG8gYXV0byBjbGVhbnVwIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmF1dG9DbGVhbnVwU291cmNlQnVmZmVyID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZSA9IHtcclxuICAgICAgICAgICAgb25Tb3VyY2VPcGVuOiB0aGlzLl9vblNvdXJjZU9wZW4uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25Tb3VyY2VFbmRlZDogdGhpcy5fb25Tb3VyY2VFbmRlZC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvblNvdXJjZUNsb3NlOiB0aGlzLl9vblNvdXJjZUNsb3NlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uU291cmNlQnVmZmVyRXJyb3I6IHRoaXMuX29uU291cmNlQnVmZmVyRXJyb3IuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25Tb3VyY2VCdWZmZXJVcGRhdGVFbmQ6IHRoaXMuX29uU291cmNlQnVmZmVyVXBkYXRlRW5kLmJpbmQodGhpcylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYVNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2VPYmplY3RVUkwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX2lzQnVmZmVyRnVsbCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdFb3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVxdWlyZVNldE1lZGlhRHVyYXRpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wZW5kaW5nTWVkaWFEdXJhdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuX3BlbmRpbmdTb3VyY2VCdWZmZXJJbml0ID0gW107XHJcbiAgICAgICAgdGhpcy5fbWltZVR5cGVzID0ge1xyXG4gICAgICAgICAgICB2aWRlbzogbnVsbCxcclxuICAgICAgICAgICAgYXVkaW86IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3NvdXJjZUJ1ZmZlcnMgPSB7XHJcbiAgICAgICAgICAgIHZpZGVvOiBudWxsLFxyXG4gICAgICAgICAgICBhdWRpbzogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fbGFzdEluaXRTZWdtZW50cyA9IHtcclxuICAgICAgICAgICAgdmlkZW86IG51bGwsXHJcbiAgICAgICAgICAgIGF1ZGlvOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9wZW5kaW5nU2VnbWVudHMgPSB7XHJcbiAgICAgICAgICAgIHZpZGVvOiBbXSxcclxuICAgICAgICAgICAgYXVkaW86IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9wZW5kaW5nUmVtb3ZlUmFuZ2VzID0ge1xyXG4gICAgICAgICAgICB2aWRlbzogW10sXHJcbiAgICAgICAgICAgIGF1ZGlvOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5faWRyTGlzdCA9IG5ldyBJRFJTYW1wbGVMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50IHx8IHRoaXMuX21lZGlhU291cmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTWVkaWFFbGVtZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9lbWl0dGVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLl9lbWl0dGVyLmFkZExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhdHRhY2hNZWRpYUVsZW1lbnQobWVkaWFFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhU291cmNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ01lZGlhU291cmNlIGhhcyBiZWVuIGF0dGFjaGVkIHRvIGFuIEhUTUxNZWRpYUVsZW1lbnQhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtcyA9IHRoaXMuX21lZGlhU291cmNlID0gbmV3IHdpbmRvdy5NZWRpYVNvdXJjZSgpO1xyXG4gICAgICAgIG1zLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCB0aGlzLmUub25Tb3VyY2VPcGVuKTtcclxuICAgICAgICBtcy5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VlbmRlZCcsIHRoaXMuZS5vblNvdXJjZUVuZGVkKTtcclxuICAgICAgICBtcy5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VjbG9zZScsIHRoaXMuZS5vblNvdXJjZUNsb3NlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50ID0gbWVkaWFFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX21lZGlhU291cmNlT2JqZWN0VVJMID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fbWVkaWFTb3VyY2UpO1xyXG4gICAgICAgIG1lZGlhRWxlbWVudC5zcmMgPSB0aGlzLl9tZWRpYVNvdXJjZU9iamVjdFVSTDtcclxuICAgIH1cclxuXHJcbiAgICBkZXRhY2hNZWRpYUVsZW1lbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhU291cmNlKSB7XHJcbiAgICAgICAgICAgIGxldCBtcyA9IHRoaXMuX21lZGlhU291cmNlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCB0eXBlIGluIHRoaXMuX3NvdXJjZUJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIHBlbmRpbmcgc2VnbWVudHMgc2hvdWxkIGJlIGRpc2NhcmRcclxuICAgICAgICAgICAgICAgIGxldCBwcyA9IHRoaXMuX3BlbmRpbmdTZWdtZW50c1t0eXBlXTtcclxuICAgICAgICAgICAgICAgIHBzLnNwbGljZSgwLCBwcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NlZ21lbnRzW3R5cGVdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZW1vdmVSYW5nZXNbdHlwZV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEluaXRTZWdtZW50c1t0eXBlXSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFsbCBzb3VyY2VidWZmZXJzXHJcbiAgICAgICAgICAgICAgICBsZXQgc2IgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1zLnJlYWR5U3RhdGUgIT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1zIGVkZ2UgY2FuIHRocm93IGFuIGVycm9yOiBVbmV4cGVjdGVkIGNhbGwgdG8gbWV0aG9kIG9yIHByb3BlcnR5IGFjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXMucmVtb3ZlU291cmNlQnVmZmVyKHNiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZy5lKHRoaXMuVEFHLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuZS5vblNvdXJjZUJ1ZmZlckVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2IucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBkYXRlZW5kJywgdGhpcy5lLm9uU291cmNlQnVmZmVyVXBkYXRlRW5kKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWltZVR5cGVzW3R5cGVdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobXMucmVhZHlTdGF0ZSA9PT0gJ29wZW4nKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1zLmVuZE9mU3RyZWFtKCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZy5lKHRoaXMuVEFHLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgdGhpcy5lLm9uU291cmNlT3Blbik7XHJcbiAgICAgICAgICAgIG1zLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NvdXJjZWVuZGVkJywgdGhpcy5lLm9uU291cmNlRW5kZWQpO1xyXG4gICAgICAgICAgICBtcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzb3VyY2VjbG9zZScsIHRoaXMuZS5vblNvdXJjZUNsb3NlKTtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NvdXJjZUJ1ZmZlckluaXQgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5faXNCdWZmZXJGdWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkckxpc3QuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhRWxlbWVudCkge1xyXG4gICAgICAgICAgICAvKnRoaXMuX21lZGlhRWxlbWVudC5zcmMgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudCA9IG51bGw7Ki9cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhU291cmNlT2JqZWN0VVJMKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuX21lZGlhU291cmNlT2JqZWN0VVJMKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2VPYmplY3RVUkwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRJbml0U2VnbWVudChpbml0U2VnbWVudCwgZGVmZXJyZWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX21lZGlhU291cmNlIHx8IHRoaXMuX21lZGlhU291cmNlLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xyXG4gICAgICAgICAgICAvLyBzb3VyY2VidWZmZXIgY3JlYXRpb24gcmVxdWlyZXMgbWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gJ29wZW4nXHJcbiAgICAgICAgICAgIC8vIHNvIHdlIGRlZmVyIHRoZSBzb3VyY2VidWZmZXIgY3JlYXRpb24sIHVudGlsIHNvdXJjZW9wZW4gZXZlbnQgdHJpZ2dlcmVkXHJcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTb3VyY2VCdWZmZXJJbml0LnB1c2goaW5pdFNlZ21lbnQpO1xyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGlzIEluaXRTZWdtZW50IGlzIGluIHRoZSBmcm9udCBvZiBwZW5kaW5nIHNlZ21lbnRzIHF1ZXVlXHJcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWdtZW50c1tpbml0U2VnbWVudC50eXBlXS5wdXNoKGluaXRTZWdtZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzID0gaW5pdFNlZ21lbnQ7XHJcbiAgICAgICAgbGV0IG1pbWVUeXBlID0gYCR7aXMuY29udGFpbmVyfWA7XHJcbiAgICAgICAgaWYgKGlzLmNvZGVjICYmIGlzLmNvZGVjLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbWltZVR5cGUgKz0gYDtjb2RlY3M9JHtpcy5jb2RlY31gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpcnN0SW5pdFNlZ21lbnQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgTG9nLnYodGhpcy5UQUcsICdSZWNlaXZlZCBJbml0aWFsaXphdGlvbiBTZWdtZW50LCBtaW1lVHlwZTogJyArIG1pbWVUeXBlKTtcclxuICAgICAgICB0aGlzLl9sYXN0SW5pdFNlZ21lbnRzW2lzLnR5cGVdID0gaXM7XHJcblxyXG4gICAgICAgIGlmIChtaW1lVHlwZSAhPT0gdGhpcy5fbWltZVR5cGVzW2lzLnR5cGVdKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbWltZVR5cGVzW2lzLnR5cGVdKSB7ICAvLyBlbXB0eSwgZmlyc3QgY2hhbmNlIGNyZWF0ZSBzb3VyY2VidWZmZXJcclxuICAgICAgICAgICAgICAgIGZpcnN0SW5pdFNlZ21lbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2IgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW2lzLnR5cGVdID0gdGhpcy5fbWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKG1pbWVUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBzYi5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuZS5vblNvdXJjZUJ1ZmZlckVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBzYi5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGVlbmQnLCB0aGlzLmUub25Tb3VyY2VCdWZmZXJVcGRhdGVFbmQpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBMb2cuZSh0aGlzLlRBRywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KE1TRUV2ZW50cy5FUlJPUiwge2NvZGU6IGVycm9yLmNvZGUsIG1zZzogZXJyb3IubWVzc2FnZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCBgTm90aWNlOiAke2lzLnR5cGV9IG1pbWVUeXBlIGNoYW5nZWQsIG9yaWdpbjogJHt0aGlzLl9taW1lVHlwZXNbaXMudHlwZV19LCB0YXJnZXQ6ICR7bWltZVR5cGV9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbWltZVR5cGVzW2lzLnR5cGVdID0gbWltZVR5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWRlZmVycmVkKSB7XHJcbiAgICAgICAgICAgIC8vIGRlZmVycmVkIG1lYW5zIHRoaXMgSW5pdFNlZ21lbnQgaGFzIGJlZW4gcHVzaGVkIHRvIHBlbmRpbmdTZWdtZW50cyBxdWV1ZVxyXG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nU2VnbWVudHNbaXMudHlwZV0ucHVzaChpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZmlyc3RJbml0U2VnbWVudCkgeyAgLy8gYXBwZW5kIGltbWVkaWF0ZWx5IG9ubHkgaWYgaW5pdCBzZWdtZW50IGluIHN1YnNlcXVlbmNlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zb3VyY2VCdWZmZXJzW2lzLnR5cGVdICYmICF0aGlzLl9zb3VyY2VCdWZmZXJzW2lzLnR5cGVdLnVwZGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kb0FwcGVuZFNlZ21lbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEJyb3dzZXIuc2FmYXJpICYmIGlzLmNvbnRhaW5lciA9PT0gJ2F1ZGlvL21wZWcnICYmIGlzLm1lZGlhRHVyYXRpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIC8vICdhdWRpby9tcGVnJyB0cmFjayB1bmRlciBTYWZhcmkgbWF5IGNhdXNlIE1lZGlhRWxlbWVudCdzIGR1cmF0aW9uIHRvIGJlIE5hTlxyXG4gICAgICAgICAgICAvLyBNYW51YWxseSBjb3JyZWN0IE1lZGlhU291cmNlLmR1cmF0aW9uIHRvIG1ha2UgcHJvZ3Jlc3MgYmFyIHNlZWthYmxlLCBhbmQgcmVwb3J0IHJpZ2h0IGR1cmF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVpcmVTZXRNZWRpYUR1cmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ01lZGlhRHVyYXRpb24gPSBpcy5tZWRpYUR1cmF0aW9uIC8gMTAwMDsgIC8vIGluIHNlY29uZHNcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVkaWFTb3VyY2VEdXJhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRNZWRpYVNlZ21lbnQobWVkaWFTZWdtZW50KSB7XHJcbiAgICAgICAgbGV0IG1zID0gbWVkaWFTZWdtZW50O1xyXG4gICAgICAgIHRoaXMuX3BlbmRpbmdTZWdtZW50c1ttcy50eXBlXS5wdXNoKG1zKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5hdXRvQ2xlYW51cFNvdXJjZUJ1ZmZlciAmJiB0aGlzLl9uZWVkQ2xlYW51cFNvdXJjZUJ1ZmZlcigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvQ2xlYW51cFNvdXJjZUJ1ZmZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNiID0gdGhpcy5fc291cmNlQnVmZmVyc1ttcy50eXBlXTtcclxuICAgICAgICBpZiAoc2IgJiYgIXNiLnVwZGF0aW5nICYmICF0aGlzLl9oYXNQZW5kaW5nUmVtb3ZlUmFuZ2VzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZG9BcHBlbmRTZWdtZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWVrKHNlY29uZHMpIHtcclxuICAgICAgICAvLyByZW1vdmUgYWxsIGFwcGVuZGVkIGJ1ZmZlcnNcclxuICAgICAgICBmb3IgKGxldCB0eXBlIGluIHRoaXMuX3NvdXJjZUJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gYWJvcnQgY3VycmVudCBidWZmZXIgYXBwZW5kIGFsZ29yaXRobVxyXG4gICAgICAgICAgICBsZXQgc2IgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gJ29wZW4nKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHJhbmdlIHJlbW92YWwgYWxnb3JpdGhtIGlzIHJ1bm5pbmcsIEludmFsaWRTdGF0ZUVycm9yIHdpbGwgYmUgdGhyb3dlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpdC5cclxuICAgICAgICAgICAgICAgICAgICBzYi5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBMb2cuZSh0aGlzLlRBRywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElEUkxpc3Qgc2hvdWxkIGJlIGNsZWFyXHJcbiAgICAgICAgICAgIHRoaXMuX2lkckxpc3QuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHBlbmRpbmcgc2VnbWVudHMgc2hvdWxkIGJlIGRpc2NhcmRcclxuICAgICAgICAgICAgbGV0IHBzID0gdGhpcy5fcGVuZGluZ1NlZ21lbnRzW3R5cGVdO1xyXG4gICAgICAgICAgICBwcy5zcGxpY2UoMCwgcHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYVNvdXJjZS5yZWFkeVN0YXRlID09PSAnY2xvc2VkJykge1xyXG4gICAgICAgICAgICAgICAgLy8gUGFyZW50IE1lZGlhU291cmNlIG9iamVjdCBoYXMgYmVlbiBkZXRhY2hlZCBmcm9tIEhUTUxNZWRpYUVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZWNvcmQgcmFuZ2VzIHRvIGJlIHJlbW92ZSBmcm9tIFNvdXJjZUJ1ZmZlclxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNiLmJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBzYi5idWZmZXJlZC5zdGFydChpKTtcclxuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBzYi5idWZmZXJlZC5lbmQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVtb3ZlUmFuZ2VzW3R5cGVdLnB1c2goe3N0YXJ0LCBlbmR9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgc2IgaXMgbm90IHVwZGF0aW5nLCBsZXQncyByZW1vdmUgcmFuZ2VzIG5vdyFcclxuICAgICAgICAgICAgaWYgKCFzYi51cGRhdGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9SZW1vdmVSYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2FmYXJpIDEwIG1heSBnZXQgSW52YWxpZFN0YXRlRXJyb3IgaW4gdGhlIGxhdGVyIGFwcGVuZEJ1ZmZlcigpIGFmdGVyIFNvdXJjZUJ1ZmZlci5yZW1vdmUoKSBjYWxsXHJcbiAgICAgICAgICAgIC8vIEludGVybmFsIHBhcnNlcidzIHN0YXRlIG1heSBiZSBpbnZhbGlkIGF0IHRoaXMgdGltZS4gUmUtYXBwZW5kIGxhc3QgSW5pdFNlZ21lbnQgdG8gd29ya2Fyb3VuZC5cclxuICAgICAgICAgICAgLy8gUmVsYXRlZCBpc3N1ZTogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1OTIzMFxyXG4gICAgICAgICAgICBpZiAoQnJvd3Nlci5zYWZhcmkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsYXN0SW5pdFNlZ21lbnQgPSB0aGlzLl9sYXN0SW5pdFNlZ21lbnRzW3R5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJbml0U2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWdtZW50c1t0eXBlXS5wdXNoKGxhc3RJbml0U2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzYi51cGRhdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb0FwcGVuZFNlZ21lbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVuZE9mU3RyZWFtKCkge1xyXG4gICAgICAgIGxldCBtcyA9IHRoaXMuX21lZGlhU291cmNlO1xyXG4gICAgICAgIGxldCBzYiA9IHRoaXMuX3NvdXJjZUJ1ZmZlcnM7XHJcbiAgICAgICAgaWYgKCFtcyB8fCBtcy5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcclxuICAgICAgICAgICAgaWYgKG1zICYmIG1zLnJlYWR5U3RhdGUgPT09ICdjbG9zZWQnICYmIHRoaXMuX2hhc1BlbmRpbmdTZWdtZW50cygpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBNZWRpYVNvdXJjZSBoYXNuJ3QgdHVybmVkIGludG8gb3BlbiBzdGF0ZSwgYW5kIHRoZXJlJ3JlIHBlbmRpbmcgc2VnbWVudHNcclxuICAgICAgICAgICAgICAgIC8vIE1hcmsgcGVuZGluZyBlbmRPZlN0cmVhbSwgZGVmZXIgY2FsbCB1bnRpbCBhbGwgcGVuZGluZyBzZWdtZW50cyBhcHBlbmRlZCBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzUGVuZGluZ0VvcyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2IudmlkZW8gJiYgc2IudmlkZW8udXBkYXRpbmcgfHwgc2IuYXVkaW8gJiYgc2IuYXVkaW8udXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgLy8gSWYgYW55IHNvdXJjZWJ1ZmZlciBpcyB1cGRhdGluZywgZGVmZXIgZW5kT2ZTdHJlYW0gb3BlcmF0aW9uXHJcbiAgICAgICAgICAgIC8vIFNlZSBfb25Tb3VyY2VCdWZmZXJVcGRhdGVFbmQoKVxyXG4gICAgICAgICAgICB0aGlzLl9oYXNQZW5kaW5nRW9zID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oYXNQZW5kaW5nRW9zID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIE5vdGlmeSBtZWRpYSBkYXRhIGxvYWRpbmcgY29tcGxldGVcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBoZWxwZnVsIGZvciBjb3JyZWN0aW5nIHRvdGFsIGR1cmF0aW9uIHRvIG1hdGNoIGxhc3QgbWVkaWEgc2VnbWVudFxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgTWVkaWFFbGVtZW50J3MgZW5kZWQgZXZlbnQgbWF5IG5vdCBiZSB0cmlnZ2VyZWRcclxuICAgICAgICAgICAgbXMuZW5kT2ZTdHJlYW0oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmVhcmVzdEtleWZyYW1lKGR0cykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZHJMaXN0LmdldExhc3RTeW5jUG9pbnRCZWZvcmVEdHMoZHRzKTtcclxuICAgIH1cclxuXHJcbiAgICBfbmVlZENsZWFudXBTb3VyY2VCdWZmZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcuYXV0b0NsZWFudXBTb3VyY2VCdWZmZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0eXBlIGluIHRoaXMuX3NvdXJjZUJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgbGV0IHNiID0gdGhpcy5fc291cmNlQnVmZmVyc1t0eXBlXTtcclxuICAgICAgICAgICAgaWYgKHNiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYnVmZmVyZWQgPSBzYi5idWZmZXJlZDtcclxuICAgICAgICAgICAgICAgIGlmIChidWZmZXJlZC5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSAtIGJ1ZmZlcmVkLnN0YXJ0KDApID49IHRoaXMuX2NvbmZpZy5hdXRvQ2xlYW51cE1heEJhY2t3YXJkRHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2RvQ2xlYW51cFNvdXJjZUJ1ZmZlcigpIHtcclxuICAgICAgICBsZXQgY3VycmVudFRpbWUgPSB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHR5cGUgaW4gdGhpcy5fc291cmNlQnVmZmVycykge1xyXG4gICAgICAgICAgICBsZXQgc2IgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdO1xyXG4gICAgICAgICAgICBpZiAoc2IpIHtcclxuICAgICAgICAgICAgICAgIGxldCBidWZmZXJlZCA9IHNiLmJ1ZmZlcmVkO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRvUmVtb3ZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXJlZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IGJ1ZmZlcmVkLnN0YXJ0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBidWZmZXJlZC5lbmQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGVuZCArIDMpIHsgIC8vIHBhZGRpbmcgMyBzZWNvbmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSAtIHN0YXJ0ID49IHRoaXMuX2NvbmZpZy5hdXRvQ2xlYW51cE1heEJhY2t3YXJkRHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvUmVtb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1vdmVFbmQgPSBjdXJyZW50VGltZSAtIHRoaXMuX2NvbmZpZy5hdXRvQ2xlYW51cE1pbkJhY2t3YXJkRHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVtb3ZlUmFuZ2VzW3R5cGVdLnB1c2goe3N0YXJ0OiBzdGFydCwgZW5kOiByZW1vdmVFbmR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kIDwgY3VycmVudFRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9SZW1vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVtb3ZlUmFuZ2VzW3R5cGVdLnB1c2goe3N0YXJ0OiBzdGFydCwgZW5kOiBlbmR9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvUmVtb3ZlICYmICFzYi51cGRhdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvUmVtb3ZlUmFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZU1lZGlhU291cmNlRHVyYXRpb24oKSB7XHJcbiAgICAgICAgbGV0IHNiID0gdGhpcy5fc291cmNlQnVmZmVycztcclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50LnJlYWR5U3RhdGUgPT09IDAgfHwgdGhpcy5fbWVkaWFTb3VyY2UucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChzYi52aWRlbyAmJiBzYi52aWRlby51cGRhdGluZykgfHwgKHNiLmF1ZGlvICYmIHNiLmF1ZGlvLnVwZGF0aW5nKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuX21lZGlhU291cmNlLmR1cmF0aW9uO1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSB0aGlzLl9wZW5kaW5nTWVkaWFEdXJhdGlvbjtcclxuXHJcbiAgICAgICAgaWYgKHRhcmdldCA+IDAgJiYgKGlzTmFOKGN1cnJlbnQpIHx8IHRhcmdldCA+IGN1cnJlbnQpKSB7XHJcbiAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCBgVXBkYXRlIE1lZGlhU291cmNlIGR1cmF0aW9uIGZyb20gJHtjdXJyZW50fSB0byAke3RhcmdldH1gKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2UuZHVyYXRpb24gPSB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZXF1aXJlU2V0TWVkaWFEdXJhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3BlbmRpbmdNZWRpYUR1cmF0aW9uID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBfZG9SZW1vdmVSYW5nZXMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgdHlwZSBpbiB0aGlzLl9wZW5kaW5nUmVtb3ZlUmFuZ2VzKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fc291cmNlQnVmZmVyc1t0eXBlXSB8fCB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdLnVwZGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgc2IgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdO1xyXG4gICAgICAgICAgICBsZXQgcmFuZ2VzID0gdGhpcy5fcGVuZGluZ1JlbW92ZVJhbmdlc1t0eXBlXTtcclxuICAgICAgICAgICAgd2hpbGUgKHJhbmdlcy5sZW5ndGggJiYgIXNiLnVwZGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2UgPSByYW5nZXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIHNiLnJlbW92ZShyYW5nZS5zdGFydCwgcmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfZG9BcHBlbmRTZWdtZW50cygpIHtcclxuICAgICAgICBsZXQgcGVuZGluZ1NlZ21lbnRzID0gdGhpcy5fcGVuZGluZ1NlZ21lbnRzO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0eXBlIGluIHBlbmRpbmdTZWdtZW50cykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3NvdXJjZUJ1ZmZlcnNbdHlwZV0gfHwgdGhpcy5fc291cmNlQnVmZmVyc1t0eXBlXS51cGRhdGluZykge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwZW5kaW5nU2VnbWVudHNbdHlwZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlZ21lbnQgPSBwZW5kaW5nU2VnbWVudHNbdHlwZV0uc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudC50aW1lc3RhbXBPZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgTVBFRyBhdWRpbyBzdHJlYW0gaW4gTVNFLCBpZiB1bmJ1ZmZlcmVkLXNlZWtpbmcgb2NjdXJyZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIGV4cGxpY2l0bHkgc2V0IHRpbWVzdGFtcE9mZnNldCB0byB0aGUgZGVzaXJlZCBwb2ludCBpbiB0aW1lbGluZSBmb3IgbXBlZyBTb3VyY2VCdWZmZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRPZmZzZXQgPSB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdLnRpbWVzdGFtcE9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0T2Zmc2V0ID0gc2VnbWVudC50aW1lc3RhbXBPZmZzZXQgLyAxMDAwOyAgLy8gaW4gc2Vjb25kc1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBNYXRoLmFicyhjdXJyZW50T2Zmc2V0IC0gdGFyZ2V0T2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAwLjEpIHsgIC8vIElmIHRpbWUgZGVsdGEgPiAxMDBtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2cudih0aGlzLlRBRywgYFVwZGF0ZSBNUEVHIGF1ZGlvIHRpbWVzdGFtcE9mZnNldCBmcm9tICR7Y3VycmVudE9mZnNldH0gdG8gJHt0YXJnZXRPZmZzZXR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZUJ1ZmZlcnNbdHlwZV0udGltZXN0YW1wT2Zmc2V0ID0gdGFyZ2V0T2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VnbWVudC50aW1lc3RhbXBPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWdtZW50LmRhdGEgfHwgc2VnbWVudC5kYXRhLmJ5dGVMZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZW1wdHkgYnVmZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VCdWZmZXJzW3R5cGVdLmFwcGVuZEJ1ZmZlcihzZWdtZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzQnVmZmVyRnVsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAndmlkZW8nICYmIHNlZ21lbnQuaGFzT3duUHJvcGVydHkoJ2luZm8nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pZHJMaXN0LmFwcGVuZEFycmF5KHNlZ21lbnQuaW5mby5zeW5jUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWdtZW50c1t0eXBlXS51bnNoaWZ0KHNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAyMikgeyAgLy8gUXVvdGFFeGNlZWRlZEVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGljZSB0aGF0IEZpcmVGb3ggbWF5IG5vdCB0aHJvdyBRdW90YUV4Y2VlZGVkRXJyb3IgaWYgU291cmNlQnVmZmVyIGlzIGZ1bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQ3VycmVudGx5IHdlIGNhbiBvbmx5IGRvIGxhenktbG9hZCB0byBhdm9pZCBTb3VyY2VCdWZmZXIgYmVjb21lIHNjYXR0ZXJlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICogU291cmNlQnVmZmVyIGV2aWN0aW9uIHBvbGljeSBtYXkgYmUgY2hhbmdlZCBpbiBmdXR1cmUgdmVyc2lvbiBvZiBGaXJlRm94LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBSZWxhdGVkIGlzc3VlczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTI3OTg4NVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjgwMDIzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IGJ1ZmZlciBmdWxsLCBhYm9ydCBuZXR3b3JrIElPXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNCdWZmZXJGdWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoTVNFRXZlbnRzLkJVRkZFUl9GVUxMKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0J1ZmZlckZ1bGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZy5lKHRoaXMuVEFHLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KE1TRUV2ZW50cy5FUlJPUiwge2NvZGU6IGVycm9yLmNvZGUsIG1zZzogZXJyb3IubWVzc2FnZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Tb3VyY2VPcGVuKCkge1xyXG4gICAgICAgIExvZy52KHRoaXMuVEFHLCAnTWVkaWFTb3VyY2Ugb25Tb3VyY2VPcGVuJyk7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignc291cmNlb3BlbicsIHRoaXMuZS5vblNvdXJjZU9wZW4pO1xyXG4gICAgICAgIC8vIGRlZmVycmVkIHNvdXJjZWJ1ZmZlciBjcmVhdGlvbiAvIGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdTb3VyY2VCdWZmZXJJbml0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHBlbmRpbmdzID0gdGhpcy5fcGVuZGluZ1NvdXJjZUJ1ZmZlckluaXQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChwZW5kaW5ncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ID0gcGVuZGluZ3Muc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSW5pdFNlZ21lbnQoc2VnbWVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhlcmUgbWF5IGJlIHNvbWUgcGVuZGluZyBtZWRpYSBzZWdtZW50cywgYXBwZW5kIHRoZW1cclxuICAgICAgICBpZiAodGhpcy5faGFzUGVuZGluZ1NlZ21lbnRzKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZG9BcHBlbmRTZWdtZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoTVNFRXZlbnRzLlNPVVJDRV9PUEVOKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Tb3VyY2VFbmRlZCgpIHtcclxuICAgICAgICAvLyBmaXJlZCBvbiBlbmRPZlN0cmVhbVxyXG4gICAgICAgIExvZy52KHRoaXMuVEFHLCAnTWVkaWFTb3VyY2Ugb25Tb3VyY2VFbmRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblNvdXJjZUNsb3NlKCkge1xyXG4gICAgICAgIC8vIGZpcmVkIG9uIGRldGFjaGluZyBmcm9tIG1lZGlhIGVsZW1lbnRcclxuICAgICAgICBMb2cudih0aGlzLlRBRywgJ01lZGlhU291cmNlIG9uU291cmNlQ2xvc2UnKTtcclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFTb3VyY2UgJiYgdGhpcy5lICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignc291cmNlb3BlbicsIHRoaXMuZS5vblNvdXJjZU9wZW4pO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYVNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKCdzb3VyY2VlbmRlZCcsIHRoaXMuZS5vblNvdXJjZUVuZGVkKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignc291cmNlY2xvc2UnLCB0aGlzLmUub25Tb3VyY2VDbG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYXNQZW5kaW5nU2VnbWVudHMoKSB7XHJcbiAgICAgICAgbGV0IHBzID0gdGhpcy5fcGVuZGluZ1NlZ21lbnRzO1xyXG4gICAgICAgIHJldHVybiBwcy52aWRlby5sZW5ndGggPiAwIHx8IHBzLmF1ZGlvLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc1BlbmRpbmdSZW1vdmVSYW5nZXMoKSB7XHJcbiAgICAgICAgbGV0IHByciA9IHRoaXMuX3BlbmRpbmdSZW1vdmVSYW5nZXM7XHJcbiAgICAgICAgcmV0dXJuIHByci52aWRlby5sZW5ndGggPiAwIHx8IHByci5hdWRpby5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVxdWlyZVNldE1lZGlhRHVyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVkaWFTb3VyY2VEdXJhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5faGFzUGVuZGluZ1JlbW92ZVJhbmdlcygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvUmVtb3ZlUmFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQZW5kaW5nU2VnbWVudHMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kb0FwcGVuZFNlZ21lbnRzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQZW5kaW5nRW9zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kT2ZTdHJlYW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KE1TRUV2ZW50cy5VUERBVEVfRU5EKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25Tb3VyY2VCdWZmZXJFcnJvcihlKSB7XHJcbiAgICAgICAgTG9nLmUodGhpcy5UQUcsIGBTb3VyY2VCdWZmZXIgRXJyb3I6ICR7ZX1gKTtcclxuICAgICAgICAvLyB0aGlzIGVycm9yIG1pZ2h0IG5vdCBhbHdheXMgYmUgZmF0YWwsIGp1c3QgaWdub3JlIGl0XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNU0VDb250cm9sbGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jb25zdCBNU0VFdmVudHMgPSB7XHJcbiAgICBFUlJPUjogJ2Vycm9yJyxcclxuICAgIFNPVVJDRV9PUEVOOiAnc291cmNlX29wZW4nLFxyXG4gICAgVVBEQVRFX0VORDogJ3VwZGF0ZV9lbmQnLFxyXG4gICAgQlVGRkVSX0ZVTEw6ICdidWZmZXJfZnVsbCdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1TRUV2ZW50czsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xyXG5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XHJcbmltcG9ydCBMb2dnaW5nQ29udHJvbCBmcm9tICcuLi91dGlscy9sb2dnaW5nLWNvbnRyb2wuanMnO1xyXG5pbXBvcnQgVHJhbnNtdXhpbmdDb250cm9sbGVyIGZyb20gJy4vdHJhbnNtdXhpbmctY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBUcmFuc211eGluZ0V2ZW50cyBmcm9tICcuL3RyYW5zbXV4aW5nLWV2ZW50cy5qcyc7XHJcbmltcG9ydCBUcmFuc211eGluZ1dvcmtlciBmcm9tICcuL3RyYW5zbXV4aW5nLXdvcmtlci5qcyc7XHJcbmltcG9ydCBNZWRpYUluZm8gZnJvbSAnLi9tZWRpYS1pbmZvLmpzJztcclxuXHJcbmNsYXNzIFRyYW5zbXV4ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lZGlhRGF0YVNvdXJjZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5UQUcgPSAnVHJhbnNtdXhlcic7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKGNvbmZpZy5lbmFibGVXb3JrZXIgJiYgdHlwZW9mIChXb3JrZXIpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmsgPSByZXF1aXJlKCd3ZWJ3b3JraWZ5Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93b3JrZXIgPSB3b3JrKFRyYW5zbXV4aW5nV29ya2VyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dvcmtlckRlc3Ryb3lpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5fb25Xb3JrZXJNZXNzYWdlLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd29ya2VyLnBvc3RNZXNzYWdlKHtjbWQ6ICdpbml0JywgcGFyYW06IFttZWRpYURhdGFTb3VyY2UsIGNvbmZpZ119KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkxvZ2dpbmdDb25maWdDaGFuZ2VkOiB0aGlzLl9vbkxvZ2dpbmdDb25maWdDaGFuZ2VkLmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBMb2dnaW5nQ29udHJvbC5yZWdpc3Rlckxpc3RlbmVyKHRoaXMuZS5vbkxvZ2dpbmdDb25maWdDaGFuZ2VkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7Y21kOiAnbG9nZ2luZ19jb25maWcnLCBwYXJhbTogTG9nZ2luZ0NvbnRyb2wuZ2V0Q29uZmlnKCl9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIExvZy5lKHRoaXMuVEFHLCAnRXJyb3Igd2hpbGUgaW5pdGlhbGl6ZSB0cmFuc211eGluZyB3b3JrZXIsIGZhbGxiYWNrIHRvIGlubGluZSB0cmFuc211eGluZycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd29ya2VyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXIgPSBuZXcgVHJhbnNtdXhpbmdDb250cm9sbGVyKG1lZGlhRGF0YVNvdXJjZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXIgPSBuZXcgVHJhbnNtdXhpbmdDb250cm9sbGVyKG1lZGlhRGF0YVNvdXJjZSwgY29uZmlnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIGxldCBjdGwgPSB0aGlzLl9jb250cm9sbGVyO1xyXG4gICAgICAgICAgICBjdGwub24oVHJhbnNtdXhpbmdFdmVudHMuSU9fRVJST1IsIHRoaXMuX29uSU9FcnJvci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgY3RsLm9uKFRyYW5zbXV4aW5nRXZlbnRzLkRFTVVYX0VSUk9SLCB0aGlzLl9vbkRlbXV4RXJyb3IuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGN0bC5vbihUcmFuc211eGluZ0V2ZW50cy5JTklUX1NFR01FTlQsIHRoaXMuX29uSW5pdFNlZ21lbnQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGN0bC5vbihUcmFuc211eGluZ0V2ZW50cy5NRURJQV9TRUdNRU5ULCB0aGlzLl9vbk1lZGlhU2VnbWVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgY3RsLm9uKFRyYW5zbXV4aW5nRXZlbnRzLkxPQURJTkdfQ09NUExFVEUsIHRoaXMuX29uTG9hZGluZ0NvbXBsZXRlLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBjdGwub24oVHJhbnNtdXhpbmdFdmVudHMuUkVDT1ZFUkVEX0VBUkxZX0VPRiwgdGhpcy5fb25SZWNvdmVyZWRFYXJseUVvZi5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgY3RsLm9uKFRyYW5zbXV4aW5nRXZlbnRzLk1FRElBX0lORk8sIHRoaXMuX29uTWVkaWFJbmZvLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBjdGwub24oVHJhbnNtdXhpbmdFdmVudHMuTUVUQURBVEFfQVJSSVZFRCwgdGhpcy5fb25NZXRhRGF0YUFycml2ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGN0bC5vbihUcmFuc211eGluZ0V2ZW50cy5TQ1JJUFREQVRBX0FSUklWRUQsIHRoaXMuX29uU2NyaXB0RGF0YUFycml2ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGN0bC5vbihUcmFuc211eGluZ0V2ZW50cy5TVEFUSVNUSUNTX0lORk8sIHRoaXMuX29uU3RhdGlzdGljc0luZm8uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGN0bC5vbihUcmFuc211eGluZ0V2ZW50cy5SRUNPTU1FTkRfU0VFS1BPSU5ULCB0aGlzLl9vblJlY29tbWVuZFNlZWtwb2ludC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fd29ya2VyRGVzdHJveWluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd29ya2VyRGVzdHJveWluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDogJ2Rlc3Ryb3knfSk7XHJcbiAgICAgICAgICAgICAgICBMb2dnaW5nQ29udHJvbC5yZW1vdmVMaXN0ZW5lcih0aGlzLmUub25Mb2dnaW5nQ29uZmlnQ2hhbmdlZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuYWRkTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhc1dvcmtlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd29ya2VyICE9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7Y21kOiAnc3RhcnQnfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlci5zdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7Y21kOiAnc3RvcCd9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VlayhtaWxsaXNlY29uZHMpIHtcclxuICAgICAgICBpZiAodGhpcy5fd29ya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7Y21kOiAnc2VlaycsIHBhcmFtOiBtaWxsaXNlY29uZHN9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyLnNlZWsobWlsbGlzZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3dvcmtlcikge1xyXG4gICAgICAgICAgICB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDogJ3BhdXNlJ30pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xsZXIucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl93b3JrZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fd29ya2VyLnBvc3RNZXNzYWdlKHtjbWQ6ICdyZXN1bWUnfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udHJvbGxlci5yZXN1bWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSW5pdFNlZ21lbnQodHlwZSwgaW5pdFNlZ21lbnQpIHtcclxuICAgICAgICAvLyBkbyBhc3luYyBpbnZva2VcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLklOSVRfU0VHTUVOVCwgdHlwZSwgaW5pdFNlZ21lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbk1lZGlhU2VnbWVudCh0eXBlLCBtZWRpYVNlZ21lbnQpIHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLk1FRElBX1NFR01FTlQsIHR5cGUsIG1lZGlhU2VnbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uTG9hZGluZ0NvbXBsZXRlKCkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuTE9BRElOR19DT01QTEVURSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uUmVjb3ZlcmVkRWFybHlFb2YoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChUcmFuc211eGluZ0V2ZW50cy5SRUNPVkVSRURfRUFSTFlfRU9GKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfb25NZWRpYUluZm8obWVkaWFJbmZvKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChUcmFuc211eGluZ0V2ZW50cy5NRURJQV9JTkZPLCBtZWRpYUluZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbk1ldGFEYXRhQXJyaXZlZChtZXRhZGF0YSkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuTUVUQURBVEFfQVJSSVZFRCwgbWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblNjcmlwdERhdGFBcnJpdmVkKGRhdGEpIHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLlNDUklQVERBVEFfQVJSSVZFRCwgZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uU3RhdGlzdGljc0luZm8oc3RhdGlzdGljc0luZm8pIHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTywgc3RhdGlzdGljc0luZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbklPRXJyb3IodHlwZSwgaW5mbykge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuSU9fRVJST1IsIHR5cGUsIGluZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkRlbXV4RXJyb3IodHlwZSwgaW5mbykge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuREVNVVhfRVJST1IsIHR5cGUsIGluZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlY29tbWVuZFNlZWtwb2ludChtaWxsaXNlY29uZHMpIHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLlJFQ09NTUVORF9TRUVLUE9JTlQsIG1pbGxpc2Vjb25kcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uTG9nZ2luZ0NvbmZpZ0NoYW5nZWQoY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3dvcmtlcikge1xyXG4gICAgICAgICAgICB0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDogJ2xvZ2dpbmdfY29uZmlnJywgcGFyYW06IGNvbmZpZ30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Xb3JrZXJNZXNzYWdlKGUpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IGUuZGF0YTtcclxuICAgICAgICBsZXQgZGF0YSA9IG1lc3NhZ2UuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UubXNnID09PSAnZGVzdHJveWVkJyB8fCB0aGlzLl93b3JrZXJEZXN0cm95aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlckRlc3Ryb3lpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fd29ya2VyLnRlcm1pbmF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl93b3JrZXIgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubXNnKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVHJhbnNtdXhpbmdFdmVudHMuSU5JVF9TRUdNRU5UOlxyXG4gICAgICAgICAgICBjYXNlIFRyYW5zbXV4aW5nRXZlbnRzLk1FRElBX1NFR01FTlQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQobWVzc2FnZS5tc2csIGRhdGEudHlwZSwgZGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFRyYW5zbXV4aW5nRXZlbnRzLkxPQURJTkdfQ09NUExFVEU6XHJcbiAgICAgICAgICAgIGNhc2UgVHJhbnNtdXhpbmdFdmVudHMuUkVDT1ZFUkVEX0VBUkxZX0VPRjpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChtZXNzYWdlLm1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUcmFuc211eGluZ0V2ZW50cy5NRURJQV9JTkZPOlxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGRhdGEsIE1lZGlhSW5mby5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KG1lc3NhZ2UubXNnLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFRyYW5zbXV4aW5nRXZlbnRzLk1FVEFEQVRBX0FSUklWRUQ6XHJcbiAgICAgICAgICAgIGNhc2UgVHJhbnNtdXhpbmdFdmVudHMuU0NSSVBUREFUQV9BUlJJVkVEOlxyXG4gICAgICAgICAgICBjYXNlIFRyYW5zbXV4aW5nRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChtZXNzYWdlLm1zZywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUcmFuc211eGluZ0V2ZW50cy5JT19FUlJPUjpcclxuICAgICAgICAgICAgY2FzZSBUcmFuc211eGluZ0V2ZW50cy5ERU1VWF9FUlJPUjpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChtZXNzYWdlLm1zZywgZGF0YS50eXBlLCBkYXRhLmluZm8pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVHJhbnNtdXhpbmdFdmVudHMuUkVDT01NRU5EX1NFRUtQT0lOVDpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChtZXNzYWdlLm1zZywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbG9nY2F0X2NhbGxiYWNrJzpcclxuICAgICAgICAgICAgICAgIExvZy5lbWl0dGVyLmVtaXQoJ2xvZycsIGRhdGEudHlwZSwgZGF0YS5sb2djYXQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Rpc2Nvbm5lY3QnOlxyXG4gICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHthY3Rpb246ICdkaXNjb25uZWN0J30sICcqJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyYW5zbXV4ZXI7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IExvZyBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xyXG5pbXBvcnQgQnJvd3NlciBmcm9tICcuLi91dGlscy9icm93c2VyLmpzJztcclxuaW1wb3J0IE1lZGlhSW5mbyBmcm9tICcuL21lZGlhLWluZm8uanMnO1xyXG5pbXBvcnQgRkxWRGVtdXhlciBmcm9tICcuLi9kZW11eC9mbHYtZGVtdXhlci5qcyc7XHJcbmltcG9ydCBNUDRSZW11eGVyIGZyb20gJy4uL3JlbXV4L21wNC1yZW11eGVyLmpzJztcclxuaW1wb3J0IERlbXV4RXJyb3JzIGZyb20gJy4uL2RlbXV4L2RlbXV4LWVycm9ycy5qcyc7XHJcbmltcG9ydCBJT0NvbnRyb2xsZXIgZnJvbSAnLi4vaW8vaW8tY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBUcmFuc211eGluZ0V2ZW50cyBmcm9tICcuL3RyYW5zbXV4aW5nLWV2ZW50cy5qcyc7XHJcbmltcG9ydCB7TG9hZGVyU3RhdHVzLCBMb2FkZXJFcnJvcnN9IGZyb20gJy4uL2lvL2xvYWRlci5qcyc7XHJcblxyXG4vLyBUcmFuc211eGluZyAoSU8sIERlbXV4aW5nLCBSZW11eGluZykgY29udHJvbGxlciwgd2l0aCBtdWx0aXBhcnQgc3VwcG9ydFxyXG5jbGFzcyBUcmFuc211eGluZ0NvbnRyb2xsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lZGlhRGF0YVNvdXJjZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5UQUcgPSAnVHJhbnNtdXhpbmdDb250cm9sbGVyJztcclxuICAgICAgICB0aGlzLl9lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcblxyXG4gICAgICAgIC8vIHRyZWF0IHNpbmdsZSBwYXJ0IG1lZGlhIGFzIG11bHRpcGFydCBtZWRpYSwgd2hpY2ggaGFzIG9ubHkgb25lIHNlZ21lbnRcclxuICAgICAgICBpZiAoIW1lZGlhRGF0YVNvdXJjZS5zZWdtZW50cykge1xyXG4gICAgICAgICAgICBtZWRpYURhdGFTb3VyY2Uuc2VnbWVudHMgPSBbe1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG1lZGlhRGF0YVNvdXJjZS5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgIGZpbGVzaXplOiBtZWRpYURhdGFTb3VyY2UuZmlsZXNpemUsXHJcbiAgICAgICAgICAgICAgICB1cmw6IG1lZGlhRGF0YVNvdXJjZS51cmxcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaWxsIGluIGRlZmF1bHQgSU8gcGFyYW1zIGlmIG5vdCBleGlzdHNcclxuICAgICAgICBpZiAodHlwZW9mIG1lZGlhRGF0YVNvdXJjZS5jb3JzICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgbWVkaWFEYXRhU291cmNlLmNvcnMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIG1lZGlhRGF0YVNvdXJjZS53aXRoQ3JlZGVudGlhbHMgIT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBtZWRpYURhdGFTb3VyY2Uud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2UgPSBtZWRpYURhdGFTb3VyY2U7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFNlZ21lbnRJbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsRHVyYXRpb24gPSAwO1xyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHMuZm9yRWFjaCgoc2VnbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyB0aW1lc3RhbXBCYXNlIGZvciBlYWNoIHNlZ21lbnQsIGFuZCBjYWxjdWxhdGUgdG90YWwgZHVyYXRpb25cclxuICAgICAgICAgICAgc2VnbWVudC50aW1lc3RhbXBCYXNlID0gdG90YWxEdXJhdGlvbjtcclxuICAgICAgICAgICAgdG90YWxEdXJhdGlvbiArPSBzZWdtZW50LmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAvLyBwYXJhbXMgbmVlZGVkIGJ5IElPQ29udHJvbGxlclxyXG4gICAgICAgICAgICBzZWdtZW50LmNvcnMgPSBtZWRpYURhdGFTb3VyY2UuY29ycztcclxuICAgICAgICAgICAgc2VnbWVudC53aXRoQ3JlZGVudGlhbHMgPSBtZWRpYURhdGFTb3VyY2Uud2l0aENyZWRlbnRpYWxzO1xyXG4gICAgICAgICAgICAvLyByZWZlcnJlciBwb2xpY3kgY29udHJvbCwgaWYgZXhpc3RcclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5yZWZlcnJlclBvbGljeSkge1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudC5yZWZlcnJlclBvbGljeSA9IGNvbmZpZy5yZWZlcnJlclBvbGljeTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIWlzTmFOKHRvdGFsRHVyYXRpb24pICYmIHRoaXMuX21lZGlhRGF0YVNvdXJjZS5kdXJhdGlvbiAhPT0gdG90YWxEdXJhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2UuZHVyYXRpb24gPSB0b3RhbER1cmF0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9kZW11eGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZW11eGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pb2N0bCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX3BlbmRpbmdTZWVrVGltZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmVTZWVrUG9pbnQgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9zdGF0aXN0aWNzUmVwb3J0ZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2UgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc3RhdGlzdGljc1JlcG9ydGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0aXN0aWNzUmVwb3J0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2lvY3RsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lvY3RsLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5faW9jdGwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fZGVtdXhlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9kZW11eGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVtdXhlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9yZW11eGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW11eGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5hZGRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZihldmVudCwgbGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLl9lbWl0dGVyLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fbG9hZFNlZ21lbnQoMCk7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlU3RhdGlzdGljc1JlcG9ydGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2xvYWRTZWdtZW50KHNlZ21lbnRJbmRleCwgb3B0aW9uYWxGcm9tKSB7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFNlZ21lbnRJbmRleCA9IHNlZ21lbnRJbmRleDtcclxuICAgICAgICBsZXQgZGF0YVNvdXJjZSA9IHRoaXMuX21lZGlhRGF0YVNvdXJjZS5zZWdtZW50c1tzZWdtZW50SW5kZXhdO1xyXG5cclxuICAgICAgICBsZXQgaW9jdGwgPSB0aGlzLl9pb2N0bCA9IG5ldyBJT0NvbnRyb2xsZXIoZGF0YVNvdXJjZSwgdGhpcy5fY29uZmlnLCBzZWdtZW50SW5kZXgpO1xyXG4gICAgICAgIGlvY3RsLm9uRXJyb3IgPSB0aGlzLl9vbklPRXhjZXB0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgaW9jdGwub25TZWVrZWQgPSB0aGlzLl9vbklPU2Vla2VkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgaW9jdGwub25Db21wbGV0ZSA9IHRoaXMuX29uSU9Db21wbGV0ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGlvY3RsLm9uUmVkaXJlY3QgPSB0aGlzLl9vbklPUmVkaXJlY3QuYmluZCh0aGlzKTtcclxuICAgICAgICBpb2N0bC5vblJlY292ZXJlZEVhcmx5RW9mID0gdGhpcy5fb25JT1JlY292ZXJlZEVhcmx5RW9mLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25hbEZyb20pIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVtdXhlci5iaW5kRGF0YVNvdXJjZSh0aGlzLl9pb2N0bCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW9jdGwub25EYXRhQXJyaXZhbCA9IHRoaXMuX29uSW5pdENodW5rQXJyaXZhbC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW9jdGwub3BlbihvcHRpb25hbEZyb20pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5faW50ZXJuYWxBYm9ydCgpO1xyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0aXN0aWNzUmVwb3J0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBfaW50ZXJuYWxBYm9ydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW9jdGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faW9jdGwuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9pb2N0bCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCkgeyAgLy8gdGFrZSBhIHJlc3RcclxuICAgICAgICBpZiAodGhpcy5faW9jdGwgJiYgdGhpcy5faW9jdGwuaXNXb3JraW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faW9jdGwucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRpc3RpY3NSZXBvcnRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lvY3RsICYmIHRoaXMuX2lvY3RsLmlzUGF1c2VkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faW9jdGwucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVN0YXRpc3RpY3NSZXBvcnRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWVrKG1pbGxpc2Vjb25kcykge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUluZm8gPT0gbnVsbCB8fCAhdGhpcy5fbWVkaWFJbmZvLmlzU2Vla2FibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGFyZ2V0U2VnbWVudEluZGV4ID0gdGhpcy5fc2VhcmNoU2VnbWVudEluZGV4Q29udGFpbnMobWlsbGlzZWNvbmRzKTtcclxuXHJcbiAgICAgICAgaWYgKHRhcmdldFNlZ21lbnRJbmRleCA9PT0gdGhpcy5fY3VycmVudFNlZ21lbnRJbmRleCkge1xyXG4gICAgICAgICAgICAvLyBpbnRyYS1zZWdtZW50IHNlZWtpbmdcclxuICAgICAgICAgICAgbGV0IHNlZ21lbnRJbmZvID0gdGhpcy5fbWVkaWFJbmZvLnNlZ21lbnRzW3RhcmdldFNlZ21lbnRJbmRleF07XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VnbWVudEluZm8gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IHNlZ21lbnQgbG9hZGluZyBzdGFydGVkLCBidXQgbWVkaWFpbmZvIGhhc24ndCByZWNlaXZlZCB5ZXRcclxuICAgICAgICAgICAgICAgIC8vIHdhaXQgZm9yIHRoZSBtZXRhZGF0YSBsb2FkZWQsIHRoZW4gc2VlayB0byBleHBlY3RlZCBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NlZWtUaW1lID0gbWlsbGlzZWNvbmRzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleWZyYW1lID0gc2VnbWVudEluZm8uZ2V0TmVhcmVzdEtleWZyYW1lKG1pbGxpc2Vjb25kcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW11eGVyLnNlZWsoa2V5ZnJhbWUubWlsbGlzZWNvbmRzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lvY3RsLnNlZWsoa2V5ZnJhbWUuZmlsZXBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIFdpbGwgYmUgcmVzb2x2ZWQgaW4gX29uUmVtdXhlck1lZGlhU2VnbWVudEFycml2YWwoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmVTZWVrUG9pbnQgPSBrZXlmcmFtZS5taWxsaXNlY29uZHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjcm9zcy1zZWdtZW50IHNlZWtpbmdcclxuICAgICAgICAgICAgbGV0IHRhcmdldFNlZ21lbnRJbmZvID0gdGhpcy5fbWVkaWFJbmZvLnNlZ21lbnRzW3RhcmdldFNlZ21lbnRJbmRleF07XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0U2VnbWVudEluZm8gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0YXJnZXQgc2VnbWVudCBoYXNuJ3QgYmVlbiBsb2FkZWQuIFdlIG5lZWQgbWV0YWRhdGEgdGhlbiBzZWVrIHRvIGV4cGVjdGVkIHRpbWVcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWVrVGltZSA9IG1pbGxpc2Vjb25kcztcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ludGVybmFsQWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIuc2VlaygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVtdXhlci5pbnNlcnREaXNjb250aW51aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2FkU2VnbWVudCh0YXJnZXRTZWdtZW50SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgLy8gSGVyZSB3ZSB3YWl0IGZvciB0aGUgbWV0YWRhdGEgbG9hZGVkLCB0aGVuIHNlZWsgdG8gZXhwZWN0ZWQgcG9zaXRpb25cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgdGFyZ2V0IHNlZ21lbnQncyBtZXRhZGF0YSwgZGlyZWN0IHNlZWsgdG8gdGFyZ2V0IHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICBsZXQga2V5ZnJhbWUgPSB0YXJnZXRTZWdtZW50SW5mby5nZXROZWFyZXN0S2V5ZnJhbWUobWlsbGlzZWNvbmRzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ludGVybmFsQWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIuc2VlayhtaWxsaXNlY29uZHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVtdXhlci5pbnNlcnREaXNjb250aW51aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZW11eGVyLnJlc2V0TWVkaWFJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZW11eGVyLnRpbWVzdGFtcEJhc2UgPSB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHNbdGFyZ2V0U2VnbWVudEluZGV4XS50aW1lc3RhbXBCYXNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZFNlZ21lbnQodGFyZ2V0U2VnbWVudEluZGV4LCBrZXlmcmFtZS5maWxlcG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmVTZWVrUG9pbnQgPSBrZXlmcmFtZS5taWxsaXNlY29uZHM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXBvcnRTZWdtZW50TWVkaWFJbmZvKHRhcmdldFNlZ21lbnRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2VuYWJsZVN0YXRpc3RpY3NSZXBvcnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZWFyY2hTZWdtZW50SW5kZXhDb250YWlucyhtaWxsaXNlY29uZHMpIHtcclxuICAgICAgICBsZXQgc2VnbWVudHMgPSB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHM7XHJcbiAgICAgICAgbGV0IGlkeCA9IHNlZ21lbnRzLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKG1pbGxpc2Vjb25kcyA8IHNlZ21lbnRzW2ldLnRpbWVzdGFtcEJhc2UpIHtcclxuICAgICAgICAgICAgICAgIGlkeCA9IGkgLSAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBfb25Jbml0Q2h1bmtBcnJpdmFsKGRhdGEsIGJ5dGVTdGFydCkge1xyXG4gICAgICAgIGxldCBwcm9iZURhdGEgPSBudWxsO1xyXG4gICAgICAgIGxldCBjb25zdW1lZCA9IDA7XHJcblxyXG4gICAgICAgIGlmIChieXRlU3RhcnQgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIElPQ29udHJvbGxlciBzZWVrZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgb3BlbmVkLCBieXRlU3RhcnQgPiAwIGNhbGxiYWNrIG1heSByZWNlaXZlZFxyXG4gICAgICAgICAgICB0aGlzLl9kZW11eGVyLmJpbmREYXRhU291cmNlKHRoaXMuX2lvY3RsKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVtdXhlci50aW1lc3RhbXBCYXNlID0gdGhpcy5fbWVkaWFEYXRhU291cmNlLnNlZ21lbnRzW3RoaXMuX2N1cnJlbnRTZWdtZW50SW5kZXhdLnRpbWVzdGFtcEJhc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdW1lZCA9IHRoaXMuX2RlbXV4ZXIucGFyc2VDaHVua3MoZGF0YSwgYnl0ZVN0YXJ0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKChwcm9iZURhdGEgPSBGTFZEZW11eGVyLnByb2JlKGRhdGEpKS5tYXRjaCkge1xyXG4gICAgICAgICAgICAvLyBBbHdheXMgY3JlYXRlIG5ldyBGTFZEZW11eGVyXHJcbiAgICAgICAgICAgIHRoaXMuX2RlbXV4ZXIgPSBuZXcgRkxWRGVtdXhlcihwcm9iZURhdGEsIHRoaXMuX2NvbmZpZyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3JlbXV4ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIgPSBuZXcgTVA0UmVtdXhlcih0aGlzLl9jb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbWRzID0gdGhpcy5fbWVkaWFEYXRhU291cmNlO1xyXG4gICAgICAgICAgICBpZiAobWRzLmR1cmF0aW9uICE9IHVuZGVmaW5lZCAmJiAhaXNOYU4obWRzLmR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVtdXhlci5vdmVycmlkZWREdXJhdGlvbiA9IG1kcy5kdXJhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1kcy5oYXNBdWRpbyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZW11eGVyLm92ZXJyaWRlZEhhc0F1ZGlvID0gbWRzLmhhc0F1ZGlvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWRzLmhhc1ZpZGVvID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlbXV4ZXIub3ZlcnJpZGVkSGFzVmlkZW8gPSBtZHMuaGFzVmlkZW87XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RlbXV4ZXIudGltZXN0YW1wQmFzZSA9IG1kcy5zZWdtZW50c1t0aGlzLl9jdXJyZW50U2VnbWVudEluZGV4XS50aW1lc3RhbXBCYXNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVtdXhlci5vbkVycm9yID0gdGhpcy5fb25EZW11eEV4Y2VwdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZW11eGVyLm9uTWVkaWFJbmZvID0gdGhpcy5fb25NZWRpYUluZm8uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVtdXhlci5vbk1ldGFEYXRhQXJyaXZlZCA9IHRoaXMuX29uTWV0YURhdGFBcnJpdmVkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbXV4ZXIub25TY3JpcHREYXRhQXJyaXZlZCA9IHRoaXMuX29uU2NyaXB0RGF0YUFycml2ZWQuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIuYmluZERhdGFTb3VyY2UodGhpcy5fZGVtdXhlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLmJpbmREYXRhU291cmNlKHRoaXMuX2lvY3RsXHJcbiAgICAgICAgICAgICkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVtdXhlci5vbkluaXRTZWdtZW50ID0gdGhpcy5fb25SZW11eGVySW5pdFNlZ21lbnRBcnJpdmFsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIub25NZWRpYVNlZ21lbnQgPSB0aGlzLl9vblJlbXV4ZXJNZWRpYVNlZ21lbnRBcnJpdmFsLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdW1lZCA9IHRoaXMuX2RlbXV4ZXIucGFyc2VDaHVua3MoZGF0YSwgYnl0ZVN0YXJ0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9iZURhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICBMb2cuZSh0aGlzLlRBRywgJ05vbi1GTFYsIFVuc3VwcG9ydGVkIG1lZGlhIHR5cGUhJyk7XHJcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxBYm9ydCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLkRFTVVYX0VSUk9SLCBEZW11eEVycm9ycy5GT1JNQVRfVU5TVVBQT1JURUQsICdOb24tRkxWLCBVbnN1cHBvcnRlZCBtZWRpYSB0eXBlJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdW1lZCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29uc3VtZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgX29uTWVkaWFJbmZvKG1lZGlhSW5mbykge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUluZm8gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBmaXJzdCBzZWdtZW50J3MgbWVkaWFpbmZvIGFzIGdsb2JhbCBtZWRpYUluZm9cclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgbWVkaWFJbmZvKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmtleWZyYW1lc0luZGV4ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLnNlZ21lbnRzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5zZWdtZW50Q291bnQgPSB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHMubGVuZ3RoO1xyXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcy5fbWVkaWFJbmZvLCBNZWRpYUluZm8ucHJvdG90eXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzZWdtZW50SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIG1lZGlhSW5mbyk7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHNlZ21lbnRJbmZvLCBNZWRpYUluZm8ucHJvdG90eXBlKTtcclxuICAgICAgICB0aGlzLl9tZWRpYUluZm8uc2VnbWVudHNbdGhpcy5fY3VycmVudFNlZ21lbnRJbmRleF0gPSBzZWdtZW50SW5mbztcclxuXHJcbiAgICAgICAgLy8gbm90aWZ5IG1lZGlhSW5mbyB1cGRhdGVcclxuICAgICAgICB0aGlzLl9yZXBvcnRTZWdtZW50TWVkaWFJbmZvKHRoaXMuX2N1cnJlbnRTZWdtZW50SW5kZXgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ1NlZWtUaW1lICE9IG51bGwpIHtcclxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5fcGVuZGluZ1NlZWtUaW1lO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NlZWtUaW1lID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Vlayh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uTWV0YURhdGFBcnJpdmVkKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLk1FVEFEQVRBX0FSUklWRUQsIG1ldGFkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TY3JpcHREYXRhQXJyaXZlZChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLlNDUklQVERBVEFfQVJSSVZFRCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSU9TZWVrZWQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVtdXhlci5pbnNlcnREaXNjb250aW51aXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uSU9Db21wbGV0ZShleHRyYURhdGEpIHtcclxuICAgICAgICBsZXQgc2VnbWVudEluZGV4ID0gZXh0cmFEYXRhO1xyXG4gICAgICAgIGxldCBuZXh0U2VnbWVudEluZGV4ID0gc2VnbWVudEluZGV4ICsgMTtcclxuXHJcbiAgICAgICAgaWYgKG5leHRTZWdtZW50SW5kZXggPCB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVybmFsQWJvcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVtdXhlci5mbHVzaFN0YXNoZWRTYW1wbGVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvYWRTZWdtZW50KG5leHRTZWdtZW50SW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbXV4ZXIuZmx1c2hTdGFzaGVkU2FtcGxlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuTE9BRElOR19DT01QTEVURSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0aXN0aWNzUmVwb3J0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uSU9SZWRpcmVjdChyZWRpcmVjdGVkVVJMKSB7XHJcbiAgICAgICAgbGV0IHNlZ21lbnRJbmRleCA9IHRoaXMuX2lvY3RsLmV4dHJhRGF0YTtcclxuICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2Uuc2VnbWVudHNbc2VnbWVudEluZGV4XS5yZWRpcmVjdGVkVVJMID0gcmVkaXJlY3RlZFVSTDtcclxuICAgIH1cclxuXHJcbiAgICBfb25JT1JlY292ZXJlZEVhcmx5RW9mKCkge1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChUcmFuc211eGluZ0V2ZW50cy5SRUNPVkVSRURfRUFSTFlfRU9GKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25JT0V4Y2VwdGlvbih0eXBlLCBpbmZvKSB7XHJcbiAgICAgICAgTG9nLmUodGhpcy5UQUcsIGBJT0V4Y2VwdGlvbjogdHlwZSA9ICR7dHlwZX0sIGNvZGUgPSAke2luZm8uY29kZX0sIG1zZyA9ICR7aW5mby5tc2d9YCk7XHJcblxyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBtc2c6ICdkaXNjb25uZWN0J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoVHJhbnNtdXhpbmdFdmVudHMuSU9fRVJST1IsIHR5cGUsIGluZm8pO1xyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0aXN0aWNzUmVwb3J0ZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25EZW11eEV4Y2VwdGlvbih0eXBlLCBpbmZvKSB7XHJcbiAgICAgICAgTG9nLmUodGhpcy5UQUcsIGBEZW11eEV4Y2VwdGlvbjogdHlwZSA9ICR7dHlwZX0sIGluZm8gPSAke2luZm99YCk7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLkRFTVVYX0VSUk9SLCB0eXBlLCBpbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25SZW11eGVySW5pdFNlZ21lbnRBcnJpdmFsKHR5cGUsIGluaXRTZWdtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLklOSVRfU0VHTUVOVCwgdHlwZSwgaW5pdFNlZ21lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlbXV4ZXJNZWRpYVNlZ21lbnRBcnJpdmFsKHR5cGUsIG1lZGlhU2VnbWVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wZW5kaW5nU2Vla1RpbWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBNZWRpYSBzZWdtZW50cyBhZnRlciBuZXctc2VnbWVudCBjcm9zcy1zZWVraW5nIHNob3VsZCBiZSBkcm9wcGVkLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChUcmFuc211eGluZ0V2ZW50cy5NRURJQV9TRUdNRU5ULCB0eXBlLCBtZWRpYVNlZ21lbnQpO1xyXG5cclxuICAgICAgICAvLyBSZXNvbHZlIHBlbmRpbmcgc2Vla1BvaW50XHJcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdSZXNvbHZlU2Vla1BvaW50ICE9IG51bGwgJiYgdHlwZSA9PT0gJ3ZpZGVvJykge1xyXG4gICAgICAgICAgICBsZXQgc3luY1BvaW50cyA9IG1lZGlhU2VnbWVudC5pbmZvLnN5bmNQb2ludHM7XHJcbiAgICAgICAgICAgIGxldCBzZWVrcG9pbnQgPSB0aGlzLl9wZW5kaW5nUmVzb2x2ZVNlZWtQb2ludDtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmVTZWVrUG9pbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gU2FmYXJpOiBQYXNzIFBUUyBmb3IgcmVjb21tZW5kX3NlZWtwb2ludFxyXG4gICAgICAgICAgICBpZiAoQnJvd3Nlci5zYWZhcmkgJiYgc3luY1BvaW50cy5sZW5ndGggPiAwICYmIHN5bmNQb2ludHNbMF0ub3JpZ2luYWxEdHMgPT09IHNlZWtwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgc2Vla3BvaW50ID0gc3luY1BvaW50c1swXS5wdHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZWxzZTogdXNlIG9yaWdpbmFsIERUUyAoa2V5ZnJhbWUubWlsbGlzZWNvbmRzKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLlJFQ09NTUVORF9TRUVLUE9JTlQsIHNlZWtwb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9lbmFibGVTdGF0aXN0aWNzUmVwb3J0ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IHNlbGYuc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXBvcnRTdGF0aXN0aWNzSW5mby5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuc3RhdGlzdGljc0luZm9SZXBvcnRJbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9kaXNhYmxlU3RhdGlzdGljc1JlcG9ydGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0aXN0aWNzUmVwb3J0ZXIpIHtcclxuICAgICAgICAgICAgc2VsZi5jbGVhckludGVydmFsKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9yZXBvcnRTZWdtZW50TWVkaWFJbmZvKHNlZ21lbnRJbmRleCkge1xyXG4gICAgICAgIGxldCBzZWdtZW50SW5mbyA9IHRoaXMuX21lZGlhSW5mby5zZWdtZW50c1tzZWdtZW50SW5kZXhdO1xyXG4gICAgICAgIGxldCBleHBvcnRJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgc2VnbWVudEluZm8pO1xyXG5cclxuICAgICAgICBleHBvcnRJbmZvLmR1cmF0aW9uID0gdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uO1xyXG4gICAgICAgIGV4cG9ydEluZm8uc2VnbWVudENvdW50ID0gdGhpcy5fbWVkaWFJbmZvLnNlZ21lbnRDb3VudDtcclxuICAgICAgICBkZWxldGUgZXhwb3J0SW5mby5zZWdtZW50cztcclxuICAgICAgICBkZWxldGUgZXhwb3J0SW5mby5rZXlmcmFtZXNJbmRleDtcclxuXHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFRyYW5zbXV4aW5nRXZlbnRzLk1FRElBX0lORk8sIGV4cG9ydEluZm8pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXBvcnRTdGF0aXN0aWNzSW5mbygpIHtcclxuICAgICAgICBsZXQgaW5mbyA9IHt9O1xyXG5cclxuICAgICAgICBpbmZvLnVybCA9IHRoaXMuX2lvY3RsLmN1cnJlbnRVUkw7XHJcbiAgICAgICAgaW5mby5oYXNSZWRpcmVjdCA9IHRoaXMuX2lvY3RsLmhhc1JlZGlyZWN0O1xyXG4gICAgICAgIGlmIChpbmZvLmhhc1JlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIGluZm8ucmVkaXJlY3RlZFVSTCA9IHRoaXMuX2lvY3RsLmN1cnJlbnRSZWRpcmVjdGVkVVJMO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5mby5zcGVlZCA9IHRoaXMuX2lvY3RsLmN1cnJlbnRTcGVlZDtcclxuICAgICAgICBpbmZvLmxvYWRlclR5cGUgPSB0aGlzLl9pb2N0bC5sb2FkZXJUeXBlO1xyXG4gICAgICAgIGluZm8uY3VycmVudFNlZ21lbnRJbmRleCA9IHRoaXMuX2N1cnJlbnRTZWdtZW50SW5kZXg7XHJcbiAgICAgICAgaW5mby50b3RhbFNlZ21lbnRDb3VudCA9IHRoaXMuX21lZGlhRGF0YVNvdXJjZS5zZWdtZW50cy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChUcmFuc211eGluZ0V2ZW50cy5TVEFUSVNUSUNTX0lORk8sIGluZm8pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJhbnNtdXhpbmdDb250cm9sbGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jb25zdCBUcmFuc211eGluZ0V2ZW50cyA9IHtcclxuICAgIElPX0VSUk9SOiAnaW9fZXJyb3InLFxyXG4gICAgREVNVVhfRVJST1I6ICdkZW11eF9lcnJvcicsXHJcbiAgICBJTklUX1NFR01FTlQ6ICdpbml0X3NlZ21lbnQnLFxyXG4gICAgTUVESUFfU0VHTUVOVDogJ21lZGlhX3NlZ21lbnQnLFxyXG4gICAgTE9BRElOR19DT01QTEVURTogJ2xvYWRpbmdfY29tcGxldGUnLFxyXG4gICAgUkVDT1ZFUkVEX0VBUkxZX0VPRjogJ3JlY292ZXJlZF9lYXJseV9lb2YnLFxyXG4gICAgTUVESUFfSU5GTzogJ21lZGlhX2luZm8nLFxyXG4gICAgTUVUQURBVEFfQVJSSVZFRDogJ21ldGFkYXRhX2Fycml2ZWQnLFxyXG4gICAgU0NSSVBUREFUQV9BUlJJVkVEOiAnc2NyaXB0ZGF0YV9hcnJpdmVkJyxcclxuICAgIFNUQVRJU1RJQ1NfSU5GTzogJ3N0YXRpc3RpY3NfaW5mbycsXHJcbiAgICBSRUNPTU1FTkRfU0VFS1BPSU5UOiAncmVjb21tZW5kX3NlZWtwb2ludCdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyYW5zbXV4aW5nRXZlbnRzOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XHJcbmltcG9ydCBMb2dnaW5nQ29udHJvbCBmcm9tICcuLi91dGlscy9sb2dnaW5nLWNvbnRyb2wuanMnO1xyXG5pbXBvcnQgUG9seWZpbGwgZnJvbSAnLi4vdXRpbHMvcG9seWZpbGwuanMnO1xyXG5pbXBvcnQgVHJhbnNtdXhpbmdDb250cm9sbGVyIGZyb20gJy4vdHJhbnNtdXhpbmctY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBUcmFuc211eGluZ0V2ZW50cyBmcm9tICcuL3RyYW5zbXV4aW5nLWV2ZW50cy5qcyc7XHJcblxyXG4vKiBwb3N0IG1lc3NhZ2UgdG8gd29ya2VyOlxyXG4gICBkYXRhOiB7XHJcbiAgICAgICBjbWQ6IHN0cmluZ1xyXG4gICAgICAgcGFyYW06IGFueVxyXG4gICB9XHJcblxyXG4gICByZWNlaXZlIG1lc3NhZ2UgZnJvbSB3b3JrZXI6XHJcbiAgIGRhdGE6IHtcclxuICAgICAgIG1zZzogc3RyaW5nLFxyXG4gICAgICAgZGF0YTogYW55XHJcbiAgIH1cclxuICovXHJcblxyXG5sZXQgVHJhbnNtdXhpbmdXb3JrZXIgPSBmdW5jdGlvbiAoc2VsZikge1xyXG5cclxuICAgIGxldCBUQUcgPSAnVHJhbnNtdXhpbmdXb3JrZXInO1xyXG4gICAgbGV0IGNvbnRyb2xsZXIgPSBudWxsO1xyXG4gICAgbGV0IGxvZ2NhdExpc3RlbmVyID0gb25Mb2djYXRDYWxsYmFjay5iaW5kKHRoaXMpO1xyXG5cclxuICAgIFBvbHlmaWxsLmluc3RhbGwoKTtcclxuXHJcbiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHN3aXRjaCAoZS5kYXRhLmNtZCkge1xyXG4gICAgICAgICAgICBjYXNlICdpbml0JzpcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBuZXcgVHJhbnNtdXhpbmdDb250cm9sbGVyKGUuZGF0YS5wYXJhbVswXSwgZS5kYXRhLnBhcmFtWzFdKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIub24oVHJhbnNtdXhpbmdFdmVudHMuSU9fRVJST1IsIG9uSU9FcnJvci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIub24oVHJhbnNtdXhpbmdFdmVudHMuREVNVVhfRVJST1IsIG9uRGVtdXhFcnJvci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIub24oVHJhbnNtdXhpbmdFdmVudHMuSU5JVF9TRUdNRU5ULCBvbkluaXRTZWdtZW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5vbihUcmFuc211eGluZ0V2ZW50cy5NRURJQV9TRUdNRU5ULCBvbk1lZGlhU2VnbWVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIub24oVHJhbnNtdXhpbmdFdmVudHMuTE9BRElOR19DT01QTEVURSwgb25Mb2FkaW5nQ29tcGxldGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLm9uKFRyYW5zbXV4aW5nRXZlbnRzLlJFQ09WRVJFRF9FQVJMWV9FT0YsIG9uUmVjb3ZlcmVkRWFybHlFb2YuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLm9uKFRyYW5zbXV4aW5nRXZlbnRzLk1FRElBX0lORk8sIG9uTWVkaWFJbmZvLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5vbihUcmFuc211eGluZ0V2ZW50cy5NRVRBREFUQV9BUlJJVkVELCBvbk1ldGFEYXRhQXJyaXZlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIub24oVHJhbnNtdXhpbmdFdmVudHMuU0NSSVBUREFUQV9BUlJJVkVELCBvblNjcmlwdERhdGFBcnJpdmVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5vbihUcmFuc211eGluZ0V2ZW50cy5TVEFUSVNUSUNTX0lORk8sIG9uU3RhdGlzdGljc0luZm8uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLm9uKFRyYW5zbXV4aW5nRXZlbnRzLlJFQ09NTUVORF9TRUVLUE9JTlQsIG9uUmVjb21tZW5kU2Vla3BvaW50LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Rlc3Ryb3knOlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe21zZzogJ2Rlc3Ryb3llZCd9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzdGFydCc6XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3RvcCc6XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzZWVrJzpcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2VlayhlLmRhdGEucGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BhdXNlJzpcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyZXN1bWUnOlxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5yZXN1bWUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsb2dnaW5nX2NvbmZpZyc6IHtcclxuICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSBlLmRhdGEucGFyYW07XHJcbiAgICAgICAgICAgICAgICBMb2dnaW5nQ29udHJvbC5hcHBseUNvbmZpZyhjb25maWcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcuZW5hYmxlQ2FsbGJhY2sgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBMb2dnaW5nQ29udHJvbC5hZGRMb2dMaXN0ZW5lcihsb2djYXRMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dpbmdDb250cm9sLnJlbW92ZUxvZ0xpc3RlbmVyKGxvZ2NhdExpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gb25Jbml0U2VnbWVudCh0eXBlLCBpbml0U2VnbWVudCkge1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIG1zZzogVHJhbnNtdXhpbmdFdmVudHMuSU5JVF9TRUdNRU5ULFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogaW5pdFNlZ21lbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShvYmosIFtpbml0U2VnbWVudC5kYXRhXSk7ICAvLyBkYXRhOiBBcnJheUJ1ZmZlclxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uTWVkaWFTZWdtZW50KHR5cGUsIG1lZGlhU2VnbWVudCkge1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIG1zZzogVHJhbnNtdXhpbmdFdmVudHMuTUVESUFfU0VHTUVOVCxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IG1lZGlhU2VnbWVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKG9iaiwgW21lZGlhU2VnbWVudC5kYXRhXSk7ICAvLyBkYXRhOiBBcnJheUJ1ZmZlclxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uTG9hZGluZ0NvbXBsZXRlKCkge1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIG1zZzogVHJhbnNtdXhpbmdFdmVudHMuTE9BRElOR19DT01QTEVURVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uUmVjb3ZlcmVkRWFybHlFb2YoKSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgbXNnOiBUcmFuc211eGluZ0V2ZW50cy5SRUNPVkVSRURfRUFSTFlfRU9GXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25NZWRpYUluZm8obWVkaWFJbmZvKSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgbXNnOiBUcmFuc211eGluZ0V2ZW50cy5NRURJQV9JTkZPLFxyXG4gICAgICAgICAgICBkYXRhOiBtZWRpYUluZm9cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uob2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbk1ldGFEYXRhQXJyaXZlZChtZXRhZGF0YSkge1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIG1zZzogVHJhbnNtdXhpbmdFdmVudHMuTUVUQURBVEFfQVJSSVZFRCxcclxuICAgICAgICAgICAgZGF0YTogbWV0YWRhdGFcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uob2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvblNjcmlwdERhdGFBcnJpdmVkKGRhdGEpIHtcclxuICAgICAgICBsZXQgb2JqID0ge1xyXG4gICAgICAgICAgICBtc2c6IFRyYW5zbXV4aW5nRXZlbnRzLlNDUklQVERBVEFfQVJSSVZFRCxcclxuICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uU3RhdGlzdGljc0luZm8oc3RhdEluZm8pIHtcclxuICAgICAgICBsZXQgb2JqID0ge1xyXG4gICAgICAgICAgICBtc2c6IFRyYW5zbXV4aW5nRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTyxcclxuICAgICAgICAgICAgZGF0YTogc3RhdEluZm9cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uob2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbklPRXJyb3IodHlwZSwgaW5mbykge1xyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBtc2c6IFRyYW5zbXV4aW5nRXZlbnRzLklPX0VSUk9SLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgaW5mbzogaW5mb1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25EZW11eEVycm9yKHR5cGUsIGluZm8pIHtcclxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgbXNnOiBUcmFuc211eGluZ0V2ZW50cy5ERU1VWF9FUlJPUixcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIGluZm86IGluZm9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uUmVjb21tZW5kU2Vla3BvaW50KG1pbGxpc2Vjb25kcykge1xyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBtc2c6IFRyYW5zbXV4aW5nRXZlbnRzLlJFQ09NTUVORF9TRUVLUE9JTlQsXHJcbiAgICAgICAgICAgIGRhdGE6IG1pbGxpc2Vjb25kc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uTG9nY2F0Q2FsbGJhY2sodHlwZSwgc3RyKSB7XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIG1zZzogJ2xvZ2NhdF9jYWxsYmFjaycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBsb2djYXQ6IHN0clxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJhbnNtdXhpbmdXb3JrZXI7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcclxuaW1wb3J0IGRlY29kZVVURjggZnJvbSAnLi4vdXRpbHMvdXRmOC1jb252LmpzJztcclxuaW1wb3J0IHtJbGxlZ2FsU3RhdGVFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7XHJcblxyXG5sZXQgbGUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcclxuICAgIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgIC8vIGxpdHRsZS1lbmRpYW4gd3JpdGVcclxuICAgIHJldHVybiAobmV3IEludDE2QXJyYXkoYnVmKSlbMF0gPT09IDI1NjsgIC8vIHBsYXRmb3JtLXNwZWMgcmVhZCwgaWYgZXF1YWwgdGhlbiBMRVxyXG59KSgpO1xyXG5cclxuY2xhc3MgQU1GIHtcclxuXHJcbiAgICBzdGF0aWMgcGFyc2VTY3JpcHREYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xyXG4gICAgICAgIGxldCBkYXRhID0ge307XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gQU1GLnBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gQU1GLnBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBuYW1lLnNpemUsIGRhdGFTaXplIC0gbmFtZS5zaXplKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFbbmFtZS5kYXRhXSA9IHZhbHVlLmRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBMb2cuZSgnQU1GJywgZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcclxuICAgICAgICBpZiAoZGF0YVNpemUgPCAzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIFNjcmlwdERhdGFPYmplY3QnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG5hbWUgPSBBTUYucGFyc2VTdHJpbmcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuICAgICAgICBsZXQgdmFsdWUgPSBBTUYucGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG5hbWUuc2l6ZSwgZGF0YVNpemUgLSBuYW1lLnNpemUpO1xyXG4gICAgICAgIGxldCBpc09iamVjdEVuZCA9IHZhbHVlLm9iamVjdEVuZDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZS5kYXRhLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLmRhdGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2l6ZTogbmFtZS5zaXplICsgdmFsdWUuc2l6ZSxcclxuICAgICAgICAgICAgb2JqZWN0RW5kOiBpc09iamVjdEVuZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhcnNlVmFyaWFibGUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XHJcbiAgICAgICAgcmV0dXJuIEFNRi5wYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcclxuICAgICAgICBpZiAoZGF0YVNpemUgPCAyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIFN0cmluZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xyXG4gICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQxNigwLCAhbGUpO1xyXG5cclxuICAgICAgICBsZXQgc3RyO1xyXG4gICAgICAgIGlmIChsZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHN0ciA9IGRlY29kZVVURjgobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAyLCBsZW5ndGgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IHN0cixcclxuICAgICAgICAgICAgc2l6ZTogMiArIGxlbmd0aFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhcnNlTG9uZ1N0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcclxuICAgICAgICBpZiAoZGF0YVNpemUgPCA0KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIExvbmdTdHJpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gdi5nZXRVaW50MzIoMCwgIWxlKTtcclxuXHJcbiAgICAgICAgbGV0IHN0cjtcclxuICAgICAgICBpZiAobGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBzdHIgPSBkZWNvZGVVVEY4KG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgbGVuZ3RoKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RyID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkYXRhOiBzdHIsXHJcbiAgICAgICAgICAgIHNpemU6IDQgKyBsZW5ndGhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZURhdGUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgMTApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBzaXplIGludmFsaWQgd2hlbiBwYXJzZSBEYXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7XHJcbiAgICAgICAgbGV0IHRpbWVzdGFtcCA9IHYuZ2V0RmxvYXQ2NCgwLCAhbGUpO1xyXG4gICAgICAgIGxldCBsb2NhbFRpbWVPZmZzZXQgPSB2LmdldEludDE2KDgsICFsZSk7XHJcbiAgICAgICAgdGltZXN0YW1wICs9IGxvY2FsVGltZU9mZnNldCAqIDYwICogMTAwMDsgIC8vIGdldCBVVEMgdGltZVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkYXRhOiBuZXcgRGF0ZSh0aW1lc3RhbXApLFxyXG4gICAgICAgICAgICBzaXplOiA4ICsgMlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgMSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdEYXRhIG5vdCBlbm91Z2ggd2hlbiBwYXJzZSBWYWx1ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgbGV0IG9mZnNldCA9IDE7XHJcbiAgICAgICAgbGV0IHR5cGUgPSB2LmdldFVpbnQ4KDApO1xyXG4gICAgICAgIGxldCB2YWx1ZTtcclxuICAgICAgICBsZXQgb2JqZWN0RW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiAgLy8gTnVtYmVyKERvdWJsZSkgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdi5nZXRGbG9hdDY0KDEsICFsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHsgIC8vIEJvb2xlYW4gdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiID0gdi5nZXRVaW50OCgxKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGIgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IHsgIC8vIFN0cmluZyB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFtZnN0ciA9IEFNRi5wYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhbWZzdHIuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gYW1mc3RyLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHsgLy8gT2JqZWN0KHMpIHR5cGVcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtaW5hbCA9IDA7ICAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgT2JqZWN0cyB3aGljaCBoYXMgbWlzc2luZyBTY3JpcHREYXRhT2JqZWN0RW5kXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2LmdldFVpbnQzMihkYXRhU2l6ZSAtIDQsICFsZSkgJiAweDAwRkZGRkZGKSA9PT0gOSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSAtIDQpIHsgIC8vIDQgPT09IHR5cGUoVUk4KSArIFNjcmlwdERhdGFPYmplY3RFbmQoVUkyNClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtZm9iaiA9IEFNRi5wYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgZGF0YVNpemUgLSBvZmZzZXQgLSB0ZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbWZvYmoub2JqZWN0RW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW2FtZm9iai5kYXRhLm5hbWVdID0gYW1mb2JqLmRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZvYmouc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8PSBkYXRhU2l6ZSAtIDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IHYuZ2V0VWludDMyKG9mZnNldCAtIDEsICFsZSkgJiAweDAwRkZGRkZGO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgODogeyAvLyBFQ01BIGFycmF5IHR5cGUgKE1peGVkIGFycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7ICAvLyBFQ01BQXJyYXlMZW5ndGgoVUkzMilcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAgLy8gd29ya2Fyb3VuZCBmb3IgbWFsZm9ybWVkIE1peGVkQXJyYXlzIHdoaWNoIGhhcyBtaXNzaW5nIFNjcmlwdERhdGFPYmplY3RFbmRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHYuZ2V0VWludDMyKGRhdGFTaXplIC0gNCwgIWxlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1pbmFsID0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGRhdGFTaXplIC0gOCkgeyAgLy8gOCA9PT0gdHlwZShVSTgpICsgRUNNQUFycmF5TGVuZ3RoKFVJMzIpICsgU2NyaXB0RGF0YVZhcmlhYmxlRW5kKFVJMjQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbWZ2YXIgPSBBTUYucGFyc2VWYXJpYWJsZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgZGF0YVNpemUgLSBvZmZzZXQgLSB0ZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbWZ2YXIub2JqZWN0RW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW2FtZnZhci5kYXRhLm5hbWVdID0gYW1mdmFyLmRhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZ2YXIuc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8PSBkYXRhU2l6ZSAtIDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IHYuZ2V0VWludDMyKG9mZnNldCAtIDEsICFsZSkgJiAweDAwRkZGRkZGO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgOTogIC8vIFNjcmlwdERhdGFPYmplY3RFbmRcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdEVuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEwOiB7ICAvLyBTdHJpY3QgYXJyYXkgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNjcmlwdERhdGFWYWx1ZVtuXS4gTk9URTogYWNjb3JkaW5nIHRvIHZpZGVvX2ZpbGVfZm9ybWF0X3NwZWNfdjEwXzEucGRmXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaWN0QXJyYXlMZW5ndGggPSB2LmdldFVpbnQzMigxLCAhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaWN0QXJyYXlMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gQU1GLnBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGRhdGFTaXplIC0gb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaCh2YWwuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSB2YWwuc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDExOiB7ICAvLyBEYXRlIHR5cGVcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZSA9IEFNRi5wYXJzZURhdGUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGF0ZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBkYXRlLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEyOiB7ICAvLyBMb25nIHN0cmluZyB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFtZkxvbmdTdHIgPSBBTUYucGFyc2VTdHJpbmcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYW1mTG9uZ1N0ci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZMb25nU3RyLnNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBhbmQgc2tpcFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGRhdGFTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIExvZy53KCdBTUYnLCAnVW5zdXBwb3J0ZWQgQU1GIHZhbHVlIHR5cGUgJyArIHR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBMb2cuZSgnQU1GJywgZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IHZhbHVlLFxyXG4gICAgICAgICAgICBzaXplOiBvZmZzZXQsXHJcbiAgICAgICAgICAgIG9iamVjdEVuZDogb2JqZWN0RW5kXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFNRjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuY29uc3QgRGVtdXhFcnJvcnMgPSB7XHJcbiAgICBPSzogJ09LJyxcclxuICAgIEZPUk1BVF9FUlJPUjogJ0Zvcm1hdEVycm9yJyxcclxuICAgIEZPUk1BVF9VTlNVUFBPUlRFRDogJ0Zvcm1hdFVuc3VwcG9ydGVkJyxcclxuICAgIENPREVDX1VOU1VQUE9SVEVEOiAnQ29kZWNVbnN1cHBvcnRlZCdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IERlbXV4RXJyb3JzOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQge0lsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9ufSBmcm9tICcuLi91dGlscy9leGNlcHRpb24uanMnO1xyXG5cclxuLy8gRXhwb25lbnRpYWwtR29sb21iIGJ1ZmZlciBkZWNvZGVyXHJcbmNsYXNzIEV4cEdvbG9tYiB7XHJcblxyXG4gICAgY29uc3RydWN0b3IodWludDhhcnJheSkge1xyXG4gICAgICAgIHRoaXMuVEFHID0gJ0V4cEdvbG9tYic7XHJcblxyXG4gICAgICAgIHRoaXMuX2J1ZmZlciA9IHVpbnQ4YXJyYXk7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ID0gMDtcclxuICAgICAgICB0aGlzLl90b3RhbF9ieXRlcyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aDtcclxuICAgICAgICB0aGlzLl90b3RhbF9iaXRzID0gdWludDhhcnJheS5ieXRlTGVuZ3RoICogODtcclxuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBfZmlsbEN1cnJlbnRXb3JkKCkge1xyXG4gICAgICAgIGxldCBidWZmZXJfYnl0ZXNfbGVmdCA9IHRoaXMuX3RvdGFsX2J5dGVzIC0gdGhpcy5fYnVmZmVyX2luZGV4O1xyXG4gICAgICAgIGlmIChidWZmZXJfYnl0ZXNfbGVmdCA8PSAwKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdFeHBHb2xvbWI6IF9maWxsQ3VycmVudFdvcmQoKSBidXQgbm8gYnl0ZXMgYXZhaWxhYmxlJyk7XHJcblxyXG4gICAgICAgIGxldCBieXRlc19yZWFkID0gTWF0aC5taW4oNCwgYnVmZmVyX2J5dGVzX2xlZnQpO1xyXG4gICAgICAgIGxldCB3b3JkID0gbmV3IFVpbnQ4QXJyYXkoNCk7XHJcbiAgICAgICAgd29yZC5zZXQodGhpcy5fYnVmZmVyLnN1YmFycmF5KHRoaXMuX2J1ZmZlcl9pbmRleCwgdGhpcy5fYnVmZmVyX2luZGV4ICsgYnl0ZXNfcmVhZCkpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA9IG5ldyBEYXRhVmlldyh3b3JkLmJ1ZmZlcikuZ2V0VWludDMyKDAsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVmZmVyX2luZGV4ICs9IGJ5dGVzX3JlYWQ7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCA9IGJ5dGVzX3JlYWQgKiA4O1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRCaXRzKGJpdHMpIHtcclxuICAgICAgICBpZiAoYml0cyA+IDMyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdFeHBHb2xvbWI6IHJlYWRCaXRzKCkgYml0cyBleGNlZWRlZCBtYXggMzJiaXRzIScpO1xyXG5cclxuICAgICAgICBpZiAoYml0cyA8PSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmQgPj4+ICgzMiAtIGJpdHMpO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IGJpdHM7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgLT0gYml0cztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID8gdGhpcy5fY3VycmVudF93b3JkIDogMDtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQgPj4+ICgzMiAtIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQpO1xyXG4gICAgICAgIGxldCBiaXRzX25lZWRfbGVmdCA9IGJpdHMgLSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0O1xyXG5cclxuICAgICAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKTtcclxuICAgICAgICBsZXQgYml0c19yZWFkX25leHQgPSBNYXRoLm1pbihiaXRzX25lZWRfbGVmdCwgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCk7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQyID0gdGhpcy5fY3VycmVudF93b3JkID4+PiAoMzIgLSBiaXRzX3JlYWRfbmV4dCk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudF93b3JkIDw8PSBiaXRzX3JlYWRfbmV4dDtcclxuICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0IC09IGJpdHNfcmVhZF9uZXh0O1xyXG5cclxuICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IGJpdHNfcmVhZF9uZXh0KSB8IHJlc3VsdDI7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICByZWFkQm9vbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkQml0cygxKSA9PT0gMTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkQnl0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkQml0cyg4KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2tpcExlYWRpbmdaZXJvKCkge1xyXG4gICAgICAgIGxldCB6ZXJvX2NvdW50O1xyXG4gICAgICAgIGZvciAoemVyb19jb3VudCA9IDA7IHplcm9fY291bnQgPCB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0OyB6ZXJvX2NvdW50KyspIHtcclxuICAgICAgICAgICAgaWYgKDAgIT09ICh0aGlzLl9jdXJyZW50X3dvcmQgJiAoMHg4MDAwMDAwMCA+Pj4gemVyb19jb3VudCkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IHplcm9fY291bnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0IC09IHplcm9fY291bnQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gemVyb19jb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKTtcclxuICAgICAgICByZXR1cm4gemVyb19jb3VudCArIHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRVRUcoKSB7ICAvLyB1bnNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcclxuICAgICAgICBsZXQgbGVhZGluZ196ZXJvcyA9IHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKGxlYWRpbmdfemVyb3MgKyAxKSAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZFNFRygpIHsgIC8vIHNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnJlYWRVRUcoKTtcclxuICAgICAgICBpZiAodmFsdWUgJiAweDAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUgKyAxKSA+Pj4gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gLTEgKiAodmFsdWUgPj4+IDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4cEdvbG9tYjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IExvZyBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xyXG5pbXBvcnQgQU1GIGZyb20gJy4vYW1mLXBhcnNlci5qcyc7XHJcbmltcG9ydCBTUFNQYXJzZXIgZnJvbSAnLi9zcHMtcGFyc2VyLmpzJztcclxuaW1wb3J0IFZQU1BhcnNlciBmcm9tICcuL3Zwcy1wYXJzZXIuanMnO1xyXG5pbXBvcnQgRGVtdXhFcnJvcnMgZnJvbSAnLi9kZW11eC1lcnJvcnMuanMnO1xyXG5pbXBvcnQgTWVkaWFJbmZvIGZyb20gJy4uL2NvcmUvbWVkaWEtaW5mby5qcyc7XHJcbmltcG9ydCB7SWxsZWdhbFN0YXRlRXhjZXB0aW9ufSBmcm9tICcuLi91dGlscy9leGNlcHRpb24uanMnO1xyXG5pbXBvcnQgTkFMQml0c3RyZWFtIGZyb20gJy4vaGV2Yy1nb2xvbWIuanMnO1xyXG5cclxuZnVuY3Rpb24gU3dhcDE2KHNyYykge1xyXG4gICAgcmV0dXJuICgoKHNyYyA+Pj4gOCkgJiAweEZGKSB8XHJcbiAgICAgICAgICAgICgoc3JjICYgMHhGRikgPDwgOCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTd2FwMzIoc3JjKSB7XHJcbiAgICByZXR1cm4gKCgoc3JjICYgMHhGRjAwMDAwMCkgPj4+IDI0KSB8XHJcbiAgICAgICAgICAgICgoc3JjICYgMHgwMEZGMDAwMCkgPj4+IDgpICB8XHJcbiAgICAgICAgICAgICgoc3JjICYgMHgwMDAwRkYwMCkgPDwgOCkgICB8XHJcbiAgICAgICAgICAgICgoc3JjICYgMHgwMDAwMDBGRikgPDwgMjQpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVhZEJpZzMyKGFycmF5LCBpbmRleCkge1xyXG4gICAgcmV0dXJuICgoYXJyYXlbaW5kZXhdIDw8IDI0KSAgICAgfFxyXG4gICAgICAgICAgICAoYXJyYXlbaW5kZXggKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAoYXJyYXlbaW5kZXggKyAyXSA8PCA4KSAgfFxyXG4gICAgICAgICAgICAoYXJyYXlbaW5kZXggKyAzXSkpO1xyXG59XHJcblxyXG5cclxuY2xhc3MgRkxWRGVtdXhlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvYmVEYXRhLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLlRBRyA9ICdGTFZEZW11eGVyJztcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25NZXRhRGF0YUFycml2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uU2NyaXB0RGF0YUFycml2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fZGF0YU9mZnNldCA9IHByb2JlRGF0YS5kYXRhT2Zmc2V0O1xyXG4gICAgICAgIHRoaXMuX2ZpcnN0UGFyc2UgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gcHJvYmVEYXRhLmhhc0F1ZGlvVHJhY2s7XHJcbiAgICAgICAgdGhpcy5faGFzVmlkZW8gPSBwcm9iZURhdGEuaGFzVmlkZW9UcmFjaztcclxuXHJcbiAgICAgICAgdGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYUluZm8gPSBuZXcgTWVkaWFJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc0F1ZGlvID0gdGhpcy5faGFzQXVkaW87XHJcbiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdGhpcy5faGFzVmlkZW87XHJcbiAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSA9IDQ7XHJcbiAgICAgICAgdGhpcy5fdGltZXN0YW1wQmFzZSA9IDA7ICAvLyBpbnQzMiwgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgdGhpcy5fdGltZXNjYWxlID0gMTAwMDtcclxuICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IDA7ICAvLyBpbnQzMiwgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgdGhpcy5fZHVyYXRpb25PdmVycmlkZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUgPSB7XHJcbiAgICAgICAgICAgIGZpeGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBmcHM6IDIzLjk3NixcclxuICAgICAgICAgICAgZnBzX251bTogMjM5NzYsXHJcbiAgICAgICAgICAgIGZwc19kZW46IDEwMDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9mbHZTb3VuZFJhdGVUYWJsZSA9IFs1NTAwLCAxMTAyNSwgMjIwNTAsIDQ0MTAwLCA0ODAwMF07XHJcblxyXG4gICAgICAgIHRoaXMuX21wZWdTYW1wbGluZ1JhdGVzID0gW1xyXG4gICAgICAgICAgICA5NjAwMCwgODgyMDAsIDY0MDAwLCA0ODAwMCwgNDQxMDAsIDMyMDAwLFxyXG4gICAgICAgICAgICAyNDAwMCwgMjIwNTAsIDE2MDAwLCAxMjAwMCwgMTEwMjUsIDgwMDAsIDczNTBcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICB0aGlzLl9tcGVnQXVkaW9WMTBTYW1wbGVSYXRlVGFibGUgPSBbNDQxMDAsIDQ4MDAwLCAzMjAwMCwgMF07XHJcbiAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvVjIwU2FtcGxlUmF0ZVRhYmxlID0gWzIyMDUwLCAyNDAwMCwgMTYwMDAsIDBdO1xyXG4gICAgICAgIHRoaXMuX21wZWdBdWRpb1YyNVNhbXBsZVJhdGVUYWJsZSA9IFsxMTAyNSwgMTIwMDAsIDgwMDAsICAwXTtcclxuXHJcbiAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvTDFCaXRSYXRlVGFibGUgPSBbMCwgMzIsIDY0LCA5NiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDI4OCwgMzIwLCAzNTIsIDM4NCwgNDE2LCA0NDgsIC0xXTtcclxuICAgICAgICB0aGlzLl9tcGVnQXVkaW9MMkJpdFJhdGVUYWJsZSA9IFswLCAzMiwgNDgsIDU2LCAgNjQsICA4MCwgIDk2LCAxMTIsIDEyOCwgMTYwLCAxOTIsIDIyNCwgMjU2LCAzMjAsIDM4NCwgLTFdO1xyXG4gICAgICAgIHRoaXMuX21wZWdBdWRpb0wzQml0UmF0ZVRhYmxlID0gWzAsIDMyLCA0MCwgNDgsICA1NiwgIDY0LCAgODAsICA5NiwgMTEyLCAxMjgsIDE2MCwgMTkyLCAyMjQsIDI1NiwgMzIwLCAtMV07XHJcblxyXG4gICAgICAgIHRoaXMuX3ZpZGVvVHJhY2sgPSB7dHlwZTogJ3ZpZGVvJywgaWQ6IDEsIHNlcXVlbmNlTnVtYmVyOiAwLCBzYW1wbGVzOiBbXSwgbGVuZ3RoOiAwfTtcclxuICAgICAgICB0aGlzLl9hdWRpb1RyYWNrID0ge3R5cGU6ICdhdWRpbycsIGlkOiAyLCBzZXF1ZW5jZU51bWJlcjogMCwgc2FtcGxlczogW10sIGxlbmd0aDogMH07XHJcblxyXG4gICAgICAgIHRoaXMuX2xpdHRsZUVuZGlhbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XHJcbiAgICAgICAgICAgIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgIC8vIGxpdHRsZS1lbmRpYW4gd3JpdGVcclxuICAgICAgICAgICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAgLy8gcGxhdGZvcm0tc3BlYyByZWFkLCBpZiBlcXVhbCB0aGVuIExFXHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX21lZGlhSW5mbyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvVHJhY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvVHJhY2sgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25NZXRhRGF0YUFycml2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uU2NyaXB0RGF0YUFycml2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcHJvYmUoYnVmZmVyKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xyXG4gICAgICAgIGxldCBtaXNtYXRjaCA9IHttYXRjaDogZmFsc2V9O1xyXG5cclxuICAgICAgICBpZiAoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRDIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWlzbWF0Y2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGFzQXVkaW8gPSAoKGRhdGFbNF0gJiA0KSA+Pj4gMikgIT09IDA7XHJcbiAgICAgICAgbGV0IGhhc1ZpZGVvID0gKGRhdGFbNF0gJiAxKSAhPT0gMDtcclxuXHJcbiAgICAgICAgbGV0IG9mZnNldCA9IFJlYWRCaWczMihkYXRhLCA1KTtcclxuXHJcbiAgICAgICAgaWYgKG9mZnNldCA8IDkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1pc21hdGNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWF0Y2g6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbnN1bWVkOiBvZmZzZXQsXHJcbiAgICAgICAgICAgIGRhdGFPZmZzZXQ6IG9mZnNldCxcclxuICAgICAgICAgICAgaGFzQXVkaW9UcmFjazogaGFzQXVkaW8sXHJcbiAgICAgICAgICAgIGhhc1ZpZGVvVHJhY2s6IGhhc1ZpZGVvXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRGF0YVNvdXJjZShsb2FkZXIpIHtcclxuICAgICAgICBsb2FkZXIub25EYXRhQXJyaXZhbCA9IHRoaXMucGFyc2VDaHVua3MuYmluZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBwcm90b3R5cGU6IGZ1bmN0aW9uKHR5cGU6IHN0cmluZywgbWV0YWRhdGE6IGFueSk6IHZvaWRcclxuICAgIGdldCBvblRyYWNrTWV0YWRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uVHJhY2tNZXRhZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb25UcmFja01ldGFkYXRhKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbihtZWRpYUluZm86IE1lZGlhSW5mbyk6IHZvaWRcclxuICAgIGdldCBvbk1lZGlhSW5mbygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25NZWRpYUluZm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uTWVkaWFJbmZvKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb25NZXRhRGF0YUFycml2ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uTWV0YURhdGFBcnJpdmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbk1ldGFEYXRhQXJyaXZlZChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uTWV0YURhdGFBcnJpdmVkID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9uU2NyaXB0RGF0YUFycml2ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uU2NyaXB0RGF0YUFycml2ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uU2NyaXB0RGF0YUFycml2ZWQoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vblNjcmlwdERhdGFBcnJpdmVkID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbih0eXBlOiBudW1iZXIsIGluZm86IHN0cmluZyk6IHZvaWRcclxuICAgIGdldCBvbkVycm9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbkVycm9yKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25FcnJvciA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByb3RvdHlwZTogZnVuY3Rpb24odmlkZW9UcmFjazogYW55LCBhdWRpb1RyYWNrOiBhbnkpOiB2b2lkXHJcbiAgICBnZXQgb25EYXRhQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkRhdGFBdmFpbGFibGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uRGF0YUF2YWlsYWJsZShjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uRGF0YUF2YWlsYWJsZSA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRpbWVzdGFtcCBiYXNlIGZvciBvdXRwdXQgc2FtcGxlcywgbXVzdCBiZSBpbiBtaWxsaXNlY29uZHNcclxuICAgIGdldCB0aW1lc3RhbXBCYXNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lc3RhbXBCYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0aW1lc3RhbXBCYXNlKGJhc2UpIHtcclxuICAgICAgICB0aGlzLl90aW1lc3RhbXBCYXNlID0gYmFzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3ZlcnJpZGVkRHVyYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2R1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcmNlLW92ZXJyaWRlIG1lZGlhIGR1cmF0aW9uLiBNdXN0IGJlIGluIG1pbGxpc2Vjb25kcywgaW50MzJcclxuICAgIHNldCBvdmVycmlkZWREdXJhdGlvbihkdXJhdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuX21lZGlhSW5mby5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcmNlLW92ZXJyaWRlIGF1ZGlvIHRyYWNrIHByZXNlbnQgZmxhZywgYm9vbGVhblxyXG4gICAgc2V0IG92ZXJyaWRlZEhhc0F1ZGlvKGhhc0F1ZGlvKSB7XHJcbiAgICAgICAgdGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9oYXNBdWRpbyA9IGhhc0F1ZGlvO1xyXG4gICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IGhhc0F1ZGlvO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcmNlLW92ZXJyaWRlIHZpZGVvIHRyYWNrIHByZXNlbnQgZmxhZywgYm9vbGVhblxyXG4gICAgc2V0IG92ZXJyaWRlZEhhc1ZpZGVvKGhhc1ZpZGVvKSB7XHJcbiAgICAgICAgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9oYXNWaWRlbyA9IGhhc1ZpZGVvO1xyXG4gICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IGhhc1ZpZGVvO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0TWVkaWFJbmZvKCkge1xyXG4gICAgICAgIHRoaXMuX21lZGlhSW5mbyA9IG5ldyBNZWRpYUluZm8oKTtcclxuICAgIH1cclxuXHJcbiAgICBfaXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyAmJiB0aGlzLl9oYXNWaWRlbykgeyAgLy8gYm90aCBhdWRpbyAmIHZpZGVvXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgJiYgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faGFzQXVkaW8gJiYgIXRoaXMuX2hhc1ZpZGVvKSB7ICAvLyBhdWRpbyBvbmx5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5faGFzQXVkaW8gJiYgdGhpcy5faGFzVmlkZW8pIHsgIC8vIHZpZGVvIG9ubHlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZ1bmN0aW9uIHBhcnNlQ2h1bmtzKGNodW5rOiBBcnJheUJ1ZmZlciwgYnl0ZVN0YXJ0OiBudW1iZXIpOiBudW1iZXI7XHJcbiAgICBwYXJzZUNodW5rcyhjaHVuaywgYnl0ZVN0YXJ0KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vbkVycm9yIHx8ICF0aGlzLl9vbk1lZGlhSW5mbyB8fCAhdGhpcy5fb25UcmFja01ldGFkYXRhIHx8ICF0aGlzLl9vbkRhdGFBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRmx2OiBvbkVycm9yICYgb25NZWRpYUluZm8gJiBvblRyYWNrTWV0YWRhdGEgJiBvbkRhdGFBdmFpbGFibGUgY2FsbGJhY2sgbXVzdCBiZSBzcGVjaWZpZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcclxuXHJcbiAgICAgICAgaWYgKGJ5dGVTdGFydCA9PT0gMCkgeyAgLy8gYnVmZmVyIHdpdGggRkxWIGhlYWRlclxyXG4gICAgICAgICAgICBpZiAoY2h1bmsuYnl0ZUxlbmd0aCA+IDEzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJvYmVEYXRhID0gRkxWRGVtdXhlci5wcm9iZShjaHVuayk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwcm9iZURhdGEuZGF0YU9mZnNldDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fZmlyc3RQYXJzZSkgeyAgLy8gaGFuZGxlIFByZXZpb3VzVGFnU2l6ZTAgYmVmb3JlIFRhZzFcclxuICAgICAgICAgICAgdGhpcy5fZmlyc3RQYXJzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZVN0YXJ0ICsgb2Zmc2V0ICE9PSB0aGlzLl9kYXRhT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZpcnN0IHRpbWUgcGFyc2luZyBidXQgY2h1bmsgYnl0ZVN0YXJ0IGludmFsaWQhJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGNodW5rLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBsZXQgcHJldlRhZ1NpemUwID0gdi5nZXRVaW50MzIoMCwgIWxlKTtcclxuICAgICAgICAgICAgaWYgKHByZXZUYWdTaXplMCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdQcmV2VGFnU2l6ZTAgIT09IDAgISEhJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgY2h1bmsuYnl0ZUxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhjaHVuaywgb2Zmc2V0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQgKyAxMSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIHBhcnNpbmcgYW4gZmx2IHRhZ1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB0YWdUeXBlID0gdi5nZXRVaW50OCgwKTtcclxuICAgICAgICAgICAgbGV0IGRhdGFTaXplID0gdi5nZXRVaW50MzIoMCwgIWxlKSAmIDB4MDBGRkZGRkY7XHJcblxyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ICsgMTEgKyBkYXRhU2l6ZSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIHBhcnNpbmcgYWN0dWFsIGRhdGEgYm9keVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YWdUeXBlICE9PSA4ICYmIHRhZ1R5cGUgIT09IDkgJiYgdGFnVHlwZSAhPT0gMTgpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgVW5zdXBwb3J0ZWQgdGFnIHR5cGUgJHt0YWdUeXBlfSwgc2tpcHBlZGApO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3VtZSB0aGUgd2hvbGUgdGFnIChza2lwIGl0KVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDExICsgZGF0YVNpemUgKyA0O1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB0czIgPSB2LmdldFVpbnQ4KDQpO1xyXG4gICAgICAgICAgICBsZXQgdHMxID0gdi5nZXRVaW50OCg1KTtcclxuICAgICAgICAgICAgbGV0IHRzMCA9IHYuZ2V0VWludDgoNik7XHJcbiAgICAgICAgICAgIGxldCB0czMgPSB2LmdldFVpbnQ4KDcpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcCA9IHRzMCB8ICh0czEgPDwgOCkgfCAodHMyIDw8IDE2KSB8ICh0czMgPDwgMjQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHN0cmVhbUlkID0gdi5nZXRVaW50MzIoNywgIWxlKSAmIDB4MDBGRkZGRkY7XHJcbiAgICAgICAgICAgIGlmIChzdHJlYW1JZCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdNZWV0IHRhZyB3aGljaCBoYXMgU3RyZWFtSUQgIT0gMCEnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSBvZmZzZXQgKyAxMTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGFnVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OiAgLy8gQXVkaW9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUF1ZGlvRGF0YShjaHVuaywgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6ICAvLyBWaWRlb1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlVmlkZW9EYXRhKGNodW5rLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGltZXN0YW1wLCBieXRlU3RhcnQgKyBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxODogIC8vIFNjcmlwdERhdGFPYmplY3RcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVNjcmlwdERhdGEoY2h1bmssIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHByZXZUYWdTaXplID0gdi5nZXRVaW50MzIoMTEgKyBkYXRhU2l6ZSwgIWxlKTtcclxuICAgICAgICAgICAgaWYgKHByZXZUYWdTaXplICE9PSAxMSArIGRhdGFTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYEludmFsaWQgUHJldlRhZ1NpemUgJHtwcmV2VGFnU2l6ZX1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb2Zmc2V0ICs9IDExICsgZGF0YVNpemUgKyA0OyAgLy8gdGFnQm9keSArIGRhdGFTaXplICsgcHJldlRhZ1NpemVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRpc3BhdGNoIHBhcnNlZCBmcmFtZXMgdG8gY29uc3VtZXIgKHR5cGljYWxseSwgdGhlIHJlbXV4ZXIpXHJcbiAgICAgICAgLy8gaWYgKHRoaXMuX2lzSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCgpKSB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUodGhpcy5fYXVkaW9UcmFjaywgdGhpcy5fdmlkZW9UcmFjayk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3BhdGNoICYmICh0aGlzLl9hdWRpb1RyYWNrLmxlbmd0aCB8fCB0aGlzLl92aWRlb1RyYWNrLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9mZnNldDsgIC8vIGNvbnN1bWVkIGJ5dGVzLCBqdXN0IGVxdWFscyBsYXRlc3Qgb2Zmc2V0IGluZGV4XHJcbiAgICB9XHJcblxyXG4gICAgX3BhcnNlU2NyaXB0RGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHtcclxuICAgICAgICBsZXQgc2NyaXB0RGF0YSA9IEFNRi5wYXJzZVNjcmlwdERhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgaWYgKHNjcmlwdERhdGEuaGFzT3duUHJvcGVydHkoJ29uTWV0YURhdGEnKSkge1xyXG4gICAgICAgICAgICBpZiAoc2NyaXB0RGF0YS5vbk1ldGFEYXRhID09IG51bGwgfHwgdHlwZW9mIHNjcmlwdERhdGEub25NZXRhRGF0YSAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnSW52YWxpZCBvbk1ldGFEYXRhIHN0cnVjdHVyZSEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBvbk1ldGFEYXRhIHRhZyEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IHNjcmlwdERhdGE7XHJcbiAgICAgICAgICAgIGxldCBvbk1ldGFEYXRhID0gdGhpcy5fbWV0YWRhdGEub25NZXRhRGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbk1ldGFEYXRhQXJyaXZlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25NZXRhRGF0YUFycml2ZWQoT2JqZWN0LmFzc2lnbih7fSwgb25NZXRhRGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuaGFzQXVkaW8gPT09ICdib29sZWFuJykgeyAgLy8gaGFzQXVkaW9cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzQXVkaW8gPSBvbk1ldGFEYXRhLmhhc0F1ZGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRoaXMuX2hhc0F1ZGlvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oYXNWaWRlbyA9PT0gJ2Jvb2xlYW4nKSB7ICAvLyBoYXNWaWRlb1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNWaWRlbyA9IG9uTWV0YURhdGEuaGFzVmlkZW87XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdGhpcy5faGFzVmlkZW87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGUgPT09ICdudW1iZXInKSB7ICAvLyBhdWRpb2RhdGFyYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uYXVkaW9EYXRhUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9kYXRhcmF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEudmlkZW9kYXRhcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIHZpZGVvZGF0YXJhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby52aWRlb0RhdGFSYXRlID0gb25NZXRhRGF0YS52aWRlb2RhdGFyYXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS53aWR0aCA9PT0gJ251bWJlcicpIHsgIC8vIHdpZHRoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8ud2lkdGggPSBvbk1ldGFEYXRhLndpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oZWlnaHQgPT09ICdudW1iZXInKSB7ICAvLyBoZWlnaHRcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oZWlnaHQgPSBvbk1ldGFEYXRhLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuZHVyYXRpb24gPT09ICdudW1iZXInKSB7ICAvLyBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9kdXJhdGlvbk92ZXJyaWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IE1hdGguZmxvb3Iob25NZXRhRGF0YS5kdXJhdGlvbiAqIHRoaXMuX3RpbWVzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5kdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmZyYW1lcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIGZyYW1lcmF0ZVxyXG4gICAgICAgICAgICAgICAgbGV0IGZwc19udW0gPSBNYXRoLmZsb29yKG9uTWV0YURhdGEuZnJhbWVyYXRlICogMTAwMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnBzX251bSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZnBzID0gZnBzX251bSAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlLmZpeGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUuZnBzID0gZnBzO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzX251bTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUuZnBzX2RlbiA9IDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmZwcyA9IGZwcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEua2V5ZnJhbWVzID09PSAnb2JqZWN0JykgeyAgLy8ga2V5ZnJhbWVzXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzS2V5ZnJhbWVzSW5kZXggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleWZyYW1lcyA9IG9uTWV0YURhdGEua2V5ZnJhbWVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmtleWZyYW1lc0luZGV4ID0gdGhpcy5fcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpO1xyXG4gICAgICAgICAgICAgICAgb25NZXRhRGF0YS5rZXlmcmFtZXMgPSBudWxsOyAgLy8ga2V5ZnJhbWVzIGhhcyBiZWVuIGV4dHJhY3RlZCwgcmVtb3ZlIGl0XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzS2V5ZnJhbWVzSW5kZXggPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8ubWV0YWRhdGEgPSBvbk1ldGFEYXRhO1xyXG4gICAgICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBvbk1ldGFEYXRhJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYUluZm8uaXNDb21wbGV0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyh0aGlzLl9tZWRpYUluZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NyaXB0RGF0YSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb25TY3JpcHREYXRhQXJyaXZlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25TY3JpcHREYXRhQXJyaXZlZChPYmplY3QuYXNzaWduKHt9LCBzY3JpcHREYXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3BhcnNlS2V5ZnJhbWVzSW5kZXgoa2V5ZnJhbWVzKSB7XHJcbiAgICAgICAgbGV0IHRpbWVzID0gW107XHJcbiAgICAgICAgbGV0IGZpbGVwb3NpdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gaWdub3JlIGZpcnN0IGtleWZyYW1lIHdoaWNoIGlzIGFjdHVhbGx5IEFWQyBTZXF1ZW5jZSBIZWFkZXIgKEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwga2V5ZnJhbWVzLnRpbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0aW1lID0gdGhpcy5fdGltZXN0YW1wQmFzZSArIE1hdGguZmxvb3Ioa2V5ZnJhbWVzLnRpbWVzW2ldICogMTAwMCk7XHJcbiAgICAgICAgICAgIHRpbWVzLnB1c2godGltZSk7XHJcbiAgICAgICAgICAgIGZpbGVwb3NpdGlvbnMucHVzaChrZXlmcmFtZXMuZmlsZXBvc2l0aW9uc1tpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aW1lczogdGltZXMsXHJcbiAgICAgICAgICAgIGZpbGVwb3NpdGlvbnM6IGZpbGVwb3NpdGlvbnNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9wYXJzZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCkge1xyXG4gICAgICAgIGlmIChkYXRhU2l6ZSA8PSAxKSB7XHJcbiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIGF1ZGlvIHBhY2tldCwgbWlzc2luZyBTb3VuZERhdGEgcGF5bG9hZCEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0F1ZGlvRmxhZ092ZXJyaWRlZCA9PT0gdHJ1ZSAmJiB0aGlzLl9oYXNBdWRpbyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gSWYgaGFzQXVkaW86IGZhbHNlIGluZGljYXRlZCBleHBsaWNpdGx5IGluIE1lZGlhRGF0YVNvdXJjZSxcclxuICAgICAgICAgICAgLy8gSWdub3JlIGFsbCB0aGUgYXVkaW8gcGFja2V0c1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47XHJcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgbGV0IHNvdW5kU3BlYyA9IHYuZ2V0VWludDgoMCk7XHJcblxyXG4gICAgICAgIGxldCBzb3VuZEZvcm1hdCA9IHNvdW5kU3BlYyA+Pj4gNDtcclxuICAgICAgICBpZiAoc291bmRGb3JtYXQgIT09IDIgJiYgc291bmRGb3JtYXQgIT09IDEwKSB7ICAvLyBNUDMgb3IgQUFDXHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuQ09ERUNfVU5TVVBQT1JURUQsICdGbHY6IFVuc3VwcG9ydGVkIGF1ZGlvIGNvZGVjIGlkeDogJyArIHNvdW5kRm9ybWF0KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNvdW5kUmF0ZSA9IDA7XHJcbiAgICAgICAgbGV0IHNvdW5kUmF0ZUluZGV4ID0gKHNvdW5kU3BlYyAmIDEyKSA+Pj4gMjtcclxuICAgICAgICBpZiAoc291bmRSYXRlSW5kZXggPj0gMCAmJiBzb3VuZFJhdGVJbmRleCA8PSA0KSB7XHJcbiAgICAgICAgICAgIHNvdW5kUmF0ZSA9IHRoaXMuX2ZsdlNvdW5kUmF0ZVRhYmxlW3NvdW5kUmF0ZUluZGV4XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogSW52YWxpZCBhdWRpbyBzYW1wbGUgcmF0ZSBpZHg6ICcgKyBzb3VuZFJhdGVJbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzb3VuZFNpemUgPSAoc291bmRTcGVjICYgMikgPj4+IDE7ICAvLyB1bnVzZWRcclxuICAgICAgICBsZXQgc291bmRUeXBlID0gKHNvdW5kU3BlYyAmIDEpO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLl9hdWRpb01ldGFkYXRhO1xyXG4gICAgICAgIGxldCB0cmFjayA9IHRoaXMuX2F1ZGlvVHJhY2s7XHJcblxyXG4gICAgICAgIGlmICghbWV0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faGFzQXVkaW8gPT09IGZhbHNlICYmIHRoaXMuX2hhc0F1ZGlvRmxhZ092ZXJyaWRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGluaXRpYWwgbWV0YWRhdGFcclxuICAgICAgICAgICAgbWV0YSA9IHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSB7fTtcclxuICAgICAgICAgICAgbWV0YS50eXBlID0gJ2F1ZGlvJztcclxuICAgICAgICAgICAgbWV0YS5pZCA9IHRyYWNrLmlkO1xyXG4gICAgICAgICAgICBtZXRhLnRpbWVzY2FsZSA9IHRoaXMuX3RpbWVzY2FsZTtcclxuICAgICAgICAgICAgbWV0YS5kdXJhdGlvbiA9IHRoaXMuX2R1cmF0aW9uO1xyXG4gICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IHNvdW5kUmF0ZTtcclxuICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSAoc291bmRUeXBlID09PSAwID8gMSA6IDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNvdW5kRm9ybWF0ID09PSAxMCkgeyAgLy8gQUFDXHJcbiAgICAgICAgICAgIGxldCBhYWNEYXRhID0gdGhpcy5fcGFyc2VBQUNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpO1xyXG4gICAgICAgICAgICBpZiAoYWFjRGF0YSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFhY0RhdGEucGFja2V0VHlwZSA9PT0gMCkgeyAgLy8gQUFDIHNlcXVlbmNlIGhlYWRlciAoQXVkaW9TcGVjaWZpY0NvbmZpZylcclxuICAgICAgICAgICAgICAgIGlmIChtZXRhLmNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBdWRpb1NwZWNpZmljQ29uZmlnIScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IG1pc2MgPSBhYWNEYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IG1pc2Muc2FtcGxpbmdSYXRlO1xyXG4gICAgICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBtaXNjLmNoYW5uZWxDb3VudDtcclxuICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjO1xyXG4gICAgICAgICAgICAgICAgbWV0YS5vcmlnaW5hbENvZGVjID0gbWlzYy5vcmlnaW5hbENvZGVjO1xyXG4gICAgICAgICAgICAgICAgbWV0YS5jb25maWcgPSBtaXNjLmNvbmZpZztcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBkZWNvZGUgcmVzdWx0IG9mIGFuIGFhYyBzYW1wbGUgaXMgMTAyNCBQQ00gc2FtcGxlc1xyXG4gICAgICAgICAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IDEwMjQgLyBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlO1xyXG4gICAgICAgICAgICAgICAgTG9nLnYodGhpcy5UQUcsICdQYXJzZWQgQXVkaW9TcGVjaWZpY0NvbmZpZycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vbi1pbml0aWFsIG1ldGFkYXRhLCBmb3JjZSBkaXNwYXRjaCAob3IgZmx1c2gpIHBhcnNlZCBmcmFtZXMgdG8gcmVtdXhlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRGF0YUF2YWlsYWJsZSh0aGlzLl9hdWRpb1RyYWNrLCB0aGlzLl92aWRlb1RyYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGVuIG5vdGlmeSBuZXcgbWV0YWRhdGFcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ2F1ZGlvJywgbWV0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvO1xyXG4gICAgICAgICAgICAgICAgbWkuYXVkaW9Db2RlYyA9IG1ldGEub3JpZ2luYWxDb2RlYztcclxuICAgICAgICAgICAgICAgIG1pLmF1ZGlvU2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xyXG4gICAgICAgICAgICAgICAgbWkuYXVkaW9DaGFubmVsQ291bnQgPSBtZXRhLmNoYW5uZWxDb3VudDtcclxuICAgICAgICAgICAgICAgIGlmIChtaS5oYXNWaWRlbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtaS52aWRlb0NvZGVjICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS52aWRlb0NvZGVjICsgJywnICsgbWkuYXVkaW9Db2RlYyArICdcIic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPVwiJyArIG1pLmF1ZGlvQ29kZWMgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG1pLmlzQ29tcGxldGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVkaWFJbmZvKG1pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhYWNEYXRhLnBhY2tldFR5cGUgPT09IDEpIHsgIC8vIEFBQyByYXcgZnJhbWUgZGF0YVxyXG4gICAgICAgICAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWFjU2FtcGxlID0ge3VuaXQ6IGFhY0RhdGEuZGF0YSwgbGVuZ3RoOiBhYWNEYXRhLmRhdGEuYnl0ZUxlbmd0aCwgZHRzOiBkdHMsIHB0czogZHRzfTtcclxuICAgICAgICAgICAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChhYWNTYW1wbGUpO1xyXG4gICAgICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGFhY0RhdGEuZGF0YS5sZW5ndGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBMb2cuZSh0aGlzLlRBRywgYEZsdjogVW5zdXBwb3J0ZWQgQUFDIGRhdGEgdHlwZSAke2FhY0RhdGEucGFja2V0VHlwZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc291bmRGb3JtYXQgPT09IDIpIHsgIC8vIE1QM1xyXG4gICAgICAgICAgICBpZiAoIW1ldGEuY29kZWMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgbWV0YWRhdGEgZm9yIG1wMyBhdWRpbyB0cmFjaywgZXh0cmFjdCBpbmZvIGZyb20gZnJhbWUgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICBsZXQgbWlzYyA9IHRoaXMuX3BhcnNlTVAzQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChtaXNjID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1ldGEuYXVkaW9TYW1wbGVSYXRlID0gbWlzYy5zYW1wbGluZ1JhdGU7XHJcbiAgICAgICAgICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IG1pc2MuY2hhbm5lbENvdW50O1xyXG4gICAgICAgICAgICAgICAgbWV0YS5jb2RlYyA9IG1pc2MuY29kZWM7XHJcbiAgICAgICAgICAgICAgICBtZXRhLm9yaWdpbmFsQ29kZWMgPSBtaXNjLm9yaWdpbmFsQ29kZWM7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgZGVjb2RlIHJlc3VsdCBvZiBhbiBtcDMgc2FtcGxlIGlzIDExNTIgUENNIHNhbXBsZXNcclxuICAgICAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSAxMTUyIC8gbWV0YS5hdWRpb1NhbXBsZVJhdGUgKiBtZXRhLnRpbWVzY2FsZTtcclxuICAgICAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCAnUGFyc2VkIE1QRUcgQXVkaW8gRnJhbWUgSGVhZGVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSgnYXVkaW8nLCBtZXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWkgPSB0aGlzLl9tZWRpYUluZm87XHJcbiAgICAgICAgICAgICAgICBtaS5hdWRpb0NvZGVjID0gbWV0YS5jb2RlYztcclxuICAgICAgICAgICAgICAgIG1pLmF1ZGlvU2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xyXG4gICAgICAgICAgICAgICAgbWkuYXVkaW9DaGFubmVsQ291bnQgPSBtZXRhLmNoYW5uZWxDb3VudDtcclxuICAgICAgICAgICAgICAgIG1pLmF1ZGlvRGF0YVJhdGUgPSBtaXNjLmJpdFJhdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAobWkuaGFzVmlkZW8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWkudmlkZW9Db2RlYyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS5hdWRpb0NvZGVjICsgJ1wiJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtaS5pc0NvbXBsZXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgcGFja2V0IGlzIGFsd2F5cyBhIHZhbGlkIGF1ZGlvIHBhY2tldCwgZXh0cmFjdCBpdFxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuX3BhcnNlTVAzQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBkdHMgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgdGFnVGltZXN0YW1wO1xyXG4gICAgICAgICAgICBsZXQgbXAzU2FtcGxlID0ge3VuaXQ6IGRhdGEsIGxlbmd0aDogZGF0YS5ieXRlTGVuZ3RoLCBkdHM6IGR0cywgcHRzOiBkdHN9O1xyXG4gICAgICAgICAgICB0cmFjay5zYW1wbGVzLnB1c2gobXAzU2FtcGxlKTtcclxuICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfcGFyc2VBQUNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDw9IDEpIHtcclxuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQUFDIHBhY2tldCwgbWlzc2luZyBBQUNQYWNrZXRUeXBlIG9yL2FuZCBEYXRhIScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0ge307XHJcbiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgcmVzdWx0LnBhY2tldFR5cGUgPSBhcnJheVswXTtcclxuXHJcbiAgICAgICAgaWYgKGFycmF5WzBdID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gdGhpcy5fcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IGFycmF5LnN1YmFycmF5KDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBfcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xyXG4gICAgICAgIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7XHJcbiAgICAgICAgbGV0IGNvbmZpZyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qIEF1ZGlvIE9iamVjdCBUeXBlOlxyXG4gICAgICAgICAgIDA6IE51bGxcclxuICAgICAgICAgICAxOiBBQUMgTWFpblxyXG4gICAgICAgICAgIDI6IEFBQyBMQ1xyXG4gICAgICAgICAgIDM6IEFBQyBTU1IgKFNjYWxhYmxlIFNhbXBsZSBSYXRlKVxyXG4gICAgICAgICAgIDQ6IEFBQyBMVFAgKExvbmcgVGVybSBQcmVkaWN0aW9uKVxyXG4gICAgICAgICAgIDU6IEhFLUFBQyAvIFNCUiAoU3BlY3RyYWwgQmFuZCBSZXBsaWNhdGlvbilcclxuICAgICAgICAgICA2OiBBQUMgU2NhbGFibGVcclxuICAgICAgICAqL1xyXG5cclxuICAgICAgICBsZXQgYXVkaW9PYmplY3RUeXBlID0gMDtcclxuICAgICAgICBsZXQgb3JpZ2luYWxBdWRpb09iamVjdFR5cGUgPSAwO1xyXG4gICAgICAgIGxldCBhdWRpb0V4dGVuc2lvbk9iamVjdFR5cGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBzYW1wbGluZ0luZGV4ID0gMDtcclxuICAgICAgICBsZXQgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIDUgYml0c1xyXG4gICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlID0gYXJyYXlbMF0gPj4+IDM7XHJcbiAgICAgICAgLy8gNCBiaXRzXHJcbiAgICAgICAgc2FtcGxpbmdJbmRleCA9ICgoYXJyYXlbMF0gJiAweDA3KSA8PCAxKSB8IChhcnJheVsxXSA+Pj4gNyk7XHJcbiAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPCAwIHx8IHNhbXBsaW5nSW5kZXggPj0gdGhpcy5fbXBlZ1NhbXBsaW5nUmF0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBBQUMgaW52YWxpZCBzYW1wbGluZyBmcmVxdWVuY3kgaW5kZXghJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzYW1wbGluZ0ZyZXF1ZW5jZSA9IHRoaXMuX21wZWdTYW1wbGluZ1JhdGVzW3NhbXBsaW5nSW5kZXhdO1xyXG5cclxuICAgICAgICAvLyA0IGJpdHNcclxuICAgICAgICBsZXQgY2hhbm5lbENvbmZpZyA9IChhcnJheVsxXSAmIDB4NzgpID4+PiAzO1xyXG4gICAgICAgIGlmIChjaGFubmVsQ29uZmlnIDwgMCB8fCBjaGFubmVsQ29uZmlnID49IDgpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEFBQyBpbnZhbGlkIGNoYW5uZWwgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7ICAvLyBIRS1BQUM/XHJcbiAgICAgICAgICAgIC8vIDQgYml0c1xyXG4gICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gKChhcnJheVsxXSAmIDB4MDcpIDw8IDEpIHwgKGFycmF5WzJdID4+PiA3KTtcclxuICAgICAgICAgICAgLy8gNSBiaXRzXHJcbiAgICAgICAgICAgIGF1ZGlvRXh0ZW5zaW9uT2JqZWN0VHlwZSA9IChhcnJheVsyXSAmIDB4N0MpID4+PiAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gd29ya2Fyb3VuZHMgZm9yIHZhcmlvdXMgYnJvd3NlcnNcclxuICAgICAgICBsZXQgdXNlckFnZW50ID0gc2VsZi5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAvLyBmaXJlZm94OiB1c2UgU0JSIChIRS1BQUMpIGlmIGZyZXEgbGVzcyB0aGFuIDI0a0h6XHJcbiAgICAgICAgICAgIGlmIChzYW1wbGluZ0luZGV4ID49IDYpIHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDU7XHJcbiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleCAtIDM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAvLyB1c2UgTEMtQUFDXHJcbiAgICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSAyO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIGFuZHJvaWQ6IGFsd2F5cyB1c2UgTEMtQUFDXHJcbiAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZm9yIG90aGVyIGJyb3dzZXJzLCBlLmcuIGNocm9tZS4uLlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgdXNlIEhFLUFBQyB0byBtYWtlIGl0IGVhc2llciB0byBzd2l0Y2ggYWFjIGNvZGVjIHByb2ZpbGVcclxuICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gNTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XHJcbiAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzYW1wbGluZ0luZGV4ID49IDYpIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ29uZmlnID09PSAxKSB7ICAvLyBNb25vIGNoYW5uZWxcclxuICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XHJcbiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uZmlnWzBdICA9IGF1ZGlvT2JqZWN0VHlwZSA8PCAzO1xyXG4gICAgICAgIGNvbmZpZ1swXSB8PSAoc2FtcGxpbmdJbmRleCAmIDB4MEYpID4+PiAxO1xyXG4gICAgICAgIGNvbmZpZ1sxXSAgPSAoc2FtcGxpbmdJbmRleCAmIDB4MEYpIDw8IDc7XHJcbiAgICAgICAgY29uZmlnWzFdIHw9IChjaGFubmVsQ29uZmlnICYgMHgwRikgPDwgMztcclxuICAgICAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZ1sxXSB8PSAoKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMSk7XHJcbiAgICAgICAgICAgIGNvbmZpZ1syXSAgPSAoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MDEpIDw8IDc7XHJcbiAgICAgICAgICAgIC8vIGV4dGVuZGVkIGF1ZGlvIG9iamVjdCB0eXBlOiBmb3JjZSB0byAyIChMQy1BQUMpXHJcbiAgICAgICAgICAgIGNvbmZpZ1syXSB8PSAoMiA8PCAyKTtcclxuICAgICAgICAgICAgY29uZmlnWzNdICA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb25maWc6IGNvbmZpZyxcclxuICAgICAgICAgICAgc2FtcGxpbmdSYXRlOiBzYW1wbGluZ0ZyZXF1ZW5jZSxcclxuICAgICAgICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVsQ29uZmlnLFxyXG4gICAgICAgICAgICBjb2RlYzogJ21wNGEuNDAuJyArIGF1ZGlvT2JqZWN0VHlwZSxcclxuICAgICAgICAgICAgb3JpZ2luYWxDb2RlYzogJ21wNGEuNDAuJyArIG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBfcGFyc2VNUDNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCByZXF1ZXN0SGVhZGVyKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgNCkge1xyXG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBNUDMgcGFja2V0LCBoZWFkZXIgbWlzc2luZyEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuO1xyXG4gICAgICAgIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChyZXF1ZXN0SGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnJheVswXSAhPT0gMHhGRikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB2ZXIgPSAoYXJyYXlbMV0gPj4+IDMpICYgMHgwMztcclxuICAgICAgICAgICAgbGV0IGxheWVyID0gKGFycmF5WzFdICYgMHgwNikgPj4gMTtcclxuXHJcbiAgICAgICAgICAgIGxldCBiaXRyYXRlX2luZGV4ID0gKGFycmF5WzJdICYgMHhGMCkgPj4+IDQ7XHJcbiAgICAgICAgICAgIGxldCBzYW1wbGluZ19mcmVxX2luZGV4ID0gKGFycmF5WzJdICYgMHgwQykgPj4+IDI7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hhbm5lbF9tb2RlID0gKGFycmF5WzNdID4+PiA2KSAmIDB4MDM7XHJcbiAgICAgICAgICAgIGxldCBjaGFubmVsX2NvdW50ID0gY2hhbm5lbF9tb2RlICE9PSAzID8gMiA6IDE7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2FtcGxlX3JhdGUgPSAwO1xyXG4gICAgICAgICAgICBsZXQgYml0X3JhdGUgPSAwO1xyXG4gICAgICAgICAgICBsZXQgb2JqZWN0X3R5cGUgPSAzNDsgIC8vIExheWVyLTMsIGxpc3RlZCBpbiBNUEVHLTQgQXVkaW8gT2JqZWN0IFR5cGVzXHJcblxyXG4gICAgICAgICAgICBsZXQgY29kZWMgPSAnbXAzJztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodmVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6ICAvLyBNUEVHIDIuNVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZV9yYXRlID0gdGhpcy5fbXBlZ0F1ZGlvVjI1U2FtcGxlUmF0ZVRhYmxlW3NhbXBsaW5nX2ZyZXFfaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiAgLy8gTVBFRyAyXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlX3JhdGUgPSB0aGlzLl9tcGVnQXVkaW9WMjBTYW1wbGVSYXRlVGFibGVbc2FtcGxpbmdfZnJlcV9pbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6ICAvLyBNUEVHIDFcclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb1YxMFNhbXBsZVJhdGVUYWJsZVtzYW1wbGluZ19mcmVxX2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChsYXllcikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOiAgLy8gTGF5ZXIgM1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdF90eXBlID0gMzQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHJhdGVfaW5kZXggPCB0aGlzLl9tcGVnQXVkaW9MM0JpdFJhdGVUYWJsZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYml0X3JhdGUgPSB0aGlzLl9tcGVnQXVkaW9MM0JpdFJhdGVUYWJsZVtiaXRyYXRlX2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6ICAvLyBMYXllciAyXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0X3R5cGUgPSAzMztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYml0cmF0ZV9pbmRleCA8IHRoaXMuX21wZWdBdWRpb0wyQml0UmF0ZVRhYmxlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb0wyQml0UmF0ZVRhYmxlW2JpdHJhdGVfaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogIC8vIExheWVyIDFcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RfdHlwZSA9IDMyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiaXRyYXRlX2luZGV4IDwgdGhpcy5fbXBlZ0F1ZGlvTDFCaXRSYXRlVGFibGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdF9yYXRlID0gdGhpcy5fbXBlZ0F1ZGlvTDFCaXRSYXRlVGFibGVbYml0cmF0ZV9pbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBiaXRSYXRlOiBiaXRfcmF0ZSxcclxuICAgICAgICAgICAgICAgIHNhbXBsaW5nUmF0ZTogc2FtcGxlX3JhdGUsXHJcbiAgICAgICAgICAgICAgICBjaGFubmVsQ291bnQ6IGNoYW5uZWxfY291bnQsXHJcbiAgICAgICAgICAgICAgICBjb2RlYzogY29kZWMsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbENvZGVjOiBjb2RlY1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGFycmF5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBfcGFyc2VWaWRlb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDw9IDEpIHtcclxuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgdmlkZW8gcGFja2V0LCBtaXNzaW5nIFZpZGVvRGF0YSBwYXlsb2FkIScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID09PSB0cnVlICYmIHRoaXMuX2hhc1ZpZGVvID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAvLyBJZiBoYXNWaWRlbzogZmFsc2UgaW5kaWNhdGVkIGV4cGxpY2l0bHkgaW4gTWVkaWFEYXRhU291cmNlLFxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgYWxsIHRoZSB2aWRlbyBwYWNrZXRzXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzcGVjID0gKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkpWzBdO1xyXG5cclxuICAgICAgICBsZXQgZnJhbWVUeXBlID0gKHNwZWMgJiAyNDApID4+PiA0O1xyXG4gICAgICAgIGxldCBjb2RlY0lkID0gc3BlYyAmIDE1O1xyXG5cclxuICAgICAgICBpZiAoKGNvZGVjSWQgIT09IDcpICYmIChjb2RlY0lkICE9PSAxMikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkNPREVDX1VOU1VQUE9SVEVELCBgRmx2OiBVbnN1cHBvcnRlZCBjb2RlYyBpbiB2aWRlbyBmcmFtZTogJHtjb2RlY0lkfWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wYXJzZUFWQ1ZpZGVvUGFja2V0KGNvZGVjSWQsIGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxLCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uLCBmcmFtZVR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9wYXJzZUFWQ1ZpZGVvUGFja2V0KGNvZGVjSWQsIGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgNCkge1xyXG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBBVkMgcGFja2V0LCBtaXNzaW5nIEFWQ1BhY2tldFR5cGUgb3IvYW5kIENvbXBvc2l0aW9uVGltZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47XHJcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgbGV0IHBhY2tldFR5cGUgPSB2LmdldFVpbnQ4KDApO1xyXG4gICAgICAgIGxldCBjdHNfdW5zaWduZWQgPSB2LmdldFVpbnQzMigwLCAhbGUpICYgMHgwMEZGRkZGRjtcclxuICAgICAgICBsZXQgY3RzID0gKGN0c191bnNpZ25lZCA8PCA4KSA+PiA4OyAgLy8gY29udmVydCB0byAyNC1iaXQgc2lnbmVkIGludFxyXG5cclxuICAgICAgICBpZiAoY29kZWNJZCA9PSA3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHBhY2tldFR5cGUgPT09IDApIHsgIC8vIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAxKSB7ICAvLyBPbmUgb3IgbW9yZSBOYWx1c1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VBVkNWaWRlb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBkYXRhU2l6ZSAtIDQsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSwgY3RzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlbXB0eSwgQVZDIGVuZCBvZiBzZXF1ZW5jZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIGBGbHY6IEludmFsaWQgdmlkZW8gcGFja2V0IHR5cGUgJHtwYWNrZXRUeXBlfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChwYWNrZXRUeXBlID09PSAwKSB7ICAvLyBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VIRVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBkYXRhU2l6ZSAtIDQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhY2tldFR5cGUgPT09IDEpIHsgIC8vIE9uZSBvciBtb3JlIE5hbHVzXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ1ZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDQsIGRhdGFTaXplIC0gNCwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlLCBjdHMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhY2tldFR5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIC8vIGVtcHR5LCBBVkMgZW5kIG9mIHNlcXVlbmNlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgYEZsdjogSW52YWxpZCB2aWRlbyBwYWNrZXQgdHlwZSAke3BhY2tldFR5cGV9YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9wYXJzZUhFVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGRhdGFTaXplIDwgMjIpIHtcclxuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgX3BhcnNlSEVWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkLCBsYWNrIG9mIGRhdGEhJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtZXRhID0gdGhpcy5fdmlkZW9NZXRhZGF0YTtcclxuICAgICAgICBsZXQgdHJhY2sgPSB0aGlzLl92aWRlb1RyYWNrO1xyXG4gICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjtcclxuXHJcbiAgICAgICAgaWYgKCFtZXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNWaWRlbyA9PT0gZmFsc2UgJiYgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVmlkZW8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWV0YSA9IHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSB7fTtcclxuICAgICAgICAgICAgbWV0YS50eXBlID0gJ3ZpZGVvJztcclxuICAgICAgICAgICAgbWV0YS5pZCA9IHRyYWNrLmlkO1xyXG4gICAgICAgICAgICBtZXRhLnRpbWVzY2FsZSA9IHRoaXMuX3RpbWVzY2FsZTtcclxuICAgICAgICAgICAgbWV0YS5kdXJhdGlvbiA9IHRoaXMuX2R1cmF0aW9uO1xyXG4gICAgICAgICAgICBtZXRhLnByb3B0eSA9ICdoZXZjJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1ldGEuYXZjYyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9sZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpO1xyXG4gICAgICAgIGxldCB1aW50OGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuICAgICAgICBsZXQgYnMgPSBuZXcgTkFMQml0c3RyZWFtKHVpbnQ4YXJyYXksIHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgbGV0IHZlcnNpb24gPSB2LmdldFVpbnQ4KDApO1xyXG4gICAgICAgIC8vb2Zmc2V0ID0gb2Zmc2V0ICsgMTtcclxuICAgICAgICBsZXQgZ2VuZXJhbCA9IHYuZ2V0VWludDgoMSk7XHJcbiAgICAgICAgbGV0IGdlbmVyYWxfcHJvZmlsZV9zcGFjZSA9IGJzLkdldFdvcmQoMik7XHJcbiAgICAgICAgbGV0IGdlbmVyYWxfdGllcl9mbGFnID0gYnMuR2V0V29yZCgxKTtcclxuICAgICAgICBsZXQgZ2VuZXJhbF9wcm9maWxlX2lkYyA9IGJzLkdldFdvcmQoNSk7XHJcbiAgICAgICAgLy9vZmZzZXQgPSBvZmZzZXQgKyAxO1xyXG5cclxuICAgICAgICBsZXQgZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHlfZmxhZ3MgPSBicy5HZXRXb3JkKDMyKTtcclxuICAgICAgICBsZXQgZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvcl9mbGFncyA9IGJzLkdldFdvcmQoNDgpO1xyXG4gICAgICAgIGxldCBnZW5lcmFsX2xldmVsX2lkYyA9IGJzLkdldFdvcmQoOCk7XHJcbiAgICAgICAgYnMuR2V0V29yZCg0KTtcclxuICAgICAgICBsZXQgbWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYyA9IGJzLkdldFdvcmQoMTIpO1xyXG4gICAgICAgIGJzLkdldFdvcmQoNik7XHJcbiAgICAgICAgbGV0IHBhcmFsbGVsaXNtVHlwZSA9IGJzLkdldFdvcmQoMik7XHJcbiAgICAgICAgYnMuR2V0V29yZCg2KTtcclxuICAgICAgICBsZXQgY2hyb21hRm9ybWF0ID0gYnMuR2V0V29yZCgyKTtcclxuXHJcbiAgICAgICAgYnMuR2V0V29yZCg1KTtcclxuICAgICAgICBsZXQgYml0RGVwdGhMdW1hTWludXM4ID0gYnMuR2V0V29yZCgzKTtcclxuICAgICAgICBsZXQgYml0RGVwdGhDaHJvbWFNaW51czggPSBicy5HZXRXb3JkKDMpO1xyXG4gICAgICAgIGxldCBhdmdGcmFtZVJhdGUgPSBicy5HZXRXb3JkKDE2KTtcclxuICAgICAgICBsZXQgY29uc3RhbnRGcmFtZVJhdGUgPSBicy5HZXRXb3JkKDIpO1xyXG4gICAgICAgIGxldCBudW1UZW1wb3JhbExheWVycyA9IGJzLkdldFdvcmQoMyk7XHJcbiAgICAgICAgbGV0IHRlbXBvcmFsSWROZXN0ZWQgPSBicy5HZXRXb3JkKDEpO1xyXG5cclxuICAgICAgICBsZXQgbGVuZ3RoU2l6ZU1pbnVzT25lID0gYnMuR2V0V29yZCgyKTtcclxuXHJcbiAgICAgICAgbGV0IG51bU9mQXJyYXlzID0gdi5nZXRVaW50OCgyMik7XHJcbiAgICAgICAgLy9vZmZzZXQgPSBvZmZzZXQgKyAxO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSAyMztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZkFycmF5czsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAvLyBsZXQgYXJyYXlfY29tcGxldGVuZXNzID0gdi5nZXRVaW50OChvZmZzZXQpJjB4ODA7XHJcbiAgICAgICAgICAgLy8gb2Zmc2V0ID0gb2Zmc2V0ICsgMTtcclxuICAgICAgICAgICAgbGV0IE5BTF91bml0X3R5cGUgPSB2LmdldFVpbnQ4KG9mZnNldCkgJiAweDNmO1xyXG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxO1xyXG5cclxuICAgICAgICAgICAgbGV0IG51bU5hbHVzID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpO1xyXG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAyO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bU5hbHVzOyBqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBuYWxVbml0TGVuZ3RoID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMjtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBuYWxVbml0TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhVWludDggPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgbmFsVW5pdExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyBuYWxVbml0TGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHR5cGUgPSBkYXRhLmdldFVpbnQ4KDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gMHg0MilcclxuICAgICAgICAgICAgICAgIHsvL3Nwc1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSBTUFNQYXJzZXIucGFyc2VIZXZjU1BTKGRhdGFVaW50OCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YS5jb2RlY1dpZHRoID0gY29uZmlnLmNvZGVjX3NpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YS5jb2RlY0hlaWdodCA9IGNvbmZpZy5jb2RlY19zaXplLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBtZXRhLnByZXNlbnRXaWR0aCA9IGNvbmZpZy5wcmVzZW50X3NpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YS5wcmVzZW50SGVpZ2h0ID0gY29uZmlnLnByZXNlbnRfc2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGEucHJvZmlsZSA9IGdlbmVyYWxfcHJvZmlsZV9pZGM7Ly9jb25maWcucHJvZmlsZV9zdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YS5sZXZlbCA9IGdlbmVyYWxfbGV2ZWxfaWRjOy8vY29uZmlnLmxldmVsX3N0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBtZXRhLmJpdERlcHRoID0gYml0RGVwdGhMdW1hTWludXM4Oy8vY29uZmlnLmJpdF9kZXB0aDtcclxuICAgICAgICAgICAgICAgICAgICBtZXRhLmNocm9tYUZvcm1hdCA9IGNocm9tYUZvcm1hdDsvL2NvbmZpZy5jaHJvbWFfZm9ybWF0O1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGEuc2FyUmF0aW8gPSBjb25maWcuc2FyX3JhdGlvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmZyYW1lX3JhdGUuZml4ZWQgPT09IGZhbHNlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZV9yYXRlLmZwc19udW0gPT09IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmZyYW1lX3JhdGUuZnBzX2RlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhLmZyYW1lUmF0ZSA9IHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2RlY0FycmF5ID0gZGF0YVVpbnQ4LnN1YmFycmF5KDEsIDQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAweDQ0KVxyXG4gICAgICAgICAgICAgICAgey8vcHBzXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDB4NDApXHJcbiAgICAgICAgICAgICAgICB7Ly92cHNcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWFpblRpZXIgPSBkYXRhLmdldFVpbnQ4KDYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgTCA9IGRhdGEuZ2V0VWludDgoMjApOyAvL0xcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmVyc2lvbiA9IGRhdGEuZ2V0VWludDgoMTIpOyAvL1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSAnaGV2MS4nICsgZGF0YS5nZXRVaW50OCg2KS50b1N0cmluZygpICsgJy42LkwnICsgZGF0YS5nZXRVaW50OCgyMCkudG9TdHJpbmcoKSArICcuJyArIGRhdGEuZ2V0VWludDgoMTIpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gMHg0RSlcclxuICAgICAgICAgICAgICAgIHsvL1NFSVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gMHgyNilcclxuICAgICAgICAgICAgICAgIHsvL0lEUlxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvO1xyXG4gICAgICAgIG1pLndpZHRoID0gbWV0YS5jb2RlY1dpZHRoO1xyXG4gICAgICAgIG1pLmhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7XHJcbiAgICAgICAgbWkuZnBzID0gMjU7Ly9tZXRhLmZyYW1lUmF0ZS5mcHM7XHJcbiAgICAgICAgbWkuc2FyTnVtID0gbWV0YS5zYXJSYXRpby53aWR0aDtcclxuICAgICAgICBtaS5zYXJEZW4gPSBtZXRhLnNhclJhdGlvLmhlaWdodDtcclxuICAgICAgICBtaS52aWRlb0NvZGVjID0gbWV0YS5jb2RlYztcclxuXHJcbiAgICAgICAgaWYgKG1pLmhhc0F1ZGlvKSB7XHJcbiAgICAgICAgICAgIGlmIChtaS5hdWRpb0NvZGVjICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9XCInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnXCInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS52aWRlb0NvZGVjICsgJ1wiJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1pLmlzQ29tcGxldGUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXRhLmh2Y2MgPSBuZXcgVWludDhBcnJheShkYXRhU2l6ZSk7XHJcbiAgICAgICAgbWV0YS5odmNjLnNldChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpLCAwKTtcclxuICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCcpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHtcclxuICAgICAgICAgICAgLy8gZmx1c2ggcGFyc2VkIGZyYW1lc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGlzcGF0Y2ggJiYgKHRoaXMuX2F1ZGlvVHJhY2subGVuZ3RoIHx8IHRoaXMuX3ZpZGVvVHJhY2subGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gbm90aWZ5IG5ldyBtZXRhZGF0YVxyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhKCd2aWRlbycsIG1ldGEpO1xyXG4gICAgfVxyXG5cclxuICAgIF9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkge1xyXG4gICAgICAgIGlmIChkYXRhU2l6ZSA8IDcpIHtcclxuICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIGxhY2sgb2YgZGF0YSEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhO1xyXG4gICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7XHJcbiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuO1xyXG4gICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmICghbWV0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faGFzVmlkZW8gPT09IGZhbHNlICYmIHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhID0ge307XHJcbiAgICAgICAgICAgIG1ldGEudHlwZSA9ICd2aWRlbyc7XHJcbiAgICAgICAgICAgIG1ldGEuaWQgPSB0cmFjay5pZDtcclxuICAgICAgICAgICAgbWV0YS50aW1lc2NhbGUgPSB0aGlzLl90aW1lc2NhbGU7XHJcbiAgICAgICAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjtcclxuICAgICAgICAgICAgbWV0YS5wcm9wdHkgPSAnYXZjJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1ldGEuYXZjYyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZlcnNpb24gPSB2LmdldFVpbnQ4KDApOyAgLy8gY29uZmlndXJhdGlvblZlcnNpb25cclxuICAgICAgICBsZXQgYXZjUHJvZmlsZSA9IHYuZ2V0VWludDgoMSk7ICAvLyBhdmNQcm9maWxlSW5kaWNhdGlvblxyXG4gICAgICAgIGxldCBwcm9maWxlQ29tcGF0aWJpbGl0eSA9IHYuZ2V0VWludDgoMik7ICAvLyBwcm9maWxlX2NvbXBhdGliaWxpdHlcclxuICAgICAgICBsZXQgYXZjTGV2ZWwgPSB2LmdldFVpbnQ4KDMpOyAgLy8gQVZDTGV2ZWxJbmRpY2F0aW9uXHJcblxyXG4gICAgICAgIGlmICh2ZXJzaW9uICE9PSAxIHx8IGF2Y1Byb2ZpbGUgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbmFsdUxlbmd0aFNpemUgPSAodi5nZXRVaW50OCg0KSAmIDMpICsgMTsgIC8vIGxlbmd0aFNpemVNaW51c09uZVxyXG4gICAgICAgIGlmICh0aGlzLl9uYWx1TGVuZ3RoU2l6ZSAhPT0gMyAmJiB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSAhPT0gNCkgeyAgLy8gaG9seSBzaGl0ISEhXHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCBgRmx2OiBTdHJhbmdlIE5hbHVMZW5ndGhTaXplTWludXNPbmU6ICR7dGhpcy5fbmFsdUxlbmd0aFNpemUgLSAxfWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3BzQ291bnQgPSB2LmdldFVpbnQ4KDUpICYgMzE7ICAvLyBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0c1xyXG4gICAgICAgIGlmIChzcHNDb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogSW52YWxpZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogTm8gU1BTJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKHNwc0NvdW50ID4gMSkge1xyXG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYEZsdjogU3RyYW5nZSBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogU1BTIENvdW50ID0gJHtzcHNDb3VudH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXQgPSA2O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwc0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxlbiA9IHYuZ2V0VWludDE2KG9mZnNldCwgIWxlKTsgIC8vIHNlcXVlbmNlUGFyYW1ldGVyU2V0TGVuZ3RoXHJcbiAgICAgICAgICAgIG9mZnNldCArPSAyO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE5vdGljZTogTmFsdSB3aXRob3V0IHN0YXJ0Y29kZSBoZWFkZXIgKDAwIDAwIDAwIDAxKVxyXG4gICAgICAgICAgICBsZXQgc3BzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGxlbik7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSBsZW47XHJcblxyXG4gICAgICAgICAgICBsZXQgY29uZmlnID0gU1BTUGFyc2VyLnBhcnNlU1BTKHNwcyk7XHJcbiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgb3RoZXIgc3BzJ3MgY29uZmlnXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWV0YS5jb2RlY1dpZHRoID0gY29uZmlnLmNvZGVjX3NpemUud2lkdGg7XHJcbiAgICAgICAgICAgIG1ldGEuY29kZWNIZWlnaHQgPSBjb25maWcuY29kZWNfc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIG1ldGEucHJlc2VudFdpZHRoID0gY29uZmlnLnByZXNlbnRfc2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgbWV0YS5wcmVzZW50SGVpZ2h0ID0gY29uZmlnLnByZXNlbnRfc2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBtZXRhLnByb2ZpbGUgPSBjb25maWcucHJvZmlsZV9zdHJpbmc7XHJcbiAgICAgICAgICAgIG1ldGEubGV2ZWwgPSBjb25maWcubGV2ZWxfc3RyaW5nO1xyXG4gICAgICAgICAgICBtZXRhLmJpdERlcHRoID0gY29uZmlnLmJpdF9kZXB0aDtcclxuICAgICAgICAgICAgbWV0YS5jaHJvbWFGb3JtYXQgPSBjb25maWcuY2hyb21hX2Zvcm1hdDtcclxuICAgICAgICAgICAgbWV0YS5zYXJSYXRpbyA9IGNvbmZpZy5zYXJfcmF0aW87XHJcbiAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0gY29uZmlnLmZyYW1lX3JhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29uZmlnLmZyYW1lX3JhdGUuZml4ZWQgPT09IGZhbHNlIHx8XHJcbiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfbnVtID09PSAwIHx8XHJcbiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfZGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRhLmZyYW1lUmF0ZSA9IHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGZwc19kZW4gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuO1xyXG4gICAgICAgICAgICBsZXQgZnBzX251bSA9IG1ldGEuZnJhbWVSYXRlLmZwc19udW07XHJcbiAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBtZXRhLnRpbWVzY2FsZSAqIChmcHNfZGVuIC8gZnBzX251bSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29kZWNBcnJheSA9IHNwcy5zdWJhcnJheSgxLCA0KTtcclxuICAgICAgICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2F2YzEuJztcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBoID0gY29kZWNBcnJheVtqXS50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaC5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9ICcwJyArIGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb2RlY1N0cmluZyArPSBoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZztcclxuXHJcbiAgICAgICAgICAgIGxldCBtaSA9IHRoaXMuX21lZGlhSW5mbztcclxuICAgICAgICAgICAgbWkud2lkdGggPSBtZXRhLmNvZGVjV2lkdGg7XHJcbiAgICAgICAgICAgIG1pLmhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7XHJcbiAgICAgICAgICAgIG1pLmZwcyA9IG1ldGEuZnJhbWVSYXRlLmZwcztcclxuICAgICAgICAgICAgbWkucHJvZmlsZSA9IG1ldGEucHJvZmlsZTtcclxuICAgICAgICAgICAgbWkubGV2ZWwgPSBtZXRhLmxldmVsO1xyXG4gICAgICAgICAgICBtaS5yZWZGcmFtZXMgPSBjb25maWcucmVmX2ZyYW1lcztcclxuICAgICAgICAgICAgbWkuY2hyb21hRm9ybWF0ID0gY29uZmlnLmNocm9tYV9mb3JtYXRfc3RyaW5nO1xyXG4gICAgICAgICAgICBtaS5zYXJOdW0gPSBtZXRhLnNhclJhdGlvLndpZHRoO1xyXG4gICAgICAgICAgICBtaS5zYXJEZW4gPSBtZXRhLnNhclJhdGlvLmhlaWdodDtcclxuICAgICAgICAgICAgbWkudmlkZW9Db2RlYyA9IGNvZGVjU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1pLmhhc0F1ZGlvKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWkuYXVkaW9Db2RlYyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz1cIicgKyBtaS52aWRlb0NvZGVjICsgJywnICsgbWkuYXVkaW9Db2RlYyArICdcIic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPVwiJyArIG1pLnZpZGVvQ29kZWMgKyAnXCInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtaS5pc0NvbXBsZXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTWVkaWFJbmZvKG1pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBwc0NvdW50ID0gdi5nZXRVaW50OChvZmZzZXQpOyAgLy8gbnVtT2ZQaWN0dXJlUGFyYW1ldGVyU2V0c1xyXG4gICAgICAgIGlmIChwcHNDb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogSW52YWxpZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogTm8gUFBTJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKHBwc0NvdW50ID4gMSkge1xyXG4gICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYEZsdjogU3RyYW5nZSBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogUFBTIENvdW50ID0gJHtwcHNDb3VudH1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9mZnNldCsrO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBwc0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxlbiA9IHYuZ2V0VWludDE2KG9mZnNldCwgIWxlKTsgIC8vIHBpY3R1cmVQYXJhbWV0ZXJTZXRMZW5ndGhcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XHJcblxyXG4gICAgICAgICAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcHBzIGlzIHVzZWxlc3MgZm9yIGV4dHJhY3RpbmcgdmlkZW8gaW5mb3JtYXRpb25cclxuICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1ldGEuYXZjYyA9IG5ldyBVaW50OEFycmF5KGRhdGFTaXplKTtcclxuICAgICAgICBtZXRhLmF2Y2Muc2V0KG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSksIDApO1xyXG4gICAgICAgIExvZy52KHRoaXMuVEFHLCAnUGFyc2VkIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkJyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSkge1xyXG4gICAgICAgICAgICAvLyBmbHVzaCBwYXJzZWQgZnJhbWVzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUodGhpcy5fYXVkaW9UcmFjaywgdGhpcy5fdmlkZW9UcmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl92aWRlb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBub3RpZnkgbmV3IG1ldGFkYXRhXHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ3ZpZGVvJywgbWV0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3BhcnNlQVZDVmlkZW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlLCBjdHMpIHtcclxuICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47XHJcbiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgbGV0IHVuaXRzID0gW10sIGxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemUgPSB0aGlzLl9uYWx1TGVuZ3RoU2l6ZTtcclxuICAgICAgICBsZXQgZHRzID0gdGhpcy5fdGltZXN0YW1wQmFzZSArIHRhZ1RpbWVzdGFtcDtcclxuICAgICAgICBsZXQga2V5ZnJhbWUgPSAoZnJhbWVUeXBlID09PSAxKTsgIC8vIGZyb20gRkxWIEZyYW1lIFR5cGUgY29uc3RhbnRzXHJcblxyXG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSkge1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ICsgNCA+PSBkYXRhU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIGBNYWxmb3JtZWQgTmFsdSBuZWFyIHRpbWVzdGFtcCAke2R0c30sIG9mZnNldCA9ICR7b2Zmc2V0fSwgZGF0YVNpemUgPSAke2RhdGFTaXplfWApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7ICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIG5leHQgTmFsdVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE5hbHUgd2l0aCBsZW5ndGgtaGVhZGVyIChBVkMxKVxyXG4gICAgICAgICAgICBsZXQgbmFsdVNpemUgPSB2LmdldFVpbnQzMihvZmZzZXQsICFsZSk7ICAvLyBCaWctRW5kaWFuIHJlYWRcclxuICAgICAgICAgICAgaWYgKGxlbmd0aFNpemUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIG5hbHVTaXplID4+Pj0gODtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmFsdVNpemUgPiBkYXRhU2l6ZSAtIGxlbmd0aFNpemUpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgTWFsZm9ybWVkIE5hbHVzIG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgTmFsdVNpemUgPiBEYXRhU2l6ZSFgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHVuaXRUeXBlID0gdi5nZXRVaW50OChvZmZzZXQgKyBsZW5ndGhTaXplKSAmIDB4MUY7XHJcblxyXG4gICAgICAgICAgICBpZiAodW5pdFR5cGUgPT09IDUpIHsgIC8vIElEUlxyXG4gICAgICAgICAgICAgICAga2V5ZnJhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBsZW5ndGhTaXplICsgbmFsdVNpemUpO1xyXG4gICAgICAgICAgICBsZXQgdW5pdCA9IHt0eXBlOiB1bml0VHlwZSwgZGF0YTogZGF0YX07XHJcbiAgICAgICAgICAgIHVuaXRzLnB1c2godW5pdCk7XHJcbiAgICAgICAgICAgIGxlbmd0aCArPSBkYXRhLmJ5dGVMZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBvZmZzZXQgKz0gbGVuZ3RoU2l6ZSArIG5hbHVTaXplO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVuaXRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsZXQgdHJhY2sgPSB0aGlzLl92aWRlb1RyYWNrO1xyXG4gICAgICAgICAgICBsZXQgYXZjU2FtcGxlID0ge1xyXG4gICAgICAgICAgICAgICAgdW5pdHM6IHVuaXRzLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBpc0tleWZyYW1lOiBrZXlmcmFtZSxcclxuICAgICAgICAgICAgICAgIGR0czogZHRzLFxyXG4gICAgICAgICAgICAgICAgY3RzOiBjdHMsXHJcbiAgICAgICAgICAgICAgICBwdHM6IChkdHMgKyBjdHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChrZXlmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgYXZjU2FtcGxlLmZpbGVwb3NpdGlvbiA9IHRhZ1Bvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChhdmNTYW1wbGUpO1xyXG4gICAgICAgICAgICB0cmFjay5sZW5ndGggKz0gbGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZMVkRlbXV4ZXI7IiwiY2xhc3MgTkFMQml0c3RyZWFtXHJcbntcclxuICAgIGNvbnN0cnVjdG9yKHVpbnQ4YXJyYXksIGxlbilcclxuICAgIHtcclxuICAgICAgICB0aGlzLm1fZGF0YSA9IHVpbnQ4YXJyYXk7XHJcbiAgICAgICAgdGhpcy5tX2xlbiA9IGxlbjtcclxuICAgICAgICB0aGlzLm1faWR4ID0gMDsgXHJcbiAgICAgICAgdGhpcy5tX2JpdHMgPSAwO1xyXG4gICAgICAgIHRoaXMubV9ieXRlID0gMDsgXHJcbiAgICAgICAgdGhpcy5tX3plcm9zID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBHZXRMZWZ0KClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2xlbiAtIHRoaXMubV9pZHg7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0QllURSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMubV9pZHggPj0gdGhpcy5tX2xlbilcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLm1fZGF0YVt0aGlzLm1faWR4KytdO1xyXG4gICAgICAgIGlmIChiID09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1femVyb3MrKztcclxuICAgICAgICAgICAgaWYgKCh0aGlzLm1faWR4IDwgdGhpcy5tX2xlbikgJiYgKHRoaXMubV96ZXJvcyA9PSAyKSAmJiAodGhpcy5tX2RhdGFbdGhpcy5tX2lkeF0gPT0gMHgwMykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9pZHgrKztcclxuICAgICAgICAgICAgICAgIHRoaXMubV96ZXJvcyA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IFxyXG4gICAgICAgIGVsc2UgIHRoaXMubV96ZXJvcyA9IDA7XHJcblxyXG4gICAgICAgIHJldHVybiBiO1xyXG4gICAgfVxyXG5cclxuICAgIEdldEJpdCgpIFxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLm1fYml0cyA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tX2J5dGUgPSB0aGlzLkdldEJZVEUoKTtcclxuICAgICAgICAgICAgdGhpcy5tX2JpdHMgPSA4O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1fYml0cy0tO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tX2J5dGUgPj4gdGhpcy5tX2JpdHMpICYgMHgxO1xyXG4gICAgfVxyXG5cclxuICAgIEdldFdvcmQoYml0cykgXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHUgPSAwO1xyXG4gICAgICAgIHdoaWxlIChiaXRzID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHUgPDw9IDE7XHJcbiAgICAgICAgICAgIHUgfD0gdGhpcy5HZXRCaXQoKTtcclxuICAgICAgICAgICAgYml0cy0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdTtcclxuICAgIH1cclxuXHJcbiAgICBHZXRVRSgpIFxyXG4gICAge1xyXG4gICAgICAgIGxldCB6ZXJvcyA9IDA7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMubV9pZHggPCB0aGlzLm1fbGVuICYmIHRoaXMuR2V0Qml0KCkgPT0gMCkgemVyb3MrKztcclxuICAgICAgICByZXR1cm4gdGhpcy5HZXRXb3JkKHplcm9zKSArICgoMSA8PCB6ZXJvcykgLSAxKTtcclxuICAgIH1cclxuXHJcbiAgICBHZXRTRSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IFVFID0gdGhpcy5HZXRVRSgpO1xyXG4gICAgICAgIGxldCBwb3NpdGl2ZSA9IFVFICYgMTtcclxuICAgICAgICBsZXQgU0UgPSAoVUUgKyAxKSA+PiAxO1xyXG4gICAgICAgIGlmICghcG9zaXRpdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTRSA9IC1TRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFNFO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOQUxCaXRzdHJlYW07IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBFeHBHb2xvbWIgZnJvbSAnLi9leHAtZ29sb21iLmpzJztcclxuaW1wb3J0IE5BTEJpdHN0cmVhbSBmcm9tICcuL2hldmMtZ29sb21iLmpzJztcclxuXHJcbmNsYXNzIFNQU1BhcnNlciB7XHJcblxyXG4gICAgc3RhdGljIF9lYnNwMnJic3AodWludDhhcnJheSkge1xyXG4gICAgICAgIGxldCBzcmMgPSB1aW50OGFycmF5O1xyXG4gICAgICAgIGxldCBzcmNfbGVuZ3RoID0gc3JjLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgbGV0IGRzdCA9IG5ldyBVaW50OEFycmF5KHNyY19sZW5ndGgpO1xyXG4gICAgICAgIGxldCBkc3RfaWR4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNfbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgLy8gVW5lc2NhcGU6IFNraXAgMHgwMyBhZnRlciAwMCAwMFxyXG4gICAgICAgICAgICAgICAgaWYgKHNyY1tpXSA9PT0gMHgwMyAmJiBzcmNbaSAtIDFdID09PSAweDAwICYmIHNyY1tpIC0gMl0gPT09IDB4MDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkc3RbZHN0X2lkeF0gPSBzcmNbaV07XHJcbiAgICAgICAgICAgIGRzdF9pZHgrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShkc3QuYnVmZmVyLCAwLCBkc3RfaWR4KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VIZXZjU1BTKHVpbnQ4YXJyYXkpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGhldmNnYiA9IG5ldyBOQUxCaXRzdHJlYW0odWludDhhcnJheSwgdWludDhhcnJheS5ieXRlTGVuZ3RoKTtcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCg0KTtcclxuICAgICAgICBsZXQgc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMSA9IGhldmNnYi5HZXRXb3JkKDMpO1xyXG5cclxuICAgICAgICBpZiAoc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMSA+IDYpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3BzX3RlbXBvcmFsX2lkX25lc3RpbmdfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgIC8vbGV0IHNwc19zZXFfcGFyYW1ldGVyX3NldF9pZCA9IGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgIGxldCBwcm9maWxlX3NwYWNlID0gaGV2Y2diLkdldFdvcmQoMik7XHJcbiAgICAgICAgbGV0IHRpZXJfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpOyBcclxuICAgICAgICBsZXQgcHJvZmlsZSA9IGhldmNnYi5HZXRXb3JkKDUpOyBcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgzMik7Ly9cclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyAgXHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoNDQpOy8vIFxyXG4gICAgICAgIGxldCBsZXZlbCA9IGhldmNnYi5HZXRXb3JkKDgpOy8vIGdlbmVyYWxfbGV2ZWxfaWRjXHJcbiAgICAgICAgbGV0IHN1Yl9sYXllcl9wcm9maWxlX3ByZXNlbnRfZmxhZyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGxldCBzdWJfbGF5ZXJfbGV2ZWxfcHJlc2VudF9mbGFnID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHNfbWF4X3N1Yl9sYXllcnNfbWludXMxOyBpKyspIHtcclxuICAgICAgICAgICAgc3ViX2xheWVyX3Byb2ZpbGVfcHJlc2VudF9mbGFnW2ldID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcbiAgICAgICAgICAgIHN1Yl9sYXllcl9sZXZlbF9wcmVzZW50X2ZsYWdbaV0gPSBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNwc19tYXhfc3ViX2xheWVyc19taW51czEgPiAwKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzcHNfbWF4X3N1Yl9sYXllcnNfbWludXMxOyBpIDwgODsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwc19tYXhfc3ViX2xheWVyc19taW51czE7IGkrKykgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3ViX2xheWVyX3Byb2ZpbGVfcHJlc2VudF9mbGFnW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgyKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCg1KTtcclxuICAgICAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDMyKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCg0NCk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdWJfbGF5ZXJfbGV2ZWxfcHJlc2VudF9mbGFnW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCg4KTsvLyBzdWJfbGF5ZXJfbGV2ZWxfaWRjW2ldXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNwc19zZXFfcGFyYW1ldGVyX3NldF9pZCA9IGhldmNnYi5HZXRVRSgpOyAgXHJcbiAgICAgICAgaWYgKHNwc19zZXFfcGFyYW1ldGVyX3NldF9pZCA+IDE1KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfaWRjID0gaGV2Y2diLkdldFVFKCk7ICBcclxuICAgICAgICBpZiAoc3BzX3NlcV9wYXJhbWV0ZXJfc2V0X2lkID4gMykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PSAzKSB7XHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDEpOy8vICBcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHdpZHRoICA9IGhldmNnYi5HZXRVRSgpOyAvLyBwaWNfd2lkdGhfaW5fbHVtYV9zYW1wbGVzXHJcbiAgICAgICAgbGV0IGhlaWdodCAgPSBoZXZjZ2IuR2V0VUUoKTsgLy8gcGljX2hlaWdodF9pbl9sdW1hX3NhbXBsZXNcclxuICAgICAgICBpZiAoaGV2Y2diLkdldFdvcmQoMSkpIHsgXHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpOyAgXHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpOyAgXHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpOyAgXHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpOyAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYml0X2RlcHRoX2x1bWFfbWludXM4ID0gaGV2Y2diLkdldFVFKCkgKyA4O1xyXG4gICAgICAgIGxldCBiaXRfZGVwdGhfY2hyb21hX21pbnVzOCA9IGhldmNnYi5HZXRVRSgpICsgODtcclxuICAgICAgICBpZiAoYml0X2RlcHRoX2x1bWFfbWludXM4ICE9IGJpdF9kZXB0aF9jaHJvbWFfbWludXM4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsb2cyX21heF9wb2NfbHNiID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgaWYgKGxvZzJfbWF4X3BvY19sc2IgPiAxNikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3VibGF5ZXJfb3JkZXJpbmdfaW5mbyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgIGlmIChzdWJsYXllcl9vcmRlcmluZ19pbmZvKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3VibGF5ZXJfb3JkZXJpbmdfaW5mbyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN1YmxheWVyX29yZGVyaW5nX2luZm8gPSBzcHNfbWF4X3N1Yl9sYXllcnNfbWludXMxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vbGV0IHN0YXJ0ID0gMDsvL3N1YmxheWVyX29yZGVyaW5nX2luZm8gPyAwIDogc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMSAtIDE7XHJcbiAgICAgIC8vICBsZXQgdmFsID0gc3VibGF5ZXJfb3JkZXJpbmdfaW5mbyAtIHN0YXJ0O1xyXG4gICAgICAgIC8vbGV0IGkgPSBzdGFydDtcclxuICAgICAgICAvL2xldCB0ZW1wb3JhbF9sYXllckFyciA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAobGV0IGogPSBzdWJsYXllcl9vcmRlcmluZ19pbmZvOyBqIDwgc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMTsgaisrKSB7XHJcbiAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTtcclxuICAgICAgICAgICAgaGV2Y2diLkdldFVFKCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxvZzJfbWluX2NiX3NpemUgPSBoZXZjZ2IuR2V0VUUoKSArIDM7XHJcbiAgICAgICAgbGV0IGxvZzJfZGlmZl9tYXhfbWluX2NvZGluZ19ibG9ja19zaXplID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgbGV0IGxvZzJfbWluX3RiX3NpemUgPSBoZXZjZ2IuR2V0VUUoKSArIDI7XHJcbiAgICAgICAgbGV0IGxvZzJfZGlmZl9tYXhfbWluX3RyYW5zZm9ybV9ibG9ja19zaXplMSA9IGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgIGxldCBsb2cyX21heF90cmFmb19zaXplID0gbG9nMl9kaWZmX21heF9taW5fdHJhbnNmb3JtX2Jsb2NrX3NpemUxICsgbG9nMl9taW5fdGJfc2l6ZTtcclxuXHJcbiAgICAgICAgbGV0IG1heF90cmFuc2Zvcm1faGllcmFyY2h5X2RlcHRoX2ludGVyID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgbGV0IG1heF90cmFuc2Zvcm1faGllcmFyY2h5X2RlcHRoX2ludHJhID0gaGV2Y2diLkdldFVFKCk7XHJcblxyXG4gICAgICAgIGxldCBzY2FsaW5nX2xpc3RfZW5hYmxlX2ZsYWcgPSBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICBpZiAoKHNjYWxpbmdfbGlzdF9lbmFibGVfZmxhZykgJiYgKGhldmNnYi5HZXRXb3JkKDEpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHNpemVfaWQgPSAwOyBzaXplX2lkIDwgNDsgc2l6ZV9pZCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtYXRyaXhfaWQgPSAwOyBtYXRyaXhfaWQgPCAoc2l6ZV9pZCA9PSAzID8gMiA6IDYpOyBtYXRyaXhfaWQgKyspIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nX2xpc3RfcHJlZF9tb2RlX2ZsYWcgPSBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjYWxpbmdfbGlzdF9wcmVkX21vZGVfZmxhZylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wID0gMSA8PCAoNCArIChzaXplX2lkIDw8IDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG51bV9jb2VmZnMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wID4gNjQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jb2VmZnMgPSA2NDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jb2VmZnMgPSB0bXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXplX2lkID4gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV2Y2diLkdldFNFKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtX2NvZWZmczsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0U0UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICBsZXQgcGNtX2VuYWJsZWRfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgIGlmIChwY21fZW5hYmxlZF9mbGFnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHBjbV9iaXRfZGVwdGggPSBoZXZjZ2IuR2V0V29yZCg0KSArIDE7XHJcbiAgICAgICAgICAgIGxldCBwY21fYml0X2RlcHRoX2Nocm9tYSA9IGhldmNnYi5HZXRXb3JkKDQpICsgMTtcclxuICAgICAgICAgICAgbGV0IHBjbV9sb2cyX21pbl9wY21fY2Jfc2l6ZSA9IGhldmNnYi5HZXRVRSgpICsgMztcclxuICAgICAgICAgICAgbGV0IHBjbV9sb2cyX21heF9wY21fY2Jfc2l6ZSA9IGhldmNnYi5HZXRVRSgpICsgcGNtX2xvZzJfbWluX3BjbV9jYl9zaXplO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBjbV9sb29wX2ZpbHRlcl9kaXNhYmxlX2ZsYWcgPSBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuYl9zdF9ycHMgPSBoZXZjZ2IuR2V0VUUoKTtcclxuICAgICAgICBpZiAobmJfc3RfcnBzID4gNjQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbnVtX2RlbHRhX3BvY3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iX3N0X3JwczsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJwc19wcmVkaWN0ID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcbiAgICAgICAgICAgIGlmICgocnBzX3ByZWRpY3QpICYmIGkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID4gbmJfc3RfcnBzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBkZWx0YV9ycHNfc2lnbiA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFic19kZWx0YV9ycHMgPSBoZXZjZ2IuR2V0VUUoKSArIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9sZXQgZGVsdGFfcnBzICAgICAgPSAoMSAtIChkZWx0YV9ycHNfc2lnbiA8PCAxKSkgKiBhYnNfZGVsdGFfcnBzO1xyXG5cclxuICAgICAgICAgICAgICAgIG51bV9kZWx0YV9wb2NzW2ldID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBudW1fZGVsdGFfcG9jc1tpIC0gMV07IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1c2VfZGVsdGFfZmxhZyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVzZWRfYnlfY3Vycl9waWNfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdXNlZF9ieV9jdXJyX3BpY19mbGFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VfZGVsdGFfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VkX2J5X2N1cnJfcGljX2ZsYWcgfHwgdXNlX2RlbHRhX2ZsYWcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bV9kZWx0YV9wb2NzW2ldKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2xldCBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBudW1fbmVnYXRpdmVfcGljcyA9IGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5iX3Bvc2l0aXZlX3BpY3MgPSBoZXZjZ2IuR2V0VUUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmJfcG9zaXRpdmVfcGljcyArIG51bV9uZWdhdGl2ZV9waWNzID4gMiAqIGhldmNnYi5HZXRMZWZ0KCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG51bV9kZWx0YV9wb2NzW2ldID0gbnVtX25lZ2F0aXZlX3BpY3MgKyBuYl9wb3NpdGl2ZV9waWNzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtX25lZ2F0aXZlX3BpY3M7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG5iX3Bvc2l0aXZlX3BpY3M7IGsrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGhldmNnYi5HZXRXb3JkKDEpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG51bV9sb25nX3Rlcm1fcmVmX3BpY3Nfc3BzID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgICAgIGlmIChudW1fbG9uZ190ZXJtX3JlZl9waWNzX3NwcyA+IDMxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1fbG9uZ190ZXJtX3JlZl9waWNzX3NwczsgaSsrKSB7IC8vIG51bV9sb25nX3Rlcm1fcmVmX3BpY3Nfc3BzXHJcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gMTY7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9nMl9tYXhfcG9jX2xzYiArIDQgPCAxNilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZW4gPSBsb2cyX21heF9wb2NfbHNiICsgNDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZChsZW4pOyAvLyBsdF9yZWZfcGljX3BvY19sc2Jfc3BzW2ldXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgICAgICAvLyB1c2VkX2J5X2N1cnJfcGljX2x0X3Nwc19mbGFnW2ldXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNwc190ZW1wb3JhbF9tdnBfZW5hYmxlZF9mbGFnID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcbiAgICAgICAgbGV0IHN0cm9uZ19pbnRyYV9zbW9vdGhpbmdfZW5hYmxlZF9mbGFnID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcblxyXG4gICAgICAgIGxldCBmcHMgPSAwLCBmcHNfZml4ZWQgPSB0cnVlLCBmcHNfbnVtID0gMCwgZnBzX2RlbiA9IDA7XHJcbiAgICAgICAgbGV0IHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgIGlmICh2dWlfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaGV2Y2diLkdldFdvcmQoMSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBhc3BlY3RfcmF0aW9faWRjID0gaGV2Y2diLkdldFdvcmQoOCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNwZWN0X3JhdGlvX2lkYyA9PSAyNTUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNhcl93aWR0aCA9IGhldmNnYi5HZXRXb3JkKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2FyX2hlaWdodCA9IGhldmNnYi5HZXRXb3JkKDE2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhldmNnYi5HZXRXb3JkKDEpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhldmNnYi5HZXRXb3JkKDEpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlkZW9fZm9ybWF0ID0gaGV2Y2diLkdldFdvcmQoMyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlkZW9fZnVsbF9yYW5nZV9mbGFnID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhldmNnYi5HZXRXb3JkKDEpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDI0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhldmNnYi5HZXRXb3JkKDEpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTtcclxuICAgICAgICAgICAgICAgIGhldmNnYi5HZXRVRSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChoZXZjZ2IuR2V0V29yZCgxKSkgeyAgICAgICAgLy8gZGVmYXVsdF9kaXNwbGF5X3dpbmRvd19mbGFnXHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTsgLy8gZGVmX2Rpc3Bfd2luX2xlZnRfb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTsgLy8gZGVmX2Rpc3Bfd2luX3JpZ2h0X29mZnNldFxyXG4gICAgICAgICAgICAgICAgaGV2Y2diLkdldFVFKCk7IC8vIGRlZl9kaXNwX3dpbl90b3Bfb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0VUUoKTsgLy8gZGVmX2Rpc3Bfd2luX2JvdHRvbV9vZmZzZXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaGV2Y2diLkdldFdvcmQoMSkpIHsgLy8gdnVpX3RpbWluZ19pbmZvX3ByZXNlbnRfZmxhZ1xyXG4gICAgICAgICAgICAgICAgbGV0IG51bV91bml0c19pbl90aWNrID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGltZV9zY2FsZSA9IGhldmNnYi5HZXRVRSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZwc19maXhlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZTtcclxuICAgICAgICAgICAgICAgIGZwc19kZW4gPSBudW1fdW5pdHNfaW5fdGljayAqIDI7XHJcbiAgICAgICAgICAgICAgICBmcHMgPSBmcHNfbnVtIC8gZnBzX2RlbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGV2Y2diLkdldFdvcmQoMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG51bV90aWNrc19wb2NfZGlmZl9vbmVfbWludXMxID0gaGV2Y2diLkdldFVFKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgIC8vIGlmIChnZXRfYml0czEoZ2IpKSAvLyB2dWlfaHJkX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnXHJcbiAgICAgICAgICAgICAgIC8vICAgICBza2lwX2hyZF9wYXJhbWV0ZXJzKGdiLCAxLCBtYXhfc3ViX2xheWVyc19taW51czEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vcHJvZmlsZV9zdHJpbmc6IHByb2ZpbGVfc3RyaW5nLCAgLy8gYmFzZWxpbmUsIGhpZ2gsIGhpZ2gxMCwgLi4uXHJcbiAgICAgICAgICAgIC8vbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsICAvLyAzLCAzLjEsIDQsIDQuMSwgNSwgNS4xLCAuLi5cclxuICAgICAgICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGhfbHVtYV9taW51czgsICAvLyA4Yml0LCAxMGJpdCwgLi4uXHJcbiAgICAgICAgICAgIC8vcmVmX2ZyYW1lczogcmVmX2ZyYW1lcyxcclxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdDogY2hyb21hX2Zvcm1hdF9pZGMsICAvLyA0OjI6MCwgNDoyOjIsIC4uLlxyXG4gICAgICAgICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldEhldmNDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hX2Zvcm1hdF9pZGMpLFxyXG5cclxuICAgICAgICAgICAgZnJhbWVfcmF0ZToge1xyXG4gICAgICAgICAgICAgICAgZml4ZWQ6IGZwc19maXhlZCxcclxuICAgICAgICAgICAgICAgIGZwczogZnBzLFxyXG4gICAgICAgICAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcclxuICAgICAgICAgICAgICAgIGZwc19udW06IGZwc19udW1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNhcl9yYXRpbzoge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGNvZGVjX3NpemU6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBwcmVzZW50X3NpemU6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZVNQUyh1aW50OGFycmF5KSB7XHJcbiAgICAgICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTtcclxuICAgICAgICBsZXQgZ2IgPSBuZXcgRXhwR29sb21iKHJic3ApO1xyXG5cclxuICAgICAgICBnYi5yZWFkQnl0ZSgpO1xyXG4gICAgICAgIGxldCBwcm9maWxlX2lkYyA9IGdiLnJlYWRCeXRlKCk7ICAvLyBwcm9maWxlX2lkY1xyXG4gICAgICAgIGdiLnJlYWRCeXRlKCk7ICAvLyBjb25zdHJhaW50X3NldF9mbGFnc1s1XSArIHJlc2VydmVkX3plcm9bM11cclxuICAgICAgICBsZXQgbGV2ZWxfaWRjID0gZ2IucmVhZEJ5dGUoKTsgIC8vIGxldmVsX2lkY1xyXG4gICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIHNlcV9wYXJhbWV0ZXJfc2V0X2lkXHJcblxyXG4gICAgICAgIGxldCBwcm9maWxlX3N0cmluZyA9IFNQU1BhcnNlci5nZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKTtcclxuICAgICAgICBsZXQgbGV2ZWxfc3RyaW5nID0gU1BTUGFyc2VyLmdldExldmVsU3RyaW5nKGxldmVsX2lkYyk7XHJcbiAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfaWRjID0gMTtcclxuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdCA9IDQyMDtcclxuICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdF90YWJsZSA9IFswLCA0MjAsIDQyMiwgNDQ0XTtcclxuICAgICAgICBsZXQgYml0X2RlcHRoID0gODtcclxuXHJcbiAgICAgICAgaWYgKHByb2ZpbGVfaWRjID09PSAxMDAgfHwgcHJvZmlsZV9pZGMgPT09IDExMCB8fCBwcm9maWxlX2lkYyA9PT0gMTIyIHx8XHJcbiAgICAgICAgICAgIHByb2ZpbGVfaWRjID09PSAyNDQgfHwgcHJvZmlsZV9pZGMgPT09IDQ0IHx8IHByb2ZpbGVfaWRjID09PSA4MyB8fFxyXG4gICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gODYgfHwgcHJvZmlsZV9pZGMgPT09IDExOCB8fCBwcm9maWxlX2lkYyA9PT0gMTI4IHx8XHJcbiAgICAgICAgICAgIHByb2ZpbGVfaWRjID09PSAxMzggfHwgcHJvZmlsZV9pZGMgPT09IDE0NCkge1xyXG5cclxuICAgICAgICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKCk7XHJcbiAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBzZXBhcmF0ZV9jb2xvdXJfcGxhbmVfZmxhZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA8PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBjaHJvbWFfZm9ybWF0ID0gY2hyb21hX2Zvcm1hdF90YWJsZVtjaHJvbWFfZm9ybWF0X2lkY107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJpdF9kZXB0aCA9IGdiLnJlYWRVRUcoKSArIDg7ICAvLyBiaXRfZGVwdGhfbHVtYV9taW51czhcclxuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gYml0X2RlcHRoX2Nocm9tYV9taW51czhcclxuICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBxcHByaW1lX3lfemVyb190cmFuc2Zvcm1fYnlwYXNzX2ZsYWdcclxuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHNlcV9zY2FsaW5nX21hdHJpeF9wcmVzZW50X2ZsYWdcclxuICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSAoY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMpID8gOCA6IDEyO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2FsaW5nX2xpc3RfY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBzZXFfc2NhbGluZ19saXN0X3ByZXNlbnRfZmxhZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IDYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGxvZzJfbWF4X2ZyYW1lX251bV9taW51czRcclxuICAgICAgICBsZXQgcGljX29yZGVyX2NudF90eXBlID0gZ2IucmVhZFVFRygpO1xyXG4gICAgICAgIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDApIHtcclxuICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gbG9nMl9tYXhfcGljX29yZGVyX2NudF9sc2JfbWludXNfNFxyXG4gICAgICAgIH0gZWxzZSBpZiAocGljX29yZGVyX2NudF90eXBlID09PSAxKSB7XHJcbiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGVsdGFfcGljX29yZGVyX2Fsd2F5c196ZXJvX2ZsYWdcclxuICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9ub25fcmVmX3BpY1xyXG4gICAgICAgICAgICBnYi5yZWFkU0VHKCk7ICAvLyBvZmZzZXRfZm9yX3RvcF90b19ib3R0b21fZmllbGRcclxuICAgICAgICAgICAgbGV0IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGUgPSBnYi5yZWFkVUVHKCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBnYi5yZWFkU0VHKCk7ICAvLyBvZmZzZXRfZm9yX3JlZl9mcmFtZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZWZfZnJhbWVzID0gZ2IucmVhZFVFRygpOyAgLy8gbWF4X251bV9yZWZfZnJhbWVzXHJcbiAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBnYXBzX2luX2ZyYW1lX251bV92YWx1ZV9hbGxvd2VkX2ZsYWdcclxuXHJcbiAgICAgICAgbGV0IHBpY193aWR0aF9pbl9tYnNfbWludXMxID0gZ2IucmVhZFVFRygpO1xyXG4gICAgICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKCk7XHJcblxyXG4gICAgICAgIGxldCBmcmFtZV9tYnNfb25seV9mbGFnID0gZ2IucmVhZEJpdHMoMSk7XHJcbiAgICAgICAgaWYgKGZyYW1lX21ic19vbmx5X2ZsYWcgPT09IDApIHtcclxuICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBtYl9hZGFwdGl2ZV9mcmFtZV9maWVsZF9mbGFnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGlyZWN0Xzh4OF9pbmZlcmVuY2VfZmxhZ1xyXG5cclxuICAgICAgICBsZXQgZnJhbWVfY3JvcF9sZWZ0X29mZnNldCA9IDA7XHJcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0ID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGZyYW1lX2Nyb3BwaW5nX2ZsYWcgPSBnYi5yZWFkQm9vbCgpO1xyXG4gICAgICAgIGlmIChmcmFtZV9jcm9wcGluZ19mbGFnKSB7XHJcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XHJcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gZ2IucmVhZFVFRygpO1xyXG4gICAgICAgICAgICBmcmFtZV9jcm9wX3RvcF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XHJcbiAgICAgICAgICAgIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzYXJfd2lkdGggPSAxLCBzYXJfaGVpZ2h0ID0gMTtcclxuICAgICAgICBsZXQgZnBzID0gMCwgZnBzX2ZpeGVkID0gdHJ1ZSwgZnBzX251bSA9IDAsIGZwc19kZW4gPSAwO1xyXG5cclxuICAgICAgICBsZXQgdnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnID0gZ2IucmVhZEJvb2woKTtcclxuICAgICAgICBpZiAodnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBhc3BlY3RfcmF0aW9faW5mb19wcmVzZW50X2ZsYWdcclxuICAgICAgICAgICAgICAgIGxldCBhc3BlY3RfcmF0aW9faWRjID0gZ2IucmVhZEJ5dGUoKTtcclxuICAgICAgICAgICAgICAgIGxldCBzYXJfd190YWJsZSA9IFsxLCAxMiwgMTAsIDE2LCA0MCwgMjQsIDIwLCAzMiwgODAsIDE4LCAxNSwgNjQsIDE2MCwgNCwgMywgMl07XHJcbiAgICAgICAgICAgICAgICBsZXQgc2FyX2hfdGFibGUgPSBbMSwgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMTEsIDMzLCAxMSwgMTEsIDMzLCAgOTksIDMsIDIsIDFdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID4gMCAmJiBhc3BlY3RfcmF0aW9faWRjIDwgMTYpIHtcclxuICAgICAgICAgICAgICAgICAgICBzYXJfd2lkdGggPSBzYXJfd190YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2FyX2hlaWdodCA9IHNhcl9oX3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0X3JhdGlvX2lkYyA9PT0gMjU1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2FyX3dpZHRoID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBzYXJfaGVpZ2h0ID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIG92ZXJzY2FuX2luZm9fcHJlc2VudF9mbGFnXHJcbiAgICAgICAgICAgICAgICBnYi5yZWFkQm9vbCgpOyAgLy8gb3ZlcnNjYW5fYXBwcm9wcmlhdGVfZmxhZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyB2aWRlb19zaWduYWxfdHlwZV9wcmVzZW50X2ZsYWdcclxuICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDQpOyAgLy8gdmlkZW9fZm9ybWF0ICYgdmlkZW9fZnVsbF9yYW5nZV9mbGFnXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gY29sb3VyX2Rlc2NyaXB0aW9uX3ByZXNlbnRfZmxhZ1xyXG4gICAgICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDI0KTsgIC8vIGNvbG91cl9wcmltYXJpZXMgJiB0cmFuc2Zlcl9jaGFyYWN0ZXJpc3RpY3MgJiBtYXRyaXhfY29lZmZpY2llbnRzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIGNocm9tYV9sb2NfaW5mb19wcmVzZW50X2ZsYWdcclxuICAgICAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGNocm9tYV9zYW1wbGVfbG9jX3R5cGVfdG9wX2ZpZWxkXHJcbiAgICAgICAgICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBjaHJvbWFfc2FtcGxlX2xvY190eXBlX2JvdHRvbV9maWVsZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyB0aW1pbmdfaW5mb19wcmVzZW50X2ZsYWdcclxuICAgICAgICAgICAgICAgIGxldCBudW1fdW5pdHNfaW5fdGljayA9IGdiLnJlYWRCaXRzKDMyKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aW1lX3NjYWxlID0gZ2IucmVhZEJpdHMoMzIpO1xyXG4gICAgICAgICAgICAgICAgZnBzX2ZpeGVkID0gZ2IucmVhZEJvb2woKTsgIC8vIGZpeGVkX2ZyYW1lX3JhdGVfZmxhZ1xyXG5cclxuICAgICAgICAgICAgICAgIGZwc19udW0gPSB0aW1lX3NjYWxlO1xyXG4gICAgICAgICAgICAgICAgZnBzX2RlbiA9IG51bV91bml0c19pbl90aWNrICogMjtcclxuICAgICAgICAgICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2FyU2NhbGUgPSAxO1xyXG4gICAgICAgIGlmIChzYXJfd2lkdGggIT09IDEgfHwgc2FyX2hlaWdodCAhPT0gMSkge1xyXG4gICAgICAgICAgICBzYXJTY2FsZSA9IHNhcl93aWR0aCAvIHNhcl9oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY3JvcF91bml0X3ggPSAwLCBjcm9wX3VuaXRfeSA9IDA7XHJcbiAgICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNyb3BfdW5pdF94ID0gMTtcclxuICAgICAgICAgICAgY3JvcF91bml0X3kgPSAyIC0gZnJhbWVfbWJzX29ubHlfZmxhZztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgc3ViX3djID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSA/IDEgOiAyO1xyXG4gICAgICAgICAgICBsZXQgc3ViX2hjID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAxKSA/IDIgOiAxO1xyXG4gICAgICAgICAgICBjcm9wX3VuaXRfeCA9IHN1Yl93YztcclxuICAgICAgICAgICAgY3JvcF91bml0X3kgPSBzdWJfaGMgKiAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNvZGVjX3dpZHRoID0gKHBpY193aWR0aF9pbl9tYnNfbWludXMxICsgMSkgKiAxNjtcclxuICAgICAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7XHJcblxyXG4gICAgICAgIGNvZGVjX3dpZHRoIC09IChmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ICsgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQpICogY3JvcF91bml0X3g7XHJcbiAgICAgICAgY29kZWNfaGVpZ2h0IC09IChmcmFtZV9jcm9wX3RvcF9vZmZzZXQgKyBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQpICogY3JvcF91bml0X3k7XHJcblxyXG4gICAgICAgIGxldCBwcmVzZW50X3dpZHRoID0gTWF0aC5jZWlsKGNvZGVjX3dpZHRoICogc2FyU2NhbGUpO1xyXG5cclxuICAgICAgICBnYi5kZXN0cm95KCk7XHJcbiAgICAgICAgZ2IgPSBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm9maWxlX3N0cmluZzogcHJvZmlsZV9zdHJpbmcsICAvLyBiYXNlbGluZSwgaGlnaCwgaGlnaDEwLCAuLi5cclxuICAgICAgICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsICAvLyAzLCAzLjEsIDQsIDQuMSwgNSwgNS4xLCAuLi5cclxuICAgICAgICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGgsICAvLyA4Yml0LCAxMGJpdCwgLi4uXHJcbiAgICAgICAgICAgIHJlZl9mcmFtZXM6IHJlZl9mcmFtZXMsXHJcbiAgICAgICAgICAgIGNocm9tYV9mb3JtYXQ6IFNQU1BhcnNlci5nZXRIZXZjQ2hyb21hRm9ybWF0VW5pdChjaHJvbWFfZm9ybWF0KSwgIC8vIDQ6MjowLCA0OjI6MiwgLi4uXHJcbiAgICAgICAgICAgIGNocm9tYV9mb3JtYXRfc3RyaW5nOiBTUFNQYXJzZXIuZ2V0Q2hyb21hRm9ybWF0U3RyaW5nKGNocm9tYV9mb3JtYXQpLFxyXG5cclxuICAgICAgICAgICAgZnJhbWVfcmF0ZToge1xyXG4gICAgICAgICAgICAgICAgZml4ZWQ6IGZwc19maXhlZCxcclxuICAgICAgICAgICAgICAgIGZwczogZnBzLFxyXG4gICAgICAgICAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcclxuICAgICAgICAgICAgICAgIGZwc19udW06IGZwc19udW1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHNhcl9yYXRpbzoge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNhcl93aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogc2FyX2hlaWdodFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29kZWNfc2l6ZToge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGNvZGVjX3dpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBjb2RlY19oZWlnaHRcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIHByZXNlbnRfc2l6ZToge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHByZXNlbnRfd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgX3NraXBTY2FsaW5nTGlzdChnYiwgY291bnQpIHtcclxuICAgICAgICBsZXQgbGFzdF9zY2FsZSA9IDgsIG5leHRfc2NhbGUgPSA4O1xyXG4gICAgICAgIGxldCBkZWx0YV9zY2FsZSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXh0X3NjYWxlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YV9zY2FsZSA9IGdiLnJlYWRTRUcoKTtcclxuICAgICAgICAgICAgICAgIG5leHRfc2NhbGUgPSAobGFzdF9zY2FsZSArIGRlbHRhX3NjYWxlICsgMjU2KSAlIDI1NjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0X3NjYWxlID0gKG5leHRfc2NhbGUgPT09IDApID8gbGFzdF9zY2FsZSA6IG5leHRfc2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKSB7XHJcbiAgICAgICAgc3dpdGNoIChwcm9maWxlX2lkYykge1xyXG4gICAgICAgICAgICBjYXNlIDY2OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdCYXNlbGluZSc7XHJcbiAgICAgICAgICAgIGNhc2UgNzc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ01haW4nO1xyXG4gICAgICAgICAgICBjYXNlIDg4OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdFeHRlbmRlZCc7XHJcbiAgICAgICAgICAgIGNhc2UgMTAwOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoJztcclxuICAgICAgICAgICAgY2FzZSAxMTA6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0hpZ2gxMCc7XHJcbiAgICAgICAgICAgIGNhc2UgMTIyOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoNDIyJztcclxuICAgICAgICAgICAgY2FzZSAyNDQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0hpZ2g0NDQnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdVbmtub3duJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIHN0YXRpYyBnZXRIZXZjUHJvZmlsZVN0cmluZyhwcm9maWxlX2lkYylcclxuICAgIHtcclxuICAgICAgICBzd2l0Y2gocHJvZmlsZV9pZGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIk1haW5cIjtcclxuICAgICAgICAgICAgY2FzZSA6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJNYWluMTBcIjtcclxuICAgICAgICAgICAgY2FzZSA6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJNYWluIFN0aWxsIFBpY3R1cmVcIjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7XHJcbiAgICAgICAgfVxyXG4gICAgfSovXHJcblxyXG4gICAgc3RhdGljIGdldExldmVsU3RyaW5nKGxldmVsX2lkYykge1xyXG4gICAgICAgIHJldHVybiAobGV2ZWxfaWRjIC8gMTApLnRvRml4ZWQoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWEpIHtcclxuICAgICAgICBzd2l0Y2ggKGNocm9tYSkge1xyXG4gICAgICAgICAgICBjYXNlIDQyMDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjAnO1xyXG4gICAgICAgICAgICBjYXNlIDQyMjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjInO1xyXG4gICAgICAgICAgICBjYXNlIDQ0NDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnNDo0OjQnO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdVbmtub3duJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEhldmNDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7XHJcbiAgICAgICAgc3dpdGNoIChjaHJvbWEpIHtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICc0OjI6MCc7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjInO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6NDo0JztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRIZXZjQ2hyb21hRm9ybWF0VW5pdChjaHJvbWEpIHtcclxuICAgICAgICBzd2l0Y2ggKGNocm9tYSkge1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gNDIwO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gNDIyO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gNDQ0O1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTUFNQYXJzZXI7IiwiaW1wb3J0IE5BTEJpdHN0cmVhbSBmcm9tICcuL2hldmMtZ29sb21iLmpzJztcclxuXHJcbmNsYXNzIFZQU1BhcnNlciB7XHJcblxyXG4gICAgc3RhdGljIHBhcnNlSGV2Y1ZQUyh1aW50OGFycmF5KVxyXG4gICAge1xyXG4gICAgICAgIGxldCBoZXZjZ2IgPSBuZXcgTkFMQml0c3RyZWFtKHVpbnQ4YXJyYXksIHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgbGV0IHZwc19pZCA9IGhldmNnYi5HZXRXb3JkKDQpO1xyXG5cclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgyKTsgLy92cHNfcmVzZXJ2ZWRfdGhyZWVfMmJpdHNcclxuXHJcbiAgICAgICAgbGV0IHZwc19tYXhfbGF5ZXJzID0gaGV2Y2diLkdldFdvcmQoNikgKyAxO1xyXG4gICAgICAgIGxldCB2cHNfbWF4X3N1Yl9sYXllcnMgPSBoZXZjZ2IuR2V0V29yZCgzKSArIDE7XHJcbiAgICAgICAgaWYgKHZwc19tYXhfc3ViX2xheWVycyA+IDcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB2cHNfdGVtcG9yYWxfaWRfbmVzdGluZ19mbGFnID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcblxyXG4gICAgICAgIGhldmNnYi5HZXRXb3JkKDE2KTsvLyB2cHNfcmVzZXJ2ZWRfZmZmZl8xNmJpdHNcclxuXHJcbiAgICAgICAgbGV0IHB0bF9wcm9maWxlX3NwYWNlID0gaGV2Y2diLkdldFdvcmQoMik7XHJcbiAgICAgICAgbGV0IHB0bF90aWVyX2ZsYWcgPSBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgbGV0IHB0bF9wcm9maWxlX2lkYyA9IGhldmNnYi5HZXRXb3JkKDUpOyBcclxuICAgICAgICBoZXZjZ2IuR2V0V29yZCgzMik7XHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoMSk7Ly8gXHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoMSk7Ly8gXHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoMSk7Ly8gXHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoMSk7Ly8gXHJcbiAgICAgICAgaGV2Y2diLkdldFdvcmQoNDQpOy8vIFxyXG4gICAgICAgIGxldCBsZXZlbCA9IGhldmNnYi5HZXRXb3JkKDgpOy8vIGdlbmVyYWxfbGV2ZWxfaWRjXHJcblxyXG4gICAgICAgIGxldCBzdWJfbGF5ZXJfcHJvZmlsZV9wcmVzZW50X2ZsYWcgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBsZXQgc3ViX2xheWVyX2xldmVsX3ByZXNlbnRfZmxhZyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdnBzX21heF9zdWJfbGF5ZXJzIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHN1Yl9sYXllcl9wcm9maWxlX3ByZXNlbnRfZmxhZ1tpXSA9IGhldmNnYi5HZXRXb3JkKDEpO1xyXG4gICAgICAgICAgICBzdWJfbGF5ZXJfbGV2ZWxfcHJlc2VudF9mbGFnW2ldID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHZwc19tYXhfc3ViX2xheWVycyAtIDEgPiAwKSAmJiAodnBzX21heF9zdWJfbGF5ZXJzIC0gMSA8IDgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZwc19tYXhfc3ViX2xheWVycyAtIDE7IGkgPCA4OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKHZwc19tYXhfc3ViX2xheWVycyAtIDEgPiAwKSAmJiAodnBzX21heF9zdWJfbGF5ZXJzIC0gMSA8IDgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZwc19tYXhfc3ViX2xheWVycyAtIDE7IGkgPCA4OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdWJfbGF5ZXJfcHJvZmlsZV9wcmVzZW50X2ZsYWdbaV0gJiYgKGhldmNnYi5HZXRMZWZ0KCkgPj0gMiArIDEgKyA1ICsgMzIgKyA0ICsgMTYgKyAxNiArIDEyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgyKTtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgaGV2Y2diLkdldFdvcmQoNSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDMyKTtcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCgxKTsvLyBcclxuICAgICAgICAgICAgICAgICAgICBoZXZjZ2IuR2V0V29yZCg0NCk7Ly8gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHN1Yl9sYXllcl9sZXZlbF9wcmVzZW50X2ZsYWdbaV0pICYmIChoZXZjZ2IuR2V0TGVmdCgpID49IDgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGhldmNnYi5HZXRXb3JkKDgpOy8vIGdlbmVyYWxfbGV2ZWxfaWRjXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2cHNfc3ViX2xheWVyX29yZGVyaW5nX2luZm9fcHJlc2VudF9mbGFnID0gaGV2Y2diLkdldFdvcmQoMSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZQU1BhcnNlcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFBvbHlmaWxsIGZyb20gJy4vdXRpbHMvcG9seWZpbGwuanMnO1xyXG5pbXBvcnQgRmVhdHVyZXMgZnJvbSAnLi9jb3JlL2ZlYXR1cmVzLmpzJztcclxuaW1wb3J0IHtCYXNlTG9hZGVyLCBMb2FkZXJTdGF0dXMsIExvYWRlckVycm9yc30gZnJvbSAnLi9pby9sb2FkZXIuanMnO1xyXG5pbXBvcnQgRmx2UGxheWVyIGZyb20gJy4vcGxheWVyL2Zsdi1wbGF5ZXIuanMnO1xyXG5pbXBvcnQgTmF0aXZlUGxheWVyIGZyb20gJy4vcGxheWVyL25hdGl2ZS1wbGF5ZXIuanMnO1xyXG5pbXBvcnQgUGxheWVyRXZlbnRzIGZyb20gJy4vcGxheWVyL3BsYXllci1ldmVudHMuanMnO1xyXG5pbXBvcnQge0Vycm9yVHlwZXMsIEVycm9yRGV0YWlsc30gZnJvbSAnLi9wbGF5ZXIvcGxheWVyLWVycm9ycy5qcyc7XHJcbmltcG9ydCBMb2dnaW5nQ29udHJvbCBmcm9tICcuL3V0aWxzL2xvZ2dpbmctY29udHJvbC5qcyc7XHJcbmltcG9ydCB7SW52YWxpZEFyZ3VtZW50RXhjZXB0aW9ufSBmcm9tICcuL3V0aWxzL2V4Y2VwdGlvbi5qcyc7XHJcblxyXG4vLyBoZXJlIGFyZSBhbGwgdGhlIGludGVyZmFjZXNcclxuXHJcbi8vIGluc3RhbGwgcG9seWZpbGxzXHJcblBvbHlmaWxsLmluc3RhbGwoKTtcclxuXHJcblxyXG4vLyBmYWN0b3J5IG1ldGhvZFxyXG5mdW5jdGlvbiBjcmVhdGVQbGF5ZXIobWVkaWFEYXRhU291cmNlLCBvcHRpb25hbENvbmZpZykge1xyXG4gICAgbGV0IG1kcyA9IG1lZGlhRGF0YVNvdXJjZTtcclxuICAgIGlmIChtZHMgPT0gbnVsbCB8fCB0eXBlb2YgbWRzICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oJ01lZGlhRGF0YVNvdXJjZSBtdXN0IGJlIGFuIGphdmFzY3JpcHQgb2JqZWN0IScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghbWRzLmhhc093blByb3BlcnR5KCd0eXBlJykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdNZWRpYURhdGFTb3VyY2UgbXVzdCBoYXMgdHlwZSBmaWVsZCB0byBpbmRpY2F0ZSB2aWRlbyBmaWxlIHR5cGUhJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChtZHMudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2Zsdic6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmx2UGxheWVyKG1kcywgb3B0aW9uYWxDb25maWcpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlUGxheWVyKG1kcywgb3B0aW9uYWxDb25maWcpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gZmVhdHVyZSBkZXRlY3Rpb25cclxuZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gRmVhdHVyZXMuc3VwcG9ydE1TRUgyNjRQbGF5YmFjaygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlTGlzdCgpIHtcclxuICAgIHJldHVybiBGZWF0dXJlcy5nZXRGZWF0dXJlTGlzdCgpO1xyXG59XHJcblxyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5sZXQgZmx2anMgPSB7fTtcclxuXHJcbmZsdmpzLmNyZWF0ZVBsYXllciA9IGNyZWF0ZVBsYXllcjtcclxuZmx2anMuaXNTdXBwb3J0ZWQgPSBpc1N1cHBvcnRlZDtcclxuZmx2anMuZ2V0RmVhdHVyZUxpc3QgPSBnZXRGZWF0dXJlTGlzdDtcclxuXHJcbmZsdmpzLkJhc2VMb2FkZXIgPSBCYXNlTG9hZGVyO1xyXG5mbHZqcy5Mb2FkZXJTdGF0dXMgPSBMb2FkZXJTdGF0dXM7XHJcbmZsdmpzLkxvYWRlckVycm9ycyA9IExvYWRlckVycm9ycztcclxuXHJcbmZsdmpzLkV2ZW50cyA9IFBsYXllckV2ZW50cztcclxuZmx2anMuRXJyb3JUeXBlcyA9IEVycm9yVHlwZXM7XHJcbmZsdmpzLkVycm9yRGV0YWlscyA9IEVycm9yRGV0YWlscztcclxuXHJcbmZsdmpzLkZsdlBsYXllciA9IEZsdlBsYXllcjtcclxuZmx2anMuTmF0aXZlUGxheWVyID0gTmF0aXZlUGxheWVyO1xyXG5mbHZqcy5Mb2dnaW5nQ29udHJvbCA9IExvZ2dpbmdDb250cm9sO1xyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsdmpzLCAndmVyc2lvbicsIHtcclxuICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyByZXBsYWNlZCBieSBicm93c2VyaWZ5LXZlcnNpb25pZnkgdHJhbnNmb3JtXHJcbiAgICAgICAgcmV0dXJuICdfX1ZFUlNJT05fXyc7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZmx2anM7IiwiLy8gZW50cnkvaW5kZXggZmlsZVxyXG5cclxuLy8gbWFrZSBpdCBjb21wYXRpYmxlIHdpdGggYnJvd3NlcmlmeSdzIHVtZCB3cmFwcGVyXHJcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9mbHYuanMnKS5kZWZhdWx0O1xyXG4iLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IExvZyBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xyXG5pbXBvcnQgQnJvd3NlciBmcm9tICcuLi91dGlscy9icm93c2VyLmpzJztcclxuaW1wb3J0IHtCYXNlTG9hZGVyLCBMb2FkZXJTdGF0dXMsIExvYWRlckVycm9yc30gZnJvbSAnLi9sb2FkZXIuanMnO1xyXG5pbXBvcnQge1J1bnRpbWVFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7XHJcblxyXG4vKiBmZXRjaCArIHN0cmVhbSBJTyBsb2FkZXIuIEN1cnJlbnRseSB3b3JraW5nIG9uIGNocm9tZSA0MysuXHJcbiAqIGZldGNoIHByb3ZpZGVzIGEgYmV0dGVyIGFsdGVybmF0aXZlIGh0dHAgQVBJIHRvIFhNTEh0dHBSZXF1ZXN0XHJcbiAqXHJcbiAqIGZldGNoIHNwZWMgICBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy9cclxuICogc3RyZWFtIHNwZWMgIGh0dHBzOi8vc3RyZWFtcy5zcGVjLndoYXR3Zy5vcmcvXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFN0cmVhbUxvYWRlciBleHRlbmRzIEJhc2VMb2FkZXIge1xyXG5cclxuICAgIHN0YXRpYyBpc1N1cHBvcnRlZCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBmZXRjaCArIHN0cmVhbSBpcyBicm9rZW4gb24gTWljcm9zb2Z0IEVkZ2UuIERpc2FibGUgYmVmb3JlIGJ1aWxkIDE1MDQ4LlxyXG4gICAgICAgICAgICAvLyBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvODE5NjkwNy9cclxuICAgICAgICAgICAgLy8gRml4ZWQgaW4gSmFuIDEwLCAyMDE3LiBCdWlsZCAxNTA0OCsgcmVtb3ZlZCBmcm9tIGJsYWNrbGlzdC5cclxuICAgICAgICAgICAgbGV0IGlzV29ya1dlbGxFZGdlID0gQnJvd3Nlci5tc2VkZ2UgJiYgQnJvd3Nlci52ZXJzaW9uLm1pbm9yID49IDE1MDQ4O1xyXG4gICAgICAgICAgICBsZXQgYnJvd3Nlck5vdEJsYWNrbGlzdGVkID0gQnJvd3Nlci5tc2VkZ2UgPyBpc1dvcmtXZWxsRWRnZSA6IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiAoc2VsZi5mZXRjaCAmJiBzZWxmLlJlYWRhYmxlU3RyZWFtICYmIGJyb3dzZXJOb3RCbGFja2xpc3RlZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlZWtIYW5kbGVyLCBjb25maWcpIHtcclxuICAgICAgICBzdXBlcignZmV0Y2gtc3RyZWFtLWxvYWRlcicpO1xyXG4gICAgICAgIHRoaXMuVEFHID0gJ0ZldGNoU3RyZWFtTG9hZGVyJztcclxuXHJcbiAgICAgICAgdGhpcy5fc2Vla0hhbmRsZXIgPSBzZWVrSGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fbmVlZFN0YXNoID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVxdWVzdEFib3J0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZWRMZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNXb3JraW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihkYXRhU291cmNlLCByYW5nZSkge1xyXG4gICAgICAgIHRoaXMuX2RhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xyXG4gICAgICAgIHRoaXMuX3JhbmdlID0gcmFuZ2U7XHJcblxyXG4gICAgICAgIGxldCBzb3VyY2VVUkwgPSBkYXRhU291cmNlLnVybDtcclxuICAgICAgICBpZiAodGhpcy5fY29uZmlnLnJldXNlUmVkaXJlY3RlZFVSTCAmJiBkYXRhU291cmNlLnJlZGlyZWN0ZWRVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZVVSTCA9IGRhdGFTb3VyY2UucmVkaXJlY3RlZFVSTDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzZWVrQ29uZmlnID0gdGhpcy5fc2Vla0hhbmRsZXIuZ2V0Q29uZmlnKHNvdXJjZVVSTCwgcmFuZ2UpO1xyXG5cclxuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBzZWxmLkhlYWRlcnMoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWVrQ29uZmlnLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGxldCBjb25maWdIZWFkZXJzID0gc2Vla0NvbmZpZy5oZWFkZXJzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gY29uZmlnSGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ0hlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgY29uZmlnSGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLFxyXG4gICAgICAgICAgICBjYWNoZTogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBwb2xpY3kgb2YgRmV0Y2ggQVBJIGluIHRoZSB3aGF0d2cgc3RhbmRhcmRcclxuICAgICAgICAgICAgLy8gU2FmYXJpIGluY29ycmVjdGx5IGluZGljYXRlcyAnbm8tcmVmZXJyZXInIGFzIGRlZmF1bHQgcG9saWN5LCBmdWNrIGl0XHJcbiAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXItd2hlbi1kb3duZ3JhZGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFkZGl0aW9uYWwgaGVhZGVyc1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLl9jb25maWcuaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB0aGlzLl9jb25maWcuaGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29ycyBpcyBlbmFibGVkIGJ5IGRlZmF1bHRcclxuICAgICAgICBpZiAoZGF0YVNvdXJjZS5jb3JzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAvLyBuby1jb3JzIG1lYW5zICdkaXNyZWdhcmQgY29ycyBwb2xpY3knLCB3aGljaCBjYW4gb25seSBiZSB1c2VkIGluIFNlcnZpY2VXb3JrZXJcclxuICAgICAgICAgICAgcGFyYW1zLm1vZGUgPSAnc2FtZS1vcmlnaW4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHRcclxuICAgICAgICBpZiAoZGF0YVNvdXJjZS53aXRoQ3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmNyZWRlbnRpYWxzID0gJ2luY2x1ZGUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVmZXJyZXJQb2xpY3kgZnJvbSBjb25maWdcclxuICAgICAgICBpZiAoZGF0YVNvdXJjZS5yZWZlcnJlclBvbGljeSkge1xyXG4gICAgICAgICAgICBwYXJhbXMucmVmZXJyZXJQb2xpY3kgPSBkYXRhU291cmNlLnJlZmVycmVyUG9saWN5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtDb25uZWN0aW5nO1xyXG4gICAgICAgIHNlbGYuZmV0Y2goc2Vla0NvbmZpZy51cmwsIHBhcmFtcykudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0QWJvcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RBYm9ydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtJZGxlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyZXMub2sgJiYgKHJlcy5zdGF0dXMgPj0gMjAwICYmIHJlcy5zdGF0dXMgPD0gMjk5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy51cmwgIT09IHNlZWtDb25maWcudXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uVVJMUmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZGlyZWN0ZWRVUkwgPSB0aGlzLl9zZWVrSGFuZGxlci5yZW1vdmVVUkxQYXJhbWV0ZXJzKHJlcy51cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblVSTFJlZGlyZWN0KHJlZGlyZWN0ZWRVUkwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoSGVhZGVyID0gcmVzLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlbmd0aEhlYWRlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IHBhcnNlSW50KGxlbmd0aEhlYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRMZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uQ29udGVudExlbmd0aEtub3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93bih0aGlzLl9jb250ZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHVtcC5jYWxsKHRoaXMsIHJlcy5ib2R5LmdldFJlYWRlcigpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rRXJyb3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKExvYWRlckVycm9ycy5IVFRQX1NUQVRVU19DT0RFX0lOVkFMSUQsIHtjb2RlOiByZXMuc3RhdHVzLCBtc2c6IHJlcy5zdGF0dXNUZXh0fSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCdGZXRjaFN0cmVhbUxvYWRlcjogSHR0cCBjb2RlIGludmFsaWQsICcgKyByZXMuc3RhdHVzICsgJyAnICsgcmVzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoTG9hZGVyRXJyb3JzLkVYQ0VQVElPTiwge2NvZGU6IC0xLCBtc2c6IGUubWVzc2FnZX0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFib3J0KCkge1xyXG4gICAgICAgIHRoaXMuX3JlcXVlc3RBYm9ydCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZEVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuYWJvcnQoKTtcclxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgbXNnOiAnZGlzY29ubmVjdCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcHVtcChyZWFkZXIpIHsgIC8vIFJlYWRhYmxlU3RyZWFtUmVhZGVyXHJcbiAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgY2hlY2sgcmVjZWl2ZWQgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCAhPT0gbnVsbCAmJiB0aGlzLl9yZWNlaXZlZExlbmd0aCA8IHRoaXMuX2NvbnRlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBvcnQgRWFybHktRU9GXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IExvYWRlckVycm9ycy5FQVJMWV9FT0Y7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZm8gPSB7Y29kZTogLTEsIG1zZzogJ0ZldGNoIHN0cmVhbSBtZWV0IEVhcmx5LUVPRid9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IodHlwZSwgaW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT0suIERvd25sb2FkIGNvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtDb21wbGV0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fb25Db21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkNvbXBsZXRlKHRoaXMuX3JhbmdlLmZyb20sIHRoaXMuX3JhbmdlLmZyb20gKyB0aGlzLl9yZWNlaXZlZExlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0QWJvcnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0QWJvcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtCdWZmZXJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNodW5rID0gcmVzdWx0LnZhbHVlLmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIGxldCBieXRlU3RhcnQgPSB0aGlzLl9yYW5nZS5mcm9tICsgdGhpcy5fcmVjZWl2ZWRMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWNlaXZlZExlbmd0aCArPSBjaHVuay5ieXRlTGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbkRhdGFBcnJpdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXJyaXZhbChjaHVuaywgYnl0ZVN0YXJ0LCB0aGlzLl9yZWNlaXZlZExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHVtcChyZWFkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gMTEgJiYgQnJvd3Nlci5tc2VkZ2UpIHsgIC8vIEludmFsaWRTdGF0ZUVycm9yIG9uIE1pY3Jvc29mdCBFZGdlXHJcbiAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kOiBFZGdlIG1heSB0aHJvdyBJbnZhbGlkU3RhdGVFcnJvciBhZnRlciBSZWFkYWJsZVN0cmVhbVJlYWRlci5jYW5jZWwoKSBjYWxsXHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhlIHVua25vd24gZXhjZXB0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gUmVsYXRlZCBpc3N1ZTogaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvMTEyNjUyMDIvXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rRXJyb3I7XHJcbiAgICAgICAgICAgIGxldCB0eXBlID0gMDtcclxuICAgICAgICAgICAgbGV0IGluZm8gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKChlLmNvZGUgPT09IDE5IHx8IGUubWVzc2FnZSA9PT0gJ25ldHdvcmsgZXJyb3InKSAmJiAvLyBORVRXT1JLX0VSUlxyXG4gICAgICAgICAgICAgICAgKHRoaXMuX2NvbnRlbnRMZW5ndGggPT09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICh0aGlzLl9jb250ZW50TGVuZ3RoICE9PSBudWxsICYmIHRoaXMuX3JlY2VpdmVkTGVuZ3RoIDwgdGhpcy5fY29udGVudExlbmd0aCkpKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gTG9hZGVyRXJyb3JzLkVBUkxZX0VPRjtcclxuICAgICAgICAgICAgICAgIGluZm8gPSB7Y29kZTogZS5jb2RlLCBtc2c6ICdGZXRjaCBzdHJlYW0gbWVldCBFYXJseS1FT0YnfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHR5cGUgPSBMb2FkZXJFcnJvcnMuRVhDRVBUSU9OO1xyXG4gICAgICAgICAgICAgICAgaW5mbyA9IHtjb2RlOiBlLmNvZGUsIG1zZzogZS5tZXNzYWdlfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZW5kRXJyb3IoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKHR5cGUsIGluZm8pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGZXRjaFN0cmVhbUxvYWRlcjtcclxuIiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcclxuaW1wb3J0IFNwZWVkU2FtcGxlciBmcm9tICcuL3NwZWVkLXNhbXBsZXIuanMnO1xyXG5pbXBvcnQge0xvYWRlclN0YXR1cywgTG9hZGVyRXJyb3JzfSBmcm9tICcuL2xvYWRlci5qcyc7XHJcbmltcG9ydCBGZXRjaFN0cmVhbUxvYWRlciBmcm9tICcuL2ZldGNoLXN0cmVhbS1sb2FkZXIuanMnO1xyXG5pbXBvcnQgTW96Q2h1bmtlZExvYWRlciBmcm9tICcuL3hoci1tb3otY2h1bmtlZC1sb2FkZXIuanMnO1xyXG5pbXBvcnQgTVNTdHJlYW1Mb2FkZXIgZnJvbSAnLi94aHItbXNzdHJlYW0tbG9hZGVyLmpzJztcclxuaW1wb3J0IFJhbmdlTG9hZGVyIGZyb20gJy4veGhyLXJhbmdlLWxvYWRlci5qcyc7XHJcbmltcG9ydCBXZWJTb2NrZXRMb2FkZXIgZnJvbSAnLi93ZWJzb2NrZXQtbG9hZGVyLmpzJztcclxuaW1wb3J0IFJhbmdlU2Vla0hhbmRsZXIgZnJvbSAnLi9yYW5nZS1zZWVrLWhhbmRsZXIuanMnO1xyXG5pbXBvcnQgUGFyYW1TZWVrSGFuZGxlciBmcm9tICcuL3BhcmFtLXNlZWstaGFuZGxlci5qcyc7XHJcbmltcG9ydCB7UnVudGltZUV4Y2VwdGlvbiwgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7XHJcblxyXG4vKipcclxuICogRGF0YVNvdXJjZToge1xyXG4gKiAgICAgdXJsOiBzdHJpbmcsXHJcbiAqICAgICBmaWxlc2l6ZTogbnVtYmVyLFxyXG4gKiAgICAgY29yczogYm9vbGVhbixcclxuICogICAgIHdpdGhDcmVkZW50aWFsczogYm9vbGVhblxyXG4gKiB9XHJcbiAqIFxyXG4gKi9cclxuXHJcbi8vIE1hbmFnZSBJTyBMb2FkZXJzXHJcbmNsYXNzIElPQ29udHJvbGxlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YVNvdXJjZSwgY29uZmlnLCBleHRyYURhdGEpIHtcclxuICAgICAgICB0aGlzLlRBRyA9ICdJT0NvbnRyb2xsZXInO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fZXh0cmFEYXRhID0gZXh0cmFEYXRhO1xyXG5cclxuICAgICAgICB0aGlzLl9zdGFzaEluaXRpYWxTaXplID0gMTAyNCAqIDM4NDsgIC8vIGRlZmF1bHQgaW5pdGlhbCBzaXplOiAzODRLQlxyXG4gICAgICAgIGlmIChjb25maWcuc3Rhc2hJbml0aWFsU2l6ZSAhPSB1bmRlZmluZWQgJiYgY29uZmlnLnN0YXNoSW5pdGlhbFNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IGZyb20gY29uZmlnXHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXNoSW5pdGlhbFNpemUgPSBjb25maWcuc3Rhc2hJbml0aWFsU2l6ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3N0YXNoVXNlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5fc3Rhc2hTaXplID0gdGhpcy5fc3Rhc2hJbml0aWFsU2l6ZTtcclxuICAgICAgICB0aGlzLl9idWZmZXJTaXplID0gMTAyNCAqIDEwMjQgKiAzOyAgLy8gaW5pdGlhbCBzaXplOiAzTUJcclxuICAgICAgICB0aGlzLl9zdGFzaEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLl9idWZmZXJTaXplKTtcclxuICAgICAgICB0aGlzLl9zdGFzaEJ5dGVTdGFydCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlU3Rhc2ggPSB0cnVlO1xyXG4gICAgICAgIGlmIChjb25maWcuZW5hYmxlU3Rhc2hCdWZmZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVN0YXNoID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2xvYWRlckNsYXNzID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9zZWVrSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX2RhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xyXG4gICAgICAgIHRoaXMuX2lzV2ViU29ja2V0VVJMID0gL3dzcz86XFwvXFwvKC4rPykvLnRlc3QoZGF0YVNvdXJjZS51cmwpO1xyXG4gICAgICAgIHRoaXMuX3JlZlRvdGFsTGVuZ3RoID0gZGF0YVNvdXJjZS5maWxlc2l6ZSA/IGRhdGFTb3VyY2UuZmlsZXNpemUgOiBudWxsO1xyXG4gICAgICAgIHRoaXMuX3RvdGFsTGVuZ3RoID0gdGhpcy5fcmVmVG90YWxMZW5ndGg7XHJcbiAgICAgICAgdGhpcy5fZnVsbFJlcXVlc3RGbGFnID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdGVkVVJMID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fc3BlZWROb3JtYWxpemVkID0gMDtcclxuICAgICAgICB0aGlzLl9zcGVlZFNhbXBsZXIgPSBuZXcgU3BlZWRTYW1wbGVyKCk7XHJcbiAgICAgICAgdGhpcy5fc3BlZWROb3JtYWxpemVMaXN0ID0gWzY0LCAxMjgsIDI1NiwgMzg0LCA1MTIsIDc2OCwgMTAyNCwgMTUzNiwgMjA0OCwgMzA3MiwgNDA5Nl07XHJcblxyXG4gICAgICAgIHRoaXMuX2lzRWFybHlFb2ZSZWNvbm5lY3RpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVzdW1lRnJvbSA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuX29uRGF0YUFycml2YWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uU2Vla2VkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkNvbXBsZXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblJlZGlyZWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblJlY292ZXJlZEVhcmx5RW9mID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2VsZWN0U2Vla0hhbmRsZXIoKTtcclxuICAgICAgICB0aGlzLl9zZWxlY3RMb2FkZXIoKTtcclxuICAgICAgICB0aGlzLl9jcmVhdGVMb2FkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIuaXNXb3JraW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvYWRlci5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9sb2FkZXJDbGFzcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fc3Rhc2hCdWZmZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3N0YXNoVXNlZCA9IHRoaXMuX3N0YXNoU2l6ZSA9IHRoaXMuX2J1ZmZlclNpemUgPSB0aGlzLl9zdGFzaEJ5dGVTdGFydCA9IDA7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9zcGVlZFNhbXBsZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9pc0Vhcmx5RW9mUmVjb25uZWN0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX29uRGF0YUFycml2YWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uU2Vla2VkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkNvbXBsZXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblJlZGlyZWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblJlY292ZXJlZEVhcmx5RW9mID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fZXh0cmFEYXRhID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpc1dvcmtpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlciAmJiB0aGlzLl9sb2FkZXIuaXNXb3JraW5nKCkgJiYgIXRoaXMuX3BhdXNlZDtcclxuICAgIH1cclxuXHJcbiAgICBpc1BhdXNlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdGF0dXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5zdGF0dXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGV4dHJhRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZXh0cmFEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBleHRyYURhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2V4dHJhRGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbiBvbkRhdGFBcnJpdmFsKGNodW5rczogQXJyYXlCdWZmZXIsIGJ5dGVTdGFydDogbnVtYmVyKTogbnVtYmVyXHJcbiAgICBnZXQgb25EYXRhQXJyaXZhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25EYXRhQXJyaXZhbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb25EYXRhQXJyaXZhbChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uRGF0YUFycml2YWwgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb25TZWVrZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uU2Vla2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvblNlZWtlZChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uU2Vla2VkID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbiBvbkVycm9yKHR5cGU6IG51bWJlciwgaW5mbzoge2NvZGU6IG51bWJlciwgbXNnOiBzdHJpbmd9KTogdm9pZFxyXG4gICAgZ2V0IG9uRXJyb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uRXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uRXJyb3IoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9uQ29tcGxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uQ29tcGxldGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uQ29tcGxldGUoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vbkNvbXBsZXRlID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9uUmVkaXJlY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVkaXJlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uUmVkaXJlY3QoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vblJlZGlyZWN0ID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9uUmVjb3ZlcmVkRWFybHlFb2YoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVjb3ZlcmVkRWFybHlFb2Y7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uUmVjb3ZlcmVkRWFybHlFb2YoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vblJlY292ZXJlZEVhcmx5RW9mID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1cnJlbnRVUkwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFTb3VyY2UudXJsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoYXNSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuX3JlZGlyZWN0ZWRVUkwgIT0gbnVsbCB8fCB0aGlzLl9kYXRhU291cmNlLnJlZGlyZWN0ZWRVUkwgIT0gdW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3VycmVudFJlZGlyZWN0ZWRVUkwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZGlyZWN0ZWRVUkwgfHwgdGhpcy5fZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGluIEtCL3NcclxuICAgIGdldCBjdXJyZW50U3BlZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRlckNsYXNzID09PSBSYW5nZUxvYWRlcikge1xyXG4gICAgICAgICAgICAvLyBTcGVlZFNhbXBsZXIgaXMgaW5hY2N1cmFjeSBpZiBsb2FkZXIgaXMgUmFuZ2VMb2FkZXJcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5jdXJyZW50U3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9zcGVlZFNhbXBsZXIubGFzdFNlY29uZEtCcHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxvYWRlclR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci50eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZWxlY3RTZWVrSGFuZGxlcigpIHtcclxuICAgICAgICBsZXQgY29uZmlnID0gdGhpcy5fY29uZmlnO1xyXG5cclxuICAgICAgICBpZiAoY29uZmlnLnNlZWtUeXBlID09PSAncmFuZ2UnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlZWtIYW5kbGVyID0gbmV3IFJhbmdlU2Vla0hhbmRsZXIodGhpcy5fY29uZmlnLnJhbmdlTG9hZFplcm9TdGFydCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcuc2Vla1R5cGUgPT09ICdwYXJhbScpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtU3RhcnQgPSBjb25maWcuc2Vla1BhcmFtU3RhcnQgfHwgJ2JzdGFydCc7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbUVuZCA9IGNvbmZpZy5zZWVrUGFyYW1FbmQgfHwgJ2JlbmQnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2Vla0hhbmRsZXIgPSBuZXcgUGFyYW1TZWVrSGFuZGxlcihwYXJhbVN0YXJ0LCBwYXJhbUVuZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcuc2Vla1R5cGUgPT09ICdjdXN0b20nKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmN1c3RvbVNlZWtIYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdDdXN0b20gc2Vla1R5cGUgc3BlY2lmaWVkIGluIGNvbmZpZyBidXQgaW52YWxpZCBjdXN0b21TZWVrSGFuZGxlciEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZWVrSGFuZGxlciA9IG5ldyBjb25maWcuY3VzdG9tU2Vla0hhbmRsZXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKGBJbnZhbGlkIHNlZWtUeXBlIGluIGNvbmZpZzogJHtjb25maWcuc2Vla1R5cGV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZWxlY3RMb2FkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5jdXN0b21Mb2FkZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXJDbGFzcyA9IHRoaXMuX2NvbmZpZy5jdXN0b21Mb2FkZXI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pc1dlYlNvY2tldFVSTCkge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXJDbGFzcyA9IFdlYlNvY2tldExvYWRlcjtcclxuICAgICAgICB9IGVsc2UgaWYgKEZldGNoU3RyZWFtTG9hZGVyLmlzU3VwcG9ydGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyQ2xhc3MgPSBGZXRjaFN0cmVhbUxvYWRlcjtcclxuICAgICAgICB9IGVsc2UgaWYgKE1vekNodW5rZWRMb2FkZXIuaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXJDbGFzcyA9IE1vekNodW5rZWRMb2FkZXI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChSYW5nZUxvYWRlci5pc1N1cHBvcnRlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlckNsYXNzID0gUmFuZ2VMb2FkZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oJ1lvdXIgYnJvd3NlciBkb2VzblxcJ3Qgc3VwcG9ydCB4aHIgd2l0aCBhcnJheWJ1ZmZlciByZXNwb25zZVR5cGUhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVMb2FkZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbmV3IHRoaXMuX2xvYWRlckNsYXNzKHRoaXMuX3NlZWtIYW5kbGVyLCB0aGlzLl9jb25maWcpO1xyXG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIubmVlZFN0YXNoQnVmZmVyID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbmFibGVTdGFzaCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2FkZXIub25Db250ZW50TGVuZ3RoS25vd24gPSB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2xvYWRlci5vblVSTFJlZGlyZWN0ID0gdGhpcy5fb25VUkxSZWRpcmVjdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2xvYWRlci5vbkRhdGFBcnJpdmFsID0gdGhpcy5fb25Mb2FkZXJDaHVua0Fycml2YWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9sb2FkZXIub25Db21wbGV0ZSA9IHRoaXMuX29uTG9hZGVyQ29tcGxldGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9sb2FkZXIub25FcnJvciA9IHRoaXMuX29uTG9hZGVyRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKG9wdGlvbmFsRnJvbSkge1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRSYW5nZSA9IHtmcm9tOiAwLCB0bzogLTF9O1xyXG4gICAgICAgIGlmIChvcHRpb25hbEZyb20pIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlLmZyb20gPSBvcHRpb25hbEZyb207XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9zcGVlZFNhbXBsZXIucmVzZXQoKTtcclxuICAgICAgICBpZiAoIW9wdGlvbmFsRnJvbSkge1xyXG4gICAgICAgICAgICB0aGlzLl9mdWxsUmVxdWVzdEZsYWcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbG9hZGVyLm9wZW4odGhpcy5fZGF0YVNvdXJjZSwgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fY3VycmVudFJhbmdlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fbG9hZGVyLmFib3J0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VtZUZyb20gPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1dvcmtpbmcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuYWJvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGFzaFVzZWQgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3VtZUZyb20gPSB0aGlzLl9zdGFzaEJ5dGVTdGFydDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSYW5nZS50byA9IHRoaXMuX3N0YXNoQnl0ZVN0YXJ0IC0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3VtZUZyb20gPSB0aGlzLl9jdXJyZW50UmFuZ2UudG8gKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXNoVXNlZCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXNoQnl0ZVN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBieXRlcyA9IHRoaXMuX3Jlc3VtZUZyb207XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VtZUZyb20gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcm5hbFNlZWsoYnl0ZXMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWVrKGJ5dGVzKSB7XHJcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc3Rhc2hVc2VkID0gMDtcclxuICAgICAgICB0aGlzLl9zdGFzaEJ5dGVTdGFydCA9IDA7XHJcbiAgICAgICAgdGhpcy5faW50ZXJuYWxTZWVrKGJ5dGVzLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gc2Vla2luZyByZXF1ZXN0IGlzIGZyb20gbWVkaWEgc2Vla2luZywgdW5jb25zdW1lZCBzdGFzaCBkYXRhIHNob3VsZCBiZSBkcm9wcGVkXHJcbiAgICAgKiBIb3dldmVyLCBzdGFzaCBkYXRhIHNob3VsZG4ndCBiZSBkcm9wcGVkIGlmIHNlZWtpbmcgcmVxdWVzdGVkIGZyb20gaHR0cCByZWNvbm5lY3Rpb25cclxuICAgICAqXHJcbiAgICAgKiBAZHJvcFVuY29uc3VtZWQ6IElnbm9yZSBhbmQgZGlzY2FyZCBhbGwgdW5jb25zdW1lZCBkYXRhIGluIHN0YXNoIGJ1ZmZlclxyXG4gICAgICovXHJcbiAgICBfaW50ZXJuYWxTZWVrKGJ5dGVzLCBkcm9wVW5jb25zdW1lZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9sb2FkZXIuaXNXb3JraW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkaXNwYXRjaCAmIGZsdXNoIHN0YXNoIGJ1ZmZlciBiZWZvcmUgc2Vla1xyXG4gICAgICAgIHRoaXMuX2ZsdXNoU3Rhc2hCdWZmZXIoZHJvcFVuY29uc3VtZWQpO1xyXG5cclxuICAgICAgICB0aGlzLl9sb2FkZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XHJcblxyXG4gICAgICAgIGxldCByZXF1ZXN0UmFuZ2UgPSB7ZnJvbTogYnl0ZXMsIHRvOiAtMX07XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlID0ge2Zyb206IHJlcXVlc3RSYW5nZS5mcm9tLCB0bzogLTF9O1xyXG5cclxuICAgICAgICB0aGlzLl9zcGVlZFNhbXBsZXIucmVzZXQoKTtcclxuICAgICAgICB0aGlzLl9zdGFzaFNpemUgPSB0aGlzLl9zdGFzaEluaXRpYWxTaXplO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUxvYWRlcigpO1xyXG4gICAgICAgIHRoaXMuX2xvYWRlci5vcGVuKHRoaXMuX2RhdGFTb3VyY2UsIHJlcXVlc3RSYW5nZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vblNlZWtlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblNlZWtlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVcmwodXJsKSB7XHJcbiAgICAgICAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdVcmwgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmchJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kYXRhU291cmNlLnVybCA9IHVybDtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIG5ldyB1cmxcclxuICAgIH1cclxuXHJcbiAgICBfZXhwYW5kQnVmZmVyKGV4cGVjdGVkQnl0ZXMpIHtcclxuICAgICAgICBsZXQgYnVmZmVyTmV3U2l6ZSA9IHRoaXMuX3N0YXNoU2l6ZTtcclxuICAgICAgICB3aGlsZSAoYnVmZmVyTmV3U2l6ZSArIDEwMjQgKiAxMDI0ICogMSA8IGV4cGVjdGVkQnl0ZXMpIHtcclxuICAgICAgICAgICAgYnVmZmVyTmV3U2l6ZSAqPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnVmZmVyTmV3U2l6ZSArPSAxMDI0ICogMTAyNCAqIDE7ICAvLyBidWZmZXJTaXplID0gc3Rhc2hTaXplICsgMU1CXHJcbiAgICAgICAgaWYgKGJ1ZmZlck5ld1NpemUgPT09IHRoaXMuX2J1ZmZlclNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld0J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJOZXdTaXplKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXNoVXNlZCA+IDApIHsgIC8vIGNvcHkgZXhpc3RpbmcgZGF0YSBpbnRvIG5ldyBidWZmZXJcclxuICAgICAgICAgICAgbGV0IHN0YXNoT2xkQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLl9zdGFzaEJ1ZmZlciwgMCwgdGhpcy5fc3Rhc2hVc2VkKTtcclxuICAgICAgICAgICAgbGV0IHN0YXNoTmV3QXJyYXkgPSBuZXcgVWludDhBcnJheShuZXdCdWZmZXIsIDAsIGJ1ZmZlck5ld1NpemUpO1xyXG4gICAgICAgICAgICBzdGFzaE5ld0FycmF5LnNldChzdGFzaE9sZEFycmF5LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3N0YXNoQnVmZmVyID0gbmV3QnVmZmVyO1xyXG4gICAgICAgIHRoaXMuX2J1ZmZlclNpemUgPSBidWZmZXJOZXdTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIF9ub3JtYWxpemVTcGVlZChpbnB1dCkge1xyXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fc3BlZWROb3JtYWxpemVMaXN0O1xyXG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xyXG4gICAgICAgIGxldCBtaWQgPSAwO1xyXG4gICAgICAgIGxldCBsYm91bmQgPSAwO1xyXG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xyXG5cclxuICAgICAgICBpZiAoaW5wdXQgPCBsaXN0WzBdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0WzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYmluYXJ5IHNlYXJjaFxyXG4gICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7XHJcbiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTtcclxuICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAoaW5wdXQgPj0gbGlzdFttaWRdICYmIGlucHV0IDwgbGlzdFttaWQgKyAxXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0W21pZF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdIDwgaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1Ym91bmQgPSBtaWQgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGp1c3RTdGFzaFNpemUobm9ybWFsaXplZCkge1xyXG4gICAgICAgIGxldCBzdGFzaFNpemVLQiA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuaXNMaXZlKSB7XHJcbiAgICAgICAgICAgIC8vIGxpdmUgc3RyZWFtOiBhbHdheXMgdXNlIHNpbmdsZSBub3JtYWxpemVkIHNwZWVkIGZvciBzaXplIG9mIHN0YXNoU2l6ZUtCXHJcbiAgICAgICAgICAgIHN0YXNoU2l6ZUtCID0gbm9ybWFsaXplZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCA8IDUxMikge1xyXG4gICAgICAgICAgICAgICAgc3Rhc2hTaXplS0IgPSBub3JtYWxpemVkO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWQgPj0gNTEyICYmIG5vcm1hbGl6ZWQgPD0gMTAyNCkge1xyXG4gICAgICAgICAgICAgICAgc3Rhc2hTaXplS0IgPSBNYXRoLmZsb29yKG5vcm1hbGl6ZWQgKiAxLjUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3Rhc2hTaXplS0IgPSBub3JtYWxpemVkICogMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0YXNoU2l6ZUtCID4gODE5Mikge1xyXG4gICAgICAgICAgICBzdGFzaFNpemVLQiA9IDgxOTI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYnVmZmVyU2l6ZSA9IHN0YXNoU2l6ZUtCICogMTAyNCArIDEwMjQgKiAxMDI0ICogMTsgIC8vIHN0YXNoU2l6ZSArIDFNQlxyXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTaXplIDwgYnVmZmVyU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRCdWZmZXIoYnVmZmVyU2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N0YXNoU2l6ZSA9IHN0YXNoU2l6ZUtCICogMTAyNDtcclxuICAgIH1cclxuXHJcbiAgICBfZGlzcGF0Y2hDaHVua3MoY2h1bmtzLCBieXRlU3RhcnQpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UmFuZ2UudG8gPSBieXRlU3RhcnQgKyBjaHVua3MuYnl0ZUxlbmd0aCAtIDE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uRGF0YUFycml2YWwoY2h1bmtzLCBieXRlU3RhcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblVSTFJlZGlyZWN0KHJlZGlyZWN0ZWRVUkwpIHtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdGVkVVJMID0gcmVkaXJlY3RlZFVSTDtcclxuICAgICAgICBpZiAodGhpcy5fb25SZWRpcmVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vblJlZGlyZWN0KHJlZGlyZWN0ZWRVUkwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Db250ZW50TGVuZ3RoS25vd24oY29udGVudExlbmd0aCkge1xyXG4gICAgICAgIGlmIChjb250ZW50TGVuZ3RoICYmIHRoaXMuX2Z1bGxSZXF1ZXN0RmxhZykge1xyXG4gICAgICAgICAgICB0aGlzLl90b3RhbExlbmd0aCA9IGNvbnRlbnRMZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMuX2Z1bGxSZXF1ZXN0RmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Mb2FkZXJDaHVua0Fycml2YWwoY2h1bmssIGJ5dGVTdGFydCwgcmVjZWl2ZWRMZW5ndGgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX29uRGF0YUFycml2YWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignSU9Db250cm9sbGVyOiBObyBleGlzdGluZyBjb25zdW1lciAob25EYXRhQXJyaXZhbCkgY2FsbGJhY2shJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faXNFYXJseUVvZlJlY29ubmVjdGluZykge1xyXG4gICAgICAgICAgICAvLyBBdXRvLXJlY29ubmVjdCBmb3IgRWFybHlFb2Ygc3VjY2VlZCwgbm90aWZ5IHRvIHVwcGVyLWxheWVyIGJ5IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIHRoaXMuX2lzRWFybHlFb2ZSZWNvbm5lY3RpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29uUmVjb3ZlcmVkRWFybHlFb2YpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uUmVjb3ZlcmVkRWFybHlFb2YoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3BlZWRTYW1wbGVyLmFkZEJ5dGVzKGNodW5rLmJ5dGVMZW5ndGgpO1xyXG5cclxuICAgICAgICAvLyBhZGp1c3Qgc3Rhc2ggYnVmZmVyIHNpemUgYWNjb3JkaW5nIHRvIG5ldHdvcmsgc3BlZWQgZHluYW1pY2FsbHlcclxuICAgICAgICBsZXQgS0JwcyA9IHRoaXMuX3NwZWVkU2FtcGxlci5sYXN0U2Vjb25kS0JwcztcclxuICAgICAgICBpZiAoS0JwcyAhPT0gMCkge1xyXG4gICAgICAgICAgICBsZXQgbm9ybWFsaXplZCA9IHRoaXMuX25vcm1hbGl6ZVNwZWVkKEtCcHMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3BlZWROb3JtYWxpemVkICE9PSBub3JtYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zcGVlZE5vcm1hbGl6ZWQgPSBub3JtYWxpemVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRqdXN0U3Rhc2hTaXplKG5vcm1hbGl6ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2VuYWJsZVN0YXNoKSB7ICAvLyBkaXNhYmxlIHN0YXNoXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGFzaFVzZWQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpc3BhdGNoIGNodW5rIGRpcmVjdGx5IHRvIGNvbnN1bWVyO1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgcmV0IHZhbHVlIChjb25zdW1lZCBieXRlcykgYW5kIHN0YXNoIHVuY29uc3VtZWQgdG8gc3Rhc2hCdWZmZXJcclxuICAgICAgICAgICAgICAgIGxldCBjb25zdW1lZCA9IHRoaXMuX2Rpc3BhdGNoQ2h1bmtzKGNodW5rLCBieXRlU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnN1bWVkIDwgY2h1bmsuYnl0ZUxlbmd0aCkgeyAgLy8gdW5jb25zdW1lZCBkYXRhIHJlbWFpbi5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVtYWluID0gY2h1bmsuYnl0ZUxlbmd0aCAtIGNvbnN1bWVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW4gPiB0aGlzLl9idWZmZXJTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V4cGFuZEJ1ZmZlcihyZW1haW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3Rhc2hBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuX3N0YXNoQnVmZmVyLCAwLCB0aGlzLl9idWZmZXJTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICBzdGFzaEFycmF5LnNldChuZXcgVWludDhBcnJheShjaHVuaywgY29uc3VtZWQpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaFVzZWQgKz0gcmVtYWluO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoQnl0ZVN0YXJ0ID0gYnl0ZVN0YXJ0ICsgY29uc3VtZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBlbHNlOiBNZXJnZSBjaHVuayBpbnRvIHN0YXNoQnVmZmVyLCBhbmQgZGlzcGF0Y2ggc3Rhc2hCdWZmZXIgdG8gY29uc3VtZXIuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3Rhc2hVc2VkICsgY2h1bmsuYnl0ZUxlbmd0aCA+IHRoaXMuX2J1ZmZlclNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRCdWZmZXIodGhpcy5fc3Rhc2hVc2VkICsgY2h1bmsuYnl0ZUxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgc3Rhc2hBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuX3N0YXNoQnVmZmVyLCAwLCB0aGlzLl9idWZmZXJTaXplKTtcclxuICAgICAgICAgICAgICAgIHN0YXNoQXJyYXkuc2V0KG5ldyBVaW50OEFycmF5KGNodW5rKSwgdGhpcy5fc3Rhc2hVc2VkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoVXNlZCArPSBjaHVuay5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnN1bWVkID0gdGhpcy5fZGlzcGF0Y2hDaHVua3ModGhpcy5fc3Rhc2hCdWZmZXIuc2xpY2UoMCwgdGhpcy5fc3Rhc2hVc2VkKSwgdGhpcy5fc3Rhc2hCeXRlU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnN1bWVkIDwgdGhpcy5fc3Rhc2hVc2VkICYmIGNvbnN1bWVkID4gMCkgeyAgLy8gdW5jb25zdW1lZCBkYXRhIHJlbWFpblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZW1haW5BcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuX3N0YXNoQnVmZmVyLCBjb25zdW1lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Rhc2hBcnJheS5zZXQocmVtYWluQXJyYXksIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3Rhc2hVc2VkIC09IGNvbnN1bWVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3Rhc2hCeXRlU3RhcnQgKz0gY29uc3VtZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAgLy8gZW5hYmxlIHN0YXNoXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGFzaFVzZWQgPT09IDAgJiYgdGhpcy5fc3Rhc2hCeXRlU3RhcnQgPT09IDApIHsgIC8vIHNlZWtlZD8gb3IgaW5pdCBjaHVuaz9cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IGNodW5rIGFmdGVyIHNlZWsgYWN0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaEJ5dGVTdGFydCA9IGJ5dGVTdGFydDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3Rhc2hVc2VkICsgY2h1bmsuYnl0ZUxlbmd0aCA8PSB0aGlzLl9zdGFzaFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGp1c3Qgc3Rhc2hcclxuICAgICAgICAgICAgICAgIGxldCBzdGFzaEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fc3Rhc2hCdWZmZXIsIDAsIHRoaXMuX3N0YXNoU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBzdGFzaEFycmF5LnNldChuZXcgVWludDhBcnJheShjaHVuayksIHRoaXMuX3N0YXNoVXNlZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaFVzZWQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgfSBlbHNlIHsgIC8vIHN0YXNoVXNlZCArIGNodW5rU2l6ZSA+IHN0YXNoU2l6ZSwgc2l6ZSBsaW1pdCBleGNlZWRlZFxyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXNoQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLl9zdGFzaEJ1ZmZlciwgMCwgdGhpcy5fYnVmZmVyU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3Rhc2hVc2VkID4gMCkgeyAgLy8gVGhlcmUncmUgc3Rhc2ggZGF0YXMgaW4gYnVmZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzcGF0Y2ggdGhlIHdob2xlIHN0YXNoQnVmZmVyLCBhbmQgc3Rhc2ggcmVtYWluIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGFwcGVuZCBjaHVuayB0byBzdGFzaEJ1ZmZlciAoc3Rhc2gpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuX3N0YXNoQnVmZmVyLnNsaWNlKDAsIHRoaXMuX3N0YXNoVXNlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnN1bWVkID0gdGhpcy5fZGlzcGF0Y2hDaHVua3MoYnVmZmVyLCB0aGlzLl9zdGFzaEJ5dGVTdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnN1bWVkIDwgYnVmZmVyLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnN1bWVkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbWFpbkFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBjb25zdW1lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFzaEFycmF5LnNldChyZW1haW5BcnJheSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaFVzZWQgPSByZW1haW5BcnJheS5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3Rhc2hCeXRlU3RhcnQgKz0gY29uc3VtZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaFVzZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFzaEJ5dGVTdGFydCArPSBjb25zdW1lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0YXNoVXNlZCArIGNodW5rLmJ5dGVMZW5ndGggPiB0aGlzLl9idWZmZXJTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V4cGFuZEJ1ZmZlcih0aGlzLl9zdGFzaFVzZWQgKyBjaHVuay5ieXRlTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Rhc2hBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuX3N0YXNoQnVmZmVyLCAwLCB0aGlzLl9idWZmZXJTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3Rhc2hBcnJheS5zZXQobmV3IFVpbnQ4QXJyYXkoY2h1bmspLCB0aGlzLl9zdGFzaFVzZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoVXNlZCArPSBjaHVuay5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgIC8vIHN0YXNoIGJ1ZmZlciBlbXB0eSwgYnV0IGNodW5rU2l6ZSA+IHN0YXNoU2l6ZSAob2gsIGhvbHkgc2hpdClcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXNwYXRjaCBjaHVuayBkaXJlY3RseSBhbmQgc3Rhc2ggcmVtYWluIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29uc3VtZWQgPSB0aGlzLl9kaXNwYXRjaENodW5rcyhjaHVuaywgYnl0ZVN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uc3VtZWQgPCBjaHVuay5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1haW4gPSBjaHVuay5ieXRlTGVuZ3RoIC0gY29uc3VtZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW4gPiB0aGlzLl9idWZmZXJTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRCdWZmZXIocmVtYWluKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXNoQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLl9zdGFzaEJ1ZmZlciwgMCwgdGhpcy5fYnVmZmVyU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Rhc2hBcnJheS5zZXQobmV3IFVpbnQ4QXJyYXkoY2h1bmssIGNvbnN1bWVkKSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoVXNlZCArPSByZW1haW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoQnl0ZVN0YXJ0ID0gYnl0ZVN0YXJ0ICsgY29uc3VtZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9mbHVzaFN0YXNoQnVmZmVyKGRyb3BVbmNvbnN1bWVkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXNoVXNlZCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuX3N0YXNoQnVmZmVyLnNsaWNlKDAsIHRoaXMuX3N0YXNoVXNlZCk7XHJcbiAgICAgICAgICAgIGxldCBjb25zdW1lZCA9IHRoaXMuX2Rpc3BhdGNoQ2h1bmtzKGJ1ZmZlciwgdGhpcy5fc3Rhc2hCeXRlU3RhcnQpO1xyXG4gICAgICAgICAgICBsZXQgcmVtYWluID0gYnVmZmVyLmJ5dGVMZW5ndGggLSBjb25zdW1lZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb25zdW1lZCA8IGJ1ZmZlci5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHJvcFVuY29uc3VtZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYCR7cmVtYWlufSBieXRlcyB1bmNvbnN1bWVkIGRhdGEgcmVtYWluIHdoZW4gZmx1c2ggYnVmZmVyLCBkcm9wcGVkYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25zdW1lZCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXNoQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLl9zdGFzaEJ1ZmZlciwgMCwgdGhpcy5fYnVmZmVyU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1haW5BcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgY29uc3VtZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFzaEFycmF5LnNldChyZW1haW5BcnJheSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoVXNlZCA9IHJlbWFpbkFycmF5LmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXNoQnl0ZVN0YXJ0ICs9IGNvbnN1bWVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zdGFzaFVzZWQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFzaEJ5dGVTdGFydCA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiByZW1haW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkxvYWRlckNvbXBsZXRlKGZyb20sIHRvKSB7XHJcbiAgICAgICAgLy8gRm9yY2UtZmx1c2ggc3Rhc2ggYnVmZmVyLCBhbmQgZHJvcCB1bmNvbnN1bWVkIGRhdGFcclxuICAgICAgICB0aGlzLl9mbHVzaFN0YXNoQnVmZmVyKHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fb25Db21wbGV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkNvbXBsZXRlKHRoaXMuX2V4dHJhRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkxvYWRlckVycm9yKHR5cGUsIGRhdGEpIHtcclxuICAgICAgICBMb2cuZSh0aGlzLlRBRywgYExvYWRlciBlcnJvciwgY29kZSA9ICR7ZGF0YS5jb2RlfSwgbXNnID0gJHtkYXRhLm1zZ31gKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZmx1c2hTdGFzaEJ1ZmZlcihmYWxzZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pc0Vhcmx5RW9mUmVjb25uZWN0aW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEF1dG8tcmVjb25uZWN0IGZvciBFYXJseUVvZiBmYWlsZWQsIHRocm93IFVucmVjb3ZlcmFibGVFYXJseUVvZiBlcnJvciB0byB1cHBlci1sYXllclxyXG4gICAgICAgICAgICB0aGlzLl9pc0Vhcmx5RW9mUmVjb25uZWN0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHR5cGUgPSBMb2FkZXJFcnJvcnMuVU5SRUNPVkVSQUJMRV9FQVJMWV9FT0Y7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBMb2FkZXJFcnJvcnMuRUFSTFlfRU9GOiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5pc0xpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEbyBpbnRlcm5hbCBodHRwIHJlY29ubmVjdCBpZiBub3QgbGl2ZSBzdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdG90YWxMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRGcm9tID0gdGhpcy5fY3VycmVudFJhbmdlLnRvICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRGcm9tIDwgdGhpcy5fdG90YWxMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnQ29ubmVjdGlvbiBsb3N0LCB0cnlpbmcgcmVjb25uZWN0Li4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0Vhcmx5RW9mUmVjb25uZWN0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludGVybmFsU2VlayhuZXh0RnJvbSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxzZTogV2UgZG9uJ3Qga25vdyB0b3RhbExlbmd0aCwgdGhyb3cgVW5yZWNvdmVyYWJsZUVhcmx5RW9mXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBsaXZlIHN0cmVhbTogdGhyb3cgVW5yZWNvdmVyYWJsZUVhcmx5RW9mIGVycm9yIHRvIHVwcGVyLWxheWVyXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gTG9hZGVyRXJyb3JzLlVOUkVDT1ZFUkFCTEVfRUFSTFlfRU9GO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBMb2FkZXJFcnJvcnMuVU5SRUNPVkVSQUJMRV9FQVJMWV9FT0Y6XHJcbiAgICAgICAgICAgIGNhc2UgTG9hZGVyRXJyb3JzLkNPTk5FQ1RJTkdfVElNRU9VVDpcclxuICAgICAgICAgICAgY2FzZSBMb2FkZXJFcnJvcnMuSFRUUF9TVEFUVVNfQ09ERV9JTlZBTElEOlxyXG4gICAgICAgICAgICBjYXNlIExvYWRlckVycm9ycy5FWENFUFRJT046XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IodHlwZSwgZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oJ0lPRXhjZXB0aW9uOiAnICsgZGF0YS5tc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IElPQ29udHJvbGxlcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbmV4cG9ydCBjb25zdCBMb2FkZXJTdGF0dXMgPSB7XHJcbiAgICBrSWRsZTogMCxcclxuICAgIGtDb25uZWN0aW5nOiAxLFxyXG4gICAga0J1ZmZlcmluZzogMixcclxuICAgIGtFcnJvcjogMyxcclxuICAgIGtDb21wbGV0ZTogNFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IExvYWRlckVycm9ycyA9IHtcclxuICAgIE9LOiAnT0snLFxyXG4gICAgRVhDRVBUSU9OOiAnRXhjZXB0aW9uJyxcclxuICAgIEhUVFBfU1RBVFVTX0NPREVfSU5WQUxJRDogJ0h0dHBTdGF0dXNDb2RlSW52YWxpZCcsXHJcbiAgICBDT05ORUNUSU5HX1RJTUVPVVQ6ICdDb25uZWN0aW5nVGltZW91dCcsXHJcbiAgICBFQVJMWV9FT0Y6ICdFYXJseUVvZicsXHJcbiAgICBVTlJFQ09WRVJBQkxFX0VBUkxZX0VPRjogJ1VucmVjb3ZlcmFibGVFYXJseUVvZidcclxufTtcclxuXHJcbi8qIExvYWRlciBoYXMgY2FsbGJhY2tzIHdoaWNoIGhhdmUgZm9sbG93aW5nIHByb3RvdHlwZXM6XHJcbiAqICAgICBmdW5jdGlvbiBvbkNvbnRlbnRMZW5ndGhLbm93bihjb250ZW50TGVuZ3RoOiBudW1iZXIpOiB2b2lkXHJcbiAqICAgICBmdW5jdGlvbiBvblVSTFJlZGlyZWN0KHVybDogc3RyaW5nKTogdm9pZFxyXG4gKiAgICAgZnVuY3Rpb24gb25EYXRhQXJyaXZhbChjaHVuazogQXJyYXlCdWZmZXIsIGJ5dGVTdGFydDogbnVtYmVyLCByZWNlaXZlZExlbmd0aDogbnVtYmVyKTogdm9pZFxyXG4gKiAgICAgZnVuY3Rpb24gb25FcnJvcihlcnJvclR5cGU6IG51bWJlciwgZXJyb3JJbmZvOiB7Y29kZTogbnVtYmVyLCBtc2c6IHN0cmluZ30pOiB2b2lkXHJcbiAqICAgICBmdW5jdGlvbiBvbkNvbXBsZXRlKHJhbmdlRnJvbTogbnVtYmVyLCByYW5nZVRvOiBudW1iZXIpOiB2b2lkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZUxvYWRlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IodHlwZU5hbWUpIHtcclxuICAgICAgICB0aGlzLl90eXBlID0gdHlwZU5hbWUgfHwgJ3VuZGVmaW5lZCc7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtJZGxlO1xyXG4gICAgICAgIHRoaXMuX25lZWRTdGFzaCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGNhbGxiYWNrc1xyXG4gICAgICAgIHRoaXMuX29uQ29udGVudExlbmd0aEtub3duID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vblVSTFJlZGlyZWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkRhdGFBcnJpdmFsID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9vbkNvbXBsZXRlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rSWRsZTtcclxuICAgICAgICB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93biA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25VUkxSZWRpcmVjdCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25EYXRhQXJyaXZhbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25FcnJvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb25Db21wbGV0ZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaXNXb3JraW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXMgPT09IExvYWRlclN0YXR1cy5rQ29ubmVjdGluZyB8fCB0aGlzLl9zdGF0dXMgPT09IExvYWRlclN0YXR1cy5rQnVmZmVyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdGF0dXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmVlZFN0YXNoQnVmZmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZWVkU3Rhc2g7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG9uQ29udGVudExlbmd0aEtub3duKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93bjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb25Db250ZW50TGVuZ3RoS25vd24oY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93biA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBvblVSTFJlZGlyZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vblVSTFJlZGlyZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvblVSTFJlZGlyZWN0KGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25VUkxSZWRpcmVjdCA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBvbkRhdGFBcnJpdmFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkRhdGFBcnJpdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbkRhdGFBcnJpdmFsKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25EYXRhQXJyaXZhbCA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBvbkVycm9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbkVycm9yKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25FcnJvciA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBvbkNvbXBsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vbkNvbXBsZXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvbkNvbXBsZXRlKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25Db21wbGV0ZSA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHB1cmUgdmlydHVhbFxyXG4gICAgb3BlbihkYXRhU291cmNlLCByYW5nZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBmdW5jdGlvbiEnKTtcclxuICAgIH1cclxuXHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oJ1VuaW1wbGVtZW50ZWQgYWJzdHJhY3QgZnVuY3Rpb24hJyk7XHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jbGFzcyBQYXJhbVNlZWtIYW5kbGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbVN0YXJ0LCBwYXJhbUVuZCkge1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0TmFtZSA9IHBhcmFtU3RhcnQ7XHJcbiAgICAgICAgdGhpcy5fZW5kTmFtZSA9IHBhcmFtRW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbmZpZyhiYXNlVXJsLCByYW5nZSkge1xyXG4gICAgICAgIGxldCB1cmwgPSBiYXNlVXJsO1xyXG5cclxuICAgICAgICBpZiAocmFuZ2UuZnJvbSAhPT0gMCB8fCByYW5nZS50byAhPT0gLTEpIHtcclxuICAgICAgICAgICAgbGV0IG5lZWRBbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHVybCArPSAnPyc7XHJcbiAgICAgICAgICAgICAgICBuZWVkQW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWVkQW5kKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgKz0gJyYnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB1cmwgKz0gYCR7dGhpcy5fc3RhcnROYW1lfT0ke3JhbmdlLmZyb20udG9TdHJpbmcoKX1gO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJhbmdlLnRvICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdXJsICs9IGAmJHt0aGlzLl9lbmROYW1lfT0ke3JhbmdlLnRvLnRvU3RyaW5nKCl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHt9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVVUkxQYXJhbWV0ZXJzKHNlZWtlZFVSTCkge1xyXG4gICAgICAgIGxldCBiYXNlVVJMID0gc2Vla2VkVVJMLnNwbGl0KCc/JylbMF07XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbGV0IHF1ZXJ5SW5kZXggPSBzZWVrZWRVUkwuaW5kZXhPZignPycpO1xyXG4gICAgICAgIGlmIChxdWVyeUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICBwYXJhbXMgPSBzZWVrZWRVUkwuc3Vic3RyaW5nKHF1ZXJ5SW5kZXggKyAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXN1bHRQYXJhbXMgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcyAhPSB1bmRlZmluZWQgJiYgcGFyYW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IHBhaXJzID0gcGFyYW1zLnNwbGl0KCcmJyk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFpciA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWlyZUFuZCA9IChpID4gMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhaXJbMF0gIT09IHRoaXMuX3N0YXJ0TmFtZSAmJiBwYWlyWzBdICE9PSB0aGlzLl9lbmROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVBbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGFyYW1zICs9ICcmJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UGFyYW1zICs9IHBhaXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKHJlc3VsdFBhcmFtcy5sZW5ndGggPT09IDApID8gYmFzZVVSTCA6IGJhc2VVUkwgKyAnPycgKyByZXN1bHRQYXJhbXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQYXJhbVNlZWtIYW5kbGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jbGFzcyBSYW5nZVNlZWtIYW5kbGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih6ZXJvU3RhcnQpIHtcclxuICAgICAgICB0aGlzLl96ZXJvU3RhcnQgPSB6ZXJvU3RhcnQgfHwgZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKHVybCwgcmFuZ2UpIHtcclxuICAgICAgICBsZXQgaGVhZGVycyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAocmFuZ2UuZnJvbSAhPT0gMCB8fCByYW5nZS50byAhPT0gLTEpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmFtO1xyXG4gICAgICAgICAgICBpZiAocmFuZ2UudG8gIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbSA9IGBieXRlcz0ke3JhbmdlLmZyb20udG9TdHJpbmcoKX0tJHtyYW5nZS50by50b1N0cmluZygpfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbSA9IGBieXRlcz0ke3JhbmdlLmZyb20udG9TdHJpbmcoKX0tYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoZWFkZXJzWydSYW5nZSddID0gcGFyYW07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl96ZXJvU3RhcnQpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1snUmFuZ2UnXSA9ICdieXRlcz0wLSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlVVJMUGFyYW1ldGVycyhzZWVrZWRVUkwpIHtcclxuICAgICAgICByZXR1cm4gc2Vla2VkVVJMO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmFuZ2VTZWVrSGFuZGxlcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuLy8gVXRpbGl0eSBjbGFzcyB0byBjYWxjdWxhdGUgcmVhbHRpbWUgbmV0d29yayBJL08gc3BlZWRcclxuY2xhc3MgU3BlZWRTYW1wbGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBtaWxsaXNlY29uZHNcclxuICAgICAgICB0aGlzLl9maXJzdENoZWNrcG9pbnQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2xhc3RDaGVja3BvaW50ID0gMDtcclxuICAgICAgICB0aGlzLl9pbnRlcnZhbEJ5dGVzID0gMDtcclxuICAgICAgICB0aGlzLl90b3RhbEJ5dGVzID0gMDtcclxuICAgICAgICB0aGlzLl9sYXN0U2Vjb25kQnl0ZXMgPSAwO1xyXG5cclxuICAgICAgICAvLyBjb21wYXRpYmlsaXR5IGRldGVjdGlvblxyXG4gICAgICAgIGlmIChzZWxmLnBlcmZvcm1hbmNlICYmIHNlbGYucGVyZm9ybWFuY2Uubm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdyA9IHNlbGYucGVyZm9ybWFuY2Uubm93LmJpbmQoc2VsZi5wZXJmb3JtYW5jZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbm93ID0gRGF0ZS5ub3c7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuX2ZpcnN0Q2hlY2twb2ludCA9IHRoaXMuX2xhc3RDaGVja3BvaW50ID0gMDtcclxuICAgICAgICB0aGlzLl90b3RhbEJ5dGVzID0gdGhpcy5faW50ZXJ2YWxCeXRlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5fbGFzdFNlY29uZEJ5dGVzID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRCeXRlcyhieXRlcykge1xyXG4gICAgICAgIGlmICh0aGlzLl9maXJzdENoZWNrcG9pbnQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fZmlyc3RDaGVja3BvaW50ID0gdGhpcy5fbm93KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RDaGVja3BvaW50ID0gdGhpcy5fZmlyc3RDaGVja3BvaW50O1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbEJ5dGVzICs9IGJ5dGVzO1xyXG4gICAgICAgICAgICB0aGlzLl90b3RhbEJ5dGVzICs9IGJ5dGVzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm93KCkgLSB0aGlzLl9sYXN0Q2hlY2twb2ludCA8IDEwMDApIHtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxCeXRlcyArPSBieXRlcztcclxuICAgICAgICAgICAgdGhpcy5fdG90YWxCeXRlcyArPSBieXRlcztcclxuICAgICAgICB9IGVsc2UgeyAgLy8gZHVyYXRpb24gPj0gMTAwMFxyXG4gICAgICAgICAgICB0aGlzLl9sYXN0U2Vjb25kQnl0ZXMgPSB0aGlzLl9pbnRlcnZhbEJ5dGVzO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbEJ5dGVzID0gYnl0ZXM7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsQnl0ZXMgKz0gYnl0ZXM7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RDaGVja3BvaW50ID0gdGhpcy5fbm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXJyZW50S0JwcygpIHtcclxuICAgICAgICB0aGlzLmFkZEJ5dGVzKDApO1xyXG5cclxuICAgICAgICBsZXQgZHVyYXRpb25TZWNvbmRzID0gKHRoaXMuX25vdygpIC0gdGhpcy5fbGFzdENoZWNrcG9pbnQpIC8gMTAwMDtcclxuICAgICAgICBpZiAoZHVyYXRpb25TZWNvbmRzID09IDApIGR1cmF0aW9uU2Vjb25kcyA9IDE7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9pbnRlcnZhbEJ5dGVzIC8gZHVyYXRpb25TZWNvbmRzKSAvIDEwMjQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGxhc3RTZWNvbmRLQnBzKCkge1xyXG4gICAgICAgIHRoaXMuYWRkQnl0ZXMoMCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9sYXN0U2Vjb25kQnl0ZXMgIT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xhc3RTZWNvbmRCeXRlcyAvIDEwMjQ7XHJcbiAgICAgICAgfSBlbHNlIHsgIC8vIGxhc3RTZWNvbmRCeXRlcyA9PT0gMFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbm93KCkgLSB0aGlzLl9sYXN0Q2hlY2twb2ludCA+PSA1MDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRpbWUgaW50ZXJ2YWwgc2luY2UgbGFzdCBjaGVja3BvaW50IGhhcyBleGNlZWRlZCA1MDBtc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNwZWVkIGlzIG5lYXJseSBhY2N1cmF0ZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEtCcHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBrbm93XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgYXZlcmFnZUtCcHMoKSB7XHJcbiAgICAgICAgbGV0IGR1cmF0aW9uU2Vjb25kcyA9ICh0aGlzLl9ub3coKSAtIHRoaXMuX2ZpcnN0Q2hlY2twb2ludCkgLyAxMDAwO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5fdG90YWxCeXRlcyAvIGR1cmF0aW9uU2Vjb25kcykgLyAxMDI0O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3BlZWRTYW1wbGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7QmFzZUxvYWRlciwgTG9hZGVyU3RhdHVzLCBMb2FkZXJFcnJvcnN9IGZyb20gJy4vbG9hZGVyLmpzJztcclxuaW1wb3J0IHtSdW50aW1lRXhjZXB0aW9ufSBmcm9tICcuLi91dGlscy9leGNlcHRpb24uanMnO1xyXG5cclxuLy8gRm9yIEZMViBvdmVyIFdlYlNvY2tldCBsaXZlIHN0cmVhbVxyXG5jbGFzcyBXZWJTb2NrZXRMb2FkZXIgZXh0ZW5kcyBCYXNlTG9hZGVyIHtcclxuXHJcbiAgICBzdGF0aWMgaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2Ygc2VsZi5XZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ3dlYnNvY2tldC1sb2FkZXInKTtcclxuICAgICAgICB0aGlzLlRBRyA9ICdXZWJTb2NrZXRMb2FkZXInO1xyXG5cclxuICAgICAgICB0aGlzLl9uZWVkU3Rhc2ggPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLl93cyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVxdWVzdEFib3J0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZWRMZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3dzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YVNvdXJjZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCB3cyA9IHRoaXMuX3dzID0gbmV3IHNlbGYuV2ViU29ja2V0KGRhdGFTb3VyY2UudXJsKTtcclxuICAgICAgICAgICAgd3MuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XHJcbiAgICAgICAgICAgIHdzLm9ub3BlbiA9IHRoaXMuX29uV2ViU29ja2V0T3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB3cy5vbmNsb3NlID0gdGhpcy5fb25XZWJTb2NrZXRDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB3cy5vbm1lc3NhZ2UgPSB0aGlzLl9vbldlYlNvY2tldE1lc3NhZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgd3Mub25lcnJvciA9IHRoaXMuX29uV2ViU29ja2V0RXJyb3IuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rQ29ubmVjdGluZztcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rRXJyb3I7XHJcblxyXG4gICAgICAgICAgICBsZXQgaW5mbyA9IHtjb2RlOiBlLmNvZGUsIG1zZzogZS5tZXNzYWdlfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKExvYWRlckVycm9ycy5FWENFUFRJT04sIGluZm8pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFib3J0KCkge1xyXG4gICAgICAgIGxldCB3cyA9IHRoaXMuX3dzO1xyXG4gICAgICAgIGlmICh3cyAmJiAod3MucmVhZHlTdGF0ZSA9PT0gMCB8fCB3cy5yZWFkeVN0YXRlID09PSAxKSkgeyAgLy8gQ09OTkVDVElORyB8fCBPUEVOXHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RBYm9ydCA9IHRydWU7XHJcbiAgICAgICAgICAgIHdzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl93cyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtDb21wbGV0ZTtcclxuICAgIH1cclxuXHJcbiAgICBfb25XZWJTb2NrZXRPcGVuKGUpIHtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0J1ZmZlcmluZztcclxuICAgIH1cclxuXHJcbiAgICBfb25XZWJTb2NrZXRDbG9zZShlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3RBYm9ydCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZXF1ZXN0QWJvcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtDb21wbGV0ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX29uQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25Db21wbGV0ZSgwLCB0aGlzLl9yZWNlaXZlZExlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25XZWJTb2NrZXRNZXNzYWdlKGUpIHtcclxuICAgICAgICBpZiAoZS5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hBcnJheUJ1ZmZlcihlLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhIGluc3RhbmNlb2YgQmxvYikge1xyXG4gICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoQXJyYXlCdWZmZXIocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihlLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rRXJyb3I7XHJcbiAgICAgICAgICAgIGxldCBpbmZvID0ge2NvZGU6IC0xLCBtc2c6ICdVbnN1cHBvcnRlZCBXZWJTb2NrZXQgbWVzc2FnZSB0eXBlOiAnICsgZS5kYXRhLmNvbnN0cnVjdG9yLm5hbWV9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX29uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoTG9hZGVyRXJyb3JzLkVYQ0VQVElPTiwgaW5mbyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihpbmZvLm1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2Rpc3BhdGNoQXJyYXlCdWZmZXIoYXJyYXlidWZmZXIpIHtcclxuICAgICAgICBsZXQgY2h1bmsgPSBhcnJheWJ1ZmZlcjtcclxuICAgICAgICBsZXQgYnl0ZVN0YXJ0ID0gdGhpcy5fcmVjZWl2ZWRMZW5ndGg7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZWRMZW5ndGggKz0gY2h1bmsuYnl0ZUxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX29uRGF0YUFycml2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25EYXRhQXJyaXZhbChjaHVuaywgYnl0ZVN0YXJ0LCB0aGlzLl9yZWNlaXZlZExlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbldlYlNvY2tldEVycm9yKGUpIHtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0Vycm9yO1xyXG5cclxuICAgICAgICBsZXQgaW5mbyA9IHtcclxuICAgICAgICAgICAgY29kZTogZS5jb2RlLFxyXG4gICAgICAgICAgICBtc2c6IGUubWVzc2FnZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoTG9hZGVyRXJyb3JzLkVYQ0VQVElPTiwgaW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdlYlNvY2tldExvYWRlcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IExvZyBmcm9tICcuLi91dGlscy9sb2dnZXIuanMnO1xyXG5pbXBvcnQge0Jhc2VMb2FkZXIsIExvYWRlclN0YXR1cywgTG9hZGVyRXJyb3JzfSBmcm9tICcuL2xvYWRlci5qcyc7XHJcbmltcG9ydCB7UnVudGltZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbi8vIEZvciBGaXJlRm94IGJyb3dzZXIgd2hpY2ggc3VwcG9ydHMgYHhoci5yZXNwb25zZVR5cGUgPSAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInYFxyXG5jbGFzcyBNb3pDaHVua2VkTG9hZGVyIGV4dGVuZHMgQmFzZUxvYWRlciB7XHJcblxyXG4gICAgc3RhdGljIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgLy8gRmlyZWZveCAzNy0gcmVxdWlyZXMgLm9wZW4oKSB0byBiZSBjYWxsZWQgYmVmb3JlIHNldHRpbmcgcmVzcG9uc2VUeXBlXHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCAnaHR0cHM6Ly9leGFtcGxlLmNvbScsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJztcclxuICAgICAgICAgICAgcmV0dXJuICh4aHIucmVzcG9uc2VUeXBlID09PSAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIExvZy53KCdNb3pDaHVua2VkTG9hZGVyJywgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZWVrSGFuZGxlciwgY29uZmlnKSB7XHJcbiAgICAgICAgc3VwZXIoJ3hoci1tb3otY2h1bmtlZC1sb2FkZXInKTtcclxuICAgICAgICB0aGlzLlRBRyA9ICdNb3pDaHVua2VkTG9hZGVyJztcclxuXHJcbiAgICAgICAgdGhpcy5fc2Vla0hhbmRsZXIgPSBzZWVrSGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fbmVlZFN0YXNoID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5feGhyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0QWJvcnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9jb250ZW50TGVuZ3RoID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZWNlaXZlZExlbmd0aCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1dvcmtpbmcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl94aHIpIHtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3hoci5vbnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ubG9hZGVuZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3hoci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YVNvdXJjZSwgcmFuZ2UpIHtcclxuICAgICAgICB0aGlzLl9kYXRhU291cmNlID0gZGF0YVNvdXJjZTtcclxuICAgICAgICB0aGlzLl9yYW5nZSA9IHJhbmdlO1xyXG5cclxuICAgICAgICBsZXQgc291cmNlVVJMID0gZGF0YVNvdXJjZS51cmw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5yZXVzZVJlZGlyZWN0ZWRVUkwgJiYgZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzb3VyY2VVUkwgPSBkYXRhU291cmNlLnJlZGlyZWN0ZWRVUkw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2Vla0NvbmZpZyA9IHRoaXMuX3NlZWtIYW5kbGVyLmdldENvbmZpZyhzb3VyY2VVUkwsIHJhbmdlKTtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0VVJMID0gc2Vla0NvbmZpZy51cmw7XHJcblxyXG4gICAgICAgIGxldCB4aHIgPSB0aGlzLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHIub3BlbignR0VUJywgc2Vla0NvbmZpZy51cmwsIHRydWUpO1xyXG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInO1xyXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSB0aGlzLl9vblJlYWR5U3RhdGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB4aHIub25wcm9ncmVzcyA9IHRoaXMuX29uUHJvZ3Jlc3MuYmluZCh0aGlzKTtcclxuICAgICAgICB4aHIub25sb2FkZW5kID0gdGhpcy5fb25Mb2FkRW5kLmJpbmQodGhpcyk7XHJcbiAgICAgICAgeGhyLm9uZXJyb3IgPSB0aGlzLl9vblhockVycm9yLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIGNvcnMgaXMgYXV0byBkZXRlY3RlZCBhbmQgZW5hYmxlZCBieSB4aHJcclxuXHJcbiAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHRcclxuICAgICAgICBpZiAoZGF0YVNvdXJjZS53aXRoQ3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHNlZWtDb25maWcuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBzZWVrQ29uZmlnLmhlYWRlcnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIGFkZGl0aW9uYWwgaGVhZGVyc1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5fY29uZmlnLmhlYWRlcnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtDb25uZWN0aW5nO1xyXG4gICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVxdWVzdEFib3J0ID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5feGhyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3hoci5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xyXG4gICAgICAgIGxldCB4aHIgPSBlLnRhcmdldDtcclxuXHJcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSAyKSB7ICAvLyBIRUFERVJTX1JFQ0VJVkVEXHJcbiAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VVUkwgIT0gdW5kZWZpbmVkICYmIHhoci5yZXNwb25zZVVSTCAhPT0gdGhpcy5fcmVxdWVzdFVSTCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uVVJMUmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVkaXJlY3RlZFVSTCA9IHRoaXMuX3NlZWtIYW5kbGVyLnJlbW92ZVVSTFBhcmFtZXRlcnMoeGhyLnJlc3BvbnNlVVJMKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblVSTFJlZGlyZWN0KHJlZGlyZWN0ZWRVUkwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMCAmJiAoeGhyLnN0YXR1cyA8IDIwMCB8fCB4aHIuc3RhdHVzID4gMjk5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihMb2FkZXJFcnJvcnMuSFRUUF9TVEFUVVNfQ09ERV9JTlZBTElELCB7Y29kZTogeGhyLnN0YXR1cywgbXNnOiB4aHIuc3RhdHVzVGV4dH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbignTW96Q2h1bmtlZExvYWRlcjogSHR0cCBjb2RlIGludmFsaWQsICcgKyB4aHIuc3RhdHVzICsgJyAnICsgeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtCdWZmZXJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uUHJvZ3Jlc3MoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0dXMgPT09IExvYWRlclN0YXR1cy5rRXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIGVycm9yIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb250ZW50TGVuZ3RoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRvdGFsICE9PSBudWxsICYmIGUudG90YWwgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBlLnRvdGFsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uQ29udGVudExlbmd0aEtub3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Db250ZW50TGVuZ3RoS25vd24odGhpcy5fY29udGVudExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjaHVuayA9IGUudGFyZ2V0LnJlc3BvbnNlO1xyXG4gICAgICAgIGxldCBieXRlU3RhcnQgPSB0aGlzLl9yYW5nZS5mcm9tICsgdGhpcy5fcmVjZWl2ZWRMZW5ndGg7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZWRMZW5ndGggKz0gY2h1bmsuYnl0ZUxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX29uRGF0YUFycml2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25EYXRhQXJyaXZhbChjaHVuaywgYnl0ZVN0YXJ0LCB0aGlzLl9yZWNlaXZlZExlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbkxvYWRFbmQoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9yZXF1ZXN0QWJvcnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdEFib3J0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXR1cyA9PT0gTG9hZGVyU3RhdHVzLmtFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgICAgIGlmICh0aGlzLl9vbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uQ29tcGxldGUodGhpcy5fcmFuZ2UuZnJvbSwgdGhpcy5fcmFuZ2UuZnJvbSArIHRoaXMuX3JlY2VpdmVkTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vblhockVycm9yKGUpIHtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0Vycm9yO1xyXG4gICAgICAgIGxldCB0eXBlID0gMDtcclxuICAgICAgICBsZXQgaW5mbyA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb250ZW50TGVuZ3RoICYmIGUubG9hZGVkIDwgdGhpcy5fY29udGVudExlbmd0aCkge1xyXG4gICAgICAgICAgICB0eXBlID0gTG9hZGVyRXJyb3JzLkVBUkxZX0VPRjtcclxuICAgICAgICAgICAgaW5mbyA9IHtjb2RlOiAtMSwgbXNnOiAnTW96LUNodW5rZWQgc3RyZWFtIG1lZXQgRWFybHktRW9mJ307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9IExvYWRlckVycm9ycy5FWENFUFRJT047XHJcbiAgICAgICAgICAgIGluZm8gPSB7Y29kZTogLTEsIG1zZzogZS5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgZS50eXBlfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IodHlwZSwgaW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1vekNodW5rZWRMb2FkZXI7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcclxuaW1wb3J0IHtCYXNlTG9hZGVyLCBMb2FkZXJTdGF0dXMsIExvYWRlckVycm9yc30gZnJvbSAnLi9sb2FkZXIuanMnO1xyXG5pbXBvcnQge1J1bnRpbWVFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7XHJcblxyXG4vKiBOb3RpY2U6IG1zLXN0cmVhbSBtYXkgY2F1c2UgSUUvRWRnZSBicm93c2VyIGNyYXNoIGlmIHNlZWsgdG9vIGZyZXF1ZW50bHkhISFcclxuICogVGhlIGJyb3dzZXIgbWF5IGNyYXNoIGluIHdpbmluZXQuZGxsLiBEaXNhYmxlIGZvciBub3cuXHJcbiAqXHJcbiAqIEZvciBJRTExL0VkZ2UgYnJvd3NlciBieSBtaWNyb3NvZnQgd2hpY2ggc3VwcG9ydHMgYHhoci5yZXNwb25zZVR5cGUgPSAnbXMtc3RyZWFtJ2BcclxuICogTm90aWNlIHRoYXQgbXMtc3RyZWFtIEFQSSBzdWNrcy4gVGhlIGJ1ZmZlciBpcyBhbHdheXMgZXhwYW5kaW5nIGFsb25nIHdpdGggZG93bmxvYWRpbmcuXHJcbiAqXHJcbiAqIFdlIG5lZWQgdG8gYWJvcnQgdGhlIHhociBpZiBidWZmZXIgc2l6ZSBleGNlZWRlZCBsaW1pdCBzaXplIChlLmcuIDE2IE1pQiksIHRoZW4gZG8gcmVjb25uZWN0LlxyXG4gKiBpbiBvcmRlciB0byByZWxlYXNlIHByZXZpb3VzIEFycmF5QnVmZmVyIHRvIGF2b2lkIG1lbW9yeSBsZWFrXHJcbiAqXHJcbiAqIE90aGVyd2lzZSwgdGhlIEFycmF5QnVmZmVyIHdpbGwgaW5jcmVhc2UgdG8gYSB0ZXJyaWJsZSBzaXplIHRoYXQgZXF1YWxzIGZpbmFsIGZpbGUgc2l6ZS5cclxuICovXHJcbmNsYXNzIE1TU3RyZWFtTG9hZGVyIGV4dGVuZHMgQmFzZUxvYWRlciB7XHJcblxyXG4gICAgc3RhdGljIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5NU1N0cmVhbSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHNlbGYuTVNTdHJlYW1SZWFkZXIgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsICdodHRwczovL2V4YW1wbGUuY29tJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnbXMtc3RyZWFtJztcclxuICAgICAgICAgICAgcmV0dXJuICh4aHIucmVzcG9uc2VUeXBlID09PSAnbXMtc3RyZWFtJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBMb2cudygnTVNTdHJlYW1Mb2FkZXInLCBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlZWtIYW5kbGVyLCBjb25maWcpIHtcclxuICAgICAgICBzdXBlcigneGhyLW1zc3RyZWFtLWxvYWRlcicpO1xyXG4gICAgICAgIHRoaXMuVEFHID0gJ01TU3RyZWFtTG9hZGVyJztcclxuXHJcbiAgICAgICAgdGhpcy5fc2Vla0hhbmRsZXIgPSBzZWVrSGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fbmVlZFN0YXNoID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5feGhyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZWFkZXIgPSBudWxsOyAgLy8gTVNTdHJlYW1SZWFkZXJcclxuXHJcbiAgICAgICAgdGhpcy5fdG90YWxSYW5nZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJlcXVlc3RVUkwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRSZWRpcmVjdGVkVVJMID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVjZWl2ZWRMZW5ndGggPSAwO1xyXG5cclxuICAgICAgICB0aGlzLl9idWZmZXJMaW1pdCA9IDE2ICogMTAyNCAqIDEwMjQ7ICAvLyAxNk1CXHJcbiAgICAgICAgdGhpcy5fbGFzdFRpbWVCdWZmZXJTaXplID0gMDtcclxuICAgICAgICB0aGlzLl9pc1JlY29ubmVjdGluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNXb3JraW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fcmVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRlci5vbnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZGVyLm9ubG9hZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRlci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3hocikge1xyXG4gICAgICAgICAgICB0aGlzLl94aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YVNvdXJjZSwgcmFuZ2UpIHtcclxuICAgICAgICB0aGlzLl9pbnRlcm5hbE9wZW4oZGF0YVNvdXJjZSwgcmFuZ2UsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaW50ZXJuYWxPcGVuKGRhdGFTb3VyY2UsIHJhbmdlLCBpc1N1YnJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7XHJcblxyXG4gICAgICAgIGlmICghaXNTdWJyYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLl90b3RhbFJhbmdlID0gcmFuZ2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJhbmdlID0gcmFuZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc291cmNlVVJMID0gZGF0YVNvdXJjZS51cmw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5yZXVzZVJlZGlyZWN0ZWRVUkwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRSZWRpcmVjdGVkVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc291cmNlVVJMID0gdGhpcy5fY3VycmVudFJlZGlyZWN0ZWRVUkw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc291cmNlVVJMID0gZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2Vla0NvbmZpZyA9IHRoaXMuX3NlZWtIYW5kbGVyLmdldENvbmZpZyhzb3VyY2VVUkwsIHJhbmdlKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UmVxdWVzdFVSTCA9IHNlZWtDb25maWcudXJsO1xyXG5cclxuICAgICAgICBsZXQgcmVhZGVyID0gdGhpcy5fcmVhZGVyID0gbmV3IHNlbGYuTVNTdHJlYW1SZWFkZXIoKTtcclxuICAgICAgICByZWFkZXIub25wcm9ncmVzcyA9IHRoaXMuX21zck9uUHJvZ3Jlc3MuYmluZCh0aGlzKTtcclxuICAgICAgICByZWFkZXIub25sb2FkID0gdGhpcy5fbXNyT25Mb2FkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSB0aGlzLl9tc3JPbkVycm9yLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIGxldCB4aHIgPSB0aGlzLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHIub3BlbignR0VUJywgc2Vla0NvbmZpZy51cmwsIHRydWUpO1xyXG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnbXMtc3RyZWFtJztcclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gdGhpcy5feGhyT25SZWFkeVN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgeGhyLm9uZXJyb3IgPSB0aGlzLl94aHJPbkVycm9yLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChkYXRhU291cmNlLndpdGhDcmVkZW50aWFscykge1xyXG4gICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2Vla0NvbmZpZy5oZWFkZXJzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBsZXQgaGVhZGVycyA9IHNlZWtDb25maWcuaGVhZGVycztcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZGQgYWRkaXRpb25hbCBoZWFkZXJzXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jb25maWcuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSB0aGlzLl9jb25maWcuaGVhZGVycztcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5faXNSZWNvbm5lY3RpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNSZWNvbm5lY3RpbmcgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0Nvbm5lY3Rpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5faW50ZXJuYWxBYm9ydCgpO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rQ29tcGxldGU7XHJcbiAgICB9XHJcblxyXG4gICAgX2ludGVybmFsQWJvcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlYWRlcikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcmVhZGVyLnJlYWR5U3RhdGUgPT09IDEpIHsgIC8vIExPQURJTkdcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlYWRlci5hYm9ydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRlci5vbnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZGVyLm9ubG9hZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWRlci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3hocikge1xyXG4gICAgICAgICAgICB0aGlzLl94aHIuYWJvcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3hociA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF94aHJPblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xyXG4gICAgICAgIGxldCB4aHIgPSBlLnRhcmdldDtcclxuXHJcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSAyKSB7ICAvLyBIRUFERVJTX1JFQ0VJVkVEXHJcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtCdWZmZXJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVVSTCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVkaXJlY3RlZFVSTCA9IHRoaXMuX3NlZWtIYW5kbGVyLnJlbW92ZVVSTFBhcmFtZXRlcnMoeGhyLnJlc3BvbnNlVVJMKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVVJMICE9PSB0aGlzLl9jdXJyZW50UmVxdWVzdFVSTCAmJiByZWRpcmVjdGVkVVJMICE9PSB0aGlzLl9jdXJyZW50UmVkaXJlY3RlZFVSTCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50UmVkaXJlY3RlZFVSTCA9IHJlZGlyZWN0ZWRVUkw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vblVSTFJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblVSTFJlZGlyZWN0KHJlZGlyZWN0ZWRVUkwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsZW5ndGhIZWFkZXIgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoSGVhZGVyICE9IG51bGwgJiYgdGhpcy5fY29udGVudExlbmd0aCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHBhcnNlSW50KGxlbmd0aEhlYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGVudExlbmd0aCA9IGxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uQ29udGVudExlbmd0aEtub3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93bih0aGlzLl9jb250ZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rRXJyb3I7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoTG9hZGVyRXJyb3JzLkhUVFBfU1RBVFVTX0NPREVfSU5WQUxJRCwge2NvZGU6IHhoci5zdGF0dXMsIG1zZzogeGhyLnN0YXR1c1RleHR9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oJ01TU3RyZWFtTG9hZGVyOiBIdHRwIGNvZGUgaW52YWxpZCwgJyArIHhoci5zdGF0dXMgKyAnICcgKyB4aHIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHhoci5yZWFkeVN0YXRlID09PSAzKSB7ICAvLyBMT0FESU5HXHJcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtCdWZmZXJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG1zc3RyZWFtID0geGhyLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKG1zc3RyZWFtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfeGhyT25FcnJvcihlKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICBsZXQgdHlwZSA9IExvYWRlckVycm9ycy5FWENFUFRJT047XHJcbiAgICAgICAgbGV0IGluZm8gPSB7Y29kZTogLTEsIG1zZzogZS5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgZS50eXBlfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX29uRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5fb25FcnJvcih0eXBlLCBpbmZvKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihpbmZvLm1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9tc3JPblByb2dyZXNzKGUpIHtcclxuICAgICAgICBsZXQgcmVhZGVyID0gZS50YXJnZXQ7XHJcbiAgICAgICAgbGV0IGJpZ2J1ZmZlciA9IHJlYWRlci5yZXN1bHQ7XHJcbiAgICAgICAgaWYgKGJpZ2J1ZmZlciA9PSBudWxsKSB7ICAvLyByZXN1bHQgbWF5IGJlIG51bGwsIHdvcmthcm91bmQgZm9yIGJ1Z2d5IE0kXHJcbiAgICAgICAgICAgIHRoaXMuX2RvUmVjb25uZWN0SWZOZWVkZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNsaWNlID0gYmlnYnVmZmVyLnNsaWNlKHRoaXMuX2xhc3RUaW1lQnVmZmVyU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fbGFzdFRpbWVCdWZmZXJTaXplID0gYmlnYnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgbGV0IGJ5dGVTdGFydCA9IHRoaXMuX3RvdGFsUmFuZ2UuZnJvbSArIHRoaXMuX3JlY2VpdmVkTGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX3JlY2VpdmVkTGVuZ3RoICs9IHNsaWNlLmJ5dGVMZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkRhdGFBcnJpdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRGF0YUFycml2YWwoc2xpY2UsIGJ5dGVTdGFydCwgdGhpcy5fcmVjZWl2ZWRMZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJpZ2J1ZmZlci5ieXRlTGVuZ3RoID49IHRoaXMuX2J1ZmZlckxpbWl0KSB7XHJcbiAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCBgTVNTdHJlYW0gYnVmZmVyIGV4Y2VlZGVkIG1heCBzaXplIG5lYXIgJHtieXRlU3RhcnQgKyBzbGljZS5ieXRlTGVuZ3RofSwgcmVjb25uZWN0aW5nLi4uYCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvUmVjb25uZWN0SWZOZWVkZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2RvUmVjb25uZWN0SWZOZWVkZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRMZW5ndGggPT0gbnVsbCB8fCB0aGlzLl9yZWNlaXZlZExlbmd0aCA8IHRoaXMuX2NvbnRlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNSZWNvbm5lY3RpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0VGltZUJ1ZmZlclNpemUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcm5hbEFib3J0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiB0aGlzLl90b3RhbFJhbmdlLmZyb20gKyB0aGlzLl9yZWNlaXZlZExlbmd0aCxcclxuICAgICAgICAgICAgICAgIHRvOiAtMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcm5hbE9wZW4odGhpcy5fZGF0YVNvdXJjZSwgcmFuZ2UsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfbXNyT25Mb2FkKGUpIHsgIC8vIGFjdHVhbGx5IGl0IGlzIG9uQ29tcGxldGUgZXZlbnRcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgICAgIGlmICh0aGlzLl9vbkNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uQ29tcGxldGUodGhpcy5fdG90YWxSYW5nZS5mcm9tLCB0aGlzLl90b3RhbFJhbmdlLmZyb20gKyB0aGlzLl9yZWNlaXZlZExlbmd0aCAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfbXNyT25FcnJvcihlKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICBsZXQgdHlwZSA9IDA7XHJcbiAgICAgICAgbGV0IGluZm8gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCAmJiB0aGlzLl9yZWNlaXZlZExlbmd0aCA8IHRoaXMuX2NvbnRlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgdHlwZSA9IExvYWRlckVycm9ycy5FQVJMWV9FT0Y7XHJcbiAgICAgICAgICAgIGluZm8gPSB7Y29kZTogLTEsIG1zZzogJ01TU3RyZWFtIG1lZXQgRWFybHktRW9mJ307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9IExvYWRlckVycm9ycy5FQVJMWV9FT0Y7XHJcbiAgICAgICAgICAgIGluZm8gPSB7Y29kZTogLTEsIG1zZzogZS5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgZS50eXBlfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IodHlwZSwgaW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTVNTdHJlYW1Mb2FkZXI7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcclxuaW1wb3J0IFNwZWVkU2FtcGxlciBmcm9tICcuL3NwZWVkLXNhbXBsZXIuanMnO1xyXG5pbXBvcnQge0Jhc2VMb2FkZXIsIExvYWRlclN0YXR1cywgTG9hZGVyRXJyb3JzfSBmcm9tICcuL2xvYWRlci5qcyc7XHJcbmltcG9ydCB7UnVudGltZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbi8vIFVuaXZlcnNhbCBJTyBMb2FkZXIsIGltcGxlbWVudGVkIGJ5IGFkZGluZyBSYW5nZSBoZWFkZXIgaW4geGhyJ3MgcmVxdWVzdCBoZWFkZXJcclxuY2xhc3MgUmFuZ2VMb2FkZXIgZXh0ZW5kcyBCYXNlTG9hZGVyIHtcclxuXHJcbiAgICBzdGF0aWMgaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgJ2h0dHBzOi8vZXhhbXBsZS5jb20nLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XHJcbiAgICAgICAgICAgIHJldHVybiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gJ2FycmF5YnVmZmVyJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBMb2cudygnUmFuZ2VMb2FkZXInLCBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlZWtIYW5kbGVyLCBjb25maWcpIHtcclxuICAgICAgICBzdXBlcigneGhyLXJhbmdlLWxvYWRlcicpO1xyXG4gICAgICAgIHRoaXMuVEFHID0gJ1JhbmdlTG9hZGVyJztcclxuXHJcbiAgICAgICAgdGhpcy5fc2Vla0hhbmRsZXIgPSBzZWVrSGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fbmVlZFN0YXNoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX2NodW5rU2l6ZUtCTGlzdCA9IFtcclxuICAgICAgICAgICAgMTI4LCAyNTYsIDM4NCwgNTEyLCA3NjgsIDEwMjQsIDE1MzYsIDIwNDgsIDMwNzIsIDQwOTYsIDUxMjAsIDYxNDQsIDcxNjgsIDgxOTJcclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRDaHVua1NpemVLQiA9IDM4NDtcclxuICAgICAgICB0aGlzLl9jdXJyZW50U3BlZWROb3JtYWxpemVkID0gMDtcclxuICAgICAgICB0aGlzLl96ZXJvU3BlZWRDaHVua0NvdW50ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5feGhyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9zcGVlZFNhbXBsZXIgPSBuZXcgU3BlZWRTYW1wbGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlcXVlc3RBYm9ydCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3dhaXRGb3JUb3RhbExlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3RvdGFsTGVuZ3RoUmVjZWl2ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5fY3VycmVudFJlcXVlc3RVUkwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRSZWRpcmVjdGVkVVJMID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UmVxdWVzdFJhbmdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl90b3RhbExlbmd0aCA9IG51bGw7ICAvLyBzaXplIG9mIHRoZSBlbnRpcmUgZmlsZVxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSBudWxsOyAgLy8gQ29udGVudC1MZW5ndGggb2YgZW50aXJlIHJlcXVlc3QgcmFuZ2VcclxuICAgICAgICB0aGlzLl9yZWNlaXZlZExlbmd0aCA9IDA7ICAvLyB0b3RhbCByZWNlaXZlZCBieXRlc1xyXG4gICAgICAgIHRoaXMuX2xhc3RUaW1lTG9hZGVkID0gMDsgIC8vIHJlY2VpdmVkIGJ5dGVzIG9mIGN1cnJlbnQgcmVxdWVzdCBzdWItcmFuZ2VcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzV29ya2luZygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3hocikge1xyXG4gICAgICAgICAgICB0aGlzLl94aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ucHJvZ3Jlc3MgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl94aHIub25sb2FkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl94aHIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1cnJlbnRTcGVlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3BlZWRTYW1wbGVyLmxhc3RTZWNvbmRLQnBzO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YVNvdXJjZSwgcmFuZ2UpIHtcclxuICAgICAgICB0aGlzLl9kYXRhU291cmNlID0gZGF0YVNvdXJjZTtcclxuICAgICAgICB0aGlzLl9yYW5nZSA9IHJhbmdlO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IExvYWRlclN0YXR1cy5rQ29ubmVjdGluZztcclxuXHJcbiAgICAgICAgbGV0IHVzZVJlZlRvdGFsTGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RhdGFTb3VyY2UuZmlsZXNpemUgIT0gdW5kZWZpbmVkICYmIHRoaXMuX2RhdGFTb3VyY2UuZmlsZXNpemUgIT09IDApIHtcclxuICAgICAgICAgICAgdXNlUmVmVG90YWxMZW5ndGggPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl90b3RhbExlbmd0aCA9IHRoaXMuX2RhdGFTb3VyY2UuZmlsZXNpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3RvdGFsTGVuZ3RoUmVjZWl2ZWQgJiYgIXVzZVJlZlRvdGFsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG90YWwgZmlsZXNpemVcclxuICAgICAgICAgICAgdGhpcy5fd2FpdEZvclRvdGFsTGVuZ3RoID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxPcGVuKHRoaXMuX2RhdGFTb3VyY2UsIHtmcm9tOiAwLCB0bzogLTF9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXZSBoYXZlIGZpbGVzaXplLCBzdGFydCBsb2FkaW5nXHJcbiAgICAgICAgICAgIHRoaXMuX29wZW5TdWJSYW5nZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb3BlblN1YlJhbmdlKCkge1xyXG4gICAgICAgIGxldCBjaHVua1NpemUgPSB0aGlzLl9jdXJyZW50Q2h1bmtTaXplS0IgKiAxMDI0O1xyXG5cclxuICAgICAgICBsZXQgZnJvbSA9IHRoaXMuX3JhbmdlLmZyb20gKyB0aGlzLl9yZWNlaXZlZExlbmd0aDtcclxuICAgICAgICBsZXQgdG8gPSBmcm9tICsgY2h1bmtTaXplO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICh0byAtIHRoaXMuX3JhbmdlLmZyb20gPj0gdGhpcy5fY29udGVudExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdG8gPSB0aGlzLl9yYW5nZS5mcm9tICsgdGhpcy5fY29udGVudExlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRSZXF1ZXN0UmFuZ2UgPSB7ZnJvbSwgdG99O1xyXG4gICAgICAgIHRoaXMuX2ludGVybmFsT3Blbih0aGlzLl9kYXRhU291cmNlLCB0aGlzLl9jdXJyZW50UmVxdWVzdFJhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaW50ZXJuYWxPcGVuKGRhdGFTb3VyY2UsIHJhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5fbGFzdFRpbWVMb2FkZWQgPSAwO1xyXG5cclxuICAgICAgICBsZXQgc291cmNlVVJMID0gZGF0YVNvdXJjZS51cmw7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5yZXVzZVJlZGlyZWN0ZWRVUkwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRSZWRpcmVjdGVkVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc291cmNlVVJMID0gdGhpcy5fY3VycmVudFJlZGlyZWN0ZWRVUkw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc291cmNlVVJMID0gZGF0YVNvdXJjZS5yZWRpcmVjdGVkVVJMO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2Vla0NvbmZpZyA9IHRoaXMuX3NlZWtIYW5kbGVyLmdldENvbmZpZyhzb3VyY2VVUkwsIHJhbmdlKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50UmVxdWVzdFVSTCA9IHNlZWtDb25maWcudXJsO1xyXG5cclxuICAgICAgICBsZXQgeGhyID0gdGhpcy5feGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHNlZWtDb25maWcudXJsLCB0cnVlKTtcclxuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gdGhpcy5fb25SZWFkeVN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgeGhyLm9ucHJvZ3Jlc3MgPSB0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgeGhyLm9ubG9hZCA9IHRoaXMuX29uTG9hZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5vbmVycm9yID0gdGhpcy5fb25YaHJFcnJvci5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAoZGF0YVNvdXJjZS53aXRoQ3JlZGVudGlhbHMpIHtcclxuICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHNlZWtDb25maWcuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgbGV0IGhlYWRlcnMgPSBzZWVrQ29uZmlnLmhlYWRlcnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWRkIGFkZGl0aW9uYWwgaGVhZGVyc1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gdGhpcy5fY29uZmlnLmhlYWRlcnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0QWJvcnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2ludGVybmFsQWJvcnQoKTtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbnRlcm5hbEFib3J0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl94aHIpIHtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3hoci5vbnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyLm9ubG9hZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3hoci5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5feGhyLmFib3J0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3hociA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xyXG4gICAgICAgIGxldCB4aHIgPSBlLnRhcmdldDtcclxuXHJcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSAyKSB7ICAvLyBIRUFERVJTX1JFQ0VJVkVEXHJcbiAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VVUkwgIT0gdW5kZWZpbmVkKSB7ICAvLyBpZiB0aGUgYnJvd3NlciBzdXBwb3J0IHRoaXMgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgIGxldCByZWRpcmVjdGVkVVJMID0gdGhpcy5fc2Vla0hhbmRsZXIucmVtb3ZlVVJMUGFyYW1ldGVycyh4aHIucmVzcG9uc2VVUkwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVVSTCAhPT0gdGhpcy5fY3VycmVudFJlcXVlc3RVUkwgJiYgcmVkaXJlY3RlZFVSTCAhPT0gdGhpcy5fY3VycmVudFJlZGlyZWN0ZWRVUkwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50UmVkaXJlY3RlZFVSTCA9IHJlZGlyZWN0ZWRVUkw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uVVJMUmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25VUkxSZWRpcmVjdChyZWRpcmVjdGVkVVJMKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fd2FpdEZvclRvdGFsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtCdWZmZXJpbmc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0Vycm9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKExvYWRlckVycm9ycy5IVFRQX1NUQVRVU19DT0RFX0lOVkFMSUQsIHtjb2RlOiB4aHIuc3RhdHVzLCBtc2c6IHhoci5zdGF0dXNUZXh0fSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCdSYW5nZUxvYWRlcjogSHR0cCBjb2RlIGludmFsaWQsICcgKyB4aHIuc3RhdHVzICsgJyAnICsgeGhyLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vblByb2dyZXNzKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBMb2FkZXJTdGF0dXMua0Vycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBlcnJvciByZXNwb25zZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgb3Blbk5leHRSYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3dhaXRGb3JUb3RhbExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2FpdEZvclRvdGFsTGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b3RhbExlbmd0aFJlY2VpdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9wZW5OZXh0UmFuZ2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IGUudG90YWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcm5hbEFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG90YWwgIT0gbnVsbCAmIHRvdGFsICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG90YWxMZW5ndGggPSB0b3RhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGN1cnJyZW50IHJlcXVlc3QgcmFuZ2UncyBjb250ZW50TGVuZ3RoXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yYW5nZS50byA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSB0aGlzLl90b3RhbExlbmd0aCAtIHRoaXMuX3JhbmdlLmZyb207XHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAvLyB0byAhPT0gLTFcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRMZW5ndGggPSB0aGlzLl9yYW5nZS50byAtIHRoaXMuX3JhbmdlLmZyb20gKyAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3Blbk5leHRSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3BlblN1YlJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX29uQ29udGVudExlbmd0aEtub3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkNvbnRlbnRMZW5ndGhLbm93bih0aGlzLl9jb250ZW50TGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRlbHRhID0gZS5sb2FkZWQgLSB0aGlzLl9sYXN0VGltZUxvYWRlZDtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZUxvYWRlZCA9IGUubG9hZGVkO1xyXG4gICAgICAgIHRoaXMuX3NwZWVkU2FtcGxlci5hZGRCeXRlcyhkZWx0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX25vcm1hbGl6ZVNwZWVkKGlucHV0KSB7XHJcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9jaHVua1NpemVLQkxpc3Q7XHJcbiAgICAgICAgbGV0IGxhc3QgPSBsaXN0Lmxlbmd0aCAtIDE7XHJcbiAgICAgICAgbGV0IG1pZCA9IDA7XHJcbiAgICAgICAgbGV0IGxib3VuZCA9IDA7XHJcbiAgICAgICAgbGV0IHVib3VuZCA9IGxhc3Q7XHJcblxyXG4gICAgICAgIGlmIChpbnB1dCA8IGxpc3RbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xyXG4gICAgICAgICAgICBtaWQgPSBsYm91bmQgKyBNYXRoLmZsb29yKCh1Ym91bmQgLSBsYm91bmQpIC8gMik7XHJcbiAgICAgICAgICAgIGlmIChtaWQgPT09IGxhc3QgfHwgKGlucHV0ID49IGxpc3RbbWlkXSAmJiBpbnB1dCA8IGxpc3RbbWlkICsgMV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFttaWRdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXSA8IGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25Mb2FkKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBMb2FkZXJTdGF0dXMua0Vycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBlcnJvciByZXNwb25zZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fd2FpdEZvclRvdGFsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dhaXRGb3JUb3RhbExlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9sYXN0VGltZUxvYWRlZCA9IDA7XHJcbiAgICAgICAgbGV0IEtCcHMgPSB0aGlzLl9zcGVlZFNhbXBsZXIubGFzdFNlY29uZEtCcHM7XHJcbiAgICAgICAgaWYgKEtCcHMgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5femVyb1NwZWVkQ2h1bmtDb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5femVyb1NwZWVkQ2h1bmtDb3VudCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUcnkgZ2V0IGN1cnJlbnRLQnBzIGFmdGVyIDMgY2h1bmtzXHJcbiAgICAgICAgICAgICAgICBLQnBzID0gdGhpcy5fc3BlZWRTYW1wbGVyLmN1cnJlbnRLQnBzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoS0JwcyAhPT0gMCkge1xyXG4gICAgICAgICAgICBsZXQgbm9ybWFsaXplZCA9IHRoaXMuX25vcm1hbGl6ZVNwZWVkKEtCcHMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudFNwZWVkTm9ybWFsaXplZCAhPT0gbm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFNwZWVkTm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Q2h1bmtTaXplS0IgPSBub3JtYWxpemVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2h1bmsgPSBlLnRhcmdldC5yZXNwb25zZTtcclxuICAgICAgICBsZXQgYnl0ZVN0YXJ0ID0gdGhpcy5fcmFuZ2UuZnJvbSArIHRoaXMuX3JlY2VpdmVkTGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX3JlY2VpdmVkTGVuZ3RoICs9IGNodW5rLmJ5dGVMZW5ndGg7XHJcblxyXG4gICAgICAgIGxldCByZXBvcnRDb21wbGV0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCAhPSBudWxsICYmIHRoaXMuX3JlY2VpdmVkTGVuZ3RoIDwgdGhpcy5fY29udGVudExlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBjb250aW51ZSBsb2FkIG5leHQgY2h1bmtcclxuICAgICAgICAgICAgdGhpcy5fb3BlblN1YlJhbmdlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVwb3J0Q29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGlzcGF0Y2ggcmVjZWl2ZWQgY2h1bmtcclxuICAgICAgICBpZiAodGhpcy5fb25EYXRhQXJyaXZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkRhdGFBcnJpdmFsKGNodW5rLCBieXRlU3RhcnQsIHRoaXMuX3JlY2VpdmVkTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXBvcnRDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBMb2FkZXJTdGF0dXMua0NvbXBsZXRlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb25Db21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25Db21wbGV0ZSh0aGlzLl9yYW5nZS5mcm9tLCB0aGlzLl9yYW5nZS5mcm9tICsgdGhpcy5fcmVjZWl2ZWRMZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfb25YaHJFcnJvcihlKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gTG9hZGVyU3RhdHVzLmtFcnJvcjtcclxuICAgICAgICBsZXQgdHlwZSA9IDA7XHJcbiAgICAgICAgbGV0IGluZm8gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY29udGVudExlbmd0aCAmJiB0aGlzLl9yZWNlaXZlZExlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLl9yZWNlaXZlZExlbmd0aCA8IHRoaXMuX2NvbnRlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgdHlwZSA9IExvYWRlckVycm9ycy5FQVJMWV9FT0Y7XHJcbiAgICAgICAgICAgIGluZm8gPSB7Y29kZTogLTEsIG1zZzogJ1JhbmdlTG9hZGVyIG1lZXQgRWFybHktRW9mJ307XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9IExvYWRlckVycm9ycy5FWENFUFRJT047XHJcbiAgICAgICAgICAgIGluZm8gPSB7Y29kZTogLTEsIG1zZzogZS5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgZS50eXBlfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IodHlwZSwgaW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oaW5mby5tc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJhbmdlTG9hZGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50cyc7XHJcbmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJztcclxuaW1wb3J0IEJyb3dzZXIgZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci5qcyc7XHJcbmltcG9ydCBQbGF5ZXJFdmVudHMgZnJvbSAnLi9wbGF5ZXItZXZlbnRzLmpzJztcclxuaW1wb3J0IFRyYW5zbXV4ZXIgZnJvbSAnLi4vY29yZS90cmFuc211eGVyLmpzJztcclxuaW1wb3J0IFRyYW5zbXV4aW5nRXZlbnRzIGZyb20gJy4uL2NvcmUvdHJhbnNtdXhpbmctZXZlbnRzLmpzJztcclxuaW1wb3J0IE1TRUNvbnRyb2xsZXIgZnJvbSAnLi4vY29yZS9tc2UtY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBNU0VFdmVudHMgZnJvbSAnLi4vY29yZS9tc2UtZXZlbnRzLmpzJztcclxuaW1wb3J0IHtFcnJvclR5cGVzLCBFcnJvckRldGFpbHN9IGZyb20gJy4vcGxheWVyLWVycm9ycy5qcyc7XHJcbmltcG9ydCB7Y3JlYXRlRGVmYXVsdENvbmZpZ30gZnJvbSAnLi4vY29uZmlnLmpzJztcclxuaW1wb3J0IHtJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24sIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbmNsYXNzIEZsdlBsYXllciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWVkaWFEYXRhU291cmNlLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLlRBRyA9ICdGbHZQbGF5ZXInO1xyXG4gICAgICAgIHRoaXMuX3R5cGUgPSAnRmx2UGxheWVyJztcclxuICAgICAgICB0aGlzLl9lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjcmVhdGVEZWZhdWx0Q29uZmlnKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fY29uZmlnLCBjb25maWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1lZGlhRGF0YVNvdXJjZS50eXBlLnRvTG93ZXJDYXNlKCkgIT09ICdmbHYnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oJ0ZsdlBsYXllciByZXF1aXJlcyBhbiBmbHYgTWVkaWFEYXRhU291cmNlIGlucHV0IScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1lZGlhRGF0YVNvdXJjZS5pc0xpdmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmlzTGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmUgPSB7XHJcbiAgICAgICAgICAgIG9udkxvYWRlZE1ldGFkYXRhOiB0aGlzLl9vbnZMb2FkZWRNZXRhZGF0YS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbnZTZWVraW5nOiB0aGlzLl9vbnZTZWVraW5nLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9udkNhblBsYXk6IHRoaXMuX29udkNhblBsYXkuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb252U3RhbGxlZDogdGhpcy5fb252U3RhbGxlZC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBvbnZQcm9ncmVzczogdGhpcy5fb252UHJvZ3Jlc3MuYmluZCh0aGlzKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChzZWxmLnBlcmZvcm1hbmNlICYmIHNlbGYucGVyZm9ybWFuY2Uubm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdyA9IHNlbGYucGVyZm9ybWFuY2Uubm93LmJpbmQoc2VsZi5wZXJmb3JtYW5jZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbm93ID0gRGF0ZS5ub3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9wZW5kaW5nU2Vla1RpbWUgPSBudWxsOyAgLy8gaW4gc2Vjb25kc1xyXG4gICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2Vla3BvaW50UmVjb3JkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wcm9ncmVzc0NoZWNrZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYURhdGFTb3VyY2UgPSBtZWRpYURhdGFTb3VyY2U7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9tc2VjdGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9tc2VTb3VyY2VPcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nTG9hZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JlY2VpdmVkQ2FuUGxheSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYUluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3N0YXRpc3RpY3NJbmZvID0gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IGNocm9tZU5lZWRJRFJGaXggPSAoQnJvd3Nlci5jaHJvbWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChCcm93c2VyLnZlcnNpb24ubWFqb3IgPCA1MCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJyb3dzZXIudmVyc2lvbi5tYWpvciA9PT0gNTAgJiYgQnJvd3Nlci52ZXJzaW9uLmJ1aWxkIDwgMjY2MSkpKTtcclxuICAgICAgICB0aGlzLl9hbHdheXNTZWVrS2V5ZnJhbWUgPSAoY2hyb21lTmVlZElEUkZpeCB8fCBCcm93c2VyLm1zZWRnZSB8fCBCcm93c2VyLm1zaWUpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYWx3YXlzU2Vla0tleWZyYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5hY2N1cmF0ZVNlZWsgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fcHJvZ3Jlc3NDaGVja2VyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcHJvZ3Jlc3NDaGVja2VyKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDaGVja2VyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zbXV4ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy51bmxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmRldGFjaE1lZGlhRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21lZGlhRGF0YVNvdXJjZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50ID09PSBQbGF5ZXJFdmVudHMuTUVESUFfSU5GTykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVkaWFJbmZvICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuTUVESUFfSU5GTywgdGhpcy5tZWRpYUluZm8pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBQbGF5ZXJFdmVudHMuU1RBVElTVElDU19JTkZPKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0aXN0aWNzSW5mbyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoUGxheWVyRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTywgdGhpcy5zdGF0aXN0aWNzSW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbWl0dGVyLmFkZExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhdHRhY2hNZWRpYUVsZW1lbnQobWVkaWFFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50ID0gbWVkaWFFbGVtZW50O1xyXG4gICAgICAgIG1lZGlhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIHRoaXMuZS5vbnZMb2FkZWRNZXRhZGF0YSk7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3NlZWtpbmcnLCB0aGlzLmUub252U2Vla2luZyk7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCB0aGlzLmUub252Q2FuUGxheSk7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N0YWxsZWQnLCB0aGlzLmUub252U3RhbGxlZCk7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdGhpcy5lLm9udlByb2dyZXNzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbXNlY3RsID0gbmV3IE1TRUNvbnRyb2xsZXIodGhpcy5fY29uZmlnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbXNlY3RsLm9uKE1TRUV2ZW50cy5VUERBVEVfRU5ELCB0aGlzLl9vbm1zZVVwZGF0ZUVuZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLl9tc2VjdGwub24oTVNFRXZlbnRzLkJVRkZFUl9GVUxMLCB0aGlzLl9vbm1zZUJ1ZmZlckZ1bGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5fbXNlY3RsLm9uKE1TRUV2ZW50cy5TT1VSQ0VfT1BFTiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9tc2VTb3VyY2VPcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faGFzUGVuZGluZ0xvYWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc1BlbmRpbmdMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX21zZWN0bC5vbihNU0VFdmVudHMuRVJST1IsIChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcnJvclR5cGVzLk1FRElBX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3JEZXRhaWxzLk1FRElBX01TRV9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fbXNlY3RsLmF0dGFjaE1lZGlhRWxlbWVudChtZWRpYUVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ1NlZWtUaW1lICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG1lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IHRoaXMuX3BlbmRpbmdTZWVrVGltZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWVrVGltZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElFMTEgbWF5IHRocm93IEludmFsaWRTdGF0ZUVycm9yIGlmIHJlYWR5U3RhdGUgPT09IDBcclxuICAgICAgICAgICAgICAgIC8vIFdlIGNhbiBkZWZlciBzZXQgY3VycmVudFRpbWUgb3BlcmF0aW9uIGFmdGVyIGxvYWRlZG1ldGFkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGV0YWNoTWVkaWFFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbXNlY3RsLmRldGFjaE1lZGlhRWxlbWVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCB0aGlzLmUub252TG9hZGVkTWV0YWRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Vla2luZycsIHRoaXMuZS5vbnZTZWVraW5nKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCB0aGlzLmUub252Q2FuUGxheSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGFsbGVkJywgdGhpcy5lLm9udlN0YWxsZWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCB0aGlzLmUub252UHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fbXNlY3RsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21zZWN0bC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21zZWN0bCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignSFRNTE1lZGlhRWxlbWVudCBtdXN0IGJlIGF0dGFjaGVkIGJlZm9yZSBsb2FkKCkhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl90cmFuc211eGVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0ZsdlBsYXllci5sb2FkKCkgaGFzIGJlZW4gY2FsbGVkLCBwbGVhc2UgY2FsbCB1bmxvYWQoKSBmaXJzdCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc1BlbmRpbmdMb2FkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuZGVmZXJMb2FkQWZ0ZXJTb3VyY2VPcGVuICYmIHRoaXMuX21zZVNvdXJjZU9wZW5lZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5faGFzUGVuZGluZ0xvYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50LnJlYWR5U3RhdGUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gSUUxMSBtYXkgdGhyb3cgSW52YWxpZFN0YXRlRXJyb3IgaWYgcmVhZHlTdGF0ZSA9PT0gMFxyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlciA9IG5ldyBUcmFuc211eGVyKHRoaXMuX21lZGlhRGF0YVNvdXJjZSwgdGhpcy5fY29uZmlnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vbihUcmFuc211eGluZ0V2ZW50cy5JTklUX1NFR01FTlQsICh0eXBlLCBpcykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9tc2VjdGwuYXBwZW5kSW5pdFNlZ21lbnQoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIub24oVHJhbnNtdXhpbmdFdmVudHMuTUVESUFfU0VHTUVOVCwgKHR5cGUsIG1zKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21zZWN0bC5hcHBlbmRNZWRpYVNlZ21lbnQobXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gbGF6eUxvYWQgY2hlY2tcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5sYXp5TG9hZCAmJiAhdGhpcy5fY29uZmlnLmlzTGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1zLmluZm8uZW5kRHRzID49IChjdXJyZW50VGltZSArIHRoaXMuX2NvbmZpZy5sYXp5TG9hZE1heER1cmF0aW9uKSAqIDEwMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcHJvZ3Jlc3NDaGVja2VyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9nLnYodGhpcy5UQUcsICdNYXhpbXVtIGJ1ZmZlcmluZyBkdXJhdGlvbiBleGNlZWRlZCwgc3VzcGVuZCB0cmFuc211eGluZyB0YXNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N1c3BlbmRUcmFuc211eGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vbihUcmFuc211eGluZ0V2ZW50cy5MT0FESU5HX0NPTVBMRVRFLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21zZWN0bC5lbmRPZlN0cmVhbSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoUGxheWVyRXZlbnRzLkxPQURJTkdfQ09NUExFVEUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIub24oVHJhbnNtdXhpbmdFdmVudHMuUkVDT1ZFUkVEX0VBUkxZX0VPRiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoUGxheWVyRXZlbnRzLlJFQ09WRVJFRF9FQVJMWV9FT0YpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIub24oVHJhbnNtdXhpbmdFdmVudHMuSU9fRVJST1IsIChkZXRhaWwsIGluZm8pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFBsYXllckV2ZW50cy5FUlJPUiwgRXJyb3JUeXBlcy5ORVRXT1JLX0VSUk9SLCBkZXRhaWwsIGluZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIub24oVHJhbnNtdXhpbmdFdmVudHMuREVNVVhfRVJST1IsIChkZXRhaWwsIGluZm8pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFBsYXllckV2ZW50cy5FUlJPUiwgRXJyb3JUeXBlcy5NRURJQV9FUlJPUiwgZGV0YWlsLCB7Y29kZTogLTEsIG1zZzogaW5mb30pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIub24oVHJhbnNtdXhpbmdFdmVudHMuTUVESUFfSU5GTywgKG1lZGlhSW5mbykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8gPSBtZWRpYUluZm87XHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuTUVESUFfSU5GTywgT2JqZWN0LmFzc2lnbih7fSwgbWVkaWFJbmZvKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vbihUcmFuc211eGluZ0V2ZW50cy5NRVRBREFUQV9BUlJJVkVELCAobWV0YWRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFBsYXllckV2ZW50cy5NRVRBREFUQV9BUlJJVkVELCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vbihUcmFuc211eGluZ0V2ZW50cy5TQ1JJUFREQVRBX0FSUklWRUQsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuU0NSSVBUREFUQV9BUlJJVkVELCBkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl90cmFuc211eGVyLm9uKFRyYW5zbXV4aW5nRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTywgKHN0YXRJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NJbmZvID0gdGhpcy5fZmlsbFN0YXRpc3RpY3NJbmZvKHN0YXRJbmZvKTtcclxuICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFBsYXllckV2ZW50cy5TVEFUSVNUSUNTX0lORk8sIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3N0YXRpc3RpY3NJbmZvKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vbihUcmFuc211eGluZ0V2ZW50cy5SRUNPTU1FTkRfU0VFS1BPSU5ULCAobWlsbGlzZWNvbmRzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQgJiYgIXRoaXMuX2NvbmZpZy5hY2N1cmF0ZVNlZWspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IG1pbGxpc2Vjb25kcyAvIDEwMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5sb2FkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9tc2VjdGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fbXNlY3RsLnNlZWsoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl90cmFuc211eGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zbXV4ZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwbGF5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUVsZW1lbnQucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBidWZmZXJlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVkaWFFbGVtZW50LmJ1ZmZlcmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkdXJhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVkaWFFbGVtZW50LmR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2b2x1bWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lZGlhRWxlbWVudC52b2x1bWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHZvbHVtZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC52b2x1bWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbXV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lZGlhRWxlbWVudC5tdXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgbXV0ZWQobXV0ZWQpIHtcclxuICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQubXV0ZWQgPSBtdXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3VycmVudFRpbWUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY3VycmVudFRpbWUoc2Vjb25kcykge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxTZWVrKHNlY29uZHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWVrVGltZSA9IHNlY29uZHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBtZWRpYUluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX21lZGlhSW5mbyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN0YXRpc3RpY3NJbmZvKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zdGF0aXN0aWNzSW5mbyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NJbmZvID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N0YXRpc3RpY3NJbmZvID0gdGhpcy5fZmlsbFN0YXRpc3RpY3NJbmZvKHRoaXMuX3N0YXRpc3RpY3NJbmZvKTtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fc3RhdGlzdGljc0luZm8pO1xyXG4gICAgfVxyXG5cclxuICAgIF9maWxsU3RhdGlzdGljc0luZm8oc3RhdEluZm8pIHtcclxuICAgICAgICBzdGF0SW5mby5wbGF5ZXJUeXBlID0gdGhpcy5fdHlwZTtcclxuXHJcbiAgICAgICAgaWYgKCEodGhpcy5fbWVkaWFFbGVtZW50IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhhc1F1YWxpdHlJbmZvID0gdHJ1ZTtcclxuICAgICAgICBsZXQgZGVjb2RlZCA9IDA7XHJcbiAgICAgICAgbGV0IGRyb3BwZWQgPSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50LmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KSB7XHJcbiAgICAgICAgICAgIGxldCBxdWFsaXR5ID0gdGhpcy5fbWVkaWFFbGVtZW50LmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7XHJcbiAgICAgICAgICAgIGRlY29kZWQgPSBxdWFsaXR5LnRvdGFsVmlkZW9GcmFtZXM7XHJcbiAgICAgICAgICAgIGRyb3BwZWQgPSBxdWFsaXR5LmRyb3BwZWRWaWRlb0ZyYW1lcztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREZWNvZGVkRnJhbWVDb3VudCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVjb2RlZCA9IHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREZWNvZGVkRnJhbWVDb3VudDtcclxuICAgICAgICAgICAgZHJvcHBlZCA9IHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREcm9wcGVkRnJhbWVDb3VudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoYXNRdWFsaXR5SW5mbyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGhhc1F1YWxpdHlJbmZvKSB7XHJcbiAgICAgICAgICAgIHN0YXRJbmZvLmRlY29kZWRGcmFtZXMgPSBkZWNvZGVkO1xyXG4gICAgICAgICAgICBzdGF0SW5mby5kcm9wcGVkRnJhbWVzID0gZHJvcHBlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0SW5mbztcclxuICAgIH1cclxuXHJcbiAgICBfb25tc2VVcGRhdGVFbmQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcubGF6eUxvYWQgfHwgdGhpcy5fY29uZmlnLmlzTGl2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYnVmZmVyZWQgPSB0aGlzLl9tZWRpYUVsZW1lbnQuYnVmZmVyZWQ7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIGxldCBjdXJyZW50UmFuZ2VTdGFydCA9IDA7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRSYW5nZUVuZCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gYnVmZmVyZWQuc3RhcnQoaSk7XHJcbiAgICAgICAgICAgIGxldCBlbmQgPSBidWZmZXJlZC5lbmQoaSk7XHJcbiAgICAgICAgICAgIGlmIChzdGFydCA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFJhbmdlU3RhcnQgPSBzdGFydDtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSYW5nZUVuZCA9IGVuZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY3VycmVudFJhbmdlRW5kID49IGN1cnJlbnRUaW1lICsgdGhpcy5fY29uZmlnLmxhenlMb2FkTWF4RHVyYXRpb24gJiYgdGhpcy5fcHJvZ3Jlc3NDaGVja2VyID09IG51bGwpIHtcclxuICAgICAgICAgICAgTG9nLnYodGhpcy5UQUcsICdNYXhpbXVtIGJ1ZmZlcmluZyBkdXJhdGlvbiBleGNlZWRlZCwgc3VzcGVuZCB0cmFuc211eGluZyB0YXNrJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1c3BlbmRUcmFuc211eGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbm1zZUJ1ZmZlckZ1bGwoKSB7XHJcbiAgICAgICAgTG9nLnYodGhpcy5UQUcsICdNU0UgU291cmNlQnVmZmVyIGlzIGZ1bGwsIHN1c3BlbmQgdHJhbnNtdXhpbmcgdGFzaycpO1xyXG4gICAgICAgIGlmICh0aGlzLl9wcm9ncmVzc0NoZWNrZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdXNwZW5kVHJhbnNtdXhlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc3VzcGVuZFRyYW5zbXV4ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RyYW5zbXV4ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5wYXVzZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Byb2dyZXNzQ2hlY2tlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzc0NoZWNrZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5fY2hlY2tQcm9ncmVzc0FuZFJlc3VtZS5iaW5kKHRoaXMpLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tQcm9ncmVzc0FuZFJlc3VtZSgpIHtcclxuICAgICAgICBsZXQgY3VycmVudFRpbWUgPSB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWU7XHJcbiAgICAgICAgbGV0IGJ1ZmZlcmVkID0gdGhpcy5fbWVkaWFFbGVtZW50LmJ1ZmZlcmVkO1xyXG5cclxuICAgICAgICBsZXQgbmVlZFJlc3VtZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmcm9tID0gYnVmZmVyZWQuc3RhcnQoaSk7XHJcbiAgICAgICAgICAgIGxldCB0byA9IGJ1ZmZlcmVkLmVuZChpKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGZyb20gJiYgY3VycmVudFRpbWUgPCB0bykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IHRvIC0gdGhpcy5fY29uZmlnLmxhenlMb2FkUmVjb3ZlckR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZFJlc3VtZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5lZWRSZXN1bWUpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcHJvZ3Jlc3NDaGVja2VyKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDaGVja2VyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKG5lZWRSZXN1bWUpIHtcclxuICAgICAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCAnQ29udGludWUgbG9hZGluZyBmcm9tIHBhdXNlZCBwb3NpdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNtdXhlci5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaXNUaW1lcG9pbnRCdWZmZXJlZChzZWNvbmRzKSB7XHJcbiAgICAgICAgbGV0IGJ1ZmZlcmVkID0gdGhpcy5fbWVkaWFFbGVtZW50LmJ1ZmZlcmVkO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmcm9tID0gYnVmZmVyZWQuc3RhcnQoaSk7XHJcbiAgICAgICAgICAgIGxldCB0byA9IGJ1ZmZlcmVkLmVuZChpKTtcclxuICAgICAgICAgICAgaWYgKHNlY29uZHMgPj0gZnJvbSAmJiBzZWNvbmRzIDwgdG8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfaW50ZXJuYWxTZWVrKHNlY29uZHMpIHtcclxuICAgICAgICBsZXQgZGlyZWN0U2VlayA9IHRoaXMuX2lzVGltZXBvaW50QnVmZmVyZWQoc2Vjb25kcyk7XHJcblxyXG4gICAgICAgIGxldCBkaXJlY3RTZWVrQmVnaW4gPSBmYWxzZTtcclxuICAgICAgICBsZXQgZGlyZWN0U2Vla0JlZ2luVGltZSA9IDA7XHJcblxyXG4gICAgICAgIGlmIChzZWNvbmRzIDwgMS4wICYmIHRoaXMuX21lZGlhRWxlbWVudC5idWZmZXJlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCB2aWRlb0JlZ2luVGltZSA9IHRoaXMuX21lZGlhRWxlbWVudC5idWZmZXJlZC5zdGFydCgwKTtcclxuICAgICAgICAgICAgaWYgKCh2aWRlb0JlZ2luVGltZSA8IDEuMCAmJiBzZWNvbmRzIDwgdmlkZW9CZWdpblRpbWUpIHx8IEJyb3dzZXIuc2FmYXJpKSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3RTZWVrQmVnaW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxzbyB3b3JrYXJvdW5kIGZvciBTYWZhcmk6IFNlZWsgdG8gMCBtYXkgY2F1c2UgdmlkZW8gc3R1Y2ssIHVzZSAwLjEgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgIGRpcmVjdFNlZWtCZWdpblRpbWUgPSBCcm93c2VyLnNhZmFyaSA/IDAuMSA6IHZpZGVvQmVnaW5UaW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGlyZWN0U2Vla0JlZ2luKSB7ICAvLyBzZWVrIHRvIHZpZGVvIGJlZ2luLCBzZXQgY3VycmVudFRpbWUgZGlyZWN0bHkgaWYgYmVnaW5QVFMgYnVmZmVyZWRcclxuICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFNldFRpbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSBkaXJlY3RTZWVrQmVnaW5UaW1lO1xyXG4gICAgICAgIH0gIGVsc2UgaWYgKGRpcmVjdFNlZWspIHsgIC8vIGJ1ZmZlcmVkIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fYWx3YXlzU2Vla0tleWZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0U2V0VGltZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSBzZWNvbmRzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlkciA9IHRoaXMuX21zZWN0bC5nZXROZWFyZXN0S2V5ZnJhbWUoTWF0aC5mbG9vcihzZWNvbmRzICogMTAwMCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFNldFRpbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lID0gaWRyLmR0cyAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IHNlY29uZHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Byb2dyZXNzQ2hlY2tlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja1Byb2dyZXNzQW5kUmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvZ3Jlc3NDaGVja2VyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3Byb2dyZXNzQ2hlY2tlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzc0NoZWNrZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX21zZWN0bC5zZWVrKHNlY29uZHMpO1xyXG4gICAgICAgICAgICB0aGlzLl90cmFuc211eGVyLnNlZWsoTWF0aC5mbG9vcihzZWNvbmRzICogMTAwMCkpOyAgLy8gaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gc2V0IG1lZGlhRWxlbWVudC5jdXJyZW50VGltZSBpZiBub24tYWNjdXJhdGVTZWVrLFxyXG4gICAgICAgICAgICAvLyBqdXN0IHdhaXQgZm9yIHRoZSByZWNvbW1lbmRfc2Vla3BvaW50IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb25maWcuYWNjdXJhdGVTZWVrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0U2V0VGltZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSBzZWNvbmRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0FuZEFwcGx5VW5idWZmZXJlZFNlZWtwb2ludCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2Vla3BvaW50UmVjb3JkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWVrcG9pbnRSZWNvcmQucmVjb3JkVGltZSA8PSB0aGlzLl9ub3coKSAtIDEwMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlZWtwb2ludFJlY29yZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVGltZXBvaW50QnVmZmVyZWQodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wcm9ncmVzc0NoZWNrZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3Byb2dyZXNzQ2hlY2tlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzQ2hlY2tlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC5jdXJyZW50VGltZSBpcyBjb25zaXN0cyB3aXRoIC5idWZmZXJlZCB0aW1lc3RhbXBcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUvRWRnZSB1c2UgRFRTLCB3aGlsZSBGaXJlRm94L1NhZmFyaSB1c2UgUFRTXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbXNlY3RsLnNlZWsodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc211eGVyLnNlZWsoTWF0aC5mbG9vcih0YXJnZXQgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnRUaW1lIGlmIGFjY3VyYXRlU2Vlaywgb3Igd2FpdCBmb3IgcmVjb21tZW5kX3NlZWtwb2ludCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb25maWcuYWNjdXJhdGVTZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX2NoZWNrQW5kQXBwbHlVbmJ1ZmZlcmVkU2Vla3BvaW50LmJpbmQodGhpcyksIDUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tBbmRSZXN1bWVTdHVja1BsYXliYWNrKHN0YWxsZWQpIHtcclxuICAgICAgICBsZXQgbWVkaWEgPSB0aGlzLl9tZWRpYUVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHN0YWxsZWQgfHwgIXRoaXMuX3JlY2VpdmVkQ2FuUGxheSB8fCBtZWRpYS5yZWFkeVN0YXRlIDwgMikgeyAgLy8gSEFWRV9DVVJSRU5UX0RBVEFcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlcmVkID0gbWVkaWEuYnVmZmVyZWQ7XHJcbiAgICAgICAgICAgIGlmIChidWZmZXJlZC5sZW5ndGggPiAwICYmIG1lZGlhLmN1cnJlbnRUaW1lIDwgYnVmZmVyZWQuc3RhcnQoMCkpIHtcclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgUGxheWJhY2sgc2VlbXMgc3R1Y2sgYXQgJHttZWRpYS5jdXJyZW50VGltZX0sIHNlZWsgdG8gJHtidWZmZXJlZC5zdGFydCgwKX1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IGJ1ZmZlcmVkLnN0YXJ0KDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdGhpcy5lLm9udlByb2dyZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFBsYXliYWNrIGRpZG4ndCBzdHVjaywgcmVtb3ZlIHByb2dyZXNzIGV2ZW50IGxpc3RlbmVyXHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHRoaXMuZS5vbnZQcm9ncmVzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9vbnZMb2FkZWRNZXRhZGF0YShlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdTZWVrVGltZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IHRoaXMuX3BlbmRpbmdTZWVrVGltZTtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NlZWtUaW1lID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29udlNlZWtpbmcoZSkgeyAgLy8gaGFuZGxlIHNlZWtpbmcgcmVxdWVzdCBmcm9tIGJyb3dzZXIncyBwcm9ncmVzcyBiYXJcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIGxldCBidWZmZXJlZCA9IHRoaXMuX21lZGlhRWxlbWVudC5idWZmZXJlZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlcXVlc3RTZXRUaW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0YXJnZXQgPCAxLjAgJiYgYnVmZmVyZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBzZWVrIHRvIHZpZGVvIGJlZ2luLCBzZXQgY3VycmVudFRpbWUgZGlyZWN0bHkgaWYgYmVnaW5QVFMgYnVmZmVyZWRcclxuICAgICAgICAgICAgbGV0IHZpZGVvQmVnaW5UaW1lID0gYnVmZmVyZWQuc3RhcnQoMCk7XHJcbiAgICAgICAgICAgIGlmICgodmlkZW9CZWdpblRpbWUgPCAxLjAgJiYgdGFyZ2V0IDwgdmlkZW9CZWdpblRpbWUpIHx8IEJyb3dzZXIuc2FmYXJpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0U2V0VGltZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBhbHNvIHdvcmthcm91bmQgZm9yIFNhZmFyaTogU2VlayB0byAwIG1heSBjYXVzZSB2aWRlbyBzdHVjaywgdXNlIDAuMSB0byBhdm9pZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LmN1cnJlbnRUaW1lID0gQnJvd3Nlci5zYWZhcmkgPyAwLjEgOiB2aWRlb0JlZ2luVGltZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVGltZXBvaW50QnVmZmVyZWQodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWx3YXlzU2Vla0tleWZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWRyID0gdGhpcy5fbXNlY3RsLmdldE5lYXJlc3RLZXlmcmFtZShNYXRoLmZsb29yKHRhcmdldCAqIDEwMDApKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZHIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RTZXRUaW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSBpZHIuZHRzIC8gMTAwMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fcHJvZ3Jlc3NDaGVja2VyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrUHJvZ3Jlc3NBbmRSZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9zZWVrcG9pbnRSZWNvcmQgPSB7XHJcbiAgICAgICAgICAgIHNlZWtQb2ludDogdGFyZ2V0LFxyXG4gICAgICAgICAgICByZWNvcmRUaW1lOiB0aGlzLl9ub3coKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5fY2hlY2tBbmRBcHBseVVuYnVmZmVyZWRTZWVrcG9pbnQuYmluZCh0aGlzKSwgNTApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbnZDYW5QbGF5KGUpIHtcclxuICAgICAgICB0aGlzLl9yZWNlaXZlZENhblBsYXkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgdGhpcy5lLm9udkNhblBsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbnZTdGFsbGVkKGUpIHtcclxuICAgICAgICB0aGlzLl9jaGVja0FuZFJlc3VtZVN0dWNrUGxheWJhY2sodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29udlByb2dyZXNzKGUpIHtcclxuICAgICAgICB0aGlzLl9jaGVja0FuZFJlc3VtZVN0dWNrUGxheWJhY2soKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZsdlBsYXllcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xyXG5pbXBvcnQgUGxheWVyRXZlbnRzIGZyb20gJy4vcGxheWVyLWV2ZW50cy5qcyc7XHJcbmltcG9ydCB7Y3JlYXRlRGVmYXVsdENvbmZpZ30gZnJvbSAnLi4vY29uZmlnLmpzJztcclxuaW1wb3J0IHtJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24sIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcbi8vIFBsYXllciB3cmFwcGVyIGZvciBicm93c2VyJ3MgbmF0aXZlIHBsYXllciAoSFRNTFZpZGVvRWxlbWVudCkgd2l0aG91dCBNZWRpYVNvdXJjZSBzcmMuIFxyXG5jbGFzcyBOYXRpdmVQbGF5ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lZGlhRGF0YVNvdXJjZSwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5UQUcgPSAnTmF0aXZlUGxheWVyJztcclxuICAgICAgICB0aGlzLl90eXBlID0gJ05hdGl2ZVBsYXllcic7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY3JlYXRlRGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX2NvbmZpZywgY29uZmlnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtZWRpYURhdGFTb3VyY2UudHlwZS50b0xvd2VyQ2FzZSgpID09PSAnZmx2Jykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdOYXRpdmVQbGF5ZXIgZG9lc1xcJ3Qgc3VwcG9ydCBmbHYgTWVkaWFEYXRhU291cmNlIGlucHV0IScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWVkaWFEYXRhU291cmNlLmhhc093blByb3BlcnR5KCdzZWdtZW50cycpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oYE5hdGl2ZVBsYXllcigke21lZGlhRGF0YVNvdXJjZS50eXBlfSkgZG9lc24ndCBzdXBwb3J0IG11bHRpcGFydCBwbGF5YmFjayFgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZSA9IHtcclxuICAgICAgICAgICAgb252TG9hZGVkTWV0YWRhdGE6IHRoaXMuX29udkxvYWRlZE1ldGFkYXRhLmJpbmQodGhpcylcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9wZW5kaW5nU2Vla1RpbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX21lZGlhRGF0YVNvdXJjZSA9IG1lZGlhRGF0YVNvdXJjZTtcclxuICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnVubG9hZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRldGFjaE1lZGlhRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21lZGlhRGF0YVNvdXJjZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9lbWl0dGVyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoZXZlbnQgPT09IFBsYXllckV2ZW50cy5NRURJQV9JTkZPKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQgIT0gbnVsbCAmJiB0aGlzLl9tZWRpYUVsZW1lbnQucmVhZHlTdGF0ZSAhPT0gMCkgeyAgLy8gSEFWRV9OT1RISU5HXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoUGxheWVyRXZlbnRzLk1FRElBX0lORk8sIHRoaXMubWVkaWFJbmZvKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gUGxheWVyRXZlbnRzLlNUQVRJU1RJQ1NfSU5GTykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50ICE9IG51bGwgJiYgdGhpcy5fbWVkaWFFbGVtZW50LnJlYWR5U3RhdGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuU1RBVElTVElDU19JTkZPLCB0aGlzLnN0YXRpc3RpY3NJbmZvKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuYWRkTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGF0dGFjaE1lZGlhRWxlbWVudChtZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQgPSBtZWRpYUVsZW1lbnQ7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgdGhpcy5lLm9udkxvYWRlZE1ldGFkYXRhKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdTZWVrVGltZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBtZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSB0aGlzLl9wZW5kaW5nU2Vla1RpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nU2Vla1RpbWUgPSBudWxsO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJRTExIG1heSB0aHJvdyBJbnZhbGlkU3RhdGVFcnJvciBpZiByZWFkeVN0YXRlID09PSAwXHJcbiAgICAgICAgICAgICAgICAvLyBEZWZlciBzZXQgY3VycmVudFRpbWUgb3BlcmF0aW9uIGFmdGVyIGxvYWRlZG1ldGFkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGV0YWNoTWVkaWFFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnNyYyA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgdGhpcy5lLm9udkxvYWRlZE1ldGFkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignSFRNTE1lZGlhRWxlbWVudCBtdXN0IGJlIGF0dGFjaGVkIGJlZm9yZSBsb2FkKCkhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5zcmMgPSB0aGlzLl9tZWRpYURhdGFTb3VyY2UudXJsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50LnJlYWR5U3RhdGUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucHJlbG9hZCA9ICdhdXRvJztcclxuICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQubG9hZCgpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IHdpbmRvdy5zZXRJbnRlcnZhbChcclxuICAgICAgICAgICAgdGhpcy5fcmVwb3J0U3RhdGlzdGljc0luZm8uYmluZCh0aGlzKSxcclxuICAgICAgICB0aGlzLl9jb25maWcuc3RhdGlzdGljc0luZm9SZXBvcnRJbnRlcnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5sb2FkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnNyYyA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXRpc3RpY3NSZXBvcnRlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBsYXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lZGlhRWxlbWVudC5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnBhdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGJ1ZmZlcmVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUVsZW1lbnQuYnVmZmVyZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGR1cmF0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUVsZW1lbnQuZHVyYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHZvbHVtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVkaWFFbGVtZW50LnZvbHVtZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdm9sdW1lKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fbWVkaWFFbGVtZW50LnZvbHVtZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtdXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVkaWFFbGVtZW50Lm11dGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBtdXRlZChtdXRlZCkge1xyXG4gICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5tdXRlZCA9IG11dGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjdXJyZW50VGltZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjdXJyZW50VGltZShzZWNvbmRzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21lZGlhRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tZWRpYUVsZW1lbnQuY3VycmVudFRpbWUgPSBzZWNvbmRzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdTZWVrVGltZSA9IHNlY29uZHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBtZWRpYUluZm8oKSB7XHJcbiAgICAgICAgbGV0IG1lZGlhUHJlZml4ID0gKHRoaXMuX21lZGlhRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxBdWRpb0VsZW1lbnQpID8gJ2F1ZGlvLycgOiAndmlkZW8vJztcclxuICAgICAgICBsZXQgaW5mbyA9IHtcclxuICAgICAgICAgICAgbWltZVR5cGU6IG1lZGlhUHJlZml4ICsgdGhpcy5fbWVkaWFEYXRhU291cmNlLnR5cGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaW5mby5kdXJhdGlvbiA9IE1hdGguZmxvb3IodGhpcy5fbWVkaWFFbGVtZW50LmR1cmF0aW9uICogMTAwMCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbmZvLndpZHRoID0gdGhpcy5fbWVkaWFFbGVtZW50LnZpZGVvV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpbmZvLmhlaWdodCA9IHRoaXMuX21lZGlhRWxlbWVudC52aWRlb0hlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5mbztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3RhdGlzdGljc0luZm8oKSB7XHJcbiAgICAgICAgbGV0IGluZm8gPSB7XHJcbiAgICAgICAgICAgIHBsYXllclR5cGU6IHRoaXMuX3R5cGUsXHJcbiAgICAgICAgICAgIHVybDogdGhpcy5fbWVkaWFEYXRhU291cmNlLnVybFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICghKHRoaXMuX21lZGlhRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGhhc1F1YWxpdHlJbmZvID0gdHJ1ZTtcclxuICAgICAgICBsZXQgZGVjb2RlZCA9IDA7XHJcbiAgICAgICAgbGV0IGRyb3BwZWQgPSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbWVkaWFFbGVtZW50LmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KSB7XHJcbiAgICAgICAgICAgIGxldCBxdWFsaXR5ID0gdGhpcy5fbWVkaWFFbGVtZW50LmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7XHJcbiAgICAgICAgICAgIGRlY29kZWQgPSBxdWFsaXR5LnRvdGFsVmlkZW9GcmFtZXM7XHJcbiAgICAgICAgICAgIGRyb3BwZWQgPSBxdWFsaXR5LmRyb3BwZWRWaWRlb0ZyYW1lcztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREZWNvZGVkRnJhbWVDb3VudCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVjb2RlZCA9IHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREZWNvZGVkRnJhbWVDb3VudDtcclxuICAgICAgICAgICAgZHJvcHBlZCA9IHRoaXMuX21lZGlhRWxlbWVudC53ZWJraXREcm9wcGVkRnJhbWVDb3VudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoYXNRdWFsaXR5SW5mbyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGhhc1F1YWxpdHlJbmZvKSB7XHJcbiAgICAgICAgICAgIGluZm8uZGVjb2RlZEZyYW1lcyA9IGRlY29kZWQ7XHJcbiAgICAgICAgICAgIGluZm8uZHJvcHBlZEZyYW1lcyA9IGRyb3BwZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBpbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbnZMb2FkZWRNZXRhZGF0YShlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdTZWVrVGltZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21lZGlhRWxlbWVudC5jdXJyZW50VGltZSA9IHRoaXMuX3BlbmRpbmdTZWVrVGltZTtcclxuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1NlZWtUaW1lID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KFBsYXllckV2ZW50cy5NRURJQV9JTkZPLCB0aGlzLm1lZGlhSW5mbyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlcG9ydFN0YXRpc3RpY3NJbmZvKCkge1xyXG4gICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChQbGF5ZXJFdmVudHMuU1RBVElTVElDU19JTkZPLCB0aGlzLnN0YXRpc3RpY3NJbmZvKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5hdGl2ZVBsYXllcjsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtMb2FkZXJFcnJvcnN9IGZyb20gJy4uL2lvL2xvYWRlci5qcyc7XHJcbmltcG9ydCBEZW11eEVycm9ycyBmcm9tICcuLi9kZW11eC9kZW11eC1lcnJvcnMuanMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEVycm9yVHlwZXMgPSB7XHJcbiAgICBORVRXT1JLX0VSUk9SOiAnTmV0d29ya0Vycm9yJyxcclxuICAgIE1FRElBX0VSUk9SOiAnTWVkaWFFcnJvcicsXHJcbiAgICBPVEhFUl9FUlJPUjogJ090aGVyRXJyb3InXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgRXJyb3JEZXRhaWxzID0ge1xyXG4gICAgTkVUV09SS19FWENFUFRJT046IExvYWRlckVycm9ycy5FWENFUFRJT04sXHJcbiAgICBORVRXT1JLX1NUQVRVU19DT0RFX0lOVkFMSUQ6IExvYWRlckVycm9ycy5IVFRQX1NUQVRVU19DT0RFX0lOVkFMSUQsXHJcbiAgICBORVRXT1JLX1RJTUVPVVQ6IExvYWRlckVycm9ycy5DT05ORUNUSU5HX1RJTUVPVVQsXHJcbiAgICBORVRXT1JLX1VOUkVDT1ZFUkFCTEVfRUFSTFlfRU9GOiBMb2FkZXJFcnJvcnMuVU5SRUNPVkVSQUJMRV9FQVJMWV9FT0YsXHJcblxyXG4gICAgTUVESUFfTVNFX0VSUk9SOiAnTWVkaWFNU0VFcnJvcicsXHJcblxyXG4gICAgTUVESUFfRk9STUFUX0VSUk9SOiBEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsXHJcbiAgICBNRURJQV9GT1JNQVRfVU5TVVBQT1JURUQ6IERlbXV4RXJyb3JzLkZPUk1BVF9VTlNVUFBPUlRFRCxcclxuICAgIE1FRElBX0NPREVDX1VOU1VQUE9SVEVEOiBEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRFxyXG59OyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jb25zdCBQbGF5ZXJFdmVudHMgPSB7XHJcbiAgICBFUlJPUjogJ2Vycm9yJyxcclxuICAgIExPQURJTkdfQ09NUExFVEU6ICdsb2FkaW5nX2NvbXBsZXRlJyxcclxuICAgIFJFQ09WRVJFRF9FQVJMWV9FT0Y6ICdyZWNvdmVyZWRfZWFybHlfZW9mJyxcclxuICAgIE1FRElBX0lORk86ICdtZWRpYV9pbmZvJyxcclxuICAgIE1FVEFEQVRBX0FSUklWRUQ6ICdtZXRhZGF0YV9hcnJpdmVkJyxcclxuICAgIFNDUklQVERBVEFfQVJSSVZFRDogJ3NjcmlwdGRhdGFfYXJyaXZlZCcsXHJcbiAgICBTVEFUSVNUSUNTX0lORk86ICdzdGF0aXN0aWNzX2luZm8nXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXJFdmVudHM7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBUaGlzIGZpbGUgaXMgbW9kaWZpZWQgZnJvbSBkYWlseW1vdGlvbidzIGhscy5qcyBsaWJyYXJ5IChobHMuanMvc3JjL2hlbHBlci9hYWMuanMpXHJcbiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuY2xhc3MgQUFDIHtcclxuXHJcbiAgICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUoY29kZWMsIGNoYW5uZWxDb3VudCkge1xyXG4gICAgICAgIGlmIChjb2RlYyA9PT0gJ21wNGEuNDAuMicpIHtcclxuICAgICAgICAgICAgLy8gaGFuZGxlIExDLUFBQ1xyXG4gICAgICAgICAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjMsIDB4ODBdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgyMSwgMHgwMCwgMHg0OSwgMHg5MCwgMHgwMiwgMHgxOSwgMHgwMCwgMHgyMywgMHg4MF0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDhlXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODAsIDB4MmMsIDB4ODAsIDB4MDgsIDB4MDIsIDB4MzhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgzOF0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDAwLCAweGIyLCAweDAwLCAweDIwLCAweDA4LCAweGUwXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBoYW5kbGUgSEUtQUFDIChtcDRhLjQwLjUgLyBtcDRhLjQwLjI5KVxyXG4gICAgICAgICAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmZm1wZWcgLXkgLWYgbGF2ZmkgLWkgXCJhZXZhbHNyYz0wOmQ9MC4wNVwiIC1jOmEgbGliZmRrX2FhYyAtcHJvZmlsZTphIGFhY19oZSAtYjphIDRrIG91dHB1dC5hYWMgJiYgaGV4ZHVtcCAtdiAtZSAnMTYvMSBcIjB4JXgsXCIgXCJcXG5cIicgLXYgb3V0cHV0LmFhY1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDEsIDB4NDAsIDB4MjIsIDB4ODAsIDB4YTMsIDB4NGUsIDB4ZTYsIDB4ODAsIDB4YmEsIDB4OCwgMHgwLCAweDAsIDB4MCwgMHgxYywgMHg2LCAweGYxLCAweGMxLCAweGEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWVdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIC8vIGZmbXBlZyAteSAtZiBsYXZmaSAtaSBcImFldmFsc3JjPTB8MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGVfdjIgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgJzE2LzEgXCIweCV4LFwiIFwiXFxuXCInIC12IG91dHB1dC5hYWNcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDVlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MCwgMHg5NSwgMHgwLCAweDYsIDB4ZjEsIDB4YTEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgLy8gZmZtcGVnIC15IC1mIGxhdmZpIC1pIFwiYWV2YWxzcmM9MHwwfDA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlX3YyIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lICcxNi8xIFwiMHgleCxcIiBcIlxcblwiJyAtdiBvdXRwdXQuYWFjXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MSwgMHg0MCwgMHgyMiwgMHg4MCwgMHhhMywgMHg1ZSwgMHhlNiwgMHg4MCwgMHhiYSwgMHg4LCAweDAsIDB4MCwgMHgwLCAweDAsIDB4OTUsIDB4MCwgMHg2LCAweGYxLCAweGExLCAweGEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWVdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFBQzsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgZmlsZSBpcyBkZXJpdmVkIGZyb20gZGFpbHltb3Rpb24ncyBobHMuanMgbGlicmFyeSAoaGxzLmpzL3NyYy9yZW11eC9tcDQtZ2VuZXJhdG9yLmpzKVxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbi8vICBNUDQgYm94ZXMgZ2VuZXJhdG9yIGZvciBJU08gQk1GRiAoSVNPIEJhc2UgTWVkaWEgRmlsZSBGb3JtYXQsIGRlZmluZWQgaW4gSVNPL0lFQyAxNDQ5Ni0xMilcclxuY2xhc3MgTVA0IHtcclxuXHJcbiAgICBzdGF0aWMgaW5pdCgpIHtcclxuICAgICAgICBNUDQudHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGF2YzE6IFtdLCBhdmNDOiBbXSwgYnRydDogW10sIGRpbmY6IFtdLFxyXG4gICAgICAgICAgICBkcmVmOiBbXSwgZXNkczogW10sIGZ0eXA6IFtdLCBoZGxyOiBbXSxcclxuICAgICAgICAgICAgbWRhdDogW10sIG1kaGQ6IFtdLCBtZGlhOiBbXSwgbWZoZDogW10sXHJcbiAgICAgICAgICAgIG1pbmY6IFtdLCBtb29mOiBbXSwgbW9vdjogW10sIG1wNGE6IFtdLFxyXG4gICAgICAgICAgICBtdmV4OiBbXSwgbXZoZDogW10sIHNkdHA6IFtdLCBzdGJsOiBbXSxcclxuICAgICAgICAgICAgc3RjbzogW10sIHN0c2M6IFtdLCBzdHNkOiBbXSwgc3RzejogW10sXHJcbiAgICAgICAgICAgIHN0dHM6IFtdLCB0ZmR0OiBbXSwgdGZoZDogW10sIHRyYWY6IFtdLFxyXG4gICAgICAgICAgICB0cmFrOiBbXSwgdHJ1bjogW10sIHRyZXg6IFtdLCB0a2hkOiBbXSxcclxuICAgICAgICAgICAgdm1oZDogW10sIHNtaGQ6IFtdLCBodmNDOiBbXSwgaHZjMTogW10sXHJcbiAgICAgICAgICAgIGZpZWw6IFtdLCBwYXNwOiBbXSxcclxuICAgICAgICAgICAgJy5tcDMnOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gTVA0LnR5cGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChNUDQudHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIE1QNC50eXBlc1tuYW1lXSA9IFtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lLmNoYXJDb2RlQXQoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5jaGFyQ29kZUF0KDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUuY2hhckNvZGVBdCgyKSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lLmNoYXJDb2RlQXQoMylcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjb25zdGFudHMgPSBNUDQuY29uc3RhbnRzID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0YW50cy5GSUVMID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgICAgICAgICAweDAxLCAweDAwXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGNvbnN0YW50cy5QQVNQID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgICAgICAgICAweDIwLCAweDIwLCAweDAyLCAweDgwLFxyXG4gICAgICAgICAgICAweDIwLCAweDIwLCAweDAyLCAweDdmXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgICBcclxuXHJcbiAgICAgICAgY29uc3RhbnRzLkZUWVAgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4NjksIDB4NzMsIDB4NkYsIDB4NkQsICAvLyBtYWpvcl9icmFuZDogaXNvbVxyXG4gICAgICAgICAgICAweDAsICAweDAsICAweDAsICAweDEsICAgLy8gbWlub3JfdmVyc2lvbjogMHgwMVxyXG4gICAgICAgICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAgLy8gaXNvbVxyXG4gICAgICAgICAgICAweDYxLCAweDc2LCAweDYzLCAweDMxICAgLy8gYXZjMVxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICBjb25zdGFudHMuSFZDRlRZUCA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHg2OSwgMHg3MywgMHg2ZiwgMHg2ZCwgIC8vIG1ham9yX2JyYW5kOiBpc29tXHJcbiAgICAgICAgICAgIDB4MCwgIDB4MCwgIDB4MDIsICAweDAsICAgLy8gbWlub3JfdmVyc2lvbjogMHgwMVxyXG4gICAgICAgICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAgLy8gaXNvbVxyXG4gICAgICAgICAgICAweDY5LCAweDczLCAweDZGLCAweDMyLCAgLy8gaXNvMlxyXG4gICAgICAgICAgICAweDZkLCAweDcwLCAweDM0LCAweDMxLCAgLy8gbXA0MVxyXG4gICAgICAgICAgICAvLzB4NjgsIDB4NzYsIDB4NjMsIDB4MzEgICAvLyBodmMxXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGNvbnN0YW50cy5TVFNEX1BSRUZJWCA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxICAgLy8gZW50cnlfY291bnRcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgY29uc3RhbnRzLlNUVFMgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAgIC8vIGVudHJ5X2NvdW50XHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGNvbnN0YW50cy5TVFNDID0gY29uc3RhbnRzLlNUQ08gPSBjb25zdGFudHMuU1RUUztcclxuXHJcbiAgICAgICAgY29uc3RhbnRzLlNUU1ogPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHNhbXBsZV9zaXplXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgICAvLyBzYW1wbGVfY291bnRcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgY29uc3RhbnRzLkhETFJfVklERU8gPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHByZV9kZWZpbmVkXHJcbiAgICAgICAgICAgIDB4NzYsIDB4NjksIDB4NjQsIDB4NjUsICAvLyBoYW5kbGVyX3R5cGU6ICd2aWRlJ1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gcmVzZXJ2ZWQ6IDMgKiA0IGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4NTYsIDB4NjksIDB4NjQsIDB4NjUsXHJcbiAgICAgICAgICAgIDB4NkYsIDB4NDgsIDB4NjEsIDB4NkUsXHJcbiAgICAgICAgICAgIDB4NjQsIDB4NkMsIDB4NjUsIDB4NzIsIDB4MDAgIC8vIG5hbWU6IFZpZGVvSGFuZGxlclxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICBjb25zdGFudHMuSERMUl9BVURJTyA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gcHJlX2RlZmluZWRcclxuICAgICAgICAgICAgMHg3MywgMHg2RiwgMHg3NSwgMHg2RSwgIC8vIGhhbmRsZXJfdHlwZTogJ3NvdW4nXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyByZXNlcnZlZDogMyAqIDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHg1MywgMHg2RiwgMHg3NSwgMHg2RSxcclxuICAgICAgICAgICAgMHg2NCwgMHg0OCwgMHg2MSwgMHg2RSxcclxuICAgICAgICAgICAgMHg2NCwgMHg2QywgMHg2NSwgMHg3MiwgMHgwMCAgLy8gbmFtZTogU291bmRIYW5kbGVyXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGNvbnN0YW50cy5EUkVGID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gdmVyc2lvbigwKSArIGZsYWdzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsICAvLyBlbnRyeV9jb3VudFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDBDLCAgLy8gZW50cnlfc2l6ZVxyXG4gICAgICAgICAgICAweDc1LCAweDcyLCAweDZDLCAweDIwLCAgLy8gdHlwZSAndXJsICdcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSAgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICAvLyBTb3VuZCBtZWRpYSBoZWFkZXJcclxuICAgICAgICBjb25zdGFudHMuU01IRCA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwICAgLy8gYmFsYW5jZSgyKSArIHJlc2VydmVkKDIpXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIC8vIHZpZGVvIG1lZGlhIGhlYWRlclxyXG4gICAgICAgIGNvbnN0YW50cy5WTUhEID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAgLy8gdmVyc2lvbigwKSArIGZsYWdzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsICAgICAgICAgICAgICAvLyBncmFwaGljc21vZGU6IDIgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIG9wY29sb3I6IDMgKiAyIGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDBcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBhIGJveFxyXG4gICAgc3RhdGljIGJveCh0eXBlKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA4O1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGxldCBkYXRhcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgbGV0IGFycmF5Q291bnQgPSBkYXRhcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNpemUgKz0gZGF0YXNbaV0uYnl0ZUxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xyXG4gICAgICAgIHJlc3VsdFswXSA9IChzaXplID4+PiAyNCkgJiAweEZGOyAgLy8gc2l6ZVxyXG4gICAgICAgIHJlc3VsdFsxXSA9IChzaXplID4+PiAxNikgJiAweEZGO1xyXG4gICAgICAgIHJlc3VsdFsyXSA9IChzaXplID4+PiAgOCkgJiAweEZGO1xyXG4gICAgICAgIHJlc3VsdFszXSA9IChzaXplKSAmIDB4RkY7XHJcblxyXG4gICAgICAgIHJlc3VsdC5zZXQodHlwZSwgNCk7ICAvLyB0eXBlXHJcblxyXG4gICAgICAgIGxldCBvZmZzZXQgPSA4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlDb3VudDsgaSsrKSB7ICAvLyBkYXRhIGJvZHlcclxuICAgICAgICAgICAgcmVzdWx0LnNldChkYXRhc1tpXSwgb2Zmc2V0KTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IGRhdGFzW2ldLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGVtaXQgZnR5cCAmIG1vb3ZcclxuICAgIHN0YXRpYyBnZW5lcmF0ZUluaXRTZWdtZW50KG1ldGEpIHtcclxuICAgICAgICBsZXQgZnR5cCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG1ldGEucHJvcHR5ID09ICdhdmMnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZnR5cCA9IE1QNC5ib3goTVA0LnR5cGVzLmZ0eXAsIE1QNC5jb25zdGFudHMuRlRZUCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG1ldGEucHJvcHR5ID09ICdoZXZjJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZ0eXAgPSBNUDQuYm94KE1QNC50eXBlcy5mdHlwLCBNUDQuY29uc3RhbnRzLkhWQ0ZUWVApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBtb292ID0gTVA0Lm1vb3YobWV0YSk7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVWludDhBcnJheShmdHlwLmJ5dGVMZW5ndGggKyBtb292LmJ5dGVMZW5ndGgpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoZnR5cCwgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldChtb292LCBmdHlwLmJ5dGVMZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92aWUgbWV0YWRhdGEgYm94XHJcbiAgICBzdGF0aWMgbW9vdihtZXRhKSB7XHJcbiAgICAgICAgbGV0IG12aGQgPSBNUDQubXZoZChtZXRhLnRpbWVzY2FsZSwgbWV0YS5kdXJhdGlvbik7XHJcbiAgICAgICAgbGV0IHRyYWsgPSBNUDQudHJhayhtZXRhKTtcclxuICAgICAgICBsZXQgbXZleCA9IE1QNC5tdmV4KG1ldGEpO1xyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tb292LCBtdmhkLCB0cmFrLCBtdmV4KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZpZSBoZWFkZXIgYm94XHJcbiAgICBzdGF0aWMgbXZoZCh0aW1lc2NhbGUsIGR1cmF0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLm12aGQsIG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gY3JlYXRpb25fdGltZVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gbW9kaWZpY2F0aW9uX3RpbWVcclxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMjQpICYgMHhGRiwgIC8vIHRpbWVzY2FsZTogNCBieXRlc1xyXG4gICAgICAgICAgICAodGltZXNjYWxlID4+PiAxNikgJiAweEZGLFxyXG4gICAgICAgICAgICAodGltZXNjYWxlID4+PiAgOCkgJiAweEZGLFxyXG4gICAgICAgICAgICAodGltZXNjYWxlKSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgICAvLyBkdXJhdGlvbjogNCBieXRlc1xyXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsICAvLyBQcmVmZXJyZWQgcmF0ZTogMS4wXHJcbiAgICAgICAgICAgIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBQcmVmZXJyZWRWb2x1bWUoMS4wLCAyYnl0ZXMpICsgcmVzZXJ2ZWQoMmJ5dGVzKVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gcmVzZXJ2ZWQ6IDQgKyA0IGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsICAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDQwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyAtLS0tYmVnaW4gcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyAtLS0tZW5kIHByZV9kZWZpbmVkIDYgKiA0IGJ5dGVzLS0tLVxyXG4gICAgICAgICAgICAweEZGLCAweEZGLCAweEZGLCAweEZGICAgLy8gbmV4dF90cmFja19JRFxyXG4gICAgICAgIF0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcmFjayBib3hcclxuICAgIHN0YXRpYyB0cmFrKG1ldGEpIHtcclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMudHJhaywgTVA0LnRraGQobWV0YSksIE1QNC5tZGlhKG1ldGEpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcmFjayBoZWFkZXIgYm94XHJcbiAgICBzdGF0aWMgdGtoZChtZXRhKSB7XHJcbiAgICAgICAgbGV0IHRyYWNrSWQgPSBtZXRhLmlkLCBkdXJhdGlvbiA9IG1ldGEuZHVyYXRpb247XHJcbiAgICAgICAgbGV0IHdpZHRoID0gbWV0YS5wcmVzZW50V2lkdGgsIGhlaWdodCA9IG1ldGEucHJlc2VudEhlaWdodDtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRraGQsIG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgIC8vIHZlcnNpb24oMCkgKyBmbGFnc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gY3JlYXRpb25fdGltZVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gbW9kaWZpY2F0aW9uX3RpbWVcclxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDI0KSAmIDB4RkYsICAvLyB0cmFja19JRDogNCBieXRlc1xyXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+ICA4KSAmIDB4RkYsXHJcbiAgICAgICAgICAgICh0cmFja0lkKSAmIDB4RkYsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyByZXNlcnZlZDogNCBieXRlc1xyXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsIC8vIGR1cmF0aW9uOiA0IGJ5dGVzXHJcbiAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAgOCkgJiAweEZGLFxyXG4gICAgICAgICAgICAoZHVyYXRpb24pICYgMHhGRixcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkOiAyICogNCBieXRlc1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gbGF5ZXIoMmJ5dGVzKSArIGFsdGVybmF0ZV9ncm91cCgyYnl0ZXMpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2b2x1bWUoMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcylcclxuICAgICAgICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgIC8vIC0tLS1iZWdpbiBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIFxyXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAweDQwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXHJcbiAgICAgICAgICAgICh3aWR0aCA+Pj4gOCkgJiAweEZGLCAgICAvLyB3aWR0aCBhbmQgaGVpZ2h0XHJcbiAgICAgICAgICAgICh3aWR0aCkgJiAweEZGLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwLFxyXG4gICAgICAgICAgICAoaGVpZ2h0ID4+PiA4KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChoZWlnaHQpICYgMHhGRixcclxuICAgICAgICAgICAgMHgwMCwgMHgwMFxyXG4gICAgICAgIF0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNZWRpYSBCb3hcclxuICAgIHN0YXRpYyBtZGlhKG1ldGEpIHtcclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWRpYSwgTVA0Lm1kaGQobWV0YSksIE1QNC5oZGxyKG1ldGEpLCBNUDQubWluZihtZXRhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWVkaWEgaGVhZGVyIGJveFxyXG4gICAgc3RhdGljIG1kaGQobWV0YSkge1xyXG4gICAgICAgIGxldCB0aW1lc2NhbGUgPSBtZXRhLnRpbWVzY2FsZTtcclxuICAgICAgICBsZXQgZHVyYXRpb24gPSBtZXRhLmR1cmF0aW9uO1xyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tZGhkLCBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIGNyZWF0aW9uX3RpbWVcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIG1vZGlmaWNhdGlvbl90aW1lXHJcbiAgICAgICAgICAgICh0aW1lc2NhbGUgPj4+IDI0KSAmIDB4RkYsICAvLyB0aW1lc2NhbGU6IDQgYnl0ZXNcclxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgKHRpbWVzY2FsZSA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKHRpbWVzY2FsZSkgJiAweEZGLFxyXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsICAgLy8gZHVyYXRpb246IDQgYnl0ZXNcclxuICAgICAgICAgICAgKGR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxyXG4gICAgICAgICAgICAoZHVyYXRpb24gPj4+ICA4KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxyXG4gICAgICAgICAgICAweDU1LCAweEM0LCAgICAgICAgICAgICAvLyBsYW5ndWFnZTogdW5kICh1bmRldGVybWluZWQpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAgICAgICAgICAgICAgIC8vIHByZV9kZWZpbmVkID0gMFxyXG4gICAgICAgIF0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNZWRpYSBoYW5kbGVyIHJlZmVyZW5jZSBib3hcclxuICAgIHN0YXRpYyBoZGxyKG1ldGEpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG51bGw7XHJcbiAgICAgICAgaWYgKG1ldGEudHlwZSA9PT0gJ2F1ZGlvJykge1xyXG4gICAgICAgICAgICBkYXRhID0gTVA0LmNvbnN0YW50cy5IRExSX0FVRElPO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBNUDQuY29uc3RhbnRzLkhETFJfVklERU87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5oZGxyLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNZWRpYSBpbmZvbWF0aW9uIGJveFxyXG4gICAgc3RhdGljIG1pbmYobWV0YSkge1xyXG4gICAgICAgIGxldCB4bWhkID0gbnVsbDtcclxuICAgICAgICBpZiAobWV0YS50eXBlID09PSAnYXVkaW8nKSB7XHJcbiAgICAgICAgICAgIHhtaGQgPSBNUDQuYm94KE1QNC50eXBlcy5zbWhkLCBNUDQuY29uc3RhbnRzLlNNSEQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHhtaGQgPSBNUDQuYm94KE1QNC50eXBlcy52bWhkLCBNUDQuY29uc3RhbnRzLlZNSEQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWluZiwgeG1oZCwgTVA0LmRpbmYoKSwgTVA0LnN0YmwobWV0YSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIERhdGEgaW5mb21hdGlvbiBib3hcclxuICAgIHN0YXRpYyBkaW5mKCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBNUDQuYm94KE1QNC50eXBlcy5kaW5mLFxyXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5kcmVmLCBNUDQuY29uc3RhbnRzLkRSRUYpXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhbXBsZSB0YWJsZSBib3hcclxuICAgIHN0YXRpYyBzdGJsKG1ldGEpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gTVA0LmJveChNUDQudHlwZXMuc3RibCwgIC8vIHR5cGU6IHN0YmxcclxuICAgICAgICAgICAgTVA0LnN0c2QobWV0YSksICAvLyBTYW1wbGUgRGVzY3JpcHRpb24gVGFibGVcclxuICAgICAgICAgICAgTVA0LmJveChNUDQudHlwZXMuc3R0cywgTVA0LmNvbnN0YW50cy5TVFRTKSwgIC8vIFRpbWUtVG8tU2FtcGxlXHJcbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLnN0c2MsIE1QNC5jb25zdGFudHMuU1RTQyksICAvLyBTYW1wbGUtVG8tQ2h1bmtcclxuICAgICAgICAgICAgTVA0LmJveChNUDQudHlwZXMuc3RzeiwgTVA0LmNvbnN0YW50cy5TVFNaKSwgIC8vIFNhbXBsZSBzaXplXHJcbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLnN0Y28sIE1QNC5jb25zdGFudHMuU1RDTykgICAvLyBDaHVuayBvZmZzZXRcclxuICAgICAgICApOyBcclxuICAgICAgICByZXR1cm4gcmVzdWx0OyBcclxuICAgIH1cclxuXHJcbiAgICAvLyBTYW1wbGUgZGVzY3JpcHRpb24gYm94XHJcbiAgICBzdGF0aWMgc3RzZChtZXRhKSB7XHJcbiAgICAgICAgaWYgKG1ldGEudHlwZSA9PT0gJ2F1ZGlvJykge1xyXG4gICAgICAgICAgICBpZiAobWV0YS5jb2RlYyA9PT0gJ21wMycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5zdHNkLCBNUDQuY29uc3RhbnRzLlNUU0RfUFJFRklYLCBNUDQubXAzKG1ldGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBlbHNlOiBhYWMgLT4gbXA0YVxyXG4gICAgICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuc3RzZCwgTVA0LmNvbnN0YW50cy5TVFNEX1BSRUZJWCwgTVA0Lm1wNGEobWV0YSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChtZXRhLnByb3B0eSA9PSAnYXZjJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnN0c2QsIE1QNC5jb25zdGFudHMuU1RTRF9QUkVGSVgsIE1QNC5hdmMxKG1ldGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtZXRhLnByb3B0eSA9PSAnaGV2YycpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5zdHNkLCBNUDQuY29uc3RhbnRzLlNUU0RfUFJFRklYLCBNUDQuaHZjMShtZXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtcDMobWV0YSkge1xyXG4gICAgICAgIGxldCBjaGFubmVsQ291bnQgPSBtZXRhLmNoYW5uZWxDb3VudDtcclxuICAgICAgICBsZXQgc2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xyXG5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkKDQpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsICAvLyByZXNlcnZlZCgyKSArIGRhdGFfcmVmZXJlbmNlX2luZGV4KDIpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyByZXNlcnZlZDogMiAqIDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgY2hhbm5lbENvdW50LCAgICAgIC8vIGNoYW5uZWxDb3VudCgyKVxyXG4gICAgICAgICAgICAweDAwLCAweDEwLCAgICAgICAgICAgICAgLy8gc2FtcGxlU2l6ZSgyKVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gcmVzZXJ2ZWQoNClcclxuICAgICAgICAgICAgKHNhbXBsZVJhdGUgPj4+IDgpICYgMHhGRiwgIC8vIEF1ZGlvIHNhbXBsZSByYXRlXHJcbiAgICAgICAgICAgIChzYW1wbGVSYXRlKSAmIDB4RkYsXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDBcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzWycubXAzJ10sIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtcDRhKG1ldGEpIHtcclxuICAgICAgICBsZXQgY2hhbm5lbENvdW50ID0gbWV0YS5jaGFubmVsQ291bnQ7XHJcbiAgICAgICAgbGV0IHNhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTtcclxuXHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyByZXNlcnZlZCg0KVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAgLy8gcmVzZXJ2ZWQoMikgKyBkYXRhX3JlZmVyZW5jZV9pbmRleCgyKVxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gcmVzZXJ2ZWQ6IDIgKiA0IGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXHJcbiAgICAgICAgICAgIDB4MDAsIGNoYW5uZWxDb3VudCwgICAgICAvLyBjaGFubmVsQ291bnQoMilcclxuICAgICAgICAgICAgMHgwMCwgMHgxMCwgICAgICAgICAgICAgIC8vIHNhbXBsZVNpemUoMilcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkKDQpXHJcbiAgICAgICAgICAgIChzYW1wbGVSYXRlID4+PiA4KSAmIDB4RkYsICAvLyBBdWRpbyBzYW1wbGUgcmF0ZVxyXG4gICAgICAgICAgICAoc2FtcGxlUmF0ZSkgJiAweEZGLFxyXG4gICAgICAgICAgICAweDAwLCAweDAwXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tcDRhLCBkYXRhLCBNUDQuZXNkcyhtZXRhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGVzZHMobWV0YSkge1xyXG4gICAgICAgIGxldCBjb25maWcgPSBtZXRhLmNvbmZpZyB8fCBbXTtcclxuICAgICAgICBsZXQgY29uZmlnU2l6ZSA9IGNvbmZpZy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uIDAgKyBmbGFnc1xyXG5cclxuICAgICAgICAgICAgMHgwMywgICAgICAgICAgICAgICAgICAgIC8vIGRlc2NyaXB0b3JfdHlwZVxyXG4gICAgICAgICAgICAweDE3ICsgY29uZmlnU2l6ZSwgICAgICAgLy8gbGVuZ3RoM1xyXG4gICAgICAgICAgICAweDAwLCAweDAxLCAgICAgICAgICAgICAgLy8gZXNfaWRcclxuICAgICAgICAgICAgMHgwMCwgICAgICAgICAgICAgICAgICAgIC8vIHN0cmVhbV9wcmlvcml0eVxyXG5cclxuICAgICAgICAgICAgMHgwNCwgICAgICAgICAgICAgICAgICAgIC8vIGRlc2NyaXB0b3JfdHlwZVxyXG4gICAgICAgICAgICAweDBGICsgY29uZmlnU2l6ZSwgICAgICAgLy8gbGVuZ3RoXHJcbiAgICAgICAgICAgIDB4NDAsICAgICAgICAgICAgICAgICAgICAvLyBjb2RlYzogbXBlZzRfYXVkaW9cclxuICAgICAgICAgICAgMHgxNSwgICAgICAgICAgICAgICAgICAgIC8vIHN0cmVhbV90eXBlOiBBdWRpb1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAgICAgICAgLy8gYnVmZmVyX3NpemVcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIG1heEJpdHJhdGVcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIGF2Z0JpdHJhdGVcclxuXHJcbiAgICAgICAgICAgIDB4MDUgICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdG9yX3R5cGVcclxuICAgICAgICBdLmNvbmNhdChbXHJcbiAgICAgICAgICAgIGNvbmZpZ1NpemVcclxuICAgICAgICBdKS5jb25jYXQoXHJcbiAgICAgICAgICAgIGNvbmZpZ1xyXG4gICAgICAgICkuY29uY2F0KFtcclxuICAgICAgICAgICAgMHgwNiwgMHgwMSwgMHgwMiAgICAgICAgIC8vIEdBU3BlY2lmaWNDb25maWdcclxuICAgICAgICBdKSk7XHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLmVzZHMsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBodmMxKG1ldGEpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGh2Y2MgPSBtZXRhLmh2Y2M7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gbWV0YS5jb2RlY1dpZHRoLCBoZWlnaHQgPSBtZXRhLmNvZGVjSGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkKDQpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsICAvLyByZXNlcnZlZCgyKSArIGRhdGFfcmVmZXJlbmNlX2luZGV4KDIpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBwcmVfZGVmaW5lZCgyKSArIHJlc2VydmVkKDIpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBwcmVfZGVmaW5lZDogMyAqIDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgKHdpZHRoID4+PiA4KSAmIDB4RkYsICAgIC8vIHdpZHRoOiAyIGJ5dGVzXHJcbiAgICAgICAgICAgICh3aWR0aCkgJiAweEZGLFxyXG4gICAgICAgICAgICAoaGVpZ2h0ID4+PiA4KSAmIDB4RkYsICAgLy8gaGVpZ2h0OiAyIGJ5dGVzXHJcbiAgICAgICAgICAgIChoZWlnaHQpICYgMHhGRixcclxuICAgICAgICAgICAgMHgwMCwgMHg0OCwgMHgwMCwgMHgwMCwgIC8vIGhvcml6cmVzb2x1dGlvbjogNCBieXRlc1xyXG4gICAgICAgICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAgLy8gdmVydHJlc29sdXRpb246IDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkOiA0IGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsICAgICAgICAgICAgICAvLyBmcmFtZV9jb3VudFxyXG4gICAgICAgICAgICAweDAwLCAgICAgICAgICAgICAgICAgICAgLy8gc3RybGVuXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBjb21wcmVzc29ybmFtZTogMzIgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgxOCwgICAgICAgICAgICAgIC8vIGRlcHRoXHJcbiAgICAgICAgICAgIDB4RkYsIDB4RkYgICAgICAgICAgICAgICAvLyBwcmVfZGVmaW5lZCA9IC0xXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLmh2YzEsIGRhdGEsIFxyXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5odmNDLCBodmNjKSwgXHJcbiAgICAgICAgICAgIE1QNC5ib3goTVA0LnR5cGVzLmZpZWwsIE1QNC5jb25zdGFudHMuRklFTCksIFxyXG4gICAgICAgICAgICBNUDQuYm94KE1QNC50eXBlcy5wYXNwLCBNUDQuY29uc3RhbnRzLlBBU1ApKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXZjMShtZXRhKSB7XHJcbiAgICAgICAgbGV0IGF2Y2MgPSBtZXRhLmF2Y2M7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gbWV0YS5jb2RlY1dpZHRoLCBoZWlnaHQgPSBtZXRhLmNvZGVjSGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkKDQpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsICAvLyByZXNlcnZlZCgyKSArIGRhdGFfcmVmZXJlbmNlX2luZGV4KDIpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBwcmVfZGVmaW5lZCgyKSArIHJlc2VydmVkKDIpXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBwcmVfZGVmaW5lZDogMyAqIDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgKHdpZHRoID4+PiA4KSAmIDB4RkYsICAgIC8vIHdpZHRoOiAyIGJ5dGVzXHJcbiAgICAgICAgICAgICh3aWR0aCkgJiAweEZGLFxyXG4gICAgICAgICAgICAoaGVpZ2h0ID4+PiA4KSAmIDB4RkYsICAgLy8gaGVpZ2h0OiAyIGJ5dGVzXHJcbiAgICAgICAgICAgIChoZWlnaHQpICYgMHhGRixcclxuICAgICAgICAgICAgMHgwMCwgMHg0OCwgMHgwMCwgMHgwMCwgIC8vIGhvcml6cmVzb2x1dGlvbjogNCBieXRlc1xyXG4gICAgICAgICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAgLy8gdmVydHJlc29sdXRpb246IDQgYnl0ZXNcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHJlc2VydmVkOiA0IGJ5dGVzXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDEsICAgICAgICAgICAgICAvLyBmcmFtZV9jb3VudFxyXG4gICAgICAgICAgICAweDBBLCAgICAgICAgICAgICAgICAgICAgLy8gc3RybGVuXHJcbiAgICAgICAgICAgIDB4NzgsIDB4NzEsIDB4NzEsIDB4MkYsICAvLyBjb21wcmVzc29ybmFtZTogMzIgYnl0ZXNcclxuICAgICAgICAgICAgMHg2NiwgMHg2QywgMHg3NiwgMHgyRSxcclxuICAgICAgICAgICAgMHg2QSwgMHg3MywgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgMHgwMCwgMHgxOCwgICAgICAgICAgICAgIC8vIGRlcHRoXHJcbiAgICAgICAgICAgIDB4RkYsIDB4RkYgICAgICAgICAgICAgICAvLyBwcmVfZGVmaW5lZCA9IC0xXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLmF2YzEsIGRhdGEsIE1QNC5ib3goTVA0LnR5cGVzLmF2Y0MsIGF2Y2MpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZpZSBFeHRlbmRzIGJveFxyXG4gICAgc3RhdGljIG12ZXgobWV0YSkge1xyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tdmV4LCBNUDQudHJleChtZXRhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJhY2sgRXh0ZW5kcyBib3hcclxuICAgIHN0YXRpYyB0cmV4KG1ldGEpIHtcclxuICAgICAgICBsZXQgdHJhY2tJZCA9IG1ldGEuaWQ7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICsgZmxhZ3NcclxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDI0KSAmIDB4RkYsIC8vIHRyYWNrX0lEXHJcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAxNikgJiAweEZGLFxyXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKHRyYWNrSWQpICYgMHhGRixcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgIC8vIGRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4XHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyBkZWZhdWx0X3NhbXBsZV9kdXJhdGlvblxyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAgLy8gZGVmYXVsdF9zYW1wbGVfc2l6ZVxyXG4gICAgICAgICAgICAweDAwLCAweDAxLCAweDAwLCAweDAxICAgLy8gZGVmYXVsdF9zYW1wbGVfZmxhZ3NcclxuICAgICAgICBdKTtcclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMudHJleCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92aWUgZnJhZ21lbnQgYm94XHJcbiAgICBzdGF0aWMgbW9vZih0cmFjaywgYmFzZU1lZGlhRGVjb2RlVGltZSkge1xyXG4gICAgICAgIHJldHVybiBNUDQuYm94KE1QNC50eXBlcy5tb29mLCBNUDQubWZoZCh0cmFjay5zZXF1ZW5jZU51bWJlciksIE1QNC50cmFmKHRyYWNrLCBiYXNlTWVkaWFEZWNvZGVUaW1lKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG1maGQoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcclxuICAgICAgICAgICAgKHNlcXVlbmNlTnVtYmVyID4+PiAyNCkgJiAweEZGLCAgLy8gc2VxdWVuY2VfbnVtYmVyOiBpbnQzMlxyXG4gICAgICAgICAgICAoc2VxdWVuY2VOdW1iZXIgPj4+IDE2KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChzZXF1ZW5jZU51bWJlciA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKHNlcXVlbmNlTnVtYmVyKSAmIDB4RkZcclxuICAgICAgICBdKTtcclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWZoZCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJhY2sgZnJhZ21lbnQgYm94XHJcbiAgICBzdGF0aWMgdHJhZih0cmFjaywgYmFzZU1lZGlhRGVjb2RlVGltZSkge1xyXG4gICAgICAgIGxldCB0cmFja0lkID0gdHJhY2suaWQ7XHJcblxyXG4gICAgICAgIC8vIFRyYWNrIGZyYWdtZW50IGhlYWRlciBib3hcclxuICAgICAgICBsZXQgdGZoZCA9IE1QNC5ib3goTVA0LnR5cGVzLnRmaGQsIG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgIC8vIHZlcnNpb24oMCkgJiBmbGFnc1xyXG4gICAgICAgICAgICAodHJhY2tJZCA+Pj4gMjQpICYgMHhGRiwgLy8gdHJhY2tfSURcclxuICAgICAgICAgICAgKHRyYWNrSWQgPj4+IDE2KSAmIDB4RkYsXHJcbiAgICAgICAgICAgICh0cmFja0lkID4+PiAgOCkgJiAweEZGLFxyXG4gICAgICAgICAgICAodHJhY2tJZCkgJiAweEZGXHJcbiAgICAgICAgXSkpO1xyXG4gICAgICAgIC8vIFRyYWNrIEZyYWdtZW50IERlY29kZSBUaW1lXHJcbiAgICAgICAgbGV0IHRmZHQgPSBNUDQuYm94KE1QNC50eXBlcy50ZmR0LCBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICAvLyB2ZXJzaW9uKDApICYgZmxhZ3NcclxuICAgICAgICAgICAgKGJhc2VNZWRpYURlY29kZVRpbWUgPj4+IDI0KSAmIDB4RkYsICAvLyBiYXNlTWVkaWFEZWNvZGVUaW1lOiBpbnQzMlxyXG4gICAgICAgICAgICAoYmFzZU1lZGlhRGVjb2RlVGltZSA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgKGJhc2VNZWRpYURlY29kZVRpbWUgPj4+ICA4KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChiYXNlTWVkaWFEZWNvZGVUaW1lKSAmIDB4RkZcclxuICAgICAgICBdKSk7XHJcbiAgICAgICAgbGV0IHNkdHAgPSBNUDQuc2R0cCh0cmFjayk7XHJcbiAgICAgICAgbGV0IHRydW4gPSBNUDQudHJ1bih0cmFjaywgc2R0cC5ieXRlTGVuZ3RoICsgMTYgKyAxNiArIDggKyAxNiArIDggKyA4KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRyYWYsIHRmaGQsIHRmZHQsIHRydW4sIHNkdHApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhbXBsZSBEZXBlbmRlbmN5IFR5cGUgYm94XHJcbiAgICBzdGF0aWMgc2R0cCh0cmFjaykge1xyXG4gICAgICAgIGxldCBzYW1wbGVzID0gdHJhY2suc2FtcGxlcyB8fCBbXTtcclxuICAgICAgICBsZXQgc2FtcGxlQ291bnQgPSBzYW1wbGVzLmxlbmd0aDtcclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KDQgKyBzYW1wbGVDb3VudCk7XHJcbiAgICAgICAgLy8gMH40IGJ5dGVzOiB2ZXJzaW9uKDApICYgZmxhZ3NcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGZsYWdzID0gc2FtcGxlc1tpXS5mbGFncztcclxuICAgICAgICAgICAgZGF0YVtpICsgNF0gPSAoZmxhZ3MuaXNMZWFkaW5nIDw8IDYpICAgIC8vIGlzX2xlYWRpbmc6IDIgKGJpdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfCAoZmxhZ3MuZGVwZW5kc09uIDw8IDQpICAgIC8vIHNhbXBsZV9kZXBlbmRzX29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHwgKGZsYWdzLmlzRGVwZW5kZWRPbiA8PCAyKSAvLyBzYW1wbGVfaXNfZGVwZW5kZWRfb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgfCAoZmxhZ3MuaGFzUmVkdW5kYW5jeSk7ICAgIC8vIHNhbXBsZV9oYXNfcmVkdW5kYW5jeVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMuc2R0cCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVHJhY2sgZnJhZ21lbnQgcnVuIGJveFxyXG4gICAgc3RhdGljIHRydW4odHJhY2ssIG9mZnNldCkge1xyXG4gICAgICAgIGxldCBzYW1wbGVzID0gdHJhY2suc2FtcGxlcyB8fCBbXTtcclxuICAgICAgICBsZXQgc2FtcGxlQ291bnQgPSBzYW1wbGVzLmxlbmd0aDtcclxuICAgICAgICBsZXQgZGF0YVNpemUgPSAxMiArIDE2ICogc2FtcGxlQ291bnQ7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhU2l6ZSk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IDggKyBkYXRhU2l6ZTtcclxuXHJcbiAgICAgICAgZGF0YS5zZXQoW1xyXG4gICAgICAgICAgICAweDAwLCAweDAwLCAweDBGLCAweDAxLCAgICAgIC8vIHZlcnNpb24oMCkgJiBmbGFnc1xyXG4gICAgICAgICAgICAoc2FtcGxlQ291bnQgPj4+IDI0KSAmIDB4RkYsIC8vIHNhbXBsZV9jb3VudFxyXG4gICAgICAgICAgICAoc2FtcGxlQ291bnQgPj4+IDE2KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChzYW1wbGVDb3VudCA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKHNhbXBsZUNvdW50KSAmIDB4RkYsXHJcbiAgICAgICAgICAgIChvZmZzZXQgPj4+IDI0KSAmIDB4RkYsICAgICAgLy8gZGF0YV9vZmZzZXRcclxuICAgICAgICAgICAgKG9mZnNldCA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgKG9mZnNldCA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgKG9mZnNldCkgJiAweEZGXHJcbiAgICAgICAgXSwgMCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBzYW1wbGVzW2ldLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICBsZXQgc2l6ZSA9IHNhbXBsZXNbaV0uc2l6ZTtcclxuICAgICAgICAgICAgbGV0IGZsYWdzID0gc2FtcGxlc1tpXS5mbGFncztcclxuICAgICAgICAgICAgbGV0IGN0cyA9IHNhbXBsZXNbaV0uY3RzO1xyXG4gICAgICAgICAgICBkYXRhLnNldChbXHJcbiAgICAgICAgICAgICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsICAvLyBzYW1wbGVfZHVyYXRpb25cclxuICAgICAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcclxuICAgICAgICAgICAgICAgIChkdXJhdGlvbiA+Pj4gIDgpICYgMHhGRixcclxuICAgICAgICAgICAgICAgIChkdXJhdGlvbikgJiAweEZGLFxyXG4gICAgICAgICAgICAgICAgKHNpemUgPj4+IDI0KSAmIDB4RkYsICAgICAgLy8gc2FtcGxlX3NpemVcclxuICAgICAgICAgICAgICAgIChzaXplID4+PiAxNikgJiAweEZGLFxyXG4gICAgICAgICAgICAgICAgKHNpemUgPj4+ICA4KSAmIDB4RkYsXHJcbiAgICAgICAgICAgICAgICAoc2l6ZSkgJiAweEZGLFxyXG4gICAgICAgICAgICAgICAgKGZsYWdzLmlzTGVhZGluZyA8PCAyKSB8IGZsYWdzLmRlcGVuZHNPbiwgIC8vIHNhbXBsZV9mbGFnc1xyXG4gICAgICAgICAgICAgICAgKGZsYWdzLmlzRGVwZW5kZWRPbiA8PCA2KSB8IChmbGFncy5oYXNSZWR1bmRhbmN5IDw8IDQpIHwgZmxhZ3MuaXNOb25TeW5jLFxyXG4gICAgICAgICAgICAgICAgMHgwMCwgMHgwMCwgICAgICAgICAgICAgICAgLy8gc2FtcGxlX2RlZ3JhZGF0aW9uX3ByaW9yaXR5XHJcbiAgICAgICAgICAgICAgICAoY3RzID4+PiAyNCkgJiAweEZGLCAgICAgICAvLyBzYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRcclxuICAgICAgICAgICAgICAgIChjdHMgPj4+IDE2KSAmIDB4RkYsXHJcbiAgICAgICAgICAgICAgICAoY3RzID4+PiAgOCkgJiAweEZGLFxyXG4gICAgICAgICAgICAgICAgKGN0cykgJiAweEZGXHJcbiAgICAgICAgICAgIF0sIDEyICsgMTYgKiBpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE1QNC5ib3goTVA0LnR5cGVzLnRydW4sIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtZGF0KGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gTVA0LmJveChNUDQudHlwZXMubWRhdCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5NUDQuaW5pdCgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTVA0OyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7XHJcbmltcG9ydCBNUDQgZnJvbSAnLi9tcDQtZ2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IEFBQyBmcm9tICcuL2FhYy1zaWxlbnQuanMnO1xyXG5pbXBvcnQgQnJvd3NlciBmcm9tICcuLi91dGlscy9icm93c2VyLmpzJztcclxuaW1wb3J0IHtTYW1wbGVJbmZvLCBNZWRpYVNlZ21lbnRJbmZvLCBNZWRpYVNlZ21lbnRJbmZvTGlzdH0gZnJvbSAnLi4vY29yZS9tZWRpYS1zZWdtZW50LWluZm8uanMnO1xyXG5pbXBvcnQge0lsbGVnYWxTdGF0ZUV4Y2VwdGlvbn0gZnJvbSAnLi4vdXRpbHMvZXhjZXB0aW9uLmpzJztcclxuXHJcblxyXG4vLyBGcmFnbWVudGVkIG1wNCByZW11eGVyXHJcbmNsYXNzIE1QNFJlbXV4ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuVEFHID0gJ01QNFJlbXV4ZXInO1xyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5faXNMaXZlID0gKGNvbmZpZy5pc0xpdmUgPT09IHRydWUpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9kdHNCYXNlID0gLTE7XHJcbiAgICAgICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvRHRzQmFzZSA9IEluZmluaXR5O1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvRHRzQmFzZSA9IEluZmluaXR5O1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvTmV4dER0cyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl92aWRlb05leHREdHMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fYXVkaW9TdGFzaGVkTGFzdFNhbXBsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9TdGFzaGVkTGFzdFNhbXBsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuX2F1ZGlvTWV0YSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9NZXRhID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QgPSBuZXcgTWVkaWFTZWdtZW50SW5mb0xpc3QoJ2F1ZGlvJyk7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QgPSBuZXcgTWVkaWFTZWdtZW50SW5mb0xpc3QoJ3ZpZGVvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX29uSW5pdFNlZ21lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgY2hyb21lIDwgNTA6IEFsd2F5cyBmb3JjZSBmaXJzdCBzYW1wbGUgYXMgYSBSYW5kb20gQWNjZXNzIFBvaW50IGluIG1lZGlhIHNlZ21lbnRcclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5NDEyXHJcbiAgICAgICAgdGhpcy5fZm9yY2VGaXJzdElEUiA9IChCcm93c2VyLmNocm9tZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQnJvd3Nlci52ZXJzaW9uLm1ham9yIDwgNTAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEJyb3dzZXIudmVyc2lvbi5tYWpvciA9PT0gNTAgJiYgQnJvd3Nlci52ZXJzaW9uLmJ1aWxkIDwgMjY2MSkpKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgSUUxMS9FZGdlOiBGaWxsIHNpbGVudCBhYWMgZnJhbWUgYWZ0ZXIga2V5ZnJhbWUtc2Vla2luZ1xyXG4gICAgICAgIC8vIE1ha2UgYXVkaW8gYmVnaW5EdHMgZXF1YWxzIHdpdGggdmlkZW8gYmVnaW5EdHMsIGluIG9yZGVyIHRvIGZpeCBzZWVrIGZyZWV6ZVxyXG4gICAgICAgIHRoaXMuX2ZpbGxTaWxlbnRBZnRlclNlZWsgPSAoQnJvd3Nlci5tc2VkZ2UgfHwgQnJvd3Nlci5tc2llKTtcclxuXHJcbiAgICAgICAgLy8gV2hpbGUgb25seSBGaXJlRm94IHN1cHBvcnRzICdhdWRpby9tcDQsIGNvZGVjcz1cIm1wM1wiJywgdXNlICdhdWRpby9tcGVnJyBmb3IgY2hyb21lLCBzYWZhcmksIC4uLlxyXG4gICAgICAgIHRoaXMuX21wM1VzZU1wZWdBdWRpbyA9ICFCcm93c2VyLmZpcmVmb3g7XHJcblxyXG4gICAgICAgIHRoaXMuX2ZpbGxBdWRpb1RpbWVzdGFtcEdhcCA9IHRoaXMuX2NvbmZpZy5maXhBdWRpb1RpbWVzdGFtcEdhcDtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX2R0c0Jhc2UgPSAtMTtcclxuICAgICAgICB0aGlzLl9kdHNCYXNlSW5pdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYXVkaW9NZXRhID0gbnVsbDtcclxuICAgICAgICB0aGlzLl92aWRlb01ldGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvU2VnbWVudEluZm9MaXN0LmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uSW5pdFNlZ21lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRGF0YVNvdXJjZShwcm9kdWNlcikge1xyXG4gICAgICAgIHByb2R1Y2VyLm9uRGF0YUF2YWlsYWJsZSA9IHRoaXMucmVtdXguYmluZCh0aGlzKTtcclxuICAgICAgICBwcm9kdWNlci5vblRyYWNrTWV0YWRhdGEgPSB0aGlzLl9vblRyYWNrTWV0YWRhdGFSZWNlaXZlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIHByb3RvdHlwZTogZnVuY3Rpb24gb25Jbml0U2VnbWVudCh0eXBlOiBzdHJpbmcsIGluaXRTZWdtZW50OiBBcnJheUJ1ZmZlcik6IHZvaWRcclxuICAgICAgIEluaXRTZWdtZW50OiB7XHJcbiAgICAgICAgICAgdHlwZTogc3RyaW5nLFxyXG4gICAgICAgICAgIGRhdGE6IEFycmF5QnVmZmVyLFxyXG4gICAgICAgICAgIGNvZGVjOiBzdHJpbmcsXHJcbiAgICAgICAgICAgY29udGFpbmVyOiBzdHJpbmdcclxuICAgICAgIH1cclxuICAgICovXHJcbiAgICBnZXQgb25Jbml0U2VnbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25Jbml0U2VnbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgb25Jbml0U2VnbWVudChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX29uSW5pdFNlZ21lbnQgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICAvKiBwcm90b3R5cGU6IGZ1bmN0aW9uIG9uTWVkaWFTZWdtZW50KHR5cGU6IHN0cmluZywgbWVkaWFTZWdtZW50OiBNZWRpYVNlZ21lbnQpOiB2b2lkXHJcbiAgICAgICBNZWRpYVNlZ21lbnQ6IHtcclxuICAgICAgICAgICB0eXBlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgZGF0YTogQXJyYXlCdWZmZXIsXHJcbiAgICAgICAgICAgc2FtcGxlQ291bnQ6IGludDMyXHJcbiAgICAgICAgICAgaW5mbzogTWVkaWFTZWdtZW50SW5mb1xyXG4gICAgICAgfVxyXG4gICAgKi9cclxuICAgIGdldCBvbk1lZGlhU2VnbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25NZWRpYVNlZ21lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG9uTWVkaWFTZWdtZW50KGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fb25NZWRpYVNlZ21lbnQgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBpbnNlcnREaXNjb250aW51aXR5KCkge1xyXG4gICAgICAgIHRoaXMuX2F1ZGlvTmV4dER0cyA9IHRoaXMuX3ZpZGVvTmV4dER0cyA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBzZWVrKG9yaWdpbmFsRHRzKSB7XHJcbiAgICAgICAgdGhpcy5fYXVkaW9TdGFzaGVkTGFzdFNhbXBsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9TdGFzaGVkTGFzdFNhbXBsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbXV4KGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMuX29uTWVkaWFTZWdtZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ01QNFJlbXV4ZXI6IG9uTWVkaWFTZWdtZW50IGNhbGxiYWNrIG11c3QgYmUgc3BlY2lmaWNlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kdHNCYXNlSW5pdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUR0c0Jhc2UoYXVkaW9UcmFjaywgdmlkZW9UcmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlbXV4VmlkZW8odmlkZW9UcmFjayk7XHJcbiAgICAgICAgdGhpcy5fcmVtdXhBdWRpbyhhdWRpb1RyYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBfb25UcmFja01ldGFkYXRhUmVjZWl2ZWQodHlwZSwgbWV0YWRhdGEpIHtcclxuICAgICAgICBsZXQgbWV0YWJveCA9IG51bGw7XHJcblxyXG4gICAgICAgIGxldCBjb250YWluZXIgPSAnbXA0JztcclxuICAgICAgICBsZXQgY29kZWMgPSBtZXRhZGF0YS5jb2RlYztcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXVkaW9NZXRhID0gbWV0YWRhdGE7XHJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5jb2RlYyA9PT0gJ21wMycgJiYgdGhpcy5fbXAzVXNlTXBlZ0F1ZGlvKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAnYXVkaW8vbXBlZycgZm9yIE1QMyBhdWRpbyB0cmFja1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gJ21wZWcnO1xyXG4gICAgICAgICAgICAgICAgY29kZWMgPSAnJztcclxuICAgICAgICAgICAgICAgIG1ldGFib3ggPSBuZXcgVWludDhBcnJheSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gJ2F1ZGlvL21wNCwgY29kZWNzPVwiY29kZWNcIidcclxuICAgICAgICAgICAgICAgIG1ldGFib3ggPSBNUDQuZ2VuZXJhdGVJbml0U2VnbWVudChtZXRhZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlkZW9NZXRhID0gbWV0YWRhdGE7XHJcbiAgICAgICAgICAgIG1ldGFib3ggPSBNUDQuZ2VuZXJhdGVJbml0U2VnbWVudChtZXRhZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGlzcGF0Y2ggbWV0YWJveCAoSW5pdGlhbGl6YXRpb24gU2VnbWVudClcclxuICAgICAgICBpZiAoIXRoaXMuX29uSW5pdFNlZ21lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignTVA0UmVtdXhlcjogb25Jbml0U2VnbWVudCBjYWxsYmFjayBtdXN0IGJlIHNwZWNpZmllZCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fb25Jbml0U2VnbWVudCh0eXBlLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIGRhdGE6IG1ldGFib3guYnVmZmVyLFxyXG4gICAgICAgICAgICBjb2RlYzogY29kZWMsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogYCR7dHlwZX0vJHtjb250YWluZXJ9YCxcclxuICAgICAgICAgICAgbWVkaWFEdXJhdGlvbjogbWV0YWRhdGEuZHVyYXRpb24gIC8vIGluIHRpbWVzY2FsZSAxMDAwIChtaWxsaXNlY29uZHMpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NhbGN1bGF0ZUR0c0Jhc2UoYXVkaW9UcmFjaywgdmlkZW9UcmFjaykge1xyXG4gICAgICAgIGlmICh0aGlzLl9kdHNCYXNlSW5pdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhdWRpb1RyYWNrLnNhbXBsZXMgJiYgYXVkaW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdWRpb0R0c0Jhc2UgPSBhdWRpb1RyYWNrLnNhbXBsZXNbMF0uZHRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmlkZW9UcmFjay5zYW1wbGVzICYmIHZpZGVvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlkZW9EdHNCYXNlID0gdmlkZW9UcmFjay5zYW1wbGVzWzBdLmR0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2R0c0Jhc2UgPSBNYXRoLm1pbih0aGlzLl9hdWRpb0R0c0Jhc2UsIHRoaXMuX3ZpZGVvRHRzQmFzZSk7XHJcbiAgICAgICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZmx1c2hTdGFzaGVkU2FtcGxlcygpIHtcclxuICAgICAgICBsZXQgdmlkZW9TYW1wbGUgPSB0aGlzLl92aWRlb1N0YXNoZWRMYXN0U2FtcGxlO1xyXG4gICAgICAgIGxldCBhdWRpb1NhbXBsZSA9IHRoaXMuX2F1ZGlvU3Rhc2hlZExhc3RTYW1wbGU7XHJcblxyXG4gICAgICAgIGxldCB2aWRlb1RyYWNrID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAndmlkZW8nLFxyXG4gICAgICAgICAgICBpZDogMSxcclxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgIHNhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICBsZW5ndGg6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodmlkZW9TYW1wbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2aWRlb1RyYWNrLnNhbXBsZXMucHVzaCh2aWRlb1NhbXBsZSk7XHJcbiAgICAgICAgICAgIHZpZGVvVHJhY2subGVuZ3RoID0gdmlkZW9TYW1wbGUubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGF1ZGlvVHJhY2sgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXHJcbiAgICAgICAgICAgIGlkOiAyLFxyXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogMCxcclxuICAgICAgICAgICAgc2FtcGxlczogW10sXHJcbiAgICAgICAgICAgIGxlbmd0aDogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChhdWRpb1NhbXBsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvVHJhY2suc2FtcGxlcy5wdXNoKGF1ZGlvU2FtcGxlKTtcclxuICAgICAgICAgICAgYXVkaW9UcmFjay5sZW5ndGggPSBhdWRpb1NhbXBsZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl92aWRlb1N0YXNoZWRMYXN0U2FtcGxlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9hdWRpb1N0YXNoZWRMYXN0U2FtcGxlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVtdXhWaWRlbyh2aWRlb1RyYWNrLCB0cnVlKTtcclxuICAgICAgICB0aGlzLl9yZW11eEF1ZGlvKGF1ZGlvVHJhY2ssIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW11eEF1ZGlvKGF1ZGlvVHJhY2ssIGZvcmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2F1ZGlvTWV0YSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0cmFjayA9IGF1ZGlvVHJhY2s7XHJcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzO1xyXG4gICAgICAgIGxldCBkdHNDb3JyZWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBmaXJzdER0cyA9IC0xLCBsYXN0RHRzID0gLTEsIGxhc3RQdHMgPSAtMTtcclxuICAgICAgICBsZXQgcmVmU2FtcGxlRHVyYXRpb24gPSB0aGlzLl9hdWRpb01ldGEucmVmU2FtcGxlRHVyYXRpb247XHJcblxyXG4gICAgICAgIGxldCBtcGVnUmF3VHJhY2sgPSB0aGlzLl9hdWRpb01ldGEuY29kZWMgPT09ICdtcDMnICYmIHRoaXMuX21wM1VzZU1wZWdBdWRpbztcclxuICAgICAgICBsZXQgZmlyc3RTZWdtZW50QWZ0ZXJTZWVrID0gdGhpcy5fZHRzQmFzZUluaXRlZCAmJiB0aGlzLl9hdWRpb05leHREdHMgPT09IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbGV0IGluc2VydFByZWZpeFNpbGVudEZyYW1lID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICghc2FtcGxlcyB8fCBzYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA9PT0gMSAmJiAhZm9yY2UpIHtcclxuICAgICAgICAgICAgLy8gSWYgW3NhbXBsZSBjb3VudCBpbiBjdXJyZW50IGJhdGNoXSA9PT0gMSAmJiAoZm9yY2UgIT0gdHJ1ZSlcclxuICAgICAgICAgICAgLy8gSWdub3JlIGFuZCBrZWVwIGluIGRlbXV4ZXIncyBxdWV1ZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSAgLy8gZWxzZSBpZiAoZm9yY2UgPT09IHRydWUpIGRvIHJlbXV4XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGxldCBtZGF0Ym94ID0gbnVsbDtcclxuICAgICAgICBsZXQgbWRhdEJ5dGVzID0gMDtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIGluaXRpYWwgbWRhdCBzaXplXHJcbiAgICAgICAgaWYgKG1wZWdSYXdUcmFjaykge1xyXG4gICAgICAgICAgICAvLyBmb3IgcmF3IG1wZWcgYnVmZmVyXHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIG1kYXRCeXRlcyA9IHRyYWNrLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBmb3IgZm1wNCBtZGF0IGJveFxyXG4gICAgICAgICAgICBvZmZzZXQgPSA4OyAgLy8gc2l6ZSArIHR5cGVcclxuICAgICAgICAgICAgbWRhdEJ5dGVzID0gOCArIHRyYWNrLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgbGFzdFNhbXBsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFBvcCB0aGUgbGFzdFNhbXBsZSBhbmQgd2FpdGluZyBmb3Igc3Rhc2hcclxuICAgICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGxhc3RTYW1wbGUgPSBzYW1wbGVzLnBvcCgpO1xyXG4gICAgICAgICAgICBtZGF0Qnl0ZXMgLT0gbGFzdFNhbXBsZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbnNlcnQgW3N0YXNoZWQgbGFzdFNhbXBsZSBpbiB0aGUgcHJldmlvdXMgYmF0Y2hdIHRvIHRoZSBmcm9udFxyXG4gICAgICAgIGlmICh0aGlzLl9hdWRpb1N0YXNoZWRMYXN0U2FtcGxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IHNhbXBsZSA9IHRoaXMuX2F1ZGlvU3Rhc2hlZExhc3RTYW1wbGU7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvU3Rhc2hlZExhc3RTYW1wbGUgPSBudWxsO1xyXG4gICAgICAgICAgICBzYW1wbGVzLnVuc2hpZnQoc2FtcGxlKTtcclxuICAgICAgICAgICAgbWRhdEJ5dGVzICs9IHNhbXBsZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdGFzaCB0aGUgbGFzdFNhbXBsZSBvZiBjdXJyZW50IGJhdGNoLCB3YWl0aW5nIGZvciBuZXh0IGJhdGNoXHJcbiAgICAgICAgaWYgKGxhc3RTYW1wbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdWRpb1N0YXNoZWRMYXN0U2FtcGxlID0gbGFzdFNhbXBsZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgZmlyc3RTYW1wbGVPcmlnaW5hbER0cyA9IHNhbXBsZXNbMF0uZHRzIC0gdGhpcy5fZHRzQmFzZTtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIGR0c0NvcnJlY3Rpb25cclxuICAgICAgICBpZiAodGhpcy5fYXVkaW9OZXh0RHRzKSB7XHJcbiAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSBmaXJzdFNhbXBsZU9yaWdpbmFsRHRzIC0gdGhpcy5fYXVkaW9OZXh0RHRzO1xyXG4gICAgICAgIH0gZWxzZSB7ICAvLyB0aGlzLl9hdWRpb05leHREdHMgPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hdWRpb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpbGxTaWxlbnRBZnRlclNlZWsgJiYgIXRoaXMuX3ZpZGVvU2VnbWVudEluZm9MaXN0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hdWRpb01ldGEub3JpZ2luYWxDb2RlYyAhPT0gJ21wMycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0UHJlZml4U2lsZW50RnJhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBsYXN0U2FtcGxlID0gdGhpcy5fYXVkaW9TZWdtZW50SW5mb0xpc3QuZ2V0TGFzdFNhbXBsZUJlZm9yZShmaXJzdFNhbXBsZU9yaWdpbmFsRHRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0U2FtcGxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAoZmlyc3RTYW1wbGVPcmlnaW5hbER0cyAtIChsYXN0U2FtcGxlLm9yaWdpbmFsRHRzICsgbGFzdFNhbXBsZS5kdXJhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4cGVjdGVkRHRzID0gbGFzdFNhbXBsZS5kdHMgKyBsYXN0U2FtcGxlLmR1cmF0aW9uICsgZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IGZpcnN0U2FtcGxlT3JpZ2luYWxEdHMgLSBleHBlY3RlZER0cztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGxhc3RTYW1wbGUgPT0gbnVsbCwgY2Fubm90IGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgZHRzQ29ycmVjdGlvbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnNlcnRQcmVmaXhTaWxlbnRGcmFtZSkge1xyXG4gICAgICAgICAgICAvLyBhbGlnbiBhdWRpbyBzZWdtZW50IGJlZ2luRHRzIHRvIG1hdGNoIHdpdGggY3VycmVudCB2aWRlbyBzZWdtZW50J3MgYmVnaW5EdHNcclxuICAgICAgICAgICAgbGV0IGZpcnN0U2FtcGxlRHRzID0gZmlyc3RTYW1wbGVPcmlnaW5hbER0cyAtIGR0c0NvcnJlY3Rpb247XHJcbiAgICAgICAgICAgIGxldCB2aWRlb1NlZ21lbnQgPSB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5nZXRMYXN0U2VnbWVudEJlZm9yZShmaXJzdFNhbXBsZU9yaWdpbmFsRHRzKTtcclxuICAgICAgICAgICAgaWYgKHZpZGVvU2VnbWVudCAhPSBudWxsICYmIHZpZGVvU2VnbWVudC5iZWdpbkR0cyA8IGZpcnN0U2FtcGxlRHRzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2lsZW50VW5pdCA9IEFBQy5nZXRTaWxlbnRGcmFtZSh0aGlzLl9hdWRpb01ldGEub3JpZ2luYWxDb2RlYywgdGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2lsZW50VW5pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkdHMgPSB2aWRlb1NlZ21lbnQuYmVnaW5EdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpbGVudEZyYW1lRHVyYXRpb24gPSBmaXJzdFNhbXBsZUR0cyAtIHZpZGVvU2VnbWVudC5iZWdpbkR0cztcclxuICAgICAgICAgICAgICAgICAgICBMb2cudih0aGlzLlRBRywgYEluc2VydFByZWZpeFNpbGVudEF1ZGlvOiBkdHM6ICR7ZHRzfSwgZHVyYXRpb246ICR7c2lsZW50RnJhbWVEdXJhdGlvbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVzLnVuc2hpZnQoe3VuaXQ6IHNpbGVudFVuaXQsIGR0czogZHRzLCBwdHM6IGR0c30pO1xyXG4gICAgICAgICAgICAgICAgICAgIG1kYXRCeXRlcyArPSBzaWxlbnRVbml0LmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9ICAvLyBzaWxlbnRVbml0ID09IG51bGw6IENhbm5vdCBnZW5lcmF0ZSwgc2tpcFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zZXJ0UHJlZml4U2lsZW50RnJhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1wNFNhbXBsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gQ29ycmVjdCBkdHMgZm9yIGVhY2ggc2FtcGxlLCBhbmQgY2FsY3VsYXRlIHNhbXBsZSBkdXJhdGlvbi4gVGhlbiBvdXRwdXQgdG8gbXA0U2FtcGxlc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc2FtcGxlID0gc2FtcGxlc1tpXTtcclxuICAgICAgICAgICAgbGV0IHVuaXQgPSBzYW1wbGUudW5pdDtcclxuICAgICAgICAgICAgbGV0IG9yaWdpbmFsRHRzID0gc2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XHJcbiAgICAgICAgICAgIGxldCBkdHMgPSBvcmlnaW5hbER0cyAtIGR0c0NvcnJlY3Rpb247XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdER0cyA9IGR0cztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHNhbXBsZUR1cmF0aW9uID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpICE9PSBzYW1wbGVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0RHRzID0gc2FtcGxlc1tpICsgMV0uZHRzIC0gdGhpcy5fZHRzQmFzZSAtIGR0c0NvcnJlY3Rpb247XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAvLyB0aGUgbGFzdCBzYW1wbGVcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0U2FtcGxlICE9IG51bGwpIHsgIC8vIHVzZSBzdGFzaGVkIHNhbXBsZSdzIGR0cyB0byBjYWxjdWxhdGUgc2FtcGxlIGR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHREdHMgPSBsYXN0U2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2UgLSBkdHNDb3JyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbmV4dER0cyAtIGR0cztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkgeyAgLy8gdXNlIHNlY29uZCBsYXN0IHNhbXBsZSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbXA0U2FtcGxlc1ttcDRTYW1wbGVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgIC8vIHRoZSBvbmx5IG9uZSBzYW1wbGUsIHVzZSByZWZlcmVuY2Ugc2FtcGxlIGR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKHJlZlNhbXBsZUR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IG5lZWRGaWxsU2lsZW50RnJhbWVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBzaWxlbnRGcmFtZXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gU2lsZW50IGZyYW1lIGdlbmVyYXRpb24sIGlmIGxhcmdlIHRpbWVzdGFtcCBnYXAgZGV0ZWN0ZWQgJiYgY29uZmlnLmZpeEF1ZGlvVGltZXN0YW1wR2FwXHJcbiAgICAgICAgICAgIGlmIChzYW1wbGVEdXJhdGlvbiA+IHJlZlNhbXBsZUR1cmF0aW9uICogMS41ICYmIHRoaXMuX2F1ZGlvTWV0YS5jb2RlYyAhPT0gJ21wMycgJiYgdGhpcy5fZmlsbEF1ZGlvVGltZXN0YW1wR2FwICYmICFCcm93c2VyLnNhZmFyaSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBpbnNlcnQgc2lsZW50IGZyYW1lcyB0byBmaWxsIHRpbWVzdGFtcCBnYXBcclxuICAgICAgICAgICAgICAgIG5lZWRGaWxsU2lsZW50RnJhbWVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBkZWx0YSA9IE1hdGguYWJzKHNhbXBsZUR1cmF0aW9uIC0gcmVmU2FtcGxlRHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZyYW1lQ291bnQgPSBNYXRoLmNlaWwoZGVsdGEgLyByZWZTYW1wbGVEdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudER0cyA9IGR0cyArIHJlZlNhbXBsZUR1cmF0aW9uOyAgLy8gTm90aWNlOiBpbiBmbG9hdFxyXG5cclxuICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnTGFyZ2UgYXVkaW8gdGltZXN0YW1wIGdhcCBkZXRlY3RlZCwgbWF5IGNhdXNlIEFWIHN5bmMgdG8gZHJpZnQuICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTaWxlbnQgZnJhbWVzIHdpbGwgYmUgZ2VuZXJhdGVkIHRvIGF2b2lkIHVuc3luYy5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgZHRzOiAke2R0cyArIHNhbXBsZUR1cmF0aW9ufSBtcywgZXhwZWN0ZWQ6ICR7ZHRzICsgTWF0aC5yb3VuZChyZWZTYW1wbGVEdXJhdGlvbil9IG1zLCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgZGVsdGE6ICR7TWF0aC5yb3VuZChkZWx0YSl9IG1zLCBnZW5lcmF0ZTogJHtmcmFtZUNvdW50fSBmcmFtZXNgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2lsZW50VW5pdCA9IEFBQy5nZXRTaWxlbnRGcmFtZSh0aGlzLl9hdWRpb01ldGEub3JpZ2luYWxDb2RlYywgdGhpcy5fYXVkaW9NZXRhLmNoYW5uZWxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2lsZW50VW5pdCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdVbmFibGUgdG8gZ2VuZXJhdGUgc2lsZW50IGZyYW1lIGZvciAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5fYXVkaW9NZXRhLm9yaWdpbmFsQ29kZWN9IHdpdGggJHt0aGlzLl9hdWRpb01ldGEuY2hhbm5lbENvdW50fSBjaGFubmVscywgcmVwZWF0IGxhc3QgZnJhbWVgKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXBlYXQgbGFzdCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIHNpbGVudFVuaXQgPSB1bml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2lsZW50RnJhbWVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmcmFtZUNvdW50OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW50RHRzID0gTWF0aC5yb3VuZChjdXJyZW50RHRzKTsgIC8vIHJvdW5kIHRvIGludGVnZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2lsZW50RnJhbWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHByZXZpb3VzIGZyYW1lIHNhbXBsZSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNGcmFtZSA9IHNpbGVudEZyYW1lc1tzaWxlbnRGcmFtZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRnJhbWUuZHVyYXRpb24gPSBpbnREdHMgLSBwcmV2aW91c0ZyYW1lLmR0cztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyYW1lID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdHM6IGludER0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHRzOiBpbnREdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0czogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pdDogc2lsZW50VW5pdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogc2lsZW50VW5pdC5ieXRlTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCwgIC8vIHdhaXQgZm9yIG5leHQgc2FtcGxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRHRzOiBvcmlnaW5hbER0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGVhZGluZzogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZHNPbjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVwZW5kZWRPbjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgc2lsZW50RnJhbWVzLnB1c2goZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1kYXRCeXRlcyArPSBmcmFtZS5zaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREdHMgKz0gcmVmU2FtcGxlRHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGFzdCBmcmFtZTogYWxpZ24gZW5kIHRpbWUgdG8gbmV4dCBmcmFtZSBkdHNcclxuICAgICAgICAgICAgICAgIGxldCBsYXN0RnJhbWUgPSBzaWxlbnRGcmFtZXNbc2lsZW50RnJhbWVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgbGFzdEZyYW1lLmR1cmF0aW9uID0gZHRzICsgc2FtcGxlRHVyYXRpb24gLSBsYXN0RnJhbWUuZHRzO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNpbGVudEZyYW1lcy5mb3JFYWNoKChmcmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIExvZy53KHRoaXMuVEFHLCBgU2lsZW50QXVkaW86IGR0czogJHtmcmFtZS5kdHN9LCBkdXJhdGlvbjogJHtmcmFtZS5kdXJhdGlvbn1gKTtcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNldCBjb3JyZWN0IHNhbXBsZSBkdXJhdGlvbiBmb3IgY3VycmVudCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBNYXRoLnJvdW5kKHJlZlNhbXBsZUR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbXA0U2FtcGxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGR0czogZHRzLFxyXG4gICAgICAgICAgICAgICAgcHRzOiBkdHMsXHJcbiAgICAgICAgICAgICAgICBjdHM6IDAsXHJcbiAgICAgICAgICAgICAgICB1bml0OiBzYW1wbGUudW5pdCxcclxuICAgICAgICAgICAgICAgIHNpemU6IHNhbXBsZS51bml0LmJ5dGVMZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogc2FtcGxlRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbER0czogb3JpZ2luYWxEdHMsXHJcbiAgICAgICAgICAgICAgICBmbGFnczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTGVhZGluZzogMCxcclxuICAgICAgICAgICAgICAgICAgICBkZXBlbmRzT246IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZXBlbmRlZE9uOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmVlZEZpbGxTaWxlbnRGcmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNpbGVudCBmcmFtZXMgc2hvdWxkIGJlIGluc2VydGVkIGFmdGVyIHdyb25nLWR1cmF0aW9uIGZyYW1lXHJcbiAgICAgICAgICAgICAgICBtcDRTYW1wbGVzLnB1c2guYXBwbHkobXA0U2FtcGxlcywgc2lsZW50RnJhbWVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWxsb2NhdGUgbWRhdGJveFxyXG4gICAgICAgIGlmIChtcGVnUmF3VHJhY2spIHtcclxuICAgICAgICAgICAgLy8gYWxsb2NhdGUgZm9yIHJhdyBtcGVnIGJ1ZmZlclxyXG4gICAgICAgICAgICBtZGF0Ym94ID0gbmV3IFVpbnQ4QXJyYXkobWRhdEJ5dGVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSBmb3IgZm1wNCBtZGF0IGJveFxyXG4gICAgICAgICAgICBtZGF0Ym94ID0gbmV3IFVpbnQ4QXJyYXkobWRhdEJ5dGVzKTtcclxuICAgICAgICAgICAgLy8gc2l6ZSBmaWVsZFxyXG4gICAgICAgICAgICBtZGF0Ym94WzBdID0gKG1kYXRCeXRlcyA+Pj4gMjQpICYgMHhGRjtcclxuICAgICAgICAgICAgbWRhdGJveFsxXSA9IChtZGF0Qnl0ZXMgPj4+IDE2KSAmIDB4RkY7XHJcbiAgICAgICAgICAgIG1kYXRib3hbMl0gPSAobWRhdEJ5dGVzID4+PiAgOCkgJiAweEZGO1xyXG4gICAgICAgICAgICBtZGF0Ym94WzNdID0gKG1kYXRCeXRlcykgJiAweEZGO1xyXG4gICAgICAgICAgICAvLyB0eXBlIGZpZWxkIChmb3VyQ0MpXHJcbiAgICAgICAgICAgIG1kYXRib3guc2V0KE1QNC50eXBlcy5tZGF0LCA0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFdyaXRlIHNhbXBsZXMgaW50byBtZGF0Ym94XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtcDRTYW1wbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB1bml0ID0gbXA0U2FtcGxlc1tpXS51bml0O1xyXG4gICAgICAgICAgICBtZGF0Ym94LnNldCh1bml0LCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gdW5pdC5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxhdGVzdCA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICBsYXN0RHRzID0gbGF0ZXN0LmR0cyArIGxhdGVzdC5kdXJhdGlvbjtcclxuICAgICAgICB0aGlzLl9hdWRpb05leHREdHMgPSBsYXN0RHRzO1xyXG5cclxuICAgICAgICAvLyBmaWxsIG1lZGlhIHNlZ21lbnQgaW5mbyAmIGFkZCB0byBpbmZvIGxpc3RcclxuICAgICAgICBsZXQgaW5mbyA9IG5ldyBNZWRpYVNlZ21lbnRJbmZvKCk7XHJcbiAgICAgICAgaW5mby5iZWdpbkR0cyA9IGZpcnN0RHRzO1xyXG4gICAgICAgIGluZm8uZW5kRHRzID0gbGFzdER0cztcclxuICAgICAgICBpbmZvLmJlZ2luUHRzID0gZmlyc3REdHM7XHJcbiAgICAgICAgaW5mby5lbmRQdHMgPSBsYXN0RHRzO1xyXG4gICAgICAgIGluZm8ub3JpZ2luYWxCZWdpbkR0cyA9IG1wNFNhbXBsZXNbMF0ub3JpZ2luYWxEdHM7XHJcbiAgICAgICAgaW5mby5vcmlnaW5hbEVuZER0cyA9IGxhdGVzdC5vcmlnaW5hbER0cyArIGxhdGVzdC5kdXJhdGlvbjtcclxuICAgICAgICBpbmZvLmZpcnN0U2FtcGxlID0gbmV3IFNhbXBsZUluZm8obXA0U2FtcGxlc1swXS5kdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1wNFNhbXBsZXNbMF0ucHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtcDRTYW1wbGVzWzBdLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtcDRTYW1wbGVzWzBdLm9yaWdpbmFsRHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSk7XHJcbiAgICAgICAgaW5mby5sYXN0U2FtcGxlID0gbmV3IFNhbXBsZUluZm8obGF0ZXN0LmR0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3QucHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdC5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3Qub3JpZ2luYWxEdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNMaXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvU2VnbWVudEluZm9MaXN0LmFwcGVuZChpbmZvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBtcDRTYW1wbGVzO1xyXG4gICAgICAgIHRyYWNrLnNlcXVlbmNlTnVtYmVyKys7XHJcblxyXG4gICAgICAgIGxldCBtb29mYm94ID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKG1wZWdSYXdUcmFjaykge1xyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBlbXB0eSBidWZmZXIsIGJlY2F1c2UgdXNlbGVzcyBmb3IgcmF3IG1wZWdcclxuICAgICAgICAgICAgbW9vZmJveCA9IG5ldyBVaW50OEFycmF5KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbW9vZiBmb3IgZm1wNCBzZWdtZW50XHJcbiAgICAgICAgICAgIG1vb2Zib3ggPSBNUDQubW9vZih0cmFjaywgZmlyc3REdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJhY2suc2FtcGxlcyA9IFtdO1xyXG4gICAgICAgIHRyYWNrLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGxldCBzZWdtZW50ID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9tZXJnZUJveGVzKG1vb2Zib3gsIG1kYXRib3gpLmJ1ZmZlcixcclxuICAgICAgICAgICAgc2FtcGxlQ291bnQ6IG1wNFNhbXBsZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICBpbmZvOiBpbmZvXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKG1wZWdSYXdUcmFjayAmJiBmaXJzdFNlZ21lbnRBZnRlclNlZWspIHtcclxuICAgICAgICAgICAgLy8gRm9yIE1QRUcgYXVkaW8gc3RyZWFtIGluIE1TRSwgaWYgc2Vla2luZyBvY2N1cnJlZCwgYmVmb3JlIGFwcGVuZGluZyBuZXcgYnVmZmVyXHJcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgZXhwbGljaXRseSBzZXQgdGltZXN0YW1wT2Zmc2V0IHRvIHRoZSBkZXNpcmVkIHBvaW50IGluIHRpbWVsaW5lIGZvciBtcGVnIFNvdXJjZUJ1ZmZlci5cclxuICAgICAgICAgICAgc2VnbWVudC50aW1lc3RhbXBPZmZzZXQgPSBmaXJzdER0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX29uTWVkaWFTZWdtZW50KCdhdWRpbycsIHNlZ21lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW11eFZpZGVvKHZpZGVvVHJhY2ssIGZvcmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3ZpZGVvTWV0YSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0cmFjayA9IHZpZGVvVHJhY2s7XHJcbiAgICAgICAgbGV0IHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzO1xyXG4gICAgICAgIGxldCBkdHNDb3JyZWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBmaXJzdER0cyA9IC0xLCBsYXN0RHRzID0gLTE7XHJcbiAgICAgICAgbGV0IGZpcnN0UHRzID0gLTEsIGxhc3RQdHMgPSAtMTtcclxuXHJcbiAgICAgICAgaWYgKCFzYW1wbGVzIHx8IHNhbXBsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNhbXBsZXMubGVuZ3RoID09PSAxICYmICFmb3JjZSkge1xyXG4gICAgICAgICAgICAvLyBJZiBbc2FtcGxlIGNvdW50IGluIGN1cnJlbnQgYmF0Y2hdID09PSAxICYmIChmb3JjZSAhPSB0cnVlKVxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgYW5kIGtlZXAgaW4gZGVtdXhlcidzIHF1ZXVlXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9ICAvLyBlbHNlIGlmIChmb3JjZSA9PT0gdHJ1ZSkgZG8gcmVtdXhcclxuXHJcbiAgICAgICAgbGV0IG9mZnNldCA9IDg7XHJcbiAgICAgICAgbGV0IG1kYXRib3ggPSBudWxsO1xyXG4gICAgICAgIGxldCBtZGF0Qnl0ZXMgPSA4ICsgdmlkZW9UcmFjay5sZW5ndGg7XHJcblxyXG5cclxuICAgICAgICBsZXQgbGFzdFNhbXBsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFBvcCB0aGUgbGFzdFNhbXBsZSBhbmQgd2FpdGluZyBmb3Igc3Rhc2hcclxuICAgICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIGxhc3RTYW1wbGUgPSBzYW1wbGVzLnBvcCgpO1xyXG4gICAgICAgICAgICBtZGF0Qnl0ZXMgLT0gbGFzdFNhbXBsZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbnNlcnQgW3N0YXNoZWQgbGFzdFNhbXBsZSBpbiB0aGUgcHJldmlvdXMgYmF0Y2hdIHRvIHRoZSBmcm9udFxyXG4gICAgICAgIGlmICh0aGlzLl92aWRlb1N0YXNoZWRMYXN0U2FtcGxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IHNhbXBsZSA9IHRoaXMuX3ZpZGVvU3Rhc2hlZExhc3RTYW1wbGU7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvU3Rhc2hlZExhc3RTYW1wbGUgPSBudWxsO1xyXG4gICAgICAgICAgICBzYW1wbGVzLnVuc2hpZnQoc2FtcGxlKTtcclxuICAgICAgICAgICAgbWRhdEJ5dGVzICs9IHNhbXBsZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdGFzaCB0aGUgbGFzdFNhbXBsZSBvZiBjdXJyZW50IGJhdGNoLCB3YWl0aW5nIGZvciBuZXh0IGJhdGNoXHJcbiAgICAgICAgaWYgKGxhc3RTYW1wbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl92aWRlb1N0YXNoZWRMYXN0U2FtcGxlID0gbGFzdFNhbXBsZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgZmlyc3RTYW1wbGVPcmlnaW5hbER0cyA9IHNhbXBsZXNbMF0uZHRzIC0gdGhpcy5fZHRzQmFzZTtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIGR0c0NvcnJlY3Rpb25cclxuICAgICAgICBpZiAodGhpcy5fdmlkZW9OZXh0RHRzKSB7XHJcbiAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSBmaXJzdFNhbXBsZU9yaWdpbmFsRHRzIC0gdGhpcy5fdmlkZW9OZXh0RHRzO1xyXG4gICAgICAgIH0gZWxzZSB7ICAvLyB0aGlzLl92aWRlb05leHREdHMgPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgIGR0c0NvcnJlY3Rpb24gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhc3RTYW1wbGUgPSB0aGlzLl92aWRlb1NlZ21lbnRJbmZvTGlzdC5nZXRMYXN0U2FtcGxlQmVmb3JlKGZpcnN0U2FtcGxlT3JpZ2luYWxEdHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RTYW1wbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IChmaXJzdFNhbXBsZU9yaWdpbmFsRHRzIC0gKGxhc3RTYW1wbGUub3JpZ2luYWxEdHMgKyBsYXN0U2FtcGxlLmR1cmF0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDw9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXhwZWN0ZWREdHMgPSBsYXN0U2FtcGxlLmR0cyArIGxhc3RTYW1wbGUuZHVyYXRpb24gKyBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gZmlyc3RTYW1wbGVPcmlnaW5hbER0cyAtIGV4cGVjdGVkRHRzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gbGFzdFNhbXBsZSA9PSBudWxsLCBjYW5ub3QgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICBkdHNDb3JyZWN0aW9uID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluZm8gPSBuZXcgTWVkaWFTZWdtZW50SW5mbygpO1xyXG4gICAgICAgIGxldCBtcDRTYW1wbGVzID0gW107XHJcblxyXG4gICAgICAgIC8vIENvcnJlY3QgZHRzIGZvciBlYWNoIHNhbXBsZSwgYW5kIGNhbGN1bGF0ZSBzYW1wbGUgZHVyYXRpb24uIFRoZW4gb3V0cHV0IHRvIG1wNFNhbXBsZXNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHNhbXBsZSA9IHNhbXBsZXNbaV07XHJcbiAgICAgICAgICAgIGxldCBvcmlnaW5hbER0cyA9IHNhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xyXG4gICAgICAgICAgICBsZXQgaXNLZXlmcmFtZSA9IHNhbXBsZS5pc0tleWZyYW1lO1xyXG4gICAgICAgICAgICBsZXQgZHRzID0gb3JpZ2luYWxEdHMgLSBkdHNDb3JyZWN0aW9uO1xyXG4gICAgICAgICAgICBsZXQgY3RzID0gc2FtcGxlLmN0cztcclxuICAgICAgICAgICAgbGV0IHB0cyA9IGR0cyArIGN0cztcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdER0cyA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0RHRzID0gZHRzO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RQdHMgPSBwdHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSAhPT0gc2FtcGxlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dER0cyA9IHNhbXBsZXNbaSArIDFdLmR0cyAtIHRoaXMuX2R0c0Jhc2UgLSBkdHNDb3JyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyAgLy8gdGhlIGxhc3Qgc2FtcGxlXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFNhbXBsZSAhPSBudWxsKSB7ICAvLyB1c2Ugc3Rhc2hlZCBzYW1wbGUncyBkdHMgdG8gY2FsY3VsYXRlIHNhbXBsZSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0RHRzID0gbGFzdFNhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlIC0gZHRzQ29ycmVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1wNFNhbXBsZXMubGVuZ3RoID49IDEpIHsgIC8vIHVzZSBzZWNvbmQgbGFzdCBzYW1wbGUgZHVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXS5kdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIHNhbXBsZSBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcih0aGlzLl92aWRlb01ldGEucmVmU2FtcGxlRHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNLZXlmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN5bmNQb2ludCA9IG5ldyBTYW1wbGVJbmZvKGR0cywgcHRzLCBzYW1wbGVEdXJhdGlvbiwgc2FtcGxlLmR0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzeW5jUG9pbnQuZmlsZXBvc2l0aW9uID0gc2FtcGxlLmZpbGVwb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGluZm8uYXBwZW5kU3luY1BvaW50KHN5bmNQb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1wNFNhbXBsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBkdHM6IGR0cyxcclxuICAgICAgICAgICAgICAgIHB0czogcHRzLFxyXG4gICAgICAgICAgICAgICAgY3RzOiBjdHMsXHJcbiAgICAgICAgICAgICAgICB1bml0czogc2FtcGxlLnVuaXRzLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogc2FtcGxlLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGlzS2V5ZnJhbWU6IGlzS2V5ZnJhbWUsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogc2FtcGxlRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbER0czogb3JpZ2luYWxEdHMsXHJcbiAgICAgICAgICAgICAgICBmbGFnczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTGVhZGluZzogMCxcclxuICAgICAgICAgICAgICAgICAgICBkZXBlbmRzT246IGlzS2V5ZnJhbWUgPyAyIDogMSxcclxuICAgICAgICAgICAgICAgICAgICBpc0RlcGVuZGVkT246IGlzS2V5ZnJhbWUgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgICAgICBoYXNSZWR1bmRhbmN5OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTm9uU3luYzogaXNLZXlmcmFtZSA/IDAgOiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWxsb2NhdGUgbWRhdGJveFxyXG4gICAgICAgIG1kYXRib3ggPSBuZXcgVWludDhBcnJheShtZGF0Qnl0ZXMpO1xyXG4gICAgICAgIG1kYXRib3hbMF0gPSAobWRhdEJ5dGVzID4+PiAyNCkgJiAweEZGO1xyXG4gICAgICAgIG1kYXRib3hbMV0gPSAobWRhdEJ5dGVzID4+PiAxNikgJiAweEZGO1xyXG4gICAgICAgIG1kYXRib3hbMl0gPSAobWRhdEJ5dGVzID4+PiAgOCkgJiAweEZGO1xyXG4gICAgICAgIG1kYXRib3hbM10gPSAobWRhdEJ5dGVzKSAmIDB4RkY7XHJcbiAgICAgICAgbWRhdGJveC5zZXQoTVA0LnR5cGVzLm1kYXQsIDQpO1xyXG5cclxuICAgICAgICAvLyBXcml0ZSBzYW1wbGVzIGludG8gbWRhdGJveFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXA0U2FtcGxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdW5pdHMgPSBtcDRTYW1wbGVzW2ldLnVuaXRzO1xyXG4gICAgICAgICAgICB3aGlsZSAodW5pdHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdW5pdCA9IHVuaXRzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHVuaXQuZGF0YTtcclxuICAgICAgICAgICAgICAgIG1kYXRib3guc2V0KGRhdGEsIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gZGF0YS5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGF0ZXN0ID0gbXA0U2FtcGxlc1ttcDRTYW1wbGVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGxhc3REdHMgPSBsYXRlc3QuZHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xyXG4gICAgICAgIGxhc3RQdHMgPSBsYXRlc3QucHRzICsgbGF0ZXN0LmR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuX3ZpZGVvTmV4dER0cyA9IGxhc3REdHM7XHJcblxyXG4gICAgICAgIC8vIGZpbGwgbWVkaWEgc2VnbWVudCBpbmZvICYgYWRkIHRvIGluZm8gbGlzdFxyXG4gICAgICAgIGluZm8uYmVnaW5EdHMgPSBmaXJzdER0cztcclxuICAgICAgICBpbmZvLmVuZER0cyA9IGxhc3REdHM7XHJcbiAgICAgICAgaW5mby5iZWdpblB0cyA9IGZpcnN0UHRzO1xyXG4gICAgICAgIGluZm8uZW5kUHRzID0gbGFzdFB0cztcclxuICAgICAgICBpbmZvLm9yaWdpbmFsQmVnaW5EdHMgPSBtcDRTYW1wbGVzWzBdLm9yaWdpbmFsRHRzO1xyXG4gICAgICAgIGluZm8ub3JpZ2luYWxFbmREdHMgPSBsYXRlc3Qub3JpZ2luYWxEdHMgKyBsYXRlc3QuZHVyYXRpb247XHJcbiAgICAgICAgaW5mby5maXJzdFNhbXBsZSA9IG5ldyBTYW1wbGVJbmZvKG1wNFNhbXBsZXNbMF0uZHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtcDRTYW1wbGVzWzBdLnB0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5vcmlnaW5hbER0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXA0U2FtcGxlc1swXS5pc0tleWZyYW1lKTtcclxuICAgICAgICBpbmZvLmxhc3RTYW1wbGUgPSBuZXcgU2FtcGxlSW5mbyhsYXRlc3QuZHRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdC5wdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0LmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdC5vcmlnaW5hbER0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3QuaXNLZXlmcmFtZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0xpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlkZW9TZWdtZW50SW5mb0xpc3QuYXBwZW5kKGluZm8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJhY2suc2FtcGxlcyA9IG1wNFNhbXBsZXM7XHJcbiAgICAgICAgdHJhY2suc2VxdWVuY2VOdW1iZXIrKztcclxuXHJcbiAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgY2hyb21lIDwgNTA6IGZvcmNlIGZpcnN0IHNhbXBsZSBhcyBhIHJhbmRvbSBhY2Nlc3MgcG9pbnRcclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5NDEyXHJcbiAgICAgICAgaWYgKHRoaXMuX2ZvcmNlRmlyc3RJRFIpIHtcclxuICAgICAgICAgICAgbGV0IGZsYWdzID0gbXA0U2FtcGxlc1swXS5mbGFncztcclxuICAgICAgICAgICAgZmxhZ3MuZGVwZW5kc09uID0gMjtcclxuICAgICAgICAgICAgZmxhZ3MuaXNOb25TeW5jID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtb29mYm94ID0gTVA0Lm1vb2YodHJhY2ssIGZpcnN0RHRzKTtcclxuICAgICAgICB0cmFjay5zYW1wbGVzID0gW107XHJcbiAgICAgICAgdHJhY2subGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5fb25NZWRpYVNlZ21lbnQoJ3ZpZGVvJywge1xyXG4gICAgICAgICAgICB0eXBlOiAndmlkZW8nLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLl9tZXJnZUJveGVzKG1vb2Zib3gsIG1kYXRib3gpLmJ1ZmZlcixcclxuICAgICAgICAgICAgc2FtcGxlQ291bnQ6IG1wNFNhbXBsZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICBpbmZvOiBpbmZvXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX21lcmdlQm94ZXMobW9vZiwgbWRhdCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgVWludDhBcnJheShtb29mLmJ5dGVMZW5ndGggKyBtZGF0LmJ5dGVMZW5ndGgpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQobW9vZiwgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldChtZGF0LCBtb29mLmJ5dGVMZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNUDRSZW11eGVyOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5sZXQgQnJvd3NlciA9IHt9O1xyXG5cclxuZnVuY3Rpb24gZGV0ZWN0KCkge1xyXG4gICAgLy8gbW9kaWZpZWQgZnJvbSBqcXVlcnktYnJvd3Nlci1wbHVnaW5cclxuXHJcbiAgICBsZXQgdWEgPSBzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBsZXQgbWF0Y2ggPSAvKGVkZ2UpXFwvKFtcXHcuXSspLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8ob3ByKVtcXC9dKFtcXHcuXSspLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8oY2hyb21lKVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICAvKGllbW9iaWxlKVtcXC9dKFtcXHcuXSspLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8odmVyc2lvbikoYXBwbGV3ZWJraXQpWyBcXC9dKFtcXHcuXSspLiooc2FmYXJpKVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICAvKHdlYmtpdClbIFxcL10oW1xcdy5dKykuKih2ZXJzaW9uKVsgXFwvXShbXFx3Ll0rKS4qKHNhZmFyaSlbIFxcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyh3ZWJraXQpWyBcXC9dKFtcXHcuXSspLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFxcL10oW1xcdy5dKykvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyhtc2llKSAoW1xcdy5dKykvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgdWEuaW5kZXhPZigndHJpZGVudCcpID49IDAgJiYgLyhydikoPzo6fCApKFtcXHcuXSspLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIHVhLmluZGV4T2YoJ2NvbXBhdGlibGUnKSA8IDAgJiYgLyhmaXJlZm94KVsgXFwvXShbXFx3Ll0rKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICBbXTtcclxuXHJcbiAgICBsZXQgcGxhdGZvcm1fbWF0Y2ggPSAvKGlwYWQpLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8oaXBvZCkvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyh3aW5kb3dzIHBob25lKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICAvKGlwaG9uZSkvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyhraW5kbGUpLy5leGVjKHVhKSB8fFxyXG4gICAgICAgIC8oYW5kcm9pZCkvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyh3aW5kb3dzKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICAvKG1hYykvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyhsaW51eCkvLmV4ZWModWEpIHx8XHJcbiAgICAgICAgLyhjcm9zKS8uZXhlYyh1YSkgfHxcclxuICAgICAgICBbXTtcclxuXHJcbiAgICBsZXQgbWF0Y2hlZCA9IHtcclxuICAgICAgICBicm93c2VyOiBtYXRjaFs1XSB8fCBtYXRjaFszXSB8fCBtYXRjaFsxXSB8fCAnJyxcclxuICAgICAgICB2ZXJzaW9uOiBtYXRjaFsyXSB8fCBtYXRjaFs0XSB8fCAnMCcsXHJcbiAgICAgICAgbWFqb3JWZXJzaW9uOiBtYXRjaFs0XSB8fCBtYXRjaFsyXSB8fCAnMCcsXHJcbiAgICAgICAgcGxhdGZvcm06IHBsYXRmb3JtX21hdGNoWzBdIHx8ICcnXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBicm93c2VyID0ge307XHJcbiAgICBpZiAobWF0Y2hlZC5icm93c2VyKSB7XHJcbiAgICAgICAgYnJvd3NlclttYXRjaGVkLmJyb3dzZXJdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IHZlcnNpb25BcnJheSA9IG1hdGNoZWQubWFqb3JWZXJzaW9uLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0ge1xyXG4gICAgICAgICAgICBtYWpvcjogcGFyc2VJbnQobWF0Y2hlZC5tYWpvclZlcnNpb24sIDEwKSxcclxuICAgICAgICAgICAgc3RyaW5nOiBtYXRjaGVkLnZlcnNpb25cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh2ZXJzaW9uQXJyYXkubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBicm93c2VyLnZlcnNpb24ubWlub3IgPSBwYXJzZUludCh2ZXJzaW9uQXJyYXlbMV0sIDEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25BcnJheS5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgIGJyb3dzZXIudmVyc2lvbi5idWlsZCA9IHBhcnNlSW50KHZlcnNpb25BcnJheVsyXSwgMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAobWF0Y2hlZC5wbGF0Zm9ybSkge1xyXG4gICAgICAgIGJyb3dzZXJbbWF0Y2hlZC5wbGF0Zm9ybV0gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChicm93c2VyLmNocm9tZSB8fCBicm93c2VyLm9wciB8fCBicm93c2VyLnNhZmFyaSkge1xyXG4gICAgICAgIGJyb3dzZXIud2Via2l0ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNU0lFLiBJRTExIGhhcyAncnYnIGlkZW50aWZlclxyXG4gICAgaWYgKGJyb3dzZXIucnYgfHwgYnJvd3Nlci5pZW1vYmlsZSkge1xyXG4gICAgICAgIGlmIChicm93c2VyLnJ2KSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBicm93c2VyLnJ2O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbXNpZSA9ICdtc2llJztcclxuICAgICAgICBtYXRjaGVkLmJyb3dzZXIgPSBtc2llO1xyXG4gICAgICAgIGJyb3dzZXJbbXNpZV0gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1pY3Jvc29mdCBFZGdlXHJcbiAgICBpZiAoYnJvd3Nlci5lZGdlKSB7XHJcbiAgICAgICAgZGVsZXRlIGJyb3dzZXIuZWRnZTtcclxuICAgICAgICBsZXQgbXNlZGdlID0gJ21zZWRnZSc7XHJcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gbXNlZGdlO1xyXG4gICAgICAgIGJyb3dzZXJbbXNlZGdlXSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3BlcmEgMTUrXHJcbiAgICBpZiAoYnJvd3Nlci5vcHIpIHtcclxuICAgICAgICBsZXQgb3BlcmEgPSAnb3BlcmEnO1xyXG4gICAgICAgIG1hdGNoZWQuYnJvd3NlciA9IG9wZXJhO1xyXG4gICAgICAgIGJyb3dzZXJbb3BlcmFdID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdG9jayBhbmRyb2lkIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpXHJcbiAgICBpZiAoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5hbmRyb2lkKSB7XHJcbiAgICAgICAgbGV0IGFuZHJvaWQgPSAnYW5kcm9pZCc7XHJcbiAgICAgICAgbWF0Y2hlZC5icm93c2VyID0gYW5kcm9pZDtcclxuICAgICAgICBicm93c2VyW2FuZHJvaWRdID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBicm93c2VyLm5hbWUgPSBtYXRjaGVkLmJyb3dzZXI7XHJcbiAgICBicm93c2VyLnBsYXRmb3JtID0gbWF0Y2hlZC5wbGF0Zm9ybTtcclxuXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gQnJvd3Nlcikge1xyXG4gICAgICAgIGlmIChCcm93c2VyLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIEJyb3dzZXJba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuYXNzaWduKEJyb3dzZXIsIGJyb3dzZXIpO1xyXG59XHJcblxyXG5kZXRlY3QoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJyb3dzZXI7IiwiLypcclxuICogQ29weXJpZ2h0IChDKSAyMDE2IEJpbGliaWxpLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIHpoZW5nIHFpYW4gPHhxcUB4cXEuaW0+XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBSdW50aW1lRXhjZXB0aW9uIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5fbWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdSdW50aW1lRXhjZXB0aW9uJztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWVzc2FnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgJzogJyArIHRoaXMubWVzc2FnZTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZXh0ZW5kcyBSdW50aW1lRXhjZXB0aW9uIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdJbGxlZ2FsU3RhdGVFeGNlcHRpb24nO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbiBleHRlbmRzIFJ1bnRpbWVFeGNlcHRpb24ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gJ0ludmFsaWRBcmd1bWVudEV4Y2VwdGlvbic7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24gZXh0ZW5kcyBSdW50aW1lRXhjZXB0aW9uIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbic7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50cyc7XHJcblxyXG5jbGFzcyBMb2cge1xyXG5cclxuICAgIHN0YXRpYyBlKHRhZywgbXNnKSB7XHJcbiAgICAgICAgaWYgKCF0YWcgfHwgTG9nLkZPUkNFX0dMT0JBTF9UQUcpXHJcbiAgICAgICAgICAgIHRhZyA9IExvZy5HTE9CQUxfVEFHO1xyXG5cclxuICAgICAgICBsZXQgc3RyID0gYFske3RhZ31dID4gJHttc2d9YDtcclxuXHJcbiAgICAgICAgaWYgKExvZy5FTkFCTEVfQ0FMTEJBQ0spIHtcclxuICAgICAgICAgICAgTG9nLmVtaXR0ZXIuZW1pdCgnbG9nJywgJ2Vycm9yJywgc3RyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghTG9nLkVOQUJMRV9FUlJPUikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0cik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb25zb2xlLndhcm4pIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKHN0cik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGkodGFnLCBtc2cpIHtcclxuICAgICAgICBpZiAoIXRhZyB8fCBMb2cuRk9SQ0VfR0xPQkFMX1RBRylcclxuICAgICAgICAgICAgdGFnID0gTG9nLkdMT0JBTF9UQUc7XHJcblxyXG4gICAgICAgIGxldCBzdHIgPSBgWyR7dGFnfV0gPiAke21zZ31gO1xyXG5cclxuICAgICAgICBpZiAoTG9nLkVOQUJMRV9DQUxMQkFDSykge1xyXG4gICAgICAgICAgICBMb2cuZW1pdHRlci5lbWl0KCdsb2cnLCAnaW5mbycsIHN0cik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIUxvZy5FTkFCTEVfSU5GTykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29uc29sZS5pbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhzdHIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3KHRhZywgbXNnKSB7XHJcbiAgICAgICAgaWYgKCF0YWcgfHwgTG9nLkZPUkNFX0dMT0JBTF9UQUcpXHJcbiAgICAgICAgICAgIHRhZyA9IExvZy5HTE9CQUxfVEFHO1xyXG5cclxuICAgICAgICBsZXQgc3RyID0gYFske3RhZ31dID4gJHttc2d9YDtcclxuXHJcbiAgICAgICAgaWYgKExvZy5FTkFCTEVfQ0FMTEJBQ0spIHtcclxuICAgICAgICAgICAgTG9nLmVtaXR0ZXIuZW1pdCgnbG9nJywgJ3dhcm4nLCBzdHIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFMb2cuRU5BQkxFX1dBUk4pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnNvbGUud2Fybikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oc3RyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdHIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZCh0YWcsIG1zZykge1xyXG4gICAgICAgIGlmICghdGFnIHx8IExvZy5GT1JDRV9HTE9CQUxfVEFHKVxyXG4gICAgICAgICAgICB0YWcgPSBMb2cuR0xPQkFMX1RBRztcclxuXHJcbiAgICAgICAgbGV0IHN0ciA9IGBbJHt0YWd9XSA+ICR7bXNnfWA7XHJcblxyXG4gICAgICAgIGlmIChMb2cuRU5BQkxFX0NBTExCQUNLKSB7XHJcbiAgICAgICAgICAgIExvZy5lbWl0dGVyLmVtaXQoJ2xvZycsICdkZWJ1ZycsIHN0cik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIUxvZy5FTkFCTEVfREVCVUcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnNvbGUuZGVidWcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhzdHIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB2KHRhZywgbXNnKSB7XHJcbiAgICAgICAgaWYgKCF0YWcgfHwgTG9nLkZPUkNFX0dMT0JBTF9UQUcpXHJcbiAgICAgICAgICAgIHRhZyA9IExvZy5HTE9CQUxfVEFHO1xyXG5cclxuICAgICAgICBsZXQgc3RyID0gYFske3RhZ31dID4gJHttc2d9YDtcclxuXHJcbiAgICAgICAgaWYgKExvZy5FTkFCTEVfQ0FMTEJBQ0spIHtcclxuICAgICAgICAgICAgTG9nLmVtaXR0ZXIuZW1pdCgnbG9nJywgJ3ZlcmJvc2UnLCBzdHIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFMb2cuRU5BQkxFX1ZFUkJPU0UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbkxvZy5HTE9CQUxfVEFHID0gJ2Zsdi5qcyc7XHJcbkxvZy5GT1JDRV9HTE9CQUxfVEFHID0gZmFsc2U7XHJcbkxvZy5FTkFCTEVfRVJST1IgPSB0cnVlO1xyXG5Mb2cuRU5BQkxFX0lORk8gPSB0cnVlO1xyXG5Mb2cuRU5BQkxFX1dBUk4gPSB0cnVlO1xyXG5Mb2cuRU5BQkxFX0RFQlVHID0gdHJ1ZTtcclxuTG9nLkVOQUJMRV9WRVJCT1NFID0gdHJ1ZTtcclxuXHJcbkxvZy5FTkFCTEVfQ0FMTEJBQ0sgPSBmYWxzZTtcclxuXHJcbkxvZy5lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTG9nOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50cyc7XHJcbmltcG9ydCBMb2cgZnJvbSAnLi9sb2dnZXIuanMnO1xyXG5cclxuY2xhc3MgTG9nZ2luZ0NvbnRyb2wge1xyXG5cclxuICAgIHN0YXRpYyBnZXQgZm9yY2VHbG9iYWxUYWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5GT1JDRV9HTE9CQUxfVEFHO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXQgZm9yY2VHbG9iYWxUYWcoZW5hYmxlKSB7XHJcbiAgICAgICAgTG9nLkZPUkNFX0dMT0JBTF9UQUcgPSBlbmFibGU7XHJcbiAgICAgICAgTG9nZ2luZ0NvbnRyb2wuX25vdGlmeUNoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgZ2xvYmFsVGFnKCkge1xyXG4gICAgICAgIHJldHVybiBMb2cuR0xPQkFMX1RBRztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0IGdsb2JhbFRhZyh0YWcpIHtcclxuICAgICAgICBMb2cuR0xPQkFMX1RBRyA9IHRhZztcclxuICAgICAgICBMb2dnaW5nQ29udHJvbC5fbm90aWZ5Q2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBlbmFibGVBbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5FTkFCTEVfVkVSQk9TRVxyXG4gICAgICAgICAgICAmJiBMb2cuRU5BQkxFX0RFQlVHXHJcbiAgICAgICAgICAgICYmIExvZy5FTkFCTEVfSU5GT1xyXG4gICAgICAgICAgICAmJiBMb2cuRU5BQkxFX1dBUk5cclxuICAgICAgICAgICAgJiYgTG9nLkVOQUJMRV9FUlJPUjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0IGVuYWJsZUFsbChlbmFibGUpIHtcclxuICAgICAgICBMb2cuRU5BQkxFX1ZFUkJPU0UgPSBlbmFibGU7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9ERUJVRyA9IGVuYWJsZTtcclxuICAgICAgICBMb2cuRU5BQkxFX0lORk8gPSBlbmFibGU7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9XQVJOID0gZW5hYmxlO1xyXG4gICAgICAgIExvZy5FTkFCTEVfRVJST1IgPSBlbmFibGU7XHJcbiAgICAgICAgTG9nZ2luZ0NvbnRyb2wuX25vdGlmeUNoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgZW5hYmxlRGVidWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5FTkFCTEVfREVCVUc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldCBlbmFibGVEZWJ1ZyhlbmFibGUpIHtcclxuICAgICAgICBMb2cuRU5BQkxFX0RFQlVHID0gZW5hYmxlO1xyXG4gICAgICAgIExvZ2dpbmdDb250cm9sLl9ub3RpZnlDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGVuYWJsZVZlcmJvc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5FTkFCTEVfVkVSQk9TRTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0IGVuYWJsZVZlcmJvc2UoZW5hYmxlKSB7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9WRVJCT1NFID0gZW5hYmxlO1xyXG4gICAgICAgIExvZ2dpbmdDb250cm9sLl9ub3RpZnlDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGVuYWJsZUluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5FTkFCTEVfSU5GTztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0IGVuYWJsZUluZm8oZW5hYmxlKSB7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9JTkZPID0gZW5hYmxlO1xyXG4gICAgICAgIExvZ2dpbmdDb250cm9sLl9ub3RpZnlDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGVuYWJsZVdhcm4oKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZy5FTkFCTEVfV0FSTjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0IGVuYWJsZVdhcm4oZW5hYmxlKSB7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9XQVJOID0gZW5hYmxlO1xyXG4gICAgICAgIExvZ2dpbmdDb250cm9sLl9ub3RpZnlDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGVuYWJsZUVycm9yKCkge1xyXG4gICAgICAgIHJldHVybiBMb2cuRU5BQkxFX0VSUk9SO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXQgZW5hYmxlRXJyb3IoZW5hYmxlKSB7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9FUlJPUiA9IGVuYWJsZTtcclxuICAgICAgICBMb2dnaW5nQ29udHJvbC5fbm90aWZ5Q2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldENvbmZpZygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnbG9iYWxUYWc6IExvZy5HTE9CQUxfVEFHLFxyXG4gICAgICAgICAgICBmb3JjZUdsb2JhbFRhZzogTG9nLkZPUkNFX0dMT0JBTF9UQUcsXHJcbiAgICAgICAgICAgIGVuYWJsZVZlcmJvc2U6IExvZy5FTkFCTEVfVkVSQk9TRSxcclxuICAgICAgICAgICAgZW5hYmxlRGVidWc6IExvZy5FTkFCTEVfREVCVUcsXHJcbiAgICAgICAgICAgIGVuYWJsZUluZm86IExvZy5FTkFCTEVfSU5GTyxcclxuICAgICAgICAgICAgZW5hYmxlV2FybjogTG9nLkVOQUJMRV9XQVJOLFxyXG4gICAgICAgICAgICBlbmFibGVFcnJvcjogTG9nLkVOQUJMRV9FUlJPUixcclxuICAgICAgICAgICAgZW5hYmxlQ2FsbGJhY2s6IExvZy5FTkFCTEVfQ0FMTEJBQ0tcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhcHBseUNvbmZpZyhjb25maWcpIHtcclxuICAgICAgICBMb2cuR0xPQkFMX1RBRyA9IGNvbmZpZy5nbG9iYWxUYWc7XHJcbiAgICAgICAgTG9nLkZPUkNFX0dMT0JBTF9UQUcgPSBjb25maWcuZm9yY2VHbG9iYWxUYWc7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9WRVJCT1NFID0gY29uZmlnLmVuYWJsZVZlcmJvc2U7XHJcbiAgICAgICAgTG9nLkVOQUJMRV9ERUJVRyA9IGNvbmZpZy5lbmFibGVEZWJ1ZztcclxuICAgICAgICBMb2cuRU5BQkxFX0lORk8gPSBjb25maWcuZW5hYmxlSW5mbztcclxuICAgICAgICBMb2cuRU5BQkxFX1dBUk4gPSBjb25maWcuZW5hYmxlV2FybjtcclxuICAgICAgICBMb2cuRU5BQkxFX0VSUk9SID0gY29uZmlnLmVuYWJsZUVycm9yO1xyXG4gICAgICAgIExvZy5FTkFCTEVfQ0FMTEJBQ0sgPSBjb25maWcuZW5hYmxlQ2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIF9ub3RpZnlDaGFuZ2UoKSB7XHJcbiAgICAgICAgbGV0IGVtaXR0ZXIgPSBMb2dnaW5nQ29udHJvbC5lbWl0dGVyO1xyXG5cclxuICAgICAgICBpZiAoZW1pdHRlci5saXN0ZW5lckNvdW50KCdjaGFuZ2UnKSA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGNvbmZpZyA9IExvZ2dpbmdDb250cm9sLmdldENvbmZpZygpO1xyXG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2NoYW5nZScsIGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWdpc3Rlckxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgTG9nZ2luZ0NvbnRyb2wuZW1pdHRlci5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIExvZ2dpbmdDb250cm9sLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoJ2NoYW5nZScsIGxpc3RlbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkTG9nTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICBMb2cuZW1pdHRlci5hZGRMaXN0ZW5lcignbG9nJywgbGlzdGVuZXIpO1xyXG4gICAgICAgIGlmIChMb2cuZW1pdHRlci5saXN0ZW5lckNvdW50KCdsb2cnKSA+IDApIHtcclxuICAgICAgICAgICAgTG9nLkVOQUJMRV9DQUxMQkFDSyA9IHRydWU7XHJcbiAgICAgICAgICAgIExvZ2dpbmdDb250cm9sLl9ub3RpZnlDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUxvZ0xpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgTG9nLmVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoJ2xvZycsIGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoTG9nLmVtaXR0ZXIubGlzdGVuZXJDb3VudCgnbG9nJykgPT09IDApIHtcclxuICAgICAgICAgICAgTG9nLkVOQUJMRV9DQUxMQkFDSyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBMb2dnaW5nQ29udHJvbC5fbm90aWZ5Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuTG9nZ2luZ0NvbnRyb2wuZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvZ2dpbmdDb250cm9sOyIsIi8qXHJcbiAqIENvcHlyaWdodCAoQykgMjAxNiBCaWxpYmlsaS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICpcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5jbGFzcyBQb2x5ZmlsbCB7XHJcblxyXG4gICAgc3RhdGljIGluc3RhbGwoKSB7XHJcbiAgICAgICAgLy8gRVM2IE9iamVjdC5zZXRQcm90b3R5cGVPZlxyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAob2JqLCBwcm90bykge1xyXG4gICAgICAgICAgICBvYmouX19wcm90b19fID0gcHJvdG87XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRVM2IE9iamVjdC5hc3NpZ25cclxuICAgICAgICBPYmplY3QuYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRVM2IFByb21pc2UgKG1pc3Npbmcgc3VwcG9ydCBpbiBJRTExKVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5Qcm9taXNlICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJlcXVpcmUoJ2VzNi1wcm9taXNlJykucG9seWZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5Qb2x5ZmlsbC5pbnN0YWxsKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb2x5ZmlsbDsiLCIvKlxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgZmlsZSBpcyBkZXJpdmVkIGZyb20gQysrIHByb2plY3QgbGliV2luVEY4IChodHRwczovL2dpdGh1Yi5jb20vbTEzMjUzL2xpYldpblRGOClcclxuICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5mdW5jdGlvbiBjaGVja0NvbnRpbnVhdGlvbih1aW50OGFycmF5LCBzdGFydCwgY2hlY2tMZW5ndGgpIHtcclxuICAgIGxldCBhcnJheSA9IHVpbnQ4YXJyYXk7XHJcbiAgICBpZiAoc3RhcnQgKyBjaGVja0xlbmd0aCA8IGFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgIHdoaWxlIChjaGVja0xlbmd0aC0tKSB7XHJcbiAgICAgICAgICAgIGlmICgoYXJyYXlbKytzdGFydF0gJiAweEMwKSAhPT0gMHg4MClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVjb2RlVVRGOCh1aW50OGFycmF5KSB7XHJcbiAgICBsZXQgb3V0ID0gW107XHJcbiAgICBsZXQgaW5wdXQgPSB1aW50OGFycmF5O1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgbGV0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoO1xyXG5cclxuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKGlucHV0W2ldIDwgMHg4MCkge1xyXG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGlucHV0W2ldKSk7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4QzApIHtcclxuICAgICAgICAgICAgLy8gZmFsbHRocm91Z2hcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhFMCkge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDEpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4MUYpIDw8IDYgfCAoaW5wdXRbaSArIDFdICYgMHgzRik7XHJcbiAgICAgICAgICAgICAgICBpZiAodWNzNCA+PSAweDgwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaSArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4RjApIHtcclxuICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVjczQgPSAoaW5wdXRbaV0gJiAweEYpIDw8IDEyIHwgKGlucHV0W2kgKyAxXSAmIDB4M0YpIDw8IDYgfCBpbnB1dFtpICsgMl0gJiAweDNGO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVjczQgPj0gMHg4MDAgJiYgKHVjczQgJiAweEY4MDApICE9PSAweEQ4MDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTtcclxuICAgICAgICAgICAgICAgICAgICBpICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGOCkge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4NykgPDwgMTggfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgMTJcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHwgKGlucHV0W2kgKyAyXSAmIDB4M0YpIDw8IDYgfCAoaW5wdXRbaSArIDNdICYgMHgzRik7XHJcbiAgICAgICAgICAgICAgICBpZiAodWNzNCA+IDB4MTAwMDAgJiYgdWNzNCA8IDB4MTEwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWNzNCAtPSAweDEwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgPj4+IDEwKSB8IDB4RDgwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgJiAweDNGRikgfCAweERDMDApKTtcclxuICAgICAgICAgICAgICAgICAgICBpICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgweEZGRkQpKTtcclxuICAgICAgICArK2k7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGVjb2RlVVRGODsiXX0="}